{"id": 2609, "title": "Ticket #2609: Compilation issue on GCC 4.6.1", "description": "<blockquote>\nMaster compilation currently dies with this error from gcc 4.6.1:\n\n<p></p><div class=\"verbatim\">\n<pre>[ 84%] Building CXX object src/condor_startd.V6/CMakeFiles/condor_startd.dir/command.cpp.o\n/home/bbockelm/projects/condor/src/condor_startd.V6/command.cpp: In function \u2018int activate_claim(Resource*, Stream*)\u2019:\n/home/bbockelm/projects/condor/src/condor_startd.V6/command.cpp:1755:48: error: taking address of temporary [-fpermissive]\n</pre></div>\n\n\n<p>Patch is below\n\n</p><p></p><div class=\"verbatim\">\n<pre>diff --git a/src/condor_startd.V6/command.cpp b/src/condor_startd.V6/command.cpp\nindex fb56de9..c2df068 100644\n--- a/src/condor_startd.V6/command.cpp\n+++ b/src/condor_startd.V6/command.cpp\n@@ -1752,7 +1752,8 @@ activate_claim( Resource* rip, Stream* stream )\n                // stRec.ip_addr actually is never used.\n                // Just make sure that it does not have 0 value.\n                condor_sockaddr local_addr = get_local_ipaddr();\n-               memcpy( &amp;stRec.ip_addr, &amp;local_addr.to_sin().sin_addr, sizeof(struct in_addr) );\n+               struct in_addr local_in_addr = local_addr.to_sin().sin_addr;\n+               memcpy( &amp;stRec.ip_addr, &amp;local_in_addr, sizeof(struct in_addr) );\n\n                stream-&gt;encode();\n                if (!stream-&gt;code(stRec)) {\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-02 12:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3f34ec56f5f32fffa7f77d9a1edfca6aacea08d1\">[28092]</a></span>: Don't pass the address of a temporary <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2609\" onclick=\"get_ticket_and_populate_wrapper('2609'); return false;\" title=\"Compilation issue on GCC 4.6.1\">#2609</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-May-03 09:16", "status": "resolved", "created": "2011-Nov-02 08:09", "fixed_version": "2011-Nov-02 08:09", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}