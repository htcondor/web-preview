{"id": 1667, "title": "Ticket #1667: Persistent config params hard to debug when setting them fails", "description": "<blockquote>\nIf <code>ENABLE_PERSISTENT_CONFIG</code> is false, one gets this message from =condor_config_val -set 'SCHEDD.DAEMON_SHUTDOWN' '(TOTALJOBADS <span class=\"quote\">==</span> 0)':\n\n<p></p><div class=\"verbatim\">\n<pre>\"SCHEDD.DAEMON_SHUTDOWN = (TOTALJOBADS == 0)\" on schedd\nschedd10828Metronome-2.5.3@nmi-0065.batlab.cs.wisc.edu\n&lt;192.168.0.65:43722&gt; failed.\n</pre></div>\n\n\n<p>However the schedd log says this:\n\n</p><p></p><div class=\"verbatim\">\n<pre>09/20 14:03:55 (fd:13) (pid:10838) PERMISSION GRANTED to unauthenticated user\nfrom host 192.168.0.65 for remote config SCHEDD.DAEMON_SHUTDOWN, access level\nOWNER: reason: OWNER authorization policy allows IP address 192.168.0.65;\nidentifiers used for this remote host: 192.168.0.65,nmi-0065.batlab.cs.wisc.edu\n</pre></div>\n\n\n<p>Why did it fail? Apparently, there are code paths in <code>condor_config.cpp</code> in <code>set_persistent_config()</code> which don't say.\n\n</p><p>I found the code path, and am making it emit a better output.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-20 16:48:25 by psilord:</em> <br/>\n\nAdd version history, then resolve.\n\n<p>Checked into master.\n\n</p><p></p><hr/>\n<em>2010-Sep-23 12:35:38 by psilord:</em> <br/>\n\nAdded manual entry.\n\n<p>Done.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-23 12:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/433896d7d68268c0df43422b60773a6137b705bc\">[25687]</a></span>: Documented <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1667\" onclick=\"get_ticket_and_populate_wrapper('1667'); return false;\" title=\"Persistent config params hard to debug when setting them fails\">#1667</a></span> where the master daemon implied that a condor_config_val -set happened when in fact it did not (and shouldn't have!).  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-20 16:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/22e95c84cbef877f6473601e38fb48259bf29b00\">[19008]</a></span>: In the act of trying to set a persistent config param and ENABLE_PERSISTENT_CONFIG is false, you get very misleading log output. condor_config_val states a failure, but no reason, and the log states the user was authorized to do it, but nothing else. Now when enable_persistent_config is false, you get\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Sep-23 12:35", "status": "resolved", "created": "2010-Sep-20 16:43", "fixed_version": "2010-Sep-20 16:43", "broken_version": "v070000", "priority": "4", "subsystem": "Daemons", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "psilord@cs.wisc.edu tlmiller@cs.wisc.edu", "due_date": "20100920"}