<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-update-submodules/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-update-submodules/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-update-submodules/assets/images/favicons/safari-pinned-tab.svg" color="#d31145">
    <link rel="shortcut icon" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-update-submodules/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script src="/web-preview/preview-update-submodules/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-update-submodules/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-update-submodules/assets/js/bootstrap.js" type="text/javascript"></script>

    

    

        <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-update-submodules/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/cvstrac.10.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/cvstrac.tj.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/diff2html.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-update-submodules/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/HTCondor_red_blk_classic.png" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/release-highlights/">Release Highlights</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/release-plan/">Release Schedule</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/release-highlights/">Release Highlights</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/new.html">News</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/downloads/">Download</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/documentation/">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">HTCondor-CE</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/uw-support/">HTCSS Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#user">Community Mailing List</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-support/#external-support-options">External Support Organizations</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#user">Users</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#world">World</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#developer">Developers</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/past_condor_weeks.html">Workshop Archives</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item" href="/web-preview/preview-update-submodules/featured-users.html" >
        Featured Users
    </a>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="about-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
        <ul class="dropdown-menu" aria-labelledby="about-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCSS
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/logos/">Logos</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-update-submodules/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/HTCondor_red_blk_classic.png"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="about-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/release-highlights/">Release Highlights</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/release-plan/">Release Schedule</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor-CE</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/release-highlights/">Release Highlights</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>General</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/new.html">News</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/security/">Security</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/manual/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/downloads/">Download</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/web-preview/preview-update-submodules/featured-users/2022-07-21-EOL-OSG.html">Retirements and New Beginnings: The Transition to Tokens</a></h3>
                            <div>
                                <span class="text-muted">July 21, 2022</span>
                            </div>
                            <hr/>
                            <a href="/web-preview/preview-update-submodules/new.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-update-submodules/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Documentation</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/documentation/">HTCondor</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">HTCondor-CE</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Support</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/uw-support/">HTCSS Contract Support</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#user">Community Mailing List</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-support/#external-support-options">External Support Organizations</a></td></tr>
                
            </table>
        </div>
    


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Email Lists</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#user">Users</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#world">World</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#developer">Developers</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor Week</th></tr>
                
                    <tr><td><a href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/past_condor_weeks.html">Workshop Archives</a></td></tr>
                
            </table>
        </div>
    

    


                <div class="d-none d-md-block col-lg-4 my-2">
                    <a href="/web-preview/preview-update-submodules/featured-users.html"><b>Featured Users</b></a>
                    


                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-21-Messick.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                LIGO's Search for Gravitational Waves Signals Using HTCondor
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July 21, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-12-Wilcots.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                The Future of Radio Astronomy Using High Throughput Computing
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July 12, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-06-Fulvio.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using high throughput computing to investigate the role of neural oscillations in visual working memory
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-06-Garcia.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using HTC and HPC Applications to Track the Dispersal of Spruce Budworm Moths
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                </div>
                <div class="d-none d-xl-block col-xl-4 my-2">
                    <div class="card h-100">
                        <img src="https://raw.githubusercontent.com/CHTC/Articles/main/images/Spectrometer.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-update-submodules/featured-users/2022-04-25-Natzke.html">Learning and adapting with OSG: Investigating the strong nuclear force</a></h5>
                            <hr/>
                            <a href="/web-preview/preview-update-submodules/featured-users.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-update-submodules/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Featured Users
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="about-desktop-drawer" class="drawer row justify-content-center" hidden>



                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCSS</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/logos/">Logos</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>CHTC</th></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></h5>
                            <hr class="mb-2">
                            <div>
                                HTCondor Software Suite (HTCSS) provides an array of services for automating
                                and managing batch workloads and computing resources.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="bg-light mb-4">
    <hr class="m-0">
    <div class="container-xxl py-2">
        <span class="fs-3">Adding Statistics Values</span>
    </div>
    <hr class="m-0">
</div>
<div class="container-xxl pb-4">
    <div id="content">
 <code>
  condor_utils
 </code>
 has classes designed to make measuring and publishing statistics about the performance of code easy.  The classes are defined in
 <code>
  generic_stats.h
 </code>
 <p>
  This consists of a set of simple templatized classes that you add as member variables to your code, or to a helper class or structure. The most commonly used of these is the
  <code>
   stats_entry_recent
  </code>
  class.  This class keeps track of a total value, and also uses a ring buffer to keep track of recent values.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Adding statistics values to an existing collection
 </h3>
 To add a statistics value where there is already an existing collection of values, do the following:
 <p>
 </p>
 <ul>
  <li>
   Declare a member of type
   <code>
    stats_entry_xxx
   </code>
   and add it to the stats collection class. the most common type is
   <code>
    stats_entry_recent
   </code>
   .  The collection is a member of type
   <em>
    <span class="quote">
     StatisticsPool
    </span>
   </em>
   and is usually
named
   <em>
    Pool
   </em>
  </li>
  <li>
   Set or increment the variable in the code to be measured.
  </li>
 </ul>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Adding a statistics value when there isn't a collection
 </h3>
 At the most basic level, use generic statistics by:
 <p>
 </p>
 <ul>
  <li>
   Add member variables of type
   <code>
    stats_entry_xxx
   </code>
   to your class or as a static or global
  </li>
  <li>
   Set the size of the recent buffer if the type is
   <code>
    stats_entry_recent
   </code>
   (you can do this in the constructor)
  </li>
  <li>
   Set or increment the variable in the code to be measured.
  </li>
  <li>
   Periodically call the
   <code>
    Advance
   </code>
   or
   <code>
    AdvanceBy
   </code>
   method to rotate the recent buffer
  </li>
  <li>
   call the
   <code>
    Publish
   </code>
   method to write the value as a
   <span class="quote">
    ClassAd
   </span>
   attribute.
  </li>
 </ul>
 <p>
  Below is code suitable for creating an object that keeps track of times.
 </p>
 <div class="code">
  <pre class="code">
class MyObject {
    ...
    // declare a statistics counter
    stats_entry_recent&lt;time_t&gt; myObjectRuntime;
    ...
};

// set statistics recent buffer to 4 items in the constructor
void MyObject::MyObject()
    : myObjectRuntime(4)
{
}

// update the counter value in one of my worker methods
void MyObject::MyWorkerMethod() {
    time_t begintime = time(NULL);

    // advance the recent buffer if enough time has passed.
    time_t delta = (begintime - last_rotate_time);
    if (delta &gt; time_quantum) {
       myObjectRuntime.AdvanceBy(delta/time_quantum);
       last_rotate_time = begintime - (delta % time_quantum);
    }

    // ... do some work

    // accumulate statistics data
    myObjectRuntime += time(NULL) - begintime;
}

// publish the counter value(s) in another worker method
void MyObject::MyPublishStatisticsMethod(ClassAd &amp; ad) {

    if (publish_all) {
       myObjectRuntime.Publish(ad, "ObjectRuntime");
    } else {
      // publish the overall value
      myObjectRuntime.Publish(ad, "ObjectRuntime", myObjectRuntime.PubValue);
      // publish the recent value
      myObjectRuntime.Publish(ad, "RecentObjectRuntime", myObjectRuntime.PubRecent);
    }

}
</pre>
 </div>
 <p>
  The
  <code>
   myObjectRuntime
  </code>
  member will accumulate overall runtime and runtime within the recent window.  In this the above example, the recent window consists of 4 intervals, with the interval advancing whenever you call the
  <code>
   Advance
  </code>
  or
  <code>
   AdvanceBy
  </code>
  methods on myObjectRuntime. You would commonly advance based on elapsed time, and there is a helper function in generic_stats.cpp
  <code>
   generic_stats_Tick
  </code>
  , that will advance a collection of counters on that basis.
 </p>
 <p>
  The published
  <span class="quote">
   ClassAd
  </span>
  attribute data types will be the same as the templatized data type.
  <code>
   int
  </code>
  ,
  <code>
   double
  </code>
  are supported in
  <span class="quote">
   ClassAds
  </span>
  . time_t values will be published as
  <code>
   int
  </code>
  .
 </p>
 <p>
  More sophisticated counters can be built by using a class as the template parameter to
  <code>
   stats_entry_recent
  </code>
  . For instance
  <code>
   stats_entry_recent&lt;Probe&gt;
  </code>
  will store and publish count,min,max,average,and standard deviation for a sample value and a recent window of the values.  The
  <code>
   Probe
  </code>
  class does count,min,max etc, and the
  <code>
   stats_entry_recent
  </code>
  class will manage a total and recent buffer of =Probe=s.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Creating a new statistics collection
 </h3>
 <p>
  It is common to have multiple statistics values to measure a subsystem that are intended to be published together. When this is the case is most convenient to gather then up into a container class/struct and then add a
  <span class="quote">
   StatisticsPool
  </span>
  member to the class so that you can use it's methods to Clear, Publish and Advance the collection of counters as a unit.
 </p>
 <p>
  Counters of type stats_entry_recent&lt;&gt; contain a ring buffer, so that values from the past can be discarded. The usual way to do this is to decide how long you want to keep values (the window), and how precisely you want to keep track of the time a value was added (the time quantum).  The number of entries in the ring buffer becomes window/quantum, so there is a trade-off between memory used by a statistics counter and how accurately it keeps track of time.
 </p>
 <p>
  As a general rule a statistics collection is defined by where and when the data will be gathered rather rather than by how and where the data is published.
 </p>
 <p>
  If there is a need to publish the same value in more than one
  <span class="quote">
   ClassAd
  </span>
  with a different name in each add, this can be accomplished by calling the Publish methods of the counters explicitly or adding the counters to the
  <span class="quote">
   StatisticsPool
  </span>
  multiple times with different names.
 </p>
 <p>
 </p>
 <ul>
  <li>
   create a structure or class to hold your probes
   <br/>
   <ul>
    <li>
     use
     <code>
      stats_entry_recent&lt;type&gt;
     </code>
     for probes that should publish recent values (i.e. number of jobs that have finished)
     <br/>
    </li>
    <li>
     use
     <code>
      stats_entry_abs&lt;type&gt;
     </code>
     for probes that are instantaneous values for which you may want to publish a max value (i.e. number of shadow currently alive)
     <br/>
    </li>
    <li>
     use
     <code>
      stats_recent_counter_timer
     </code>
     for probes that accumulate runtime
    </li>
    <li>
     use
     <code>
      stats_entry_probe&lt;type&gt;
     </code>
     for probes that publish min,max,avg,stdev
     <br/>
    </li>
    <li>
     use
     <code>
      stats_entry_recent&lt;Probe&gt;
     </code>
     for probes that publish min,max,avg,stdev and also keep a recent buffer of the same.
     <br/>
    </li>
   </ul>
  </li>
  <li>
   give your stats class methods for
   <code>
    Init
   </code>
   ,
   <code>
    Clear
   </code>
   ,
   <code>
    Tick
   </code>
   , and
   <code>
    Publish
   </code>
   , and have those methods call the corresponding methods on the  member variable of type
   <em>
    <span class="quote">
     StatisticsPool
    </span>
   </em>
   .
  </li>
 </ul>
 <p>
 </p>
 <div class="code">
  <pre class="code">class MyStats {
    time_t                  InitTime;
    time_t                  Lifetime;
    time_t                  LastUpdateTime;
    time_t                  RecentLifetime;
    time_t                  RecentTickTime;

    stats_entry_recent&lt;int&gt; JobsSubmitted;
    stats_entry_recent&lt;time_t&gt; JobsTimeToStart;
    stats_entry_recent&lt;double&gt; JobsRunningTime;
    ... etc

    StatisticsPool  Pool;

    void Init();
    void Clear();
    void Tick();
    void Publish(ClassAd &amp; ad) const;
    void Unpublish(ClassAd &amp; ad) const;

} MyStats;
</pre>
 </div>
 <p>
  Then, in your C++ source file for the
  <code>
   MyStats
  </code>
  class:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">void MyStats::Init()
{
   const int recent_window = 60*20;
   const int window_quantum = 60*4;

   Pool.AddProbe("JobsSubmitted", &amp;JobsSubmitted);
   Pool.AddProbe("JobsTimeToStart", &amp;JobsTimeToStart);
   Pool.AddProbe("JobsRunningTime", &amp;JobsRunningTime);
   Pool.SetRecentMax(recent_window, window_quantum);
}

void MyStats::Clear()
{
   Pool.Clear();
   this-&gt;InitTime = time(NULL);
   this-&gt;StatsLifetime = 0;
   this-&gt;StatsLastUpdateTime = 0;
   this-&gt;RecentStatsTickTime = 0;
   this-&gt;RecentStatsLifetime = 0;
}

void MyStats::Publish(ClassAd &amp; ad, int flags) const
{
   Pool.Publish(ad, flags);
}

void MyStats::Unpublish(ClassAd &amp; ad) const
{
   Pool.Unpublish(ad);
}

void MyStats::Tick()
{
   const int my_window  = 20*60; // seconds
   const int my_quantum = 4*60;  // in seconds

   int cAdvance = generic_stats_Tick(
      my_window,
      my_quantum,
      this-&gt;InitTime,
      this-&gt;LastUpdateTime,
      this-&gt;RecentTickTime,
      this-&gt;Lifetime,
      this-&gt;RecentLifetime);
   if (cAdvance)
      Pool.Advance(cAdvance);
}
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Adding statistics values at runtime
 </h3>
 <p>
  Probes can be added to the
  <span class="quote">
   StatisticsPool
  </span>
  at runtime.  They can also be queried out of the pool, athough this is more expensive and error-prone than merely referencing a member variable.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">class MyStats {
    ...

    StatisticsPool  Pool;

    ...

    void NewProbe(const char * category, const char * ident, int as_type);
    void Sample(const char * ident, int val);
    void Sample(const char * ident, double val);

} MyStats;

// create a new probe with name name
//
void MyStats::NewProbe(const char * category, const char * ident, int as_type)
{
    MyString attr;
    attr.sprintf("MYStat_%s_%s", category, ident);
    cleanStringForUseAsAttr(attr);

    int flags = IF_BASICPUB;
    int cRecent = my_window / my_quantum;
    switch (as_type)
    {
    case STATS_ENTRY_TYPE_INT32 | AS_RECENT:
       {
       stats_entry_recent&lt;int&gt; probe =
       Pool.NewProbe&lt; stats_entry_recent&lt;int&gt; &gt;(ident, attr.Value(), flags);
       probe-&gt;SetRecentMax(cRecent);
       }
       break;

    case STATS_ENTRY_TYPE_DOUBLE | AS_RECENT:
       {
       stats_entry_recent&lt;double&gt; probe =
       Pool.NewProbe&lt; stats_entry_recent&lt;double&gt; &gt;(ident, attr.Value(), flags);
       probe-&gt;SetRecentMax(cRecent);
       }
       break;
    }
}

void MyStats::Sample(const char * ident, int val)
{
    stats_entry_recent&lt;int&gt;* probe =
    Pool.Get&lt; stats_entry_recent&lt;int&gt; &gt;(ident);
    if (probe)
       probe-&gt;Add(val);
}

void MyStats::Sample(const char * name, double val)
{
    stats_entry_recent&lt;double&gt;* probe =
    Pool.Get&lt; stats_entry_recent&lt;double&gt; &gt;(ident);
    if (probe)
       probe-&gt;Add(val);
}

</pre>
 </div>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-5 d-none d-lg-flex">
                <img class="my-auto" height="120" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/CondorAlpha.png" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/security//">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/license.html">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/uw-support/">Internal Contract</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor-support#external-support-options">External Organizations</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row my-4 justify-content-center">
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://ls.wisc.edu/">
                    

<div style="height:75px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-update-submodules/assets/images/UW_Madison_Logo.webp">
        <img class="h-100" src="/web-preview/preview-update-submodules/assets/images/UW_Madison_Logo.png" alt="UW-Madison Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="px-3 d-block m-auto" href="https://www.nsf.org">
                    

<div style="height:100px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-update-submodules/assets/images/NSF_Logo.webp">
        <img class="h-100" src="/web-preview/preview-update-submodules/assets/images/NSF_Logo.jpg" alt="NSF Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://morgridge.org/">
                    <img class="" height="40" src="/web-preview/preview-update-submodules/assets/images/Morgridge_Logo.svg" alt="Morgridge Logo" />
                </a>
            </div>
        </div>
        <hr>
        <div class="row py-3">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
            </div>
        </div>
        <div class="row justify-content-center pb-4">
            <div class="col-lg-8 text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, you can find more information on their <a href="http://www.phoenixsoftware.com">website</a>.
                </span>
            </div>
        </div>
    </div>
</footer>



</body>
</html>
