<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-update-submodules/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-update-submodules/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-update-submodules/assets/images/favicons/safari-pinned-tab.svg" color="#d31145">
    <link rel="shortcut icon" href="/web-preview/preview-update-submodules/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-update-submodules/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script src="/web-preview/preview-update-submodules/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-update-submodules/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-update-submodules/assets/js/bootstrap.js" type="text/javascript"></script>

    

    

        <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-update-submodules/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/cvstrac.10.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/cvstrac.tj.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-update-submodules/assets/css/diff2html.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-update-submodules/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/HTCondor_red_blk_classic.png" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/release-highlights/">Release Highlights</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/release-plan/">Release Schedule</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/release-highlights/">Release Highlights</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/new.html">News</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/downloads/">Download</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor/documentation/">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">HTCondor-CE</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/uw-support/">HTCSS Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#user">Community Mailing List</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/htcondor-support/#external-support-options">External Support Organizations</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#user">Users</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#world">World</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/mail-lists/#developer">Developers</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/past_condor_weeks.html">Workshop Archives</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item" href="/web-preview/preview-update-submodules/featured-users.html" >
        Featured Users
    </a>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="about-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
        <ul class="dropdown-menu" aria-labelledby="about-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCSS
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-update-submodules/logos/">Logos</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-update-submodules/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/HTCondor_red_blk_classic.png"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="about-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/release-highlights/">Release Highlights</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/release-plan/">Release Schedule</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor-CE</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/release-highlights/">Release Highlights</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>General</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/new.html">News</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/security/">Security</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/manual/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/downloads/">Download</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/web-preview/preview-update-submodules/featured-users/2022-09-27-DoIt-Article-Summary.html">Summary of "Solving for the future; Investment, new coalition levels up research computing infrastructure at UWâ€“Madison"</a></h3>
                            <div>
                                <span class="text-muted">September 27, 2022</span>
                            </div>
                            <hr/>
                            <a href="/web-preview/preview-update-submodules/new.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-update-submodules/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Documentation</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor/documentation/">HTCondor</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/documentation/">HTCondor-CE</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Support</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/uw-support/">HTCSS Contract Support</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#user">Community Mailing List</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/htcondor-support/#external-support-options">External Support Organizations</a></td></tr>
                
            </table>
        </div>
    


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Email Lists</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#user">Users</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#world">World</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/#developer">Developers</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor Week</th></tr>
                
                    <tr><td><a href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/past_condor_weeks.html">Workshop Archives</a></td></tr>
                
            </table>
        </div>
    

    


                <div class="d-none d-md-block col-lg-4 my-2">
                    <a href="/web-preview/preview-update-submodules/featured-users.html"><b>Featured Users</b></a>
                    


                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-21-Messick.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                LIGO's Search for Gravitational Waves Signals Using HTCondor
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July 21, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-12-Wilcots.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                The Future of Radio Astronomy Using High Throughput Computing
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July 12, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-06-Fulvio.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using high throughput computing to investigate the role of neural oscillations in visual working memory
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-update-submodules/featured-users/2022-07-06-Garcia.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using HTC and HPC Applications to Track the Dispersal of Spruce Budworm Moths
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                </div>
                <div class="d-none d-xl-block col-xl-4 my-2">
                    <div class="card h-100">
                        <img src="https://raw.githubusercontent.com/CHTC/Articles/main/images/Spectrometer.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-update-submodules/featured-users/2022-04-25-Natzke.html">Learning and adapting with OSG: Investigating the strong nuclear force</a></h5>
                            <hr/>
                            <a href="/web-preview/preview-update-submodules/featured-users.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-update-submodules/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Featured Users
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="about-desktop-drawer" class="drawer row justify-content-center" hidden>



                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCSS</th></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-update-submodules/logos/">Logos</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>CHTC</th></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-update-submodules/description.html">What is HTCSS?</a></h5>
                            <hr class="mb-2">
                            <div>
                                HTCondor Software Suite (HTCSS) provides an array of services for automating
                                and managing batch workloads and computing resources.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="bg-light mb-4">
    <hr class="m-0">
    <div class="container-xxl py-2">
        <span class="fs-3">Rescue Dag</span>
    </div>
    <hr class="m-0">
</div>
<div class="container-xxl pb-4">
    <div id="content">
 Documentation of the rescue DAG/condor_rm and related code in DAGMan.
 <p>
  Note that rescue DAGs have gone through a number of significant changes over the history of DAGMan.  I'm only going to document the most recent version here.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Naming of rescue DAG files
 </h3>
 <p>
  If the original DAG file is
  <em>
   foo.dag
  </em>
  , the rescue DAG files will be named
  <em>
   foo.dag.rescue.001
  </em>
  ,
  <em>
   foo.dag.rescue.002
  </em>
  , etc.  Each time a rescue DAG is written, the rescue DAG number is incremented.  When a rescue DAG is run, the highest-numbered rescue DAG is used (by default).
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Format of rescue DAG
 </h3>
 <p>
  As of version 7.7.2, rescue DAG files are no longer a complete DAG file as they used to be.  Now, the rescue DAG only records the state of the DAG (which nodes are done, and remaining node retries) and must be parsed in conjunction with the original DAG file.  This is done so that a user discovers an error in their DAG file when they have a rescue DAG, they only need to fix the original DAG file, rather than having to fix both the orginal file and the rescue DAG file.  (The old behavior can be obtained by setting DAGMAN_WRITE_PARTIAL_RESCUE to false.)
 </p>
 <p>
  Anyhow, in the default case, the only things (besides comments) in the rescue DAG file are lines marking nodes as done and lines resetting the remaining retries for nodes.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Creation of rescue DAG
 </h3>
 <p>
  Rescue DAGs are created in three cases:
 </p>
 <p>
 </p>
 <ul>
  <li>
   The DAGMan job itself is condor_rm'ed
  </li>
  <li>
   A node or nodes have failed, and the DAG has reached the point where it can make no more forward progress.
  </li>
  <li>
   Immediately after parsing (or attempting to parse) the DAG, if
   <code>
    -DumpRescue
   </code>
   is given on the command line.
  </li>
 </ul>
 <p>
  In the first two cases,
  <code>
   main_shutdown_rescue()
  </code>
  in
  <em>
   dagman_main.cpp
  </em>
  gets called (if DAGMan is condor_rm'ed,
  <code>
   main_shutdown_rescue()
  </code>
  is called by
  <code>
   main_shutdown_remove()
  </code>
  , which is called by daemoncore; otherwise, it's explicitly called at various places in the DAGMan code), and that calls
  <code>
   Dag::Rescue()
  </code>
  .  Note that
  <code>
   main_shutdown_rescue()
  </code>
  uses the
  <code>
   inShutdownRescue
  </code>
  flag to make sure you don't get into a recursion if you have an error while trying to write the rescue DAG.
 </p>
 <p>
  In the third case,
  <code>
   Dag::Rescue()
  </code>
  is called at various places in
  <code>
   main_init()
  </code>
  in
  <em>
   dagman_main.cpp
  </em>
  (man, that function is too big!!).
 </p>
 <p>
  In any case,
  <code>
   Dag::Rescue()
  </code>
  calls
  <code>
   FindLastRescueDagNum()
  </code>
  , which checks all legal rescue DAG names and finds the highest-numbered one, and then
  <code>
   RescueDagName()
  </code>
  , which creates a properly-formatted rescue DAG file name, and then
  <code>
   WriteRescue()
  </code>
  , which actually writes the rescue DAG.
 </p>
 <p>
  I think
  <code>
   WriteRescue()
  </code>
  is pretty straightforward.  The main complication is that there are a bunch of places where we don't write stuff out if
  <code>
   isPartial
  </code>
  is true.
  <code>
   WriteRescue()
  </code>
  iterates through all of the nodes and calls
  <code>
   WriteNodeToRescue()
  </code>
  on each one.  The main reason for breaking
  <code>
   WriteNodeToRescue()
  </code>
  out of
  <code>
   WriteRescue()
  </code>
  was to reduce the excessive indentation, and make the code easier to read.  Note that this
  <code>
   isPartial
  </code>
  flag is passed to
  <code>
   WriteNodeToRescue()
  </code>
  , because most of the info printed by
  <code>
   WriteNodeToRescue()
  </code>
  is
  <em>
   not
  </em>
  printed to a partial rescue DAG (which is the default mode).
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Use/parsing of rescue DAG
 </h3>
 <p>
  <code>
   main_init()
  </code>
  (that huge function again!) calls
  <code>
   FindLastRescueDagNum()
  </code>
  to find out if there are any rescue DAGs for the current DAG.  (Oh, yeah -- the user now has to run a rescue DAG by re-submitting the original DAG, not by submitting the rescue DAG directly as they did a long time ago.)  The user can also specify
  <code>
   -DoRescueFrom &lt;number&gt;
  </code>
  on the command line to specify a rescue DAG to run, if they don't want to run the latest one.  If you specify a rescue DAG number, any later rescue DAGs are renamed by
  <code>
   RenameRescueDagsAfter()
  </code>
  (
  <em>
   foo.dag.rescue.005
  </em>
  -&gt;
  <em>
   foo.dag.rescue.005.old
  </em>
  , etc.).
 </p>
 <p>
  After parsing the original DAG file(s), DAGMan then parses the rescue DAG (which just sets the status of various nodes to DONE as appropriate, and also possibly changes the number of retries left on some nodes).  At that point, we're ready to actually run the DAG.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Additional actions on condor_rm of DAGMan
 </h3>
 <p>
  In
  <code>
   main_shutdown_rescue()
  </code>
  , if there are any node jobs in the queue, we call
  <code>
   Dag::RemoveRunningJobs()
  </code>
  to remove them.  If any PRE or POST scripts are running, we call
  <code>
   RemoveRunningScripts()
  </code>
  to kill them.  (Note that in the case of DAGMan having made all the progress it can in the face of node failures, there won't be any node jobs or scripts running at this point.)
 </p>
 <p>
  <code>
   Dag::RemoveRunningJobs()
  </code>
  removes any HTCondor jobs by using the constraint
  <em>
   "DAGManJobId == &lt;id&gt;"
  </em>
  ; any Stork jobs are removed individually.
 </p>
 <p>
  <code>
   Dag::RemoveRunningScripts()
  </code>
  iterates through all of the nodes, and individually kills any running scripts via daemoncore.
 </p>
 <p>
  In
  <code>
   main_shutdown_rescue()
  </code>
  we also call
  <code>
   Dag::StartFinalNode()
  </code>
  , which starts the DAG final node if there is one and we haven't already started it.
 </p>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-5 d-none d-lg-flex">
                <img class="my-auto" height="120" alt="Condor High Throughput Computing" src="/web-preview/preview-update-submodules/assets/images/CondorAlpha.png" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/security//">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/license.html">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/uw-support/">Internal Contract</a></td></tr>
                            <tr><td><a href="/web-preview/preview-update-submodules/htcondor-support#external-support-options">External Organizations</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row my-4 justify-content-center">
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://ls.wisc.edu/">
                    

<div style="height:75px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-update-submodules/assets/images/UW_Madison_Logo.webp">
        <img class="h-100" src="/web-preview/preview-update-submodules/assets/images/UW_Madison_Logo.png" alt="UW-Madison Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="px-3 d-block m-auto" href="https://www.nsf.org">
                    

<div style="height:100px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-update-submodules/assets/images/NSF_Logo.webp">
        <img class="h-100" src="/web-preview/preview-update-submodules/assets/images/NSF_Logo.jpg" alt="NSF Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://morgridge.org/">
                    <img class="" height="40" src="/web-preview/preview-update-submodules/assets/images/Morgridge_Logo.svg" alt="Morgridge Logo" />
                </a>
            </div>
        </div>
        <hr>
        <div class="row py-3">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
            </div>
        </div>
        <div class="row justify-content-center pb-4">
            <div class="col-lg-8 text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, you can find more information on their <a href="http://www.phoenixsoftware.com">website</a>.
                </span>
            </div>
        </div>
    </div>
</footer>



</body>
</html>
