{"id": 6589, "title": "Ticket #6589: Remove CEDAR's send-a-NULL-as-a-string feature", "description": "<blockquote>\nSome of CEDAR's methods for transferring a string allow the sender to provide a NULL pointer and have the receiver get a NULL instead of an allocated character array. Many users of these methods will crash if a NULL is sent in this manner. I believe the NULL behavior is an attractive nuisance and should be removed. Almost everywhere, it would suffice for the receiver to get a zero-length string if the sender gives a NULL. Indeed, this is what happens already if the receiver uses the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyString\" title=\"My String\">MyString</a></span> or std::string CEDAR methods.\n\n<p>There are a couple places in the code that rely on the special NULL behavior. They are remote system calls in the standard universe and the CONFIG_VAL and DC_CONFIG_VAL CEDAR commands. They could use alternate methods that preserve the current NULL behavior. These methods would be surrounded by comments imploring others to not use them.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-09 13:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3f87e1eacca07e74492b1222004cddc4ffce61d2\">[54477]</a></span>: Fix build warning on Fedora. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-09 11:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6aa15a08df0dff4b5b4a5941fbf4f9f761f2dc48\">[54475]</a></span>: Remove a couple uses of deleted CEDAR string method. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-09 09:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cfde457f1d8517c789f8a7bf3d8c2ef881e1b7e9\">[54468]</a></span>: Remove stub for deleted CEDAR method. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-09 09:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aa432f0f4e335c1fe4b94ab2c22cdbb0ed49df84\">[54467]</a></span>: Minor improvements to some CEDAR string functions. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-02 11:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ca2c36812c4751dcf854f2d1bd2df91dcf07db4\">[54466]</a></span>: Remove needless casts and copies around CEDAR string methods. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span> In most cases, this involves calling put() instead of code().  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-02 11:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fc2beaeaee9da92305f4b982e6e82ca610648b3b\">[54465]</a></span>: Remove CEDAR's send-a-NULL-as-a-string feature. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6589\" onclick=\"get_ticket_and_populate_wrapper('6589'); return false;\" title=\"Remove CEDAR's send-a-NULL-as-a-string feature\">#6589</a></span> Some of the methods in CEDAR to send a string support sending a NULL string pointer, which the receiver will get instead of an allocated buffer. Many receivers of strings from CEDAR are not expecting a possible NULL pointer, and will crash if they\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Mar-29 14:08", "status": "resolved", "created": "2018-Feb-28 15:51", "fixed_version": "2018-Feb-28 15:51", "broken_version": "", "priority": "3", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}