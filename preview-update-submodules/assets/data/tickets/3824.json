{"id": 3824, "title": "Ticket #3824: OOM-Killer cgroups code putting jobs on hold when they exit normally", "description": "<blockquote>\nThe cgroup API generates a notification whenever the OOM occurs <strong>or</strong> the cgroup is removed.  At UNL, they pre-create all the possible cgroups (older RHEL kernels would crash if the cgroups were not pre-created; since fixed) which causes the cgroup to not be deleted by condor.  Hence, we never got the notification when the cgroup was removed and this issue was missed in testing.\n\n<p>Brian reviewed patch below from Joan Piles, and we have a CLA on file from Joan.\n\n</p><p>See <a class=\"external\" href=\"http://thread.gmane.org/gmane.comp.distributed.condor.user/27873/focus=27879\">this thread on htcondor-users</a> for more info.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jul-31 11:56:13 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Patch looks good. Thank you Joan!!!!</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/786/gt3824_fix_from_joan.patch\">gt3824_fix_from_joan.patch</a>\n872 bytes added by tannenba on 2013-Jul-30 19:47:38 UTC.\n<br/>\nPatch from Joan Piles to stop jobs from incorrectly going on hold do to OOM killer support<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-19 11:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ac15c1c2bfa8f65a0ab9890f7ec70568d9e327d\">[37270]</a></span>: minor formatting change from SHA1 170e6054 ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3824\" onclick=\"get_ticket_and_populate_wrapper('3824'); return false;\" title=\"OOM-Killer cgroups code putting jobs on hold when they exit normally\">#3824</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-31 11:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b783d814a20b0e78202e15bb6329814a4038afaa\">[37048]</a></span>: Added version history blurb re OOM support bug. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3824\" onclick=\"get_ticket_and_populate_wrapper('3824'); return false;\" title=\"OOM-Killer cgroups code putting jobs on hold when they exit normally\">#3824</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-31 11:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3b7418c0cb2229bded776012a3efb506efc103da\">[37047]</a></span>: Do not unnecessarily hold jobs due to OOM killer support bug. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3824\" onclick=\"get_ticket_and_populate_wrapper('3824'); return false;\" title=\"OOM-Killer cgroups code putting jobs on hold when they exit normally\">#3824</a></span> Committer: Todd Tannenbaum  (By Joan J. Piles )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Jul-31 11:56", "status": "resolved", "created": "2013-Jul-30 14:44", "fixed_version": "2013-Jul-30 14:44", "broken_version": "v080000", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "tannenba", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "users", "visibility": "public", "notify": "jpiles@unizar.es bbockelm@cse.unl.edu  tstclair@redhat.com", "due_date": ""}