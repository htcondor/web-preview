{"id": 2081, "title": "Ticket #2081: rpm init / boot script bugs related to status and shutdown requests", "description": "<blockquote>\nThe rpm boot init script status request (aka \"/sbin/service condor status\") always reports Condor inactive, and a shutdown request does not report failure if there was a timeout shutting down Condor.\n\n<p>Looks like the problems stems from <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1997\" onclick=\"get_ticket_and_populate_wrapper('1997'); return false;\" title=\"init script should create /var/run/condor\">#1997</a></span> commit <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f83c17b0d2b34ef5f16cd981e11375c851e2c86c\">[21144]</a></span>, which changed the signature for function condor_master_pids. Previously it returned the master pids via an echo to stdout, now instead it uses a global variable to store the results.  Why using a global variable here is preferable is opaque to me -- there is no wisdom re why this was changed in the commit message, or in comments in the script, or in the ticket :(.  The bug appears to be that most of the call sites were changed, but a few were missed.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Apr-21 16:27:18 by tannenba:</em> <br/>\n\nPushed patch into V7_6-branch. Commit pushed references <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2018\" onclick=\"get_ticket_and_populate_wrapper('2018'); return false;\" title=\"RequestMemory should be configurable with a default in condor_config\">#2018</a></span> by mistake; edited in gittrac database to point to the correct ticket (aka this one <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2081\" onclick=\"get_ticket_and_populate_wrapper('2081'); return false;\" title=\"rpm init / boot script bugs related to status and shutdown requests\">#2081</a></span>).\n\n<p>Assigning to Nick for code review - Nick, if it looks good to you, just resolve, else append code review remarks and assign back to me.  thanks!\n\n</p><p>Looks good.  -Nick</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-21 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/638584f75f0a882f947d39e1fce3140a391227fd\">[21542]</a></span>: Fixed bugs in our rpm init script. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2081\" onclick=\"get_ticket_and_populate_wrapper('2081'); return false;\" title=\"rpm init / boot script bugs related to status and shutdown requests\">#2081</a></span> A status request would always report Condor inactive, and a shutdown request would not report failure if there was a timeout shutting down Condor. \u00a0[...]\n (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-May-03 09:19", "status": "resolved", "created": "2011-Apr-21 15:42", "fixed_version": "2011-Apr-21 15:42", "broken_version": "v070600", "priority": "2", "subsystem": "Packaging", "assigned_to": "nleroy", "derived_from": "#1997", "creator": "tannenba", "rust": "a22015", "customer_group": "atlas", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": "20110422"}