{"id": 3515, "title": "Ticket #3515: Ganglia Integration", "description": "<blockquote>\nWithin the OSG context, Ganglia is an extremely common monitoring package in use.  We should make it straightforward for sysadmins to push the basic statistics HTCondor provides (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span>, Schedd) into Ganglia.</blockquote>", "remarks": "<blockquote>\n<em>2013-Feb-25 12:53:31 by bbockelm:</em> <br/>\n\nProof-of-concept is pushed to V7_9-ganglia-branch.  Design document to come.\n\n<p></p><hr/>\n<em>2013-Mar-04 13:59:53 by bbockelm:</em> <br/>\n\nDesign doc attached.\n\n<p>There are a few fundamental questions here:\n</p><ul>\n<li>Should the monitoring be a hook vs plugin?\n</li><li>Should the monitoring be centralized (all within / at the collector) or decentralized?\n</li></ul>\n\n<p>The design doc describes a decentralized, hook-based architecture.  There are definite advantages to the approach in terms of maintenance and completeness of the statistics.\n\n</p><p>However, there are disadvantages of not reusing existing work and requiring changes on every node in the pool.\n\n</p><p></p><hr/>\n<em>2013-Mar-05 08:42:07 by tstclair:</em> <br/>\n\nSo the typical model we've take here has been plugin and offload.  So the plugin's can do anything we desire with the classads and shuffle them off if needed, provided they are non-blocking (which in our cases they are).\n\n<p>So forking based on hook is an option, but hooks are only triggered on \"events\", unless your thinking of some cron approach.\n\n</p><p>Provided your overhead is low, registering a timer in a plugin is a very simple option and works well.\n\n</p><p></p><hr/>\n<em>2013-Mar-05 08:42:51 by tstclair:</em> <br/>\n\nAdding TJ b/c he has expressed interest.\n\n<p></p><hr/>\n<em>2013-Mar-05 08:48:26 by bbockelm:</em> <br/>\n\nIn the proof-of-concept, the ganglia callouts are based on a cron (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span> Timer, actually) and enabled on each daemon.\n\n<p>I'm interested in forking out of paranoia - I'd prefer it if libgmond couldn't crash the daemon itself.  libgmond simply sends out a UDP packet, so it's more-or-less non-blocking.\n\n</p><p></p><hr/>\n<em>2013-Mar-05 09:01:07 by tstclair:</em> <br/>\n\nYou could still keep your separate daemon, with the plugin simply signaling the process that now is a good time to consume.  It also sounds like what you want is the \"would be\" master-cron which doesn't exist yet.\n\n<p></p><hr/>\n<em>2013-Mar-05 10:42:29 by johnkn:</em> <br/>\n\nI don't like the way the genric_stats code \"knows\" about ganglia in the proof of concept.  That level of interconnectedness seems unnecessary to me. Instead\nthe ganglia publish timer should\n\n<p></p><ul>\n<li>create a classad and call StatsPool.Publish() into the Classad\n</li><li>hand that Classad off to a hook/plugin\n</li></ul>\n\n<p>Neither the stats code nor daemon_core should know that the plugin is going\nto push the stats into ganglia (or anywhere else).\n\n</p><p>The only changes to daemon core/stats should be enough configuration to tell it what stats to publish and what plugin/hook to publish it to.\n\n</p><p></p><hr/>\n<em>2013-Apr-02 12:16:42 by danb:</em> <br/>\n\nI'm interested in seeing the ganglia integration get released.\n\n<p>Here is a summary of my understanding of the current state of the prototype:\n\n</p><p></p><ul>\n<li>There is no forking.  The Ganglia library is explicitly linked into condor daemons.  i.e. it's not a hook or a plugin.\n\n<p></p></li><li>The ganglia rpm is a prerequisite of the condor rpm.  I assume we don't want this to be true in the version of the ganglia integration that gets released.\n\n<p></p></li><li>The condor statistics pool knows about the ganglia integration, and the ganglia integration knows about internals of the statistics pool.  Some of the latter interdependency is to filter out stuff that isn't needed in ganglia such as histograms and recent values.\n\n<p></p></li><li>Only attributes that are in statistics pools are published, because we aren't using the same code path that generates the published daemon ad.\n</li></ul>\n\n<p>As Tim pointed out, there is already a plugin interface that gets called when the daemon ad is published.  I can think of two issues with using this for the ganglia integration:\n\n</p><p></p><ol>\n<li>The timing of updates to ganglia would be tied to the timing of updates to the collector.  It might be nice to control them independently.\n\n<p></p></li><li>The set of stats that are published would be tied to the set that is published to the collector.  It might be nice to control them independently.\n</li></ol>\n\n<p><span class=\"section\"></span></p><h2>Proposal </h2>\n\n<p>Redo the ganglia integration as a plugin using the existing plugin mechanism for capturing published ads.  The plugin would be released in a separate rpm.  It may contain some \"hacks\" to filter out undesired attributes (like recent values) based on patterns in the names of attributes.  Similar hacks could be used to set appropriate units such as \"Megabytes\".\n\n</p><p>Once that is working, think about how to make it more flexible.  One idea would be to allow for the configuration of an independent probe with its own timer and verbosity level.  It would use the same code path as <code>condor_status -statistics \"verbosity\" -direct</code> to generate the ad that is passed to the plugin.\n\n</p><p></p><hr/>\n<em>2013-Apr-11 12:14:31 by danb:</em> <br/>\n\nI talked to Todd and Becky about this.  They argued for a collector plugin rather than a plugin in each of the individual daemons.  This would make it easier to deploy in pools where the execute and submit nodes are not all easily modifiable by the pool administrator.\n\n<p></p><hr/>\n<em>2013-Apr-11 12:26:06 by johnkn:</em> <br/>\n\nA plugin in the collector means we have to send statistics values to the collector before we can send them to the plugin.  But we don't send most SCHEDD stats values to the collector because the bloat the SCHEDD ad for everyone.\n\n<p>So unless we go to the trouble to make a separate ad in the collector for SCHEDD statistics, having the ganglia integration in the collector seems like a bad idea.\n\n</p><p>Or, to put it another way. the ganglia plugin needs to be able to able to have independent control over statistics verbosity level, which is something that you can't get if you put the plugin in the collector.\n\n</p><p></p><hr/>\n<em>2013-Apr-11 12:33:23 by danb:</em> <br/>\n\nAgreed, TJ.  Longer term, Todd said he wants to have a separate collector for statistics.\n\n<p></p><hr/>\n<em>2013-Apr-11 13:42:49 by bbockelm:</em> <br/>\n\nHi all,\n\n<p>We've been spinning on determining the correct approach here for some time.  Can we do a group phone call tomorrow to speed things up?\n\n</p><p>In particular, I'm available tomorrow 9-10 and 11-1 tomorrow.  I can send phone details out-of-band to those interested.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Apr-12 11:45:42 by danb:</em> <br/>\n\nHere's a summary of our conclusions in the meeting about ganglia integration:\n\n<p></p><ul>\n<li>Phase 0: Becky's scripts that query the collector and push stats to ganglia.\n\n<p></p></li><li>Phase 1: Create a new daemon (condor_statd?) that does basically what Becky's scripts do.  It could get ads by querying or by having ads forwarded to it by the collector.  It should dlopen the ganglia library so as not to create an explicit dependency on ganglia.\n\n<p></p></li><li>Phase 2: Add Todd's stat aggregation stuff into condor_statd and have it publish to the new Condor View. (No immediate plans for this, but it's where we imagine things going.)\n</li></ul>\n\n<p>Features of Phase 1 that we prefer over a plugin in the schedd or collector:\n\n</p><p></p><ol>\n<li>The ganglia code runs in a separate process.\n\n<p></p></li><li>condor_statd is free to query for additional information if it needs to (e.g. a direct query to the schedd at higher verbosity).\n</li></ol>\n\n<p>If we stick with a pure query interface for getting information, deployment should be easiest, because it does not require changing the configuration of the collector.  All you have to do is turn on condor_statd and tell it to publish to ganglia.  You could even monitor pools that you don't administer.  The down-side is that the query may place more load on the collector than a push model.\n\n</p><p></p><hr/>\n<em>2013-Apr-25 17:32:49 by danb:</em> <br/>\n\nI added an updated design doc.\n\n<p>One question: is it true that until very recent versions of ganglia (e.g. 3.4 or so), there was no simple way to publish an attribute that should have its slope graphed rather than its absolute value?  That is what I gather from <a class=\"external\" href=\"https://github.com/ganglia/monitor-core/issues/32\">https://github.com/ganglia/monitor-core/issues/32</a>\n\n</p><p></p><hr/>\n<em>2013-Apr-26 11:17:02 by danb:</em> <br/>\n\nAfter sleeping on it, I think it is better to have a daemon whose sole purpose is to publish to ganglia, rather than trying to structure it as a generic daemon that might publish to a variety of monitoring systems.  Making it specific simplifies packaging in a \"proper\" packaging setup, such as OSG: one can put all the ganglia code in its own rpm that explicitly depends on ganglia.  We can, of course, still try to make generic bits of the code reusable.\n\n<p>I have updated the design doc to speak of condor_gangliad, rather than condor_statsd.\n\n</p><p></p><hr/>\n<em>2013-May-31 11:24:02 by danb:</em> <br/>\n\nI have finished implementing version 1 plus extensions we were going to postpone for the future: varying verbosity levels, and the ability to define arbitrary metrics of <code>ClassAd</code> data, including calculated values and aggregate functions.  It also supports general pattern-matching of attributes for cases like per-user file transfer stats where the set of attributes is dynamic.\n\n<p>The metric configuration and evaluation code is in reusable base classes that do not depend on ganglia.  For now, these live in src/gangliad, but they can be moved elsewhere when needed.\n\n</p><p>I consider this work done except for the need for testing in real pools and refining based on experience.\n\n</p><p></p><hr/>\n<em>2013-Jun-05 14:35:04 by danb:</em> <br/>\n\nI have done some further testing of condor_gangliad.  What I have observed is not promising for cross-version compatibility of libganglia.  I personally think things would be less fiddly if we called out to the externally installed gmetric command-line utility rather than linking with libganglia.  That said, I should admit that I did not use dlopen to load libganglia, as we had discussed at one point.  I used the traditional route for dealing with condor externals: I dynamically link with a specific version and ship that with condor.  I would prefer to call out to gmetric rather than using dlopen, unless there is a good reason.\n\n<p>What I observed is this:\n\n</p><p></p><ul>\n<li>condor_gangliad using libganglia-3.6.0 silently fails to publish stats to ganglia 3.0.7\n\n<p></p></li><li>gmetric from 3.0.7 silently fails to publish stats to ganglia 3.6.0, implying that condor_gangliad would do the same if it were using libganglia-3.0.7\n\n<p></p></li><li>condor_gangliad built with libganglia-3.6.0 fails to start up when libganglia-3.0.7 is substituted for the library due to a missing symbol\n</li></ul>\n\n<p></p><hr/>\n<em>2013-Jun-05 16:34:45 by danb:</em> <br/>\n\nI did a test in which I published a metric 10,000 times in a tight loop.  This test was in a VM on my laptop, which is not particularly fast.  Results:\n\n<p></p><ul>\n<li>libganglia: 3600 Hz\n</li><li>gmetric: 150 Hz\n</li></ul>\n\n<p>At full verbosity, there are 27 startd metrics.  At low verbosity (the default), there are 8.  A pool of 10000 machines would therefore take 8m-30m to publish serially with gmetric vs. 22s-75s with libganglia.  I do not know what rate gmond can actually sustain.\n\n</p><p>Another compatibility datapoint:\n\n</p><p></p><ul>\n<li>libganglia 3.6.0 successfully publishes to libganglia 3.1.7, which is the version that comes with SL6\n</li></ul>\n\n<p></p><hr/>\n<em>2013-Jun-05 17:17:28 by bbockelm:</em> <br/>\n\nWell... Sounds like we get to do dlopen then?\n\n<p>Does libganglia do ABI versioning?\n\n</p><p></p><hr/>\n<em>2013-Jun-06 11:45:31 by danb:</em> <br/>\n\nI don't spot any symbols in libganglia that look like an interface version, nor any mention of such a thing in the header file.  Is there something else I should be looking for?\n\n<p>Another option would be to run gmetrics concurrently up to some fixed limit.  A concurrency of 1 would probably be good enough for pools of up to 1000 machines, which is not exactly small.\n\n</p><p>It also occurs to me that I should add an option to disable publication of per-machine metrics while retaining aggregate metrics.  Per-machine metrics could get annoying in a glidein pool, due to the ephemeral nature of machines.  Another case where one may want to filter out per-machine metrics is in a very large pool when one doesn't have a ganglia installation that is up to the task of handling so many metrics.  To filter out per-machine metrics, one can currently edit the default metric list, but this is inconvenient to maintain across upgrades.  One can also set <span class=\"quote\">GANGLIA_REQUIREMENTS = MyType != \"Machine\"</span>, but that also disables aggregate machine metrics.  I think I'll just add a configuration option GANGLIA_PER_EXECUTE_NODE_METRICS=True/False.\n\n</p><p></p><hr/>\n<em>2013-Jun-13 08:42:23 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>Can you please also add defaults for:\n\n</p><p></p><div class=\"verbatim\">\n<pre>GANGLIA = $(RELEASE_DIR)/libexec/condor_gangliad\nGANGLIA_ARGS = -f\nGANGLIA_LOG = $(LOG)/GangliaLog\n</pre></div>\n\n\n<p>in the default condor_config?\n\n</p><p>Also, in this log message:\n\n</p><p></p><div class=\"verbatim\">\n<pre>06/13/13 08:22:42 Failed to publish  derivative of metric FileTransferDownloadBytes for hcc-briantest.unl.edu\n</pre></div>\n\n\n<p>there's an extra \" \" in \"publish derivative\".\n\n</p><p>We're running 3.4.0 -- what's needed for derivatives to work?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Jun-13 10:10:47 by danb:</em> <br/>\n\nHi Brian,\n\n<p>The built-in daemon name to be added to DAEMON_LIST is GANGLIAD, not GANGLIA.  Perhaps confusion is being caused by the fact that some configuration attributes use a prefix of GANGLIA_ and some GANGLIAD_.  For example, GANGLIA_CONFIG tells condor where to find the ganglia configuration, whereas GANGLIAD_LOG tells condor where to write logs from condor_gangliad.  Now that I think about it, GANGLIA_CONFIG is probably the only configuration variable that should be using the GANGLIA prefix.  The rest should all be GANGLIAD.\n\n</p><p></p><hr/>\n<em>2013-Jun-13 10:24:56 by danb:</em> <br/>\n\nDerivative support appears to have gone into ganglia in 3.4.0 in this commit: <a class=\"external\" href=\"https://github.com/ganglia/monitor-core/commit/3ea95e03681306b712aa6df5ae14ba7efe5bd538\">https://github.com/ganglia/monitor-core/commit/3ea95e03681306b712aa6df5ae14ba7efe5bd538</a>.  During my development work so far, I assumed failure to publish derivative metrics was caused by lack of support in the version of ganglia I was publishing to (3.1.7).  I will try publishing to something very recent like 3.6 and see if it works.\n\n<p></p><hr/>\n<em>2013-Jun-13 17:30:59 by danb:</em> <br/>\n\nI just realized that the method I am using to get one ad per machine in gangliad is not working correctly for partitionable slots.  This is causing over-counting in the Nebraska instance.\n\n<p></p><hr/>\n<em>2013-Jun-13 18:06:43 by danb:</em> <br/>\n\nI pushed a fix for overcounting partitionable slots.\n\n<p></p><hr/>\n<em>2013-Jun-14 07:16:06 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>Are you sure adding GANGLIAD to the list works?  I still had to add _LOG, _ARGS, and GANGLIAD by hand.\n\n</p><p>Renaming GANGLIA_CONFIG -&gt; GANGLIAD_CONFIG would indeed be useful.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Jun-20 14:16:07 by danb:</em> <br/>\n\nSubmitter metrics were added based on experience at Nebraska.  Carl also wants per-startd job start rates.  I don't see any way to get this currently.  I think we'll need to have the startd publish more information.\n\n<p>In general, the ganglia metrics published for the startd are very limited, because we need more startd-wide information to be published by the startd.  For some things, it would be possible to use aggregate functions to get what we want, but it would be nice to avoid having to look at all slot ads if all we want is startd-wide info.  Currently, we only look at one ad per startd for the default metrics.\n\n</p><p></p><hr/>\n<em>2013-Jun-20 18:49:17 by bbockelm:</em> <br/>\n\nI chatted with gthain about startd statistics - I think we'll just have to wait for him to do some work there.\n\n<p>Did you test the cluster stuff?  I added:\n\n</p><p></p><div class=\"verbatim\">\n<pre>GANGLIAD_DEFAULT_CLUSTER = ifThenElse(MyType =?= \"Machine\", \"red-workers\", \"red-infrastructure\")\n</pre></div>\n\n\n<p>On D_FULLDEBUG, I see it trying to send the metrics to the correct Ganglia cluster.  I don't see the data showing up in the correct Ganglia cluster, however.  We're using Ganglia 3.4.\n\n</p><p>Garhan's going to try to clear out all the old, incorrect data.  We'll see if that fixes things.\n\n</p><p></p><hr/>\n<em>2013-Jun-21 10:59:45 by danb:</em> <br/>\n\nI updated my test environment to Ganglia 3.6.0 in order to test the cluster stuff.  I can't get it to work either.  Condor is sending the same metadata as gmetric does when a cluster is specified.  The cluster parameter to gmetric does not appear to work either.\n\n<p>The only thing I found that influenced the cluster name was to change the cluster name in the copy of gmond.conf used by gmond.\n\n</p><p>I also observed that publishing derivatives still doesn't work with a ganglia 3.6.0 backend, so my initial assumption that failure was caused by lack of support in the backend seems wrong.  I'll try to figure out why it fails.\n\n</p><p></p><hr/>\n<em>2013-Jul-05 17:30:28 by danb:</em> <br/>\n\nIt turns out that derivatives are broken in ganglia.  I have submitted a patch:\n\n<p><a class=\"external\" href=\"https://github.com/ganglia/monitor-core/pull/115\">https://github.com/ganglia/monitor-core/pull/115</a>\n\n</p><p>I have also submitted a question to the ganglia folks about the meaning of the gmetric --cluster argument.  It doesn't seem to do anything.  In gangliad, I just copied what gmetric does, so the cluster setting in gangliad doesn't do anything either.\n\n</p><p></p><hr/>\n<em>2013-Jul-10 17:41:13 by danb:</em> <br/>\n\nI implemented dlopen of libganglia.  However, it doesn't work with libganglia-3.0.7 (SL5 vintage), because that version of libganglia has undefined symbols from libapr and libconfuse.  gmetric from this version of ganglia is statically linked with specific versions of these libraries, so it can successfully use libganglia.  The system versions of these libraries in SL5 do not define all the needed symbols, so simply loading those libraries dynamically does not help.\n\n<p>Conclusion: dlopening libganglia is not a viable option for SL5 vintage ganglia.  I therefore added support for falling back to use of the gmetric command-line tool when libganglia fails to load.\n\n</p><p>Although it seems complicated to support both libganglia and gmetric, this patch also eliminates three externals (ganglia, libapr, and libconfuse), so I don't feel so bad.  Having the option to call out to a program also makes it easy to experiment with other systems: simply create a script that fakes the gmetric interface and do whatever you want with the stats.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/692/condor+monitoring+design+doc.docx\">condor monitoring design doc.docx</a>\n108075 bytes added by bbockelm on 2013-Mar-04 19:52:42 UTC.\n</li><li><a href=\"../files/721/condor%2Bmonitoring%2Bdesign%2Bdoc2.docx\">condor+monitoring+design+doc2.docx</a>\n148108 bytes added by danb on 2013-Apr-26 16:10:19 UTC.\n<br/>\nUpdated design plan, using condor_gangliad.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-11 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a4ca7b82805464de0b71a95a44c39e1506d76248\">[37823]</a></span>: Fixed ganglia metric for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RecentDaemonCoreDutyCycle\" title=\"Recent Daemon Core Duty Cycle\">RecentDaemonCoreDutyCycle</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-25 10:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8de208cc6505b7c9e82e05f7aaf1b0a723c7d69d\">[36992]</a></span>: Minor version history item change (specification of reference). ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-22 10:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5688d5572789e48c777e42b72f096ae82fcdd301\">[36964]</a></span>: minor edit of new condor_gangliad documentation ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-15 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c671cc5fa7f780bd9359273298d1905e88e9ead0\">[36899]</a></span>: Added ganglia metrics to summarize job queues by accounting group. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-12 17:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4d6a85610fb00611c015df58cf86ca5dd1fbafa8\">[36886]</a></span>: Fix Coverity issues 10407 and 10408 in gangliad. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-12 17:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/475eadd60d56c13517c0d463419cfac44915269f\">[36885]</a></span>: Fix crash of gangliad on reconfig. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-11 17:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2bf6900999373e6d9a6cc6109e681ad0f2e749ee\">[36871]</a></span>: Get rid of memory leak condition detected by Coverity (10410-10416). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-10 17:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f89323e64c01eaa816a8e5094872e3643e1b2190\">[36855]</a></span>: Use dlopen to open libganglia rather than linking with a specific version at build time. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span> Some versions of libganglia cannot be used (e.g. 3.0.7, which is SL5 vintage). In this case, fall back to using gmetric.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-20 13:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/24ea73492ee5e2b8857241ff938e355dcc09a529\">[36642]</a></span>: Add submitter metrics from Brian Bockelman. Also shorten some annoyingly long metric titles. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-18 10:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6f26f8b9a256b4cf701a518ddef3cb34fa162dfe\">[36603]</a></span>: Fix gangliad test after recent config variable renaming. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-17 17:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/33f492a781641149d548be8b011113d4903b45e1\">[36600]</a></span>: Added parameters for setting ganglia cluster as well as default expressions for machine and IP. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-17 17:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/552bb957e2208dace0b86ce301cc4bc0b8c8997a\">[36599]</a></span>: Changed GANGLIA_ to GANGLIAD_ in configuration, except for GANGLIA_CONFIG, which makes sense the way it is. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-13 18:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/981bb7187446743d7ab453d078f319ea065a0682\">[36575]</a></span>: Fix for gangliad overcounting partitionable slots. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-06 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a38491574b0b56925ce12e434c8863900c3e4b91\">[36512]</a></span>: Added GANGLIA_PER_EXECUTE_NODE_METRICS=True/False. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-05 10:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/30663964e202551d777b2f19e85f1c6719b7b678\">[35994]</a></span>: Added GANGLIA_REQUIREMENTS and fixed bug that caused duplication of metric definitions after a reconfig. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-03 14:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/499409fcac344118c70be96fdfda9c86e03409db\">[35981]</a></span>: Fix condor_gangliad test to work in batlab test run. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-03 11:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/732aed2c899d6c8dc1e582535250b719794879bd\">[35980]</a></span>: Added a very basic test for condor_gangliad. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-31 15:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0cda3e3e2a2606b788b43e61e4f831c306e94e3f\">[35970]</a></span>: Document dependence of gangliad on STATISTICS_TO_PUBLISH. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-31 12:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1d8a460666d0fca287510a50f376a49e99354d3a\">[35963]</a></span>: Replace dynamic_cast with static_cast in gangliad. Other minor code cleanup. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-31 11:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/15b9980bf167c4c41cd727a55ff37031e7996fcd\">[35962]</a></span>: Fix fd leak in gangliad (CID 10395). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-31 11:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58ceaf25be7d3e26c1cf82e97b45f2dbb0522056\">[35961]</a></span>: Improve documentation of condor_gangliad. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-31 10:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0be8dfe00852cb2ac9a257a480b7a1b45d12824b\">[35960]</a></span>: Fix for Fedora 17 and 18 (auto_ptr is deprecated). Also changed the metric attribute 'daemon' to 'TargetType' and 'aggregate_group' to 'AggregateGroup'. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-30 16:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e9d59aee61abbbcbd4be846e6d4c8629ebd8312f\">[35959]</a></span>: Add support for string and boolean ganglia metrics. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-30 15:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de7269c6e66e7994c89ccc9e45dbc03bdf05bfbe\">[35948]</a></span>: Fix for another problem building ganglia on Fedora 17 and 18. Also improved docs. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-30 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f0fd03185923e232e8dcdacb6e26567752bfa578\">[35947]</a></span>: Fix ganglia build on Fedora 17 and 18. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-30 13:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b950b3eb249fb537121d1e60611efacc715a9fb7\">[35946]</a></span>: Fix for 32-bit ganglia compilation. Also made gangliad support arbitrary ad types. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-29 18:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/22e87da20440bab9a93bb8c0ac215633d4f1a7c1\">[35943]</a></span>: Add support for publishing condor stats to ganglia <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-29 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c4aed3ce2c5d9b7826feddaf3bbaf470c1520cc\">[35942]</a></span>: Ganglia interaction code <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span> Committer: Dan Bradley  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Feb-25 11:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/44a184ccf45c8139609a30a6f680de7fdf4498f5\">[35004]</a></span>: Initial Ganglia integration with libgmond. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3515\" onclick=\"get_ticket_and_populate_wrapper('3515'); return false;\" title=\"Ganglia Integration\">#3515</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jul-10 17:41", "status": "resolved", "created": "2013-Feb-25 11:18", "fixed_version": "2013-Feb-25 11:18", "broken_version": "v070900", "priority": "3", "subsystem": "Daemons", "assigned_to": "danb", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "bbockelm@cse.unl.edu, pmackinn@redhat.com, tstclair@redhat.com, johnkn@cs.wisc.edu, dan@hep.wisc.edu, bgietzel@cs.wisc.edu", "due_date": ""}