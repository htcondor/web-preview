{"id": 7846, "title": "Ticket #7846: Allow singularity to ignore invalid bind mounts", "description": "<blockquote>\nWhen the OSG glidein sets up singularity, it unconditionally tries to bind mount many directories which may not exist in the user-provided image.  This fails on singularity without underlay filesystem, so today the osg user job wrapper checks to see if each of these directories exist in the image before starting the container.  This assumes the image is an exploded file system format.\n\n<p>To allow OSG to run without the USER_JOB_WRAPPER, the condor starter will need to emulate this feature.   Not all sites will want this, so we will make a knob to control this.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-28 11:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0fb545716b81cd37424a88b109595ec603bb87bd\">[61347]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7846\" onclick=\"get_ticket_and_populate_wrapper('7846'); return false;\" title=\"Allow singularity to ignore invalid bind mounts\">#7846</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-28 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eac6af31f253c4d4fb745480467ecf5390401029\">[61345]</a></span>: Add admin docs for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7807\" onclick=\"get_ticket_and_populate_wrapper('7807'); return false;\" title=\"Singularity should allow optional bind mounts\">#7807</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7846\" onclick=\"get_ticket_and_populate_wrapper('7846'); return false;\" title=\"Allow singularity to ignore invalid bind mounts\">#7846</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-09 12:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/deaa17c9b96552718d315d02da91fc0f7ee974be\">[61247]</a></span>: Allow singularity to skip invalid requested bind mounts <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7846\" onclick=\"get_ticket_and_populate_wrapper('7846'); return false;\" title=\"Allow singularity to ignore invalid bind mounts\">#7846</a></span> OSG needs this for glideins where sites without underlay available for singularity don't know if they can bind mount. This duplicates the USER_JOB_WRAPPER singularity starter, and helps to to remove USER_JOB_WRAPPERs in OSG  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Sep-28 11:40", "status": "resolved", "created": "2020-Sep-08 13:18", "fixed_version": "2020-Sep-08 13:18", "broken_version": "v080900", "priority": "1", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}