{"id": 3243, "title": "Ticket #3243: Support running on older versions of Mac OS X", "description": "<blockquote>\nRunning a program on an older series of Mac OS X than it was built on may not work unless explicitly requested at build time.\n\n<p>I had to make two changes so that code built on Mountain Lion (10.8.x) would work on Lion (10.7\u0010.x):\n</p><ul>\n<li>Set environment variable MACOSX_DEPLOYMENT_TARGET to the oldest series we want to support.\n</li><li>In the Globus libraries, don't access <code>environ</code> directly, as that doesn't always work in a shared library. Use _NSGetEnviron() instead.\n</li></ul>\n\n<p>This issue was report to the Globus Team: <a class=\"external\" href=\"http://jira.globus.org/browse/GT-288\">http://jira.globus.org/browse/GT-288</a></p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-02 16:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/13c8749e5113028344a839c07ee8c3e927870879\">[33974]</a></span>: Build libltdl on Mac so that we can run on all recent versions. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3243\" onclick=\"get_ticket_and_populate_wrapper('3243'); return false;\" title=\"Support running on older versions of Mac OS X\">#3243</a></span> Globus depends on libltdl, which is available on some versions of Mac OS X. Condor binaries built on Mac OS X 10.7 using the OS's libltdl don't run on 10.6 (different version of libltdl) or 10.8 (no libltdl). So always build our own\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-10 16:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4af30508dc8b57a72b7a5e8ce846176a1aeb196d\">[33648]</a></span>: Proper fix for running on older versions of Mac OS X. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3243\" onclick=\"get_ticket_and_populate_wrapper('3243'); return false;\" title=\"Support running on older versions of Mac OS X\">#3243</a></span> It appears setting an environment variable in a cmake file doesn't cause it to be set when performing a build. So we have to set it in the environment before invoking cmake or make.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-02 11:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/269dcfe8a5b9d0b2e893c57870f2663cbf4c3b71\">[33554]</a></span>: Fix access to environ in the Globus libraries on the Mac. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3243\" onclick=\"get_ticket_and_populate_wrapper('3243'); return false;\" title=\"Support running on older versions of Mac OS X\">#3243</a></span> On Mac OS X, shared libraries may not have direct access to the globus variable 'environ'. They can use _NSGetEnviron() to access it indirectly. The globus_common library does access environ. This breaks when a binary built on Mountain Lion\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-02 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/20149f9af00ea7df4f130396e2e49e74cc94bc56\">[33553]</a></span>: Explicitly support Mac OS X 10.6 (Snow Leopard) and later. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3243\" onclick=\"get_ticket_and_populate_wrapper('3243'); return false;\" title=\"Support running on older versions of Mac OS X\">#3243</a></span> On the Mac, MACOSX_DEPLOYMENT_TARGET to say that the binaries should be able to run on 10.6.x (Snow Leopard) and beyond. Otherwise, binaries built on 10.8.x (Mountain Lion) won't run on older series.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Oct-02 17:39", "status": "resolved", "created": "2012-Oct-02 11:30", "fixed_version": "2012-Oct-02 11:30", "broken_version": "v070900", "priority": "4", "subsystem": "Packaging", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}