{"id": 4862, "title": "Ticket #4862: de-cygwinize windows tests", "description": "<blockquote>\nWe want cygwin to not be a requirement for windows testing. This has a doing a sweep though test run on windows to make them run without cygwin and do other updates as appropriate.</blockquote>", "remarks": "<blockquote>\nAt this point we believe the glue and all the tests are free from requiring cygwin</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-10 15:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7a8896196e2caa246219c1af75b632d6b8fd4096\">[45279]</a></span>: In the verification of a folder Running Tests we used the <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> non-cygwin method and a straight call to mkdir -p which in native perl is not good on windows.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 12:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f7397acec97e83907b02624bd52c53b6d1a7f2f\">[45232]</a></span>: No longer a cygwin requirement.Test job_dagman_rm was listed <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> but we do not run this test and I failed to see the need.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-24 12:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a8f643079cabc3f40d9b17f627b3dc6d83cf508b\">[45147]</a></span>: The last of the cygwin tests converted from the socket perl <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> code to a windows append program.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-23 08:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/020cf7f9ee576c4ca1c894618e6f88d21a616bf9\">[45121]</a></span>: Old general client and server do nor function without cygwin <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> so instead we have an append tool. No server needed.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-23 11:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/24bdbed0261c4dcbf7350a9a0185ba722b501d6c\">[43670]</a></span>: I thought I could make a module dependent on it being windows. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-23 10:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fcec89e89c45bf6b2674f5a96defd18076bd7164\">[43661]</a></span>: Add our new personal condor start/stop test, cywin removal for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> another test taking us to 3 remaining.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-17 09:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c5a46722a738be040224784453a7d40cea99c3b7\">[43604]</a></span>: Test nneded and EndTest() to not timeout on windows <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-17 08:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d9214683e9c976b5c8edaec9cc54692fbcfef2e4\">[43601]</a></span>: More cygwin removal taking us to 4 tests left. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> But when I tripped on a windows core file, the core error code was trying to use \"head\" which I have replaced with the function <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyHead\" title=\"My Head\">MyHead</a></span> in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorUtils\" title=\"Condor Utils\">CondorUtils</a></span>, A perl only head. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=4520\" onclick=\"get_ticket_and_populate_wrapper('4520'); return false;\" title=\"8.2/8.3 Testing Effort\">#4520</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-13 08:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eefcca855d0a767a389134ab3246c689fb34c763\">[43571]</a></span>: This is more working though cyqwin removal <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4935\" onclick=\"get_ticket_and_populate_wrapper('4935'); return false;\" title=\"Our core file and error string detection was not working well\">#4935</a></span> plus reworking the timings surrounding our core and ERROR detectiong code in the tests.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-04 13:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e4dfdb0db1a64be74bbbdf3924eef83e34f95d78\">[43508]</a></span>: test flattening and cygwin removal as a requirement <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> This is also where we work around scheduler universe tests which only sleep by clalling a windows binary on windows. I am checking in a very small binary sleep.exe. We conditionally have two different <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SimpleJobs\" title=\"Simple Jobs\">SimpleJobs</a></span> with a slight variance.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-03 12:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/31d5fbaa0dcdb31b8c04b5d6c47326421e62c829\">[43501]</a></span>: Cygwin removal and flattening <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-27 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b8485c3e8cec99ba9a61417b02a1ed3cd2f21614\">[43474]</a></span>: Flattening tests while removing need for cygwin <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-25 09:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/103d7080bb53a4c71f5db90e21b513517171563f\">[43458]</a></span>: Test flattening, better core handling for windows and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> cygwin removal.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-24 10:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7249bf581b1cc15e4c80c57a4cb3b24eee17eb54\">[43449]</a></span>: final fix for de-cygwinizing transfer test program <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-24 08:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/69017cd47897b4873e818be3318a02a86353f723\">[43447]</a></span>: Test flattening and cygwin removal <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-18 18:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/487e240b28708a75fdc863c4a7f65a74462de9f1\">[43407]</a></span>: File and others removed by flatttening to single file <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> for test.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-18 18:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6241c651ee5dcbc64624f13cdba8b80ad54de8e1\">[43406]</a></span>: Flattening and cygwin dependancy removal <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-18 10:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b6351e5ced59fdec132ba20be205ba102832e287\">[43390]</a></span>: Rest of crontab test changes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-18 09:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4288685e244bc1d19e0f11bf80cb21c23f2b4cf0\">[43389]</a></span>: Roll both local and vanilla crontab tests into flattened <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> file using newer methods and remove need for cygwin on windows. This allowed deleting a number of now surplus files.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-16 16:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/73cc9dcc3e56728a521a5c470042b29956739830\">[43372]</a></span>: These files were essentially absorbed by new run files <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-16 15:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/23c18a0de7472d2ccf9c4e7fa61fde00c633bea9\">[43371]</a></span>: Updated the time-deferral tests to new methods and into <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> newer one file format and combined the vanilla and local universe tests.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-16 09:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/30c30820300d10af30e4d60bfafef5d7328967b5\">[43361]</a></span>: stable merge broke sinful string handling <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-13 10:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/87768d3057acd5210494f86e2514ee0f20211f49\">[43353]</a></span>: New tool to get suitable string createdfor windows or linux <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> and tweeks to verify these files do not need cygwin. They are taken out of the requirement file for needing cygwin.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-03 12:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9f2f28a0e64de9a8a85fd40bc5aa76e028c57ce1\">[43220]</a></span>: Main effort here was updating as it made sense and removing the <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4862\" onclick=\"get_ticket_and_populate_wrapper('4862'); return false;\" title=\"de-cygwinize windows tests\">#4862</a></span> need for cygwin on windows. startonhold files were removed because <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SimpleJob\" title=\"Simple Job\">SimpleJob</a></span> can do this now. cmd_q_multi was a dup to another and we ere not running it.  (By Bill Taylor )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Jun-24 14:05", "status": "resolved", "created": "2015-Feb-03 10:41", "fixed_version": "2015-Feb-03 10:41", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "bt", "derived_from": "#4520", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}