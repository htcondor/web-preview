{"id": 6168, "title": "Ticket #6168: Improvements to SELinux configuration", "description": "<blockquote>\nUse Mat Selmeci's comments to improve the SELinux configuration:\n\n<p>I just noticed that for 8.4.11, we set all the daemons to permissive in the post-install script (via semanage permissive -a), but we don't unset it on uninstall (via, e.g. semanage permissive -d). That's kinda naughty... it means that the daemons will still be in permissive mode even after we've fixed the selinux rules in a later version.\n\n</p><p>It is possible to stick \"permissive condor_X_t\" lines in the htcondor.te file, which should have the same effect as semanage permissive, but would get removed when the module is unloaded. Perhaps that's what we should be doing?\n\n</p><p>Also, if we do keep using \"semanage permissive -a\", then we should stick -N (--noreload) to all but the last invocation, which would speed installation up a bit.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Jun-16 14:40:31 by tim:</em> <br/>\n\nUgh. Something change to our rules do not compile. I will put in the work-around for now.\n\n<p></p><hr/>\n<em>2017-Sep-11 14:42:54 by matyas:</em> <br/>\n\nI do not see any problems with the changes to the .te file.  It would be better to create the .pp file at compile time, but we've agreed that that can be saved for a later ticket.\n\n<p>Code review passed.\n\n</p><p></p><hr/>\n<em>2017-Sep-18 15:35:22 by tim:</em> <br/>\n\nDocs Added</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6304\" onclick=\"get_ticket_and_populate_wrapper('6304'); return false;\" title=\"Quick fix to slow install due to SELinux rules\">#6304</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nQuick fix to slow install due to SELinux rules</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Sep-11 22:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/764e984d05c28f7bfd2b94f626ee3aa2715e569a\">[52308]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6168\" onclick=\"get_ticket_and_populate_wrapper('6168'); return false;\" title=\"Improvements to SELinux configuration\">#6168</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Aug-07 16:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f9253ab104c34c44477b9bb5b3b70174e7f0bae8\">[52025]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6168\" onclick=\"get_ticket_and_populate_wrapper('6168'); return false;\" title=\"Improvements to SELinux configuration\">#6168</a></span>) Additional rules for Red Hat 7.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jun-16 16:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d4e043ed08f61ec19c81e88b9ad4783a9a38d3f2\">[51723]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6168\" onclick=\"get_ticket_and_populate_wrapper('6168'); return false;\" title=\"Improvements to SELinux configuration\">#6168</a></span>) Don't repeatly reload SELinux policy during installation  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Sep-18 15:35", "status": "resolved", "created": "2017-Mar-03 09:09", "fixed_version": "2017-Mar-03 09:09", "broken_version": "v080410", "priority": "2", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}