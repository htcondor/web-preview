{"id": 7803, "title": "Ticket #7803: htcondor.Submit segfaults if a submit descriptor value is None", "description": "<blockquote>\nIf <code>htcondor.Submit</code> receives a Python <code>None</code> as a submit descriptor value, it immediately segfaults:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ python\nPython 3.8.3 (default, Jul  2 2020, 16:21:59)\n[GCC 7.3.0] :: Anaconda, Inc. on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import htcondor\n&gt;&gt;&gt; htcondor.Submit({\"executable\": None})\nSegmentation fault (core dumped)\n</pre></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ python\nPython 3.8.3 (default, Jul  2 2020, 16:21:59)\n[GCC 7.3.0] :: Anaconda, Inc. on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import htcondor\n&gt;&gt;&gt; htcondor.Submit({\"My.Foo\": None})\nSegmentation fault (core dumped)\n</pre></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ python\nPython 3.8.3 (default, Jul  2 2020, 16:21:59)\n[GCC 7.3.0] :: Anaconda, Inc. on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import htcondor\n&gt;&gt;&gt; sub = htcondor.Submit()\n&gt;&gt;&gt; sub[\"executable\"] = None\nSegmentation fault (core dumped)\n</pre></div>\n\n\n<p>One-line reproduction for convenience:\n</p><div class=\"code\">\n<pre class=\"code\">$ python -c \"import htcondor; htcondor.Submit({'executable': None})\"\nSegmentation fault (core dumped)\n</pre></div>\n\n\n<p>On 8.8.10 or before 8.9.3 the same code just gives a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TypeError\" title=\"Type Error\">TypeError</a></span>\n</p><div class=\"code\">\n<pre class=\"code\">$ python -c \"import htcondor; htcondor.Submit({'executable': None})\"\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nTypeError: No registered converter was able to produce a C++ rvalue of type std::string from this Python object of type NoneType\n</pre></div>\n\nso I think this must be related to <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7065\" onclick=\"get_ticket_and_populate_wrapper('7065'); return false;\" title=\"Allow Submit object to be assigned non-strings\">#7065</a></span>, or perhaps one of the other tickets in <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=7063\" onclick=\"get_ticket_and_populate_wrapper('7063'); return false;\" title='\"Quality of life\" fixups for the submit object'>#7063</a></span>\n\n<p>I think the expected behavior would be that setting a descriptor to <code>None</code> is the same as doing\n</p><div class=\"code\">\n<pre class=\"code\">My.Foo =\n</pre></div>\n\nin a submit file.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2020-Nov-09 12:09", "status": "new", "created": "2020-Aug-18 11:28", "fixed_version": "2020-Aug-18 11:28", "broken_version": "v080903", "priority": "2", "subsystem": "PythonBinding", "assigned_to": "bbockelm", "derived_from": "#7065", "creator": "karpel", "rust": "", "customer_group": "other", "visibility": "public", "notify": "karpel@wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}