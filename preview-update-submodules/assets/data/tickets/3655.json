{"id": 3655, "title": "Ticket #3655: restarting procd on failure doesn't retry correctly", "description": "<blockquote>\nThe latest changes to the code for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3618\" onclick=\"get_ticket_and_populate_wrapper('3618'); return false;\" title=\"Procd failures can lead to fork-bomb of the system\">#3618</a></span> prevent restarting the procd in an infinite loop when the daemon can't establish a connection to the restarted procd.  However, if procd startup fails early (before it closes the stderr pipe back to the parent), we will EXCEPT and not actually retry as many times as intended.  And perhaps EXCEPT is not the best course of action in general for this case.</blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-29 10:32:49 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong>: changes look good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/806/procd_restart.patch\">procd_restart.patch</a>\n1121 bytes added by jfrey on 2013-Oct-16 16:43:56 UTC.\n<br/>\nPatch to try restarting the procd multiple times on a failure.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-08 15:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c7d9b79934cfecbcc0050c470439a845c7a7d3cc\">[49148]</a></span>: Docs for bug fix in restarting the procd. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3655\" onclick=\"get_ticket_and_populate_wrapper('3655'); return false;\" title=\"restarting procd on failure doesn't retry correctly\">#3655</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-24 15:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cbd77274dccc1357a69610a4019654be798a302e\">[49073]</a></span>: Retry procd restart even if it fails in startup. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3655\" onclick=\"get_ticket_and_populate_wrapper('3655'); return false;\" title=\"restarting procd on failure doesn't retry correctly\">#3655</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Sep-29 10:34", "status": "resolved", "created": "2013-May-22 15:38", "fixed_version": "2013-May-22 15:38", "broken_version": "v080000", "priority": "4", "subsystem": "Daemons", "assigned_to": "jfrey", "derived_from": "#3618", "creator": "zmiller", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "zmiller@cs.wisc.edu,tstclair@redhat.com", "due_date": ""}