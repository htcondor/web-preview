{"id": 1908, "title": "Ticket #1908: Reintroduce TRANSFERRING_OUTPUT job status", "description": "<blockquote>\nWhen the TRANSFERRING_OUTPUT job status was first introduced (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1641\" onclick=\"get_ticket_and_populate_wrapper('1641'); return false;\" title=\"Add new job status TRANSFERRING_OUTPUT\">#1641</a></span>), it had a bug where running jobs that were held would be removed from the queue (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1900\" onclick=\"get_ticket_and_populate_wrapper('1900'); return false;\" title=\"Running jobs leave queue when held\">#1900</a></span>). The short-term solution was to stop using TRANSFERRING_OUTPUT. We need to consider re-introducing use of this job status without the bug. This can be part of the overlapped output file transfer feature the status was added for.\n\n<p>One option is for the schedd to change the job's status to TRANSFERRING_OUTPUT when the shadow exits. This would be the easiest to implement safely, but would mean the status is only used when output file transfer is overlapped with execution of a subsequent job.\n\n</p><p>Alternatively, the shadow can do the status change once the job has finished executing. This would require a change in the communication between shadow and starter. Currently, the starter tells the shadow that the job is no longer running, but not why it's no longer running. Also, the shadow would need to check the job status in the schedd's copy of the ad before changing it, in case the status changes to HELD or REMOVED just before the shadow tries to change it to TRANSFERRING_OUTPUT.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-24 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c977acd616235f157226db0604a65c37086dfe2\">[27962]</a></span>: JIC merge was not done correctly (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1908\" onclick=\"get_ticket_and_populate_wrapper('1908'); return false;\" title=\"Reintroduce TRANSFERRING_OUTPUT job status\">#1908</a></span>)  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-10 08:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1bbfd19083ff15b90736fc83c509a95d9da12ff0\">[27953]</a></span>: Bringing back TRANSFERRING_OUTPUT job state, now with careful checking whether the job actually finished <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1908\" onclick=\"get_ticket_and_populate_wrapper('1908'); return false;\" title=\"Reintroduce TRANSFERRING_OUTPUT job status\">#1908</a></span>  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-16 15:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/81435bf20c29881254f5cddfb687aeeb2b10a3db\">[21093]</a></span>: Bringing back TRANSFERRING_OUTPUT job state, now with careful checking whether the job actually finished <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1908\" onclick=\"get_ticket_and_populate_wrapper('1908'); return false;\" title=\"Reintroduce TRANSFERRING_OUTPUT job status\">#1908</a></span>  (By Cathrin Weiss )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Mar-16 15:17", "status": "resolved", "created": "2011-Feb-09 00:12", "fixed_version": "2011-Feb-09 00:12", "broken_version": "v070506", "priority": "2", "subsystem": "Daemons", "assigned_to": "cweiss", "derived_from": "#1900", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu, jfrey@cs.wisc.edu", "due_date": ""}