{"id": 4807, "title": "Ticket #4807: Startd slots stuck in Preemtping/Killing state forever", "description": "<blockquote>\nIf the a schedd older than v8.3.2 runs a job against a v8.3.2 startd, and that schedd disappears, upon expiration of the job_lease_time the slot will enter Preempting/Killing forever instead of switching back to Unclaimed like it should.  Note this bug first appeared in v8.3.2, and also this bug is not triggered if the schedd involved is also running v8.3.2.\n\n<p>This bug was introduced in ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4491\" onclick=\"get_ticket_and_populate_wrapper('4491'); return false;\" title=\"Scalable claim keepalive protocol\">#4491</a></span>.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-06 10:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/49b733d2de1d21bcb3fc3282c20a30ce467e5812\">[42115]</a></span>: edit 8.3.3 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4807\" onclick=\"get_ticket_and_populate_wrapper('4807'); return false;\" title=\"Startd slots stuck in Preemtping/Killing state forever\">#4807</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-05 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6e6e8e29ed16390af58c42646a17cd8efc9c3d61\">[42113]</a></span>: Documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4807\" onclick=\"get_ticket_and_populate_wrapper('4807'); return false;\" title=\"Startd slots stuck in Preemtping/Killing state forever\">#4807</a></span>.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-05 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5bc3ef73ad77ea12afc4fa14289411703631a455\">[42112]</a></span>: Fix bug where slots get stuck in Preempting/Killing state. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4807\" onclick=\"get_ticket_and_populate_wrapper('4807'); return false;\" title=\"Startd slots stuck in Preemtping/Killing state forever\">#4807</a></span> This bug is triggered whan a v8.3.2 startd is claimed by a schedd with STARTER_HANDLES_ALIVES = False (which is the case for any schedd older than version 8.3.2), and then the startd fails to renew to slot lease.  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jan-05 16:36", "status": "resolved", "created": "2015-Jan-05 13:30", "fixed_version": "2015-Jan-05 13:30", "broken_version": "v080302", "priority": "1", "subsystem": "DaemonsExecNode", "assigned_to": "tannenba", "derived_from": "#4491", "creator": "tannenba", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}