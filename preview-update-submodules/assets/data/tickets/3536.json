{"id": 3536, "title": "Ticket #3536: Create cedar session between gridmanager and ft-gahp", "description": "<blockquote>\nIn order for file transfers between the gridmanager and ft-gahp to work, the ft-gahp must be authenticated and authorized at WRITE level by the gridmanager when it connects to perform the transfers. This requires the proper security configuration in the config files of both daemons. In BOSCO, this is done by using a pool password, and distributing the password file to all remote cluster submit nodes.\n\n<p>This setup has some drawbacks, particularly if the ft-gahp is to be used outside of the default BOSCO configuration:\n</p><ul>\n<li>Configuring the proper security settings and distributing the credentials (whether a pool password or some other credential) adds complications to a blahp+ft-gahp installation on each cluster submit node.\n</li><li>The credential on the cluster submit nodes is vulnerable to compromise. An attacker could use it to attack the home HTCondor installation.\n</li></ul>\n\n<p>These problems are unnecessary, as we already have a trusted channel between the gridmanager and ft-gahp: the ssh connection that securely communicates the gahp's stdio.\n\n</p><p>It would be difficult and inefficient to use the gahp's stdio streams to perform the actual transfers. But we could use them to establish a CEDAR security session that can be used when the gahp makes its additional connections to the gridmanager. We would define a new gahp command to do this. The gridmanager and gahp would then insert this security session into their CEDAR layers.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Mar-11 22:06:03 by dweitzel:</em> <br/>\n\nI know there was concerns about how this would affect the Campus Factory.  It can just ship the password file, or some derivative, with each job.  Then limit down the access of the password authentication to only allow_advertise_startd.\n\n<p></p><hr/>\n<em>2013-Mar-15 15:31:11 by bbockelm:</em> <br/>\n\nOne more note - Derek observed that this - or something similar - will be needed in order to make an RPM packaging of BOSCO functional.\n\n<p></p><hr/>\n<em>2013-May-14 13:28:32 by bbockelm:</em> <br/>\n\nHi,\n\n<p>I'd like to bump this ticket from the OSG-Software POV.  We can't make BOSCO usable from an RPM install without it.\n\n</p><p>Brian</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-21 09:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c2235f840906c391d188d18a35c7ff946033b02\">[37312]</a></span>: edit related to new knob GAHP_DEBUG_HIDE_SENSITIVE_DATA ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3536\" onclick=\"get_ticket_and_populate_wrapper('3536'); return false;\" title=\"Create cedar session between gridmanager and ft-gahp\">#3536</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-20 11:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e0f4af3b99bdfc1738522fec0d4e5f9293d4cf45\">[37294]</a></span>: Docs for gridmanager/ft-gahp security session. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3536\" onclick=\"get_ticket_and_populate_wrapper('3536'); return false;\" title=\"Create cedar session between gridmanager and ft-gahp\">#3536</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 16:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9d5f04ae5ed1f7a1e1619fd1c7b4b64b74dce59c\">[37261]</a></span>: Create a CEDAR session between the gridmanager and the ft-gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3536\" onclick=\"get_ticket_and_populate_wrapper('3536'); return false;\" title=\"Create cedar session between gridmanager and ft-gahp\">#3536</a></span> Create new command CREATE_CONDOR_SECURITY_SESSION for the ft-gahp. The gridmanager creates a security session and uses this gahp command to have the ft-gahp create the same session. Then, all file transfers use this session when setting\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Aug-28 21:25", "status": "resolved", "created": "2013-Mar-11 16:36", "fixed_version": "2013-Mar-11 16:36", "broken_version": "v070901", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "jfrey@cs.wisc.edu,bbockelm@cse.unl.edu,sfiligoi@fnal.gov,dweitzel@cse.unl.edu", "due_date": ""}