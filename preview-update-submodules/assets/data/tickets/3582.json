{"id": 3582, "title": "Ticket #3582: Reconnect Test after Schedd restarts", "description": "<blockquote>\n<strong class=\"three\">Reconnect Test with Schedd</strong>\n\n<p><strong>job_schedd_restart-check_reconnect.run</strong>\n\n</p><p>I started with job_schedd_restart-holdjobs-ok.run which had some jobs running prior to restarting the schedd and then checking job status. The test is run in a personal HTCondor. The jobs we start now run forever(well till I remove them\nonce satisfied). So the real question was how to determine the reconnects.\n\n</p><p>We never established callbacks from Condor.pm to CondorTest.pm for userlog\nevents 22, 23 and 24 (Job Disconnected, Job Reconnected and Reconnect Failed)\n\n</p><p>These events are now first class citizens with callbacks which can be registered.\n\n</p><p>At the moment <strong class=\"two\">ANY</strong> Reconnect Failed event will make test fail.\n\n</p><p>All three events are registered with a disconnects and reconnects counted but not compared. Its a good solid framework with 5 jobs disconnected when the schedd is restarted. I am open to discussion of the best way complete it.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-29 08:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aa85a1872c88faf249908dee7f508d99bb84df2a\">[35596]</a></span>: These files make up the tested shadow reconnect test <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3582\" onclick=\"get_ticket_and_populate_wrapper('3582'); return false;\" title=\"Reconnect Test after Schedd restarts\">#3582</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-29 08:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56387ca54854991c51d5ea4a0d21da66429cff76\">[35592]</a></span>: Added callbacks for testing shadow reconnects for events diconnect, reconnect and failed reconnect for test <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3582\" onclick=\"get_ticket_and_populate_wrapper('3582'); return false;\" title=\"Reconnect Test after Schedd restarts\">#3582</a></span>  (By Bill Taylor )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-06 12:43", "status": "resolved", "created": "2013-Apr-19 14:37", "fixed_version": "2013-Apr-19 14:37", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3594", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}