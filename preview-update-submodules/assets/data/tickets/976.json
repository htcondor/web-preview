{"id": 976, "title": "Ticket #976: Add rotation + logging to HISTORY_DIR for Gratia_Probe", "description": "<blockquote>\nAs currently implemented, more and more files would be added to the schedd HISTORY_DIR directory in order to be turned into GRATIA XML files in case GRATIA won't access them for a while. This could cause to run out of disk space.\n\n<p>Possible solution steps to this problem:\n\n</p><p>1) limit the directory contents,\n\n</p><p></p><ul>\na) either by deleting the oldest files once a particular file count or disk space consumption is exceeded,\n\n<p>b) or by stopping creating additional files once the limit is reached\n\n</p><p></p><ul>\n(tendency towards a), because IMHO customers more likely to be interested in information about more recent jobs; which would then be discarded)\n</ul>\n</ul>\n\n<p>2) additionally create a log file that specifies how many job entries were deleted since last XML transfer. Thus, information about data loss is provided.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Feb-11 20:28:35 by bbockelm:</em> <br/>\n\nMarking this as deferred for now; not likely to have effort to work on it unless there's significantly more Gratia interest.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-02 19:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e149ac2d8effb8496f88655fc2390b624b4aec5b\">[16478]</a></span>: Gratia per-file-history directory rotation + data loss logging enabled (ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=976\" onclick=\"get_ticket_and_populate_wrapper('976'); return false;\" title=\"Add rotation + logging to HISTORY_DIR for Gratia_Probe\">#976</a></span>).  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-24 09:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ea1768a46a6688ea9d94cfec8824a2f5f11ebf1c\">[16453]</a></span>: Revert \"added max directory size control to gratia directories (ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=976\" onclick=\"get_ticket_and_populate_wrapper('976'); return false;\" title=\"Add rotation + logging to HISTORY_DIR for Gratia_Probe\">#976</a></span>); also enabled logging, though this needs more information (todo).\" This reverts commit 88db9e7094bac63c012d46ecf323165c78c06e72.  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-24 09:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ae163dcbf77e1bcfaf182511ec15758f80bfa0bb\">[16450]</a></span>: Revert \"removed logging for now (for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=976\" onclick=\"get_ticket_and_populate_wrapper('976'); return false;\" title=\"Add rotation + logging to HISTORY_DIR for Gratia_Probe\">#976</a></span>) to avoid a build error (which did not occur under MacOS)\" This reverts commit b8aae758901807f210829025f3a3aabf13fba68f.  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 21:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b8aae758901807f210829025f3a3aabf13fba68f\">[16449]</a></span>: removed logging for now (for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=976\" onclick=\"get_ticket_and_populate_wrapper('976'); return false;\" title=\"Add rotation + logging to HISTORY_DIR for Gratia_Probe\">#976</a></span>) to avoid a build error (which did not occur under MacOS)  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 17:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/88db9e7094bac63c012d46ecf323165c78c06e72\">[16445]</a></span>: added max directory size control to gratia directories (ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=976\" onclick=\"get_ticket_and_populate_wrapper('976'); return false;\" title=\"Add rotation + logging to HISTORY_DIR for Gratia_Probe\">#976</a></span>); also enabled logging, though this needs more information (todo).  (By Cathrin Weiss )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Feb-11 20:28", "status": "defer", "created": "2009-Nov-18 12:38", "fixed_version": "2009-Nov-18 12:38", "broken_version": "v070400", "priority": "4", "subsystem": "Tools", "assigned_to": "tannenba", "derived_from": "", "creator": "cweiss", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "cweiss@cs.wisc.edu", "due_date": "20110209"}