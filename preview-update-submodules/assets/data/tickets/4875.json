{"id": 4875, "title": "Ticket #4875: Python bindings for condor_squawk", "description": "<blockquote>\n<span class=\"section\"><h2>Use Case</h2></span>\n\n<p>The OSG is starting a new project to investigate management of Xrootd caches placed in strategic (in terms of networking) locations around the grid.\n\n</p><p>One important aspect of this is to improve the management of the remote instances.  We'd like the xrootd daemons to run underneath the HTCondor master and (not related to this ticket) advertise themselves in a central collector.\n\n</p><p>Thus, we would like to have a python script which sits between the master and the xrootd daemon that periodically advertises to the collector and sends heartbeats to the master.\n\n</p><p><span class=\"section\"></span></p><h2>Proposal </h2>\n\n<p><code>condor_squawk</code> (built but not shipped) allows a non-DC daemon to send heartbeats to the master.  We would like to provide the same functionality to the python bindings.\n\n</p><p>Particularly, I suggest the following signature:\n\n</p><p></p><div class=\"verbatim\">\n<pre>    send_alive( (ClassAd)arg1, (int)pid=None, (int)timeout=None):\n        Send a command to a HTCondor daemon specified by a location ClassAd.\n        :param ad: An ad specifying the location of the daemon; typically, found by using Collector.locate(...).\n        :param pid: A process identifier for the keepalive.  Defaults to None, which indicates to utilize the value of os.getpid().\n        :param timeout: The number of seconds this keepalive is valid.  After that time, if the condor_master has not received a new .keepalive for this process, it will be terminated.  Defaults is controlled by the parameter NOT_RESPONDING_TIMEOUT.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-20 15:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eff6ee34f9495eacff231c6eefce2e154fa8de81\">[44675]</a></span>: minor edit of doc for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4875\" onclick=\"get_ticket_and_populate_wrapper('4875'); return false;\" title=\"Python bindings for condor_squawk\">#4875</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-20 10:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/93985d96a5d9a8d6f9b2af85aef0e33a62847828\">[44668]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4875\" onclick=\"get_ticket_and_populate_wrapper('4875'); return false;\" title=\"Python bindings for condor_squawk\">#4875</a></span>) Documentation and Version History  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-12 07:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0f0f163263333efa3d700db095cb1451b8d78fb6\">[43338]</a></span>: Add python bindings for condor_squawk. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4875\" onclick=\"get_ticket_and_populate_wrapper('4875'); return false;\" title=\"Python bindings for condor_squawk\">#4875</a></span> This introduces a new python function, send_alive, which sends a valid child keepalive message to a specified daemon. This should allow python bindings to be used in a daemon managed by the condor_master.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-10 08:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3c1e919b4a8e19b212fd76626012f99db0466a68\">[43280]</a></span>: Add python bindings for condor_squawk. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4875\" onclick=\"get_ticket_and_populate_wrapper('4875'); return false;\" title=\"Python bindings for condor_squawk\">#4875</a></span> This introduces a new python function, send_alive, which sends a valid child keepalive message to a specified daemon. This should allow python bindings to be used in a daemon managed by the condor_master.  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Apr-21 08:22", "status": "resolved", "created": "2015-Feb-09 15:39", "fixed_version": "2015-Feb-09 15:39", "broken_version": "", "priority": "2", "subsystem": "Tools", "assigned_to": "bbockelm", "derived_from": "#4882", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}