{"id": 5123, "title": "Ticket #5123: Malformed concurrency limits break condor_userprio", "description": "<blockquote>\nThe accountant expects concurrency limit names to follow certain restrictions (composed of letters, digits, underscores, and at most one dot), but nothing enforces that. The accountant's internal record keeping is fine if names contain other characters, but it will attempt to construct invalid <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attribute names when sending user priority data to condor_userprio or condor_q -analyze. The tools fail as a result.\n\n<p>Condor_submit and the negotiator should reject and/or ignore concurrency limits that don't follow the pattern described above.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-20 13:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de94d6d7374c0765f48c33ffd0143379631bdbbb\">[45348]</a></span>: small edit of names for concurrency limits <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5123\" onclick=\"get_ticket_and_populate_wrapper('5123'); return false;\" title=\"Malformed concurrency limits break condor_userprio\">#5123</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-13 08:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c6d6b183535bf8b8d62b4850f8aa72443cb72157\">[45281]</a></span>: Fix bug in new concurrency limit name enforcement code. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5123\" onclick=\"get_ticket_and_populate_wrapper('5123'); return false;\" title=\"Malformed concurrency limits break condor_userprio\">#5123</a></span> The new call to ParseConcurrencyLimit() in condor_submit was accidentally stripping the count argument of concurrency limits when adding them to the job ad.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-10 11:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f243fcddf5ee87a10246c5673c749f24e3d2a78\">[45272]</a></span>: Docs for new concurrency limit naming rules. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5123\" onclick=\"get_ticket_and_populate_wrapper('5123'); return false;\" title=\"Malformed concurrency limits break condor_userprio\">#5123</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-10 09:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c38d59bb415678bf4a0d63b44ab81873a39227ab\">[45268]</a></span>: Define and enforce naming rules for concurrency limits. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5123\" onclick=\"get_ticket_and_populate_wrapper('5123'); return false;\" title=\"Malformed concurrency limits break condor_userprio\">#5123</a></span> The code assumed concurrency limit names would look like attribute or config param names, with an optional '.'. But the names that a job could request were not restricted, causing problems in the GET_PRIORITY and GET_PRIORITY_ROLLUP commands\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jul-10 11:29", "status": "resolved", "created": "2015-Jun-24 16:53", "fixed_version": "2015-Jun-24 16:53", "broken_version": "v080200", "priority": "3", "subsystem": "", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "a28290", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}