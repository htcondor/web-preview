{"id": 861, "title": "Ticket #861: KVM submit and config params are a mess", "description": "<blockquote>\nTo submit a KVM job to the vm universe, the user must use several attributes that start with <code>xen_</code>:\n<ul>\n<li>xen_cdrom_device\n</li><li>xen_disk\n</li><li>xen_transfer_files\n</li><li>xen_kernel\n</li></ul>\n\n<p><code>xen_kernel</code> must be set for KVM jobs, but it doesn't even do any for them. These result in job ad attributes with Xen-based names.\n\n</p><p>Similarly, to configure a machine to run KVM jobs, the admin must set several config parameters that start with <code>XEN_</code>:\n</p><ul>\n<li>XEN_BRIDGE_SCRIPT\n</li><li>XEN_SCRIPT\n</li></ul>\n\n<p>We need to either rename these parameters to be non-Xen-specific, or add a parallel set of KVM-based parameters.</p></blockquote>", "remarks": "<blockquote>\nsubmissions params have changed for kvm, they now are:\n<div class=\"code\">\n<pre class=\"code\">KVM_DISK\nKVM_TRANSFER_FILES\nKVM_CDROM_DEVICE\n</pre></div>\n\n\n<p>Submission example:\n</p><div class=\"code\">\n<pre class=\"code\">Universe=vm\nExecutable=testvm\nLog=$(cluster).vm.log\nVM_TYPE=kvm\nVM_MEMORY=512\nKVM_DISK=/var/lib/libvirt/images/RHEL5.img:vda:w\nQueue\n</pre></div>\n\n\n<p>Config params have also been adjusted:\n</p><div class=\"code\">\n<pre class=\"code\">VM_BRIDGE_SCRIPT\nVM_SCRIPT\n</pre></div>\n\n\n<p>the original XEN ones still exist, but KVM will only recognise the afore\nmentioned.  XEN can also use the params above.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=858\" onclick=\"get_ticket_and_populate_wrapper('858'); return false;\" title=\"Document KVM vm universe\">#858</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDocument KVM vm universe</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Oct-23 15:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f074485fee3da24315b22a56116d39eaf7619496\">[16156]</a></span>: Fixes for the VM Universe (KVM) related: <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=874\" onclick=\"get_ticket_and_populate_wrapper('874'); return false;\" title=\"Xen support broken with libvirt library\">#874</a></span> - Removal of instantiation of base splits to Xen of Kvm - Subdate submission and config params Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=861\" onclick=\"get_ticket_and_populate_wrapper('861'); return false;\" title=\"KVM submit and config params are a mess\">#861</a></span> - minor updates to .xml file. - updates to set_root_priv when accessing images.  (By Timothy St. Clair )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:41", "status": "resolved", "created": "2009-Oct-15 14:19", "fixed_version": "2009-Oct-15 14:19", "broken_version": "v070400", "priority": "2", "subsystem": "Daemons", "assigned_to": "tstclair", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com, matt@cs.wisc.edu", "due_date": ""}