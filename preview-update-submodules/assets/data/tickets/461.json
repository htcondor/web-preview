{"id": 461, "title": "Ticket #461: 7.2.2 startd segfault", "description": "<blockquote>\nRT ticket 5291 shows a 7.2.2 startd failure on nmi-0200 (x86_64_deb_5.0).\n\n<p>I hunted down the logs and found this:\n\n</p><p></p><div class=\"verbatim\">\n<pre>5/6 16:34:26 ******************************************************\n5/6 16:34:26 ** condor_startd (CONDOR_STARTD) STARTING UP\n5/6 16:34:26 ** /prereq/condor-7.2.2/sbin/condor_startd\n5/6 16:34:26 ** SubsystemInfo: name=STARTD type=STARTD(7) class=DAEMON(1)\n5/6 16:34:26 ** Configuration: subsystem:STARTD local:&lt;NONE&gt; class:DAEMON\n5/6 16:34:26 ** $CondorVersion: 7.2.2 Feb  5 2009 BuildID: 130244 PRE-RELEASE-UW\nCS $\n5/6 16:34:26 ** $CondorPlatform: X86_64-LINUX_DEBIAN50 $\n5/6 16:34:26 ** PID = 2569\n5/6 16:34:26 ** Log last touched 5/6 16:32:24\n5/6 16:34:26 ******************************************************\n5/6 16:34:26 Using config source: /home/condor/condor_config\n5/6 16:34:26 Using local config sources:\n5/6 16:34:26    /home/condor/condor_config.hawkeye\n5/6 16:34:26    /home/condor/nmi-0200.local\n5/6 16:34:26    /home/condor/condor_config.execute\n5/6 16:34:26    /home/condor/nmi-0200.local.post\n5/6 16:34:26 DaemonCore: Command Socket at &lt;0.0.0.0:53795&gt;\nStack dump for process 2569 at timestamp 1241645666 (14 frames)\ncondor_startd(dprintf_dump_stack+0xb7)[0x544030]\ncondor_startd(_Z18linux_sig_coredumpi+0x2c)[0x536bf3]\n/lib/libc.so.6[0x7f5fbea68f60]\n/lib/libc.so.6(strncpy+0x11)[0x7f5fbeab23a1]\ncondor_startd(_ZNK18UnixNetworkAdapter7getNameER5ifreqPKc+0x39)[0x5af8bd]\ncondor_startd(_ZN19LinuxNetworkAdapter11findAdapterEPKc+0x68)[0x5a499a]\ncondor_startd(_ZN18UnixNetworkAdapter10initializeEv+0x70)[0x5af780]\ncondor_startd(_ZN18NetworkAdapterBase12doInitializeEv+0x20)[0x5a2a00]\ncondor_startd(_ZN18NetworkAdapterBase20createNetworkAdapterEPKcb+0x8e)[0x5a2d70]\ncondor_startd(_ZN6ResMgrC1Ev+0x10b)[0x4e5d3f]\ncondor_startd(_Z9main_initiPPc+0x184)[0x4fad01]\ncondor_startd(main+0x1887)[0x539305]\n/lib/libc.so.6(__libc_start_main+0xe6)[0x7f5fbea551a6]\ncondor_startd(_ZNSt8ios_base4InitD1Ev+0x51)[0x4d4109]\n</pre></div>\n\n\n<p>This needs looking into.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jun-02 09:47:57 by psilord:</em> <br/>\n\nAssigned to Nick since it looks like it is in code he understands very well.\n\n<p></p><hr/>\n<em>2009-Jun-10 12:56:41 by nleroy:</em> <br/>\n\nI think that this was caused by daemonCore-&gt;InfoCommandSinfulString() returning a NULL which was dereferenced in the initialization code.  That's the only scenarios that I've been able to come up with that would cause this stack trace.  Notice the 'Command Socket at &lt;0.0.0.0:53795&gt;' in the above trace...  Looks mighty suspicious to me.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jun-10 12:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c21b1c0058c749d5c74b8931adde9fb07d05e57a\">[14870]</a></span>: Fixed a bug that could cause the startd to seg fault in the network adaptor code if initialized with a NULL sinful/name string (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=461\" onclick=\"get_ticket_and_populate_wrapper('461'); return false;\" title=\"7.2.2 startd segfault\">#461</a></span>)  (By Nick <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeRoy\" title=\"Le Roy\">LeRoy</a></span> )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:40", "status": "resolved", "created": "2009-May-07 15:14", "fixed_version": "2009-May-07 15:14", "broken_version": "v070202", "priority": "2", "subsystem": "Daemons", "assigned_to": "nleroy", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "", "due_date": ""}