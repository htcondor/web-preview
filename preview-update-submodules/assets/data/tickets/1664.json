{"id": 1664, "title": "Ticket #1664: Condor error reporting script", "description": "<blockquote>\nLIGO would like a script, example: <code>condor_bird_strike [jobid] [timerange]</code> which data mines Condor about the jobid in question over the time range in question and packages the results up to be sent to us for debugging.\n\n<p>Example datamining could be: log files lines pertaining to the job from every machine upon which the job ran, the lines from the job_queue.log file which pertain to the jobid, snapshot of the filenames in the initialdir, the job ad of the job, current machine ads from where the job had previously tried to run, etc, etc, etc.\n\n</p><p>So far, here is the retrieved information that I've implemented. I have not yet implemented\ntime ranges.\n\n</p><p></p><ul>\n<li>Identity\n<ul>\n<li>Username who generated the report\n</li><li>Script location and Machine Name\n</li><li>Date of Report Creation\n</li><li>uname -a\n</li><li>Contents of /etc/issue\n</li><li>Contents of /etc/redhat-release\n</li><li>Contents of /etc/debian_version\n</li><li>ps -auxww --forest\n</li><li>df -h\n</li><li>iptables -L\n</li><li>ls `condor_config_val LOG`\n</li><li>ldd `condor_config_val SBIN`/condor_schedd\n</li><li>Contents of /etc/hosts\n</li><li>Contents of /etc/nsswitch.conf\n</li><li>ulimit -a\n</li><li>Network Interface Configuration (ifconfig)\n</li><li>Condor Version\n</li><li>Location of Condor Config Files\n</li><li>Condor Config Variables\n<ul>\n<li>Include variable and value\n</li><li>Include definition location of each config variable\n</li></ul>\n</li></ul>\n</li><li>condor_q for jobid\n</li><li>condor_q -l for jobid\n</li><li>condor_q -better-analyze for jobid\n</li><li>Job Userlog, if exists...\n<ul>\n<li>All events pertaining only to jobid\n</li></ul>\n</li></ul>\n\n<p>They are requesting it since it is A) what we all ask for anyway, and B) there is often language barriers in LIGO which slows providing the solutions to the problems down by days or weeks.\n\n</p><p>In general, it is just a good idea all around.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Feb-02 11:36:31 by psilord:</em> <br/>\n\nSince I have a snow day at home, I'm going to hack on this a bit.\n\n<p></p><hr/>\n<em>2011-Feb-03 01:57:45 by psilord:</em> <br/>\n\nI've hacked on it some and got something working. It definitely needs a bit\nof work, especially to replace the system() crap I did to get it quickly working.\n\n<p>I'll check it into master soon...\n\n</p><p></p><hr/>\n<em>2011-Feb-03 02:19:25 by psilord:</em> <br/>\n\nIt is checked into master.\n\n<p></p><hr/>\n<em>2011-Feb-24 11:07:40 by psilord:</em> <br/>\n\nThis ticket has moved to stalled because I'm not currently working on it due\nto preemption.\n\n<p></p><hr/>\n<em>2011-Mar-30 10:43:44 by psilord:</em> <br/>\n\nThis program needs documentation. It exists undocumented in 7.5.6, but needs real documentation for 7.6.0.\n\n<p></p><hr/>\n<em>2011-Oct-06 12:09:23 by psilord:</em> <br/>\n\nI wrote the man page for it. This tool is good enough now to resolve this ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=1889\" onclick=\"get_ticket_and_populate_wrapper('1889'); return false;\" title=\"condor_userlog should print out filtered events\">#1889</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_userlog should print out filtered events</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2372\" onclick=\"get_ticket_and_populate_wrapper('2372'); return false;\" title=\"make man page for condor_gather_info\">#2372</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nmake man page for condor_gather_info</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-26 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e84f1cdfc8b3b0354e63607835eb881c9315d0fc\">[27996]</a></span>: revise condor_gather_info man page for 7.7.3 release ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2372\" onclick=\"get_ticket_and_populate_wrapper('2372'); return false;\" title=\"make man page for condor_gather_info\">#2372</a></span> ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-06 12:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2200b0814f8773c64ed5cf7aa7efcddee41a5505\">[27668]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2372\" onclick=\"get_ticket_and_populate_wrapper('2372'); return false;\" title=\"make man page for condor_gather_info\">#2372</a></span> <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2372\" onclick=\"get_ticket_and_populate_wrapper('2372'); return false;\" title=\"make man page for condor_gather_info\">#2372</a></span> <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> ===VersionHistory:Complete=== I wrote the man page for condor_gather_info.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-03 16:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/df207c91025489034304446faa405245b6a4edbf\">[20283]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> Added condor_bird_strike to release of Condor. Even in its primitive state it is pretty useful.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-03 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/641f267a1d33bbd296d310d369fc6e528cf90b67\">[20273]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> Added copyright.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-03 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b649e7207790df373206e032d14f3ed5328d54ee\">[20266]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> Altered how the script is invoked to use /usr/bin/env instead.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-03 14:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9ba6e33f76cdd8f2bae47a7dd8e17f1613874048\">[20263]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> Added some more identity tests. Slight reorganization of code.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-03 02:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b303da19b1ce9cb439ef609db6b7576e8776622b\">[20229]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1664\" onclick=\"get_ticket_and_populate_wrapper('1664'); return false;\" title=\"Condor error reporting script\">#1664</a></span> This tool is meant to datamine as much useful information as possible out of a Condor pool about a specific job id. It also gathers some understanding of the pool under which it runs. I have something basic working with this checkin and I wrote it fast--not all of the command line options\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Oct-06 12:10", "status": "defer", "created": "2010-Sep-16 16:45", "fixed_version": "2010-Sep-16 16:45", "broken_version": "v070000", "priority": "5", "subsystem": "", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "psilord@cs.wisc.edu, matt@cs.wisc.edu,pcouvare@caltech.edu", "due_date": "20111005"}