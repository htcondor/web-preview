{"id": 7734, "title": "Ticket #7734: Add docker command line tools to execute node docker image for dind", "description": "<blockquote>\nAdd the docker command line tools to the execute node image so that we can run docker universe jobs within a condor pool inside kubernetes.</blockquote>", "remarks": "<blockquote>\n<em>2020-Jul-13 12:57:34 by matyas:</em> <br/>\n\nDo we want to add the command line tools to all exec node images or do want to make a new set of images for this purpose? Like \"htcondor/exec-dind:8.9.8-el7\" ?\n\n<p></p><hr/>\n<em>2020-Sep-28 14:30:03 by gthain:</em> <br/>\n\nLet's add the docker cli to all the worker node images\n\n<p></p><hr/>\n<em>2020-Sep-28 15:17:45 by matyas:</em> <br/>\n\nLooks like this change is in the 8.9.6 image and the 8.9.8 image on Docker Hub, but not the 8.9.7 image.  Should we add this change to the 8.9.7 image, for consistency's sake?\n\n<p>Also note that this hasn't been tested on the backfill wns pods since they all use the 8.9.5 images.  I suggest doing the following:\n\n</p><p></p><ol>\n<li>Update the pods to use the current 8.9.7 images and make sure regular jobs work\n</li><li>Build new 8.9.7 images and push them <em>to the CHTC registry only</em>\n</li><li>Update the pods again to use the new images; run some vanilla and docker jobs on them\n</li><li>Push these 8.9.7 images to docker hub\n</li></ol>\n\n<p></p><hr/>\n<em>2020-Sep-29 09:06:01 by tim:</em> <br/>\n\nIsn't the current release 8.9.8? Is there a reason that we are avoiding it?\n\n<p></p><hr/>\n<em>2020-Sep-29 09:58:48 by matyas:</em> <br/>\n\nYes, there should be an \"update pods to 8.9.8\" step at the end (unless 8.9.9 is out by then).\n\n<p>Basically:\n\n</p><p></p><ul>\n<li>I want to change Fixed Version from v080909 to v080906 since it's already \"in\" 8.9.6.\n</li><li>That's misleading though since it's not in 8.9.7, so I want to put it in 8.9.7.\n</li><li>I want to test it first.</li></ul>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-07 15:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/196129acc7421776017360b676aaba90db671eb7\">[61443]</a></span>: Only install the Docker CLI tools; saves another ~225MB (<span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=7734\" onclick=\"get_ticket_and_populate_wrapper('7734'); return false;\" title=\"Add docker command line tools to execute node docker image for dind\">#7734</a></span>)  (By Matyas Selmeci )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-13 12:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cda9f9ed27d94c75097f4a9e63c7968ec4000b5c\">[60123]</a></span>: Add docker command line tools to execute node image <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=7734\" onclick=\"get_ticket_and_populate_wrapper('7734'); return false;\" title=\"Add docker command line tools to execute node docker image for dind\">#7734</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Sep-29 09:58", "status": "review", "created": "2020-Jul-13 12:41", "fixed_version": "2020-Jul-13 12:41", "broken_version": "v080900", "priority": "2", "subsystem": "", "assigned_to": "matyas", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}