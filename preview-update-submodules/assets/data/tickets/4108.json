{"id": 4108, "title": "Ticket #4108: document how all the different logs work", "description": "<blockquote>\nOur variety of logs can be confusing.  Write a new section within the Administrator's manual chapter to categorize and identify how the various logging methods work.</blockquote>", "remarks": "<blockquote>\n<em>2014-Nov-25 15:59:44 by smoler:</em> <br/>\n\n<ul>\n<li><strong>job event log</strong> -\na chronological listing of events for a single job.\n<ul>\n<li>Created because the submit description file has <code>log = &lt;file name&gt;</code>.\n</li><li>The events are documented in section 2.6.7.\n</li></ul>\n\n<p></p></li><li>daemon (or subsystem) logs - each daemon records events as it executes\n<ul>\n<li>file name of each log is inconsistent; when not explicit in <code>param_info.in</code>,\nset by configuration variable <code>&lt;SUBSYS&gt;_LOG</code>.  Many of the daemon logs use a camel case for the daemon name, which is concatenated with <code>Log</code>.\n</li><li>size/rotation/locking are specified by a variety of configuration variables\n</li><li>events have a time stamp; contains detail of start up for a daemon, statistics (when enabled)\n</li></ul>\n\n<p></p></li><li><strong>job queue log</strong> - a transaction log that is the schedd's database of all current jobs in the queue\n<ul>\n<li>default file is <code>$(SPOOL)/job_queue.log</code>\n</li><li>event numbering in <code>src/condor_utils/ClassAdLogEntry.h</code>\n</li><li>At intervals set by <code>QUEUE_CLEAN_INTERVAL</code>, condor_schedd goes thru the <code>job_queue.log</code> file and \"truncate all transactions\" to clean the file. Default is once per day.\nThus, there is no maximum size for this file, so it needs to be in a partition with plenty of space.\n</li><li>If <code>SCHEDD_BACKUP_SPOOL</code> is True, make a backup copy of the job queue on schedd start up.  Default is False.\n</li><li><code>MAX_JOB_QUEUE_LOG_ROTATIONS</code>  is maximum number of history files that are saved before deleting the one with the oldest timestamp.\n</li></ul>\n\n<p></p></li><li><strong>event log</strong> - logs all job events for all jobs and all users\n<ul>\n<li>file name is set by configuration variable <code>EVENT_LOG</code>\n</li><li>size/rotation?\n</li></ul>\n\n<p></p></li><li><strong>accountant log</strong> - a transaction log that is the negotiator's database of all accounting information, which are priorities\n<ul>\n<li>written by negotiator\n</li><li>?? file name is not configurable?  <code>$(SPOOL)/Accountantnew.log</code>\n</li><li>users are represented in the DB by <code>username@uid_domain</code>\n</li><li><code>MAX_ACCOUNTANT_DATABASE_SIZE</code> sets max size in bytes of the file before it is \"cleaned\" or \"compacted,\" rewriting the file in a more compact form.\n</li><li>admins interact with the DB by using condor_userprio\n</li></ul>\n\n<p></p></li><li><strong>schedd audit log</strong> - optional log to record user-initiated events that modify the job queue\n<ul>\n<li>file name is set by configuration variable <code>SCHEDD_AUDIT_LOG</code>\n</li><li>size/rotation set by <code>MAX_SCHEDD_AUDIT_LOG</code> and  <code>MAX_NUM_SCHEDD_AUDIT_LOG</code>\n</li><li>events are timestamped and the message identifies what changed for which job. Should be for any _rm _hold _release _submit command.\n</li></ul>\n\n<p></p></li><li><strong>value of NEGOTIATOR_MATCH_LOG</strong> - a second log from the negotiator, written\nonly with items that have DEBUG level <code>D_MATCH</code>\n<ul>\n<li>file name is set with configuration variable <code>NEGOTIATOR_MATCH_LOG</code>,\nand the default value is <code>$(LOG)/MatchLog</code>\n</li><li>size/rotation?\n</li></ul>\n\n<p></p></li><li><strong>history log</strong> - optional log for info about all jobs that have completed\n<ul>\n<li>defaults to <code>$(SPOOL)/history</code>\n</li><li>written by schedd\n</li><li>size/rotation set by <code>ENABLE_HISTORY_ROTATION</code>, <code>MAX_HISTORY_LOG</code>, <code>MAX_HISTORY_ROTATIONS</code>\n</li><li>admins can view historical info with condor_history\n</li></ul>\n</li></ul>\n\n<p>For DAGMan, there are more logs:\n</p><ul>\n<li>the <strong>default node log</strong> -- used to enforce the dependencies of the DAG\n<ul>\n<li>default file name is set by configuration variable <code>DAGMAN_DEFAULT_NODE_LOG</code>\n</li><li>size/rotation?\n</li><li>one per DAG submission; each SUBDAG has its own log\n</li></ul>\n\n<p></p></li><li><code>dagman.out</code> file - like a daemon log (for dprintfs)\n<ul>\n<li>file name is ??\n</li><li>size/rotation?\n</li><li>one per DAG submission; each SUBDAG has its own log\n</li></ul>\n\n<p></p></li><li><code>jobstate.log</code> file - ?? (for Pegasus)\n<ul>\n<li>file name is ??\n</li><li>size/rotation?\n</li><li>one per DAG submission; each SUBDAG has its own log\n</li></ul>\n\n<p></p></li><li><strong>node status file</strong> - not really log, as it forms a snapshot of the current status of a DAG\n<ul>\n<li>file name is ??\n</li><li>one per DAG submission</li></ul>\n</li></ul>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-30 15:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d7dee31fd77fcabd4d228f46a07aab2e9f135b92\">[42492]</a></span>: complete manual section that describes all the logs we use <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-09 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4d06c70742dbb648e0ab0b9a1eb77b92bc645535\">[42156]</a></span>: add info about logs related to DAGMan <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-08 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/96f7f9fc851ef68d1a496e65d289ec743f193676\">[42143]</a></span>: add info about logs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-04 13:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/31a5852d4c36cbbce8f44aac441ed3d5a2f4b7f7\">[41815]</a></span>: more info on logs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-02 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7554cade47e3092a90e07e7e31fc73b3674d17bf\">[41814]</a></span>: <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>: more info on logs  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-02 11:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c7e28c1606bac479d7aad57cbafa32002c0279f5\">[41803]</a></span>: add detail of event log and fix defn of configuration variable &lt;SUBSYS&gt;_LOG, because it has been wrong for all time. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-28 12:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/33350a5bfcfb930467afbc8e59fb9689bdc8e30d\">[41774]</a></span>: detail job event log in new manual subsection on logging <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-26 14:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0669ab8585f8b92a73c14d9239a35ed26ba466dd\">[41771]</a></span>: add empty sections as placeholders for info from <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4108\" onclick=\"get_ticket_and_populate_wrapper('4108'); return false;\" title=\"document how all the different logs work\">#4108</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2015-Jan-30 15:35", "status": "resolved", "created": "2013-Dec-09 15:01", "fixed_version": "2013-Dec-09 15:01", "broken_version": "v080000", "priority": "3", "subsystem": "", "assigned_to": "smoler", "derived_from": "", "creator": "smoler", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}