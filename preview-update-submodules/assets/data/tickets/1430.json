{"id": 1430, "title": "Ticket #1430: SUBMIT_EXPRS docs vs code disagree on overrides", "description": "<blockquote>\n<a class=\"external\" href=\"http://www.cs.wisc.edu/condor/manual/v7.4/3_3Configuration.html#param:SubmitExprs\">The documention for SUBMIT_EXPRS claims</a>:\n<div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nNote that adding an attribute to a job's ClassAd will not function as a method for specifying default values of submit description file commands forgotten in a job's submit description file. The command in the submit description file results in actions by condor_submit, while the use of SUBMIT_EXPRS adds a job ClassAd attribute at a later point in time.\n</td></tr></tbody></table></div>\n\n\n<p>The implication is that job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attributes added with SUBMIT_EXPRS are apply <em>after</em> the submit file is processes, and thus overrides them.  This doesn't match what the code actually does.  The code actually behaves as a default.\n\n</p><p>Using <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span> as an example, I can specify the image_size in the submit file as expected:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nimage_size=12345\\nqueue\\n\" | condor_submit -verbose -dump /dev/null | grep ^ImageSize\nImageSize = 12345\n</pre></div>\n\n\n<p>I can specify <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span> in the configuration file as expected:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nqueue\\n\" | env _CONDOR_ImageSize=4242 _CONDOR_SUBMIT_EXPRS=ImageSize condor_submit -verbose -dump /dev/null | grep ^ImageSize\nImageSize = 4242\n</pre></div>\n\n\n<p>But if I specify both, I would expect the configuration file (4242) to win, but in practice the submit file (12345) does:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nimage_size=12345\\nqueue\\n\" | env _CONDOR_ImageSize=4242 _CONDOR_SUBMIT_EXPRS=ImageSize condor_submit -verbose -dump /dev/null | grep ^ImageSize\nImageSize = 12345\n</pre></div>\n\n\n<p>This seems to function as a default just fine, disagreeing with the claims of the manual.\n\n</p><p>First: figure out which is correct, the code or the manual.\n\n</p><p>Second: Fix the code or the manual to conform with the other.\n\n</p><p>Third: If the code is correct, resolve <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=404\" onclick=\"get_ticket_and_populate_wrapper('404'); return false;\" title=\"Admin configurable condor_submit defaults\">#404</a></span> as SUBMIT_EXPRS solves the problem.  Open a new ticket: \"Feature request: allow config file to always override submit file.\"</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Jun-07 19:24:28 by matt:</em> <br/>\n\nOn this one, I think the code is correct and we should add a separate override option.\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2013-May-31 17:13:45 by tannenba:</em> <br/>\n\nI don't think there is a disagreement between code and docs here.  Abandoning.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-May-31 17:13", "status": "abandoned", "created": "2010-Jun-07 14:46", "fixed_version": "2010-Jun-07 14:46", "broken_version": "v070402", "priority": "2", "subsystem": "Tools", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}