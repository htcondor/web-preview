{"id": 3326, "title": "Ticket #3326: add a \"dirusage\" command to the privsep switchboard", "description": "<blockquote>\nwhen operating in <span class=\"quote\">PrivSep</span> mode, condor needs to be able to monitor the disk usage of a job.  however, that job may create files and directories which only the job can read, and in <span class=\"quote\">PrivSep</span> mode condor cannot then gather the total usage since it is running as an unprivileged user.\n\n<p>this change will add a new command to the switchboard, which will do the calculation as the user who owns the directory, thus safely returning accurate usage information.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Dec-05 13:54:44 by johnkn:</em> <br/>\n\nno version history needed for this ticket. it's covered by <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3315\" onclick=\"get_ticket_and_populate_wrapper('3315'); return false;\" title=\"tighten the permissions on execute directories\">#3315</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-20 12:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ded722b86d73fb9e84c8c6f613e76a66d07892bf\">[34160]</a></span>: Fixed internal 7.9.2 bug in which privsep reported <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span> in bytes instead of KB. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3326\" onclick=\"get_ticket_and_populate_wrapper('3326'); return false;\" title='add a \"dirusage\" command to the privsep switchboard'>#3326</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-15 17:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d67805f569f42f902c2fba6d1860274f0b1c9756\">[34136]</a></span>: stub the CondorPrivSepHelper::get_exec_dir_usage method on Windows <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3326\" onclick=\"get_ticket_and_populate_wrapper('3326'); return false;\" title='add a \"dirusage\" command to the privsep switchboard'>#3326</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-15 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5533bbeb4c5024eb43822bfb52e4022fe4281022\">[34129]</a></span>: modify the starter to use the new privsep functionality for getting disk usage <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3326\" onclick=\"get_ticket_and_populate_wrapper('3326'); return false;\" title='add a \"dirusage\" command to the privsep switchboard'>#3326</a></span>  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-15 14:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/91394fb30e1f835ebe982a8c0c54d870f769acd3\">[34128]</a></span>: minor fixes to expose the new \"dirusage\" command for the switchboard <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3326\" onclick=\"get_ticket_and_populate_wrapper('3326'); return false;\" title='add a \"dirusage\" command to the privsep switchboard'>#3326</a></span>  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-15 13:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d7697acb41dfbf88a0fdf1044e3df67b08646f2e\">[34125]</a></span>: add a \"dirusage\" command to the <span class=\"wiki\"><a href=\"wiki?p=PrivSep\" title=\"Priv Sep\">PrivSep</a></span> switchboard. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3326\" onclick=\"get_ticket_and_populate_wrapper('3326'); return false;\" title='add a \"dirusage\" command to the privsep switchboard'>#3326</a></span>  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Dec-05 13:54", "status": "resolved", "created": "2012-Nov-15 13:02", "fixed_version": "2012-Nov-15 13:02", "broken_version": "v070900", "priority": "3", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#3315", "creator": "zmiller", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": "20121118"}