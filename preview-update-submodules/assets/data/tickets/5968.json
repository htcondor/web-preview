{"id": 5968, "title": "Ticket #5968: Job Router considers removal of source jobs as failures", "description": "<blockquote>\nIf a job is removed that is owned by the job router, the destination job is also removed as part of the cleanup, yielding a failure in the job routing table. This can produce unwanted throttling if enough jobs are removed to reach the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FailureRateThreshold\" title=\"Failure Rate Threshold\">FailureRateThreshold</a></span>.</blockquote>", "remarks": "<blockquote>\n<em>2016-Nov-16 15:13:45 by tannenba:</em> <br/>\n\nBump. (for after SC16, of course)\n\n<p></p><hr/>\n<em>2016-Dec-01 15:56:08 by jfrey:</em> <br/>\n\nCurrently, all routed jobs are counted as either a success or a failure when they are done and leave the queue. These counts are used when calculating the failure rate. When the source job is removed, I believe the routed job shouldn't be included in either count. Do we need a third count of interrupted jobs?\n\n<p></p><hr/>\n<em>2016-Dec-01 16:11:52 by blin:</em> <br/>\n\nI can't think of any reasons why we would need to keep track of \"interrupted\" jobs in the job router.\n\n<p></p><hr/>\n<em>2016-Dec-01 16:44:21 by jfrey:</em> <br/>\n\nMy main thought was potential issues when the total number of jobs going through a route is greater than the sum of successful and failed jobs. But I see now that the job counts don't work that way.\n\n<p></p><hr/>\n<em>2017-Jan-25 16:05:08 by tannenba:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Looks good.  Resolving.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jan-19 09:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/580fea5314240047ca56881fea7c64290b0ae12c\">[50009]</a></span>: Docs for job removal triggering route failure fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5968\" onclick=\"get_ticket_and_populate_wrapper('5968'); return false;\" title=\"Job Router considers removal of source jobs as failures\">#5968</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-05 11:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/60a86432b01c111eaf468ae6d9402427b970ef57\">[49737]</a></span>: A held/removed source job should not be a failure of job route. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5968\" onclick=\"get_ticket_and_populate_wrapper('5968'); return false;\" title=\"Job Router considers removal of source jobs as failures\">#5968</a></span> If the source job of a routed job is held or removed, that should not count as a success or a failure of the route itself. The routed job was interrupted before it could complete.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Jan-25 16:05", "status": "resolved", "created": "2016-Oct-14 11:54", "fixed_version": "2016-Oct-14 11:54", "broken_version": "", "priority": "2", "subsystem": "DaemonsCM", "assigned_to": "jfrey", "derived_from": "#4555", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu twh@caltech.edu", "due_date": ""}