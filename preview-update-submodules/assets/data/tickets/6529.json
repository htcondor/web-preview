{"id": 6529, "title": "Ticket #6529: condor_q should have a mode showing idle jobs that will never match", "description": "<blockquote>\nThere should be a mode of condor_q (actually variation of condor_q -analyze) where the output is the list of jobs that do not match any resources.\n\n<p>This new output will be enabled by a new command line flag: <code>-unmatchable</code>\n\n</p><p>When <code>-unmatchable</code> is used with the <code>-analyze</code> flag, it will cause the output to be lists of job id's with one of two headings.  either \"No slots match\" which indicates that the job(s) do not match any slots, and \"All slots reject\" which indicates that the jobs match one or more slots, but that none of those slots match the jobs in return.\n\n</p><p></p><div class=\"snip\">\n<pre class=\"sniplabel\">condor_q -unmatchable -analyze</pre>\n<pre class=\"snip\">-- Schedd: user@schedd.domain : &lt;xxx.xxx.xxx.xxx:xxxx?...\nNo slots match autocluster 1, jobs : 10784.0 10785.0 10785.1\nAll slots reject autocluster 2, jobs : 10786.0\n</pre></div>\n\n\n<p>The other way that <code>-unmatchable</code> can be used is as an additional constraint to any of the normal condor_q queries (other than <code>-batch</code>).  In this mode, the output of condor_q is normal, but only jobs that are unmatchable are displayed.  In particular, <code>-unmatchable</code> can be used with <code>-total</code> and with <code>-af</code>\n\n</p><p></p><div class=\"snip\">\n<pre class=\"sniplabel\">condor_q -unmatchable -tot</pre>\n<pre class=\"snip\">-- Schedd: user@schedd.domain : &lt;xxx.xxx.xxx.xxx:xxxx?...\nTotal for query: 4 jobs; 0 completed, 0 removed, 4 idle, 0 running, 0 held, 0 suspended\n</pre></div>\n\n\n<p></p><div class=\"snip\">\n<pre class=\"sniplabel\">condor_q -unmatch -tot -af Jobs</pre>\n<pre class=\"snip\">4\n</pre></div>\n\n\n<p>The <code>-unmatchable</code> argument can be used with <code>-machine</code>, <code>-mconst</code> or <code>-slotads</code> although this may give results that are misleading since it will not be matchmaking with all of the slot in your pool.\n\n</p><p>Also, Like everything else condor_q does, only the current user's jobs will be considered unless the <code>-allusers</code> argument is used.\n\n</p><p><strong>WARNING</strong>.  On a large pool, <code>condor_q -unmatchable</code> is quite expensive because it fetchs <strong>all</strong> of the machine ads from the Collector in long form. It also fetches jobs from the Schedd in long form, although any constraint, username, or jobid list will reduce the amount of data the schedd returns somewhat.</p></blockquote>", "remarks": "<blockquote>\nthe man page needs to be revised for this new option.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-01 15:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2a711e85c7da188797f21522433875523e5efe0d\">[54411]</a></span>: doc and version history for the new -unmatchable option of condor_q <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6529\" onclick=\"get_ticket_and_populate_wrapper('6529'); return false;\" title=\"condor_q should have a mode showing idle jobs that will never match\">#6529</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-09 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fd5711b0212de4a049f5bebfe96fae8f18792849\">[54249]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6529\" onclick=\"get_ticket_and_populate_wrapper('6529'); return false;\" title=\"condor_q should have a mode showing idle jobs that will never match\">#6529</a></span>, add condor_q -unmatchable. a new option that shows jobs that will never match any startd. documentation and version history is pending.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Mar-01 15:15", "status": "resolved", "created": "2018-Jan-10 17:19", "fixed_version": "2018-Jan-10 17:19", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "#6528", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}