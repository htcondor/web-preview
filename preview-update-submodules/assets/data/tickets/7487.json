{"id": 7487, "title": "Ticket #7487: condor shadow should test ssh_to_job on  startup", "description": "<blockquote>\nLIGO experience problems running condor_ssh_to_job to jobs in OSG.  We think we've fixed some of the problems in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7260\" onclick=\"get_ticket_and_populate_wrapper('7260'); return false;\" title=\"LD_PRELOAD a fake getpwnam into sshd for condor_ssh_to_job\">#7260</a></span>.  Miron suggests that we should always run condor_ssh_to_job as part of shadow startup (or file xfer) and set a flag that it works.</blockquote>", "remarks": "<blockquote>\n<em>2020-Jun-09 10:20:39 by pfc:</em> <br/>\n\nThis came from the summer 2019 Condor-LIGO f2f in Atlanta.\n\n<p>Josh Willis runs into problems where he needs to run workflows with jobs that will fail and which must be debugged via condor_ssh_to_job.  He can't predict which jobs will fail, so he wants to restrict the workflows to run only where he knows condor_ssh_to_job will succeed when he needs it.\n\n</p><p>GregT's fears of scalability issues might be addressed by makign this off by default and something the user can opt into?\n\n</p><p></p><hr/>\n<em>2020-Jun-09 10:24:11 by pfc:</em> <br/>\n\nStuart A. suggests that OSG statistically samples sites and keeps a track of where this fails, in a way users can select for matching.\n\n<p></p><hr/>\n<em>2020-Dec-01 10:42:30 by pfc:</em> <br/>\n\nPeter says that this is important only if we get to the point where we <strong>expect</strong> a non-trivial proportion of ssh_to_job attempts to fail on OSG.  If such failures shouldn't normally happen and are an anomaly, then we can close this.\n\n<p></p><hr/>\n<em>2021-Jun-29 10:22:48 by pfc:</em> <br/>\n\nGreg wants to focus on fixing the underlying issue, and Josh will re-open if he feels the pain again.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2021-Jun-29 10:22", "status": "defer", "created": "2020-Jan-27 14:23", "fixed_version": "2020-Jan-27 14:23", "broken_version": "v080900", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "tannenba", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}