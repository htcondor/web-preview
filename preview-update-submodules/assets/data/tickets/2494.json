{"id": 2494, "title": "Ticket #2494: MacOS 10.7 can't compile FD passing code because CMSG_SPACE not const", "description": "<blockquote>\nThe new batlab uses all new machines, and the older macos 10.5 which we build on in old batlab doesn't run on the shiny new machines in the new batlab.  New batlab runs macos 10.7, which can't compile condor because CMSG_SPACE in the fd passing code is no longer a compile-time constant:\n\n<p></p><div class=\"code\">\n<pre class=\"code\"> 22%] Building CXX object src/condor_utils/CMakeFiles/utils.dir/fdpass.unix.cpp.o\n/Volumes/disk1/condor/execute/slot1/dir_15720/userdir/src/condor_utils/fdpass.unix.cpp: In function 'int fdpass_send(int, int)':\n/Volumes/disk1/condor/execute/slot1/dir_15720/userdir/src/condor_utils/fdpass.unix.cpp:40: error: size of array 'buf' is not an integral constant-expression\n/Volumes/disk1/condor/execute/slot1/dir_15720/userdir/src/condor_utils/fdpass.unix.cpp: In function 'int fdpass_recv(int)':\n/Volumes/disk1/condor/execute/slot1/dir_15720/userdir/src/condor_utils/fdpass.unix.cpp:82: error: size of array 'buf' is not an integral constant-expression\nmake[2]: *** [src/condor_utils/CMakeFiles/utils.dir/fdpass.unix.cpp.o] Error 1\nmake[1]: *** [src/condor_utils/CMakeFiles/utils.dir/all] Error 2\nmake: *** [all] Error 2\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-25 21:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e40b705851099d82d335c338653e7f94a2f9c92b\">[27392]</a></span>: Fix bug in previous commit <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2494\" onclick=\"get_ticket_and_populate_wrapper('2494'); return false;\" title=\"MacOS 10.7 can't compile FD passing code because CMSG_SPACE not const\">#2494</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-24 13:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1ff5eb0381e3091179531b65c10fd1654513618\">[27391]</a></span>: Add macos exception to check tarball step <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2494\" onclick=\"get_ticket_and_populate_wrapper('2494'); return false;\" title=\"MacOS 10.7 can't compile FD passing code because CMSG_SPACE not const\">#2494</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-23 17:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ee3f2992353f66453e02ab31ad8f40fca04b21f\">[27382]</a></span>: Move CMSG structure on the heap for macos 10.7 <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2494\" onclick=\"get_ticket_and_populate_wrapper('2494'); return false;\" title=\"MacOS 10.7 can't compile FD passing code because CMSG_SPACE not const\">#2494</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Nov-21 15:30", "status": "resolved", "created": "2011-Sep-23 09:06", "fixed_version": "2011-Sep-23 09:06", "broken_version": "v070000", "priority": "4", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}