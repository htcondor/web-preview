{"id": 525, "title": "Ticket #525: RFE: pass all job attribute to VM gahp", "description": "<blockquote>\nIssue:\n\n<p>The starter currently only passes attribute to the vm-gahp if they start with JobVM or VMPARAM, or they are a select set, e.g. <span class=\"quote\">ClusterId</span>, <span class=\"quote\">ProcId</span>, User, <span class=\"quote\">OrigIwd</span>, Args, Arguments, <span class=\"quote\">TransferInputFiles</span>, <span class=\"quote\">TransferIntermediateFiles</span>.\n\n</p><p>This limits the attributes that can be taken into account when constructing the VM.\n\n</p><p>Motivation/Tasks:\n\n</p><p>It is desirable to provide all attributes to the vm-gahp, especially for libvirt xml construction.\n\n</p><p>It is also desirable to eliminate the JobVM and VMPARAM prefixes on many attributes, e.g. they are exposed to anyone not using condor_submit to submit a job.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-May-27 12:57:49 by matt:</em> <br/>\n\nDiscussed with Jaeyoung...\n\n<p>The reason for only passing a subset of attributes is to speed up vm-gahp startup, e.g. it doesn't have to receive all attributes.\n\n</p><p>There is a configuration parameter, VM_GAHP_SEND_ALL_CLASSAD (defaults to false), that can control if the JobVM/VMPARAM/etc filter is applied or not.\n\n</p><p>Direction...\n\n</p><p>To address the first motivation, VM_GAHP_SEND_ALL_CLASSAD's default could be reversed.\n\n</p><p>To address the second motivation, the VM_GAHP_SEND_ALL_CLASSAD param can be removed and the JobVM and VMPARAM prefixes can be removed (in a backwards compatible way).\n\n</p><p></p><hr/>\n<em>2009-Jul-17 12:07:24 by bkreuter:</em> <br/>\n\nAttached a patch to address this issue; the option in condor_config will default to true instead of false.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/69/vm_classad.patch\">vm_classad.patch</a>\n590 bytes added by bkreuter on 2009-Jul-17 17:07:55 UTC.\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-20 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1a0b7fd12a02ea7d69bcf3c11de62e813dcf8f0\">[15143]</a></span>: Send entire job ad to vm gahp by default. This config knob has never been documented, so this change in default value won't go in the version history. gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=525\" onclick=\"get_ticket_and_populate_wrapper('525'); return false;\" title=\"RFE: pass all job attribute to VM gahp\">#525</a></span> Committer: Jaime Frey  (By Benjamin Kreuter )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2009-Dec-23 12:06", "status": "resolved", "created": "2009-May-27 12:51", "fixed_version": "2009-May-27 12:51", "broken_version": "", "priority": "4", "subsystem": "VM", "assigned_to": "bkreuter", "derived_from": "#523", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu,bkreuter@redhat.com,jfrey@cs.wisc.edu", "due_date": ""}