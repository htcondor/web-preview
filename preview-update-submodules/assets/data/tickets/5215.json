{"id": 5215, "title": "Ticket #5215: condor_config_val -set doesn't take effect until after restart", "description": "<blockquote>\ncondor_config_val -rset takes effect immediately, but condor_config_val -set doesn't:\n\n<p></p><pre>  manta(41)% condor_master\n  manta(42)% condor_config_val -schedd VM_RECHECK_INTERVAL\n  600\n  manta(43)% condor_config_val -schedd -rset \"VM_RECHECK_INTERVAL = 510\"\n  Successfully set configuration \"VM_RECHECK_INTERVAL = 510\" on schedd wenger@manta.cs.wisc.edu &lt;128.105.14.228:55723?addrs=128.105.14.228-55723&gt;.\n  manta(44)% condor_reconfig -schedd\n  Sent \"Reconfig\" command to local schedd\n  manta(45)% condor_config_val -schedd VM_RECHECK_INTERVAL\n  510\n  manta(46)% condor_config_val -schedd -set \"VM_RECHECK_INTERVAL = 550\"\n  Successfully set configuration \"VM_RECHECK_INTERVAL = 550\" on schedd wenger@manta.cs.wisc.edu &lt;128.105.14.228:55723?addrs=128.105.14.228-55723&gt;.\n  manta(47)% condor_reconfig -schedd\n  Sent \"Reconfig\" command to local schedd\n  manta(48)% condor_config_val -schedd VM_RECHECK_INTERVAL\n  510\n  manta(49)% condor_off -master\n  Sent \"Kill-Daemon\" command for \"master\" to local master\n  manta(50)% condor_master\n  manta(51)% condor_config_val -schedd VM_RECHECK_INTERVAL\n  550\n</pre>\n\n<p>Note:  I also tried this with the startd instead of the schedd, and the same thing happened.\n\n</p><p>The user on RUST didn't report this exact problem, but I found it when messing around with things to respond to them...</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Aug-12 10:10:19 by wenger:</em> <br/>\n\nOh, yeah -- I originally found this on 8.3.8, also reproduced it on the head of the 8.2 branch (8.2.10), so I'm assuming it's in 8.2.8.  (The RUST user has 8.3.5.)\n\n<p></p><hr/>\n<em>2015-Aug-13 11:18:57 by johnkn:</em> <br/>\n\nCode is actually working the way it's supposed to.  The problem is that -rset takes precedence over -set which is why the value that was set is only visible after a restart. Will change the doc to reflect this, and also the success message from the tool to remind that changes require a reconfig before they take effect.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-24 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1b409ea261a13cb10dfc36ffa23222f6c8f04cb5\">[45657]</a></span>: add to condor_config_val doc a line that indicates -rset wins over -set. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5215\" onclick=\"get_ticket_and_populate_wrapper('5215'); return false;\" title=\"condor_config_val -set doesn't take effect until after restart\">#5215</a></span> this commit also changes the output message from condor_config_val -set and -rset to indicate that the change will not take effect until reconfig. ===VersionHistory:None===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2015-Aug-25 15:23", "status": "resolved", "created": "2015-Aug-12 10:09", "fixed_version": "2015-Aug-12 10:09", "broken_version": "v080208", "priority": "1", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "wenger", "rust": "a28543", "customer_group": "users", "visibility": "public", "notify": "wenger@cs.wisc.edu, tannenba@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}