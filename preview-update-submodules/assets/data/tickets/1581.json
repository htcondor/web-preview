{"id": 1581, "title": "Ticket #1581: Seperate scheduler and submitter ad types", "description": "<blockquote>\nAs an old compatibility hack, submitter ads sent to the collector by the schedd used to have a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> of \"Scheduler\", but ClassAd::GetMyTypeName() would return \"Submitter\" if the ad really was a submitter ad. How did it distinguish between submitter ads and real scheduler ads? Scheduler ads have a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumUsers\" title=\"Num Users\">NumUsers</a></span> attribute and submitter ads don't.\n\n<p>In Condor 7.3.2, this hack was lifted out of the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> library, while mostly maintaining compatibility. Submitter ads started having a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> of \"Submitter\" (enforced by both the collector and the schedd). The <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorQuery\" title=\"Condor Query\">CondorQuery</a></span> class still asked for \"Scheduler\" ads, but the collector started converting that to \"Submitter\" (it can distinguish queries for scheduler vs submitters ads because they use different command numbers).\n\n</p><p>The compatibility hacks need to be slowly phased out. For Condor 7.5.4, the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorQuery\" title=\"Condor Query\">CondorQuery</a></span> object should stop using ad type \"Scheduler\" when asking the collector about submitter ads.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Aug-16 14:04:28 by jfrey:</em> <br/>\n\nPushed change to master for 7.5.4. <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorQuery\" title=\"Condor Query\">CondorQuery</a></span> no longer asks for ad type \"Scheduler\" when querying for submitter ads.\n\n<p></p><hr/>\n<em>2010-Aug-17 04:50:14 by matt:</em> <br/>\n\nHow about making this an enhance ticket and creating another for the 7.7 change.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nRemove compatibility checks for submitter/scheduler ads</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2505\" onclick=\"get_ticket_and_populate_wrapper('2505'); return false;\" title=\"Dedicated scheduler sets wrong MyType for submitter ads\">#2505</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDedicated scheduler sets wrong <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> for submitter ads</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-16 13:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0bcaa6d0e7170ba3acc8a77710a57bc62067c36b\">[18806]</a></span>: Remove Scheduler/Submitter ad type hack in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorQuery\" title=\"Condor Query\">CondorQuery</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1581\" onclick=\"get_ticket_and_populate_wrapper('1581'); return false;\" title=\"Seperate scheduler and submitter ad types\">#1581</a></span> When querying for submitter ads, use ad type \"Submitter\" instead of \"Scheduler\". This is one step in eliminating an old compatibility hack where submitter ads had a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> of \"Scheduler\".\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-May-19 14:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d7d88fd8b3fe922a521a65e4a0ee388012d088ea\">[14715]</a></span>: Lift Submitter/Scheduler <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> hack out of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>. As an old compatibility hack, submitter ads sent to the collector by the schedd have a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> of \"Scheduler\", but ClassAd::GetMyTypeName() would return \"Submitter\" if the ad really is a submitter ad. How does it distinguish between submitter ads and\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Aug-19 09:25", "status": "resolved", "created": "2010-Aug-16 12:09", "fixed_version": "2010-Aug-16 12:09", "broken_version": "v070200", "priority": "4", "subsystem": "", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}