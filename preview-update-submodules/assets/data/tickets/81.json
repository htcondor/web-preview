{"id": 81, "title": "Ticket #81: Unify log timestamp formatting", "description": "<blockquote>\nTimestamp printing is currently duplicated in several places.  This is obviously bad, because they can drift, and apparently the already have.  Unify them all to use a single timestamp formatter/printer.  Note that this only applies to the \"normal\" log files, typically printed with dprintf.  Other \"logs\", like the user logs, are parsed by other programs, and messing with their format is very dangerous.\n\n<p>Some of the code in question:\n\n</p><p></p><ul>\n<li><strong>condor_util_lib/dprintf.c</strong>\n<ul>\n<li>272:                        fprintf( DebugFP, \"%d/%d %02d:%02d:%02d \",\n</li><li>822:        snprintf( header, sizeof(header), \"%d/%d %02d:%02d:%02d \",\n</li></ul>\n</li><li><strong>condor_dagman/debug.cpp</strong> - Notes \" This nasty bit of code is copied in spirit from dprintf.c\"\n<ul>\n<li>191:            tstamp.sprintf(\"%d/%d %02d:%02d:%02d \",\n</li></ul>\n</li><li><strong>condor_daemon_core.V6/daemon_core_main.cpp</strong> - Not strictly a log timestamp, but similar use\n<ul>\n<li>1817:       dprintf(D_ALWAYS,\"** Log last touched %d/%d %02d:%02d:%02d\\n\",</li></ul>\n</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2009-Jan-23 14:08:16 by adesmet:</em> <br/>\n\nPartially implemented on the trunk with the function formatTimeHeader.  Only used once, condor_util_lib/dprintf.c:272.  The other cases don't yet.  It's all the more important now, because formatTimeHeader uses DEBUG_TIME_FORMAT to let the user replace it.\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1130\" onclick=\"get_ticket_and_populate_wrapper('1130'); return false;\" title=\"Add year to timestamps in user logs and dagman.out\">#1130</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd year to timestamps in user logs and dagman.out</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Nov-30 14:36", "status": "new", "created": "2009-Jan-23 13:52", "fixed_version": "2009-Jan-23 13:52", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "PitS", "derived_from": "#82", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}