{"id": 6412, "title": "Ticket #6412: HAD transferer crashes when peer can't connect", "description": "<blockquote>\nWhen HAD wants to synchronize the accountant data between central managers, both condor_replication daemons spawn condor_transferer processes, one of which connects to the other to do the data transfer. The listening transferer assumes its peer successfully connects to it. This causes it to crash if the connection attempt fails (say due to a firewall). It should check if a connection was established and exit with an error if there isn't one.</blockquote>", "remarks": "<blockquote>\n<em>2017-Sep-20 17:33:17 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Looks good to me.\n\n</p><p></p><hr/>\n<em>2017-Oct-25 10:25:31 by tim:</em> <br/>\n\n<strong>Doc Review:</strong> OK</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6413\" onclick=\"get_ticket_and_populate_wrapper('6413'); return false;\" title=\"Make HAD replication work with shared port and IPv6\">#6413</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMake HAD replication work with shared port and IPv6</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Sep-19 14:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/01612bc8a9d8191113c3680e0c3f78f583e28f57\">[52382]</a></span>: Docs for HAD transferer crash bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6412\" onclick=\"get_ticket_and_populate_wrapper('6412'); return false;\" title=\"HAD transferer crashes when peer can't connect\">#6412</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Sep-19 13:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ceeee8e0a5a73f34666f7ecdbacbc9f98ae474e6\">[52381]</a></span>: HAD transferer now checks for successful connection. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6412\" onclick=\"get_ticket_and_populate_wrapper('6412'); return false;\" title=\"HAD transferer crashes when peer can't connect\">#6412</a></span> Previously, it assumed a connection was established and crashed if that wasn't true.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Oct-25 10:25", "status": "resolved", "created": "2017-Sep-19 13:47", "fixed_version": "2017-Sep-19 13:47", "broken_version": "", "priority": "4", "subsystem": "DaemonsCM", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}