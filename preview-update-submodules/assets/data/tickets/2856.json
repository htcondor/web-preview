{"id": 2856, "title": "Ticket #2856: add pow function to ClassAds", "description": "<blockquote>\n<span class=\"quote\">ClassAds</span> needs to have a pow function so that we can use it in an expression when defining the 'cost' of carving off more than 1 cpu from a partitionable slot.\n\n<p>At some point in the near future we will also want to be able to quantize request_memory etc before we use the value to carve off a dynamic slot.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Mar-07 10:59:30 by jfrey:</em> <br/>\n\nMy comments on the code:\n\n<p>pow():\n</p><ul>\n<li>Why add 0.5 to the result in the integer case before casting?\n</li><li>In the integer case, you cast one int argument to double, but not the other.\n</li><li>We have unintuitive behavior where pow(2, 3) returns an integer, but pow(\"2\", \"3\") returns a real. Probably not worth worrying about.\n</li><li>We try to catch division by zero and make the result Error. For pow(), we're not catching results that are infinity or NaN. Should we?\n</li></ul>\n\n<p>quantize():\n</p><ul>\n<li>I think it's ok to return Error if elements in the list can't be converted to reals.\n</li><li>Inconsistency: quantize(0.5,1) evaluates to a real, but quantize(0.5,{1}) evaluates to an integer.</li></ul>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3967\" onclick=\"get_ticket_and_populate_wrapper('3967'); return false;\" title=\"ClassAd quantize() can fail when in a cached expression\">#3967</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> quantize() can fail when in a cached expression</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-15 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/81e34c00c757e3dfd3769fbb54fdeb0e28a62170\">[30918]</a></span>: add defns for new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> functions: pow() and quantize() ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2856\" onclick=\"get_ticket_and_populate_wrapper('2856'); return false;\" title=\"add pow function to ClassAds\">#2856</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-01 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/37bc43c99d3d1a790a949ab0dc6eaa361c990de3\">[30763]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2856\" onclick=\"get_ticket_and_populate_wrapper('2856'); return false;\" title=\"add pow function to ClassAds\">#2856</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-01 14:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b63a60d4257fdca96fffd3775d9dce191fc0623e\">[30760]</a></span>: add pow and quanitize functions to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> for use by partitionable slot code. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2856\" onclick=\"get_ticket_and_populate_wrapper('2856'); return false;\" title=\"add pow function to ClassAds\">#2856</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-May-09 13:40", "status": "resolved", "created": "2012-Mar-01 14:29", "fixed_version": "2012-Mar-01 14:29", "broken_version": "v070705", "priority": "2", "subsystem": "", "assigned_to": "johnkn", "derived_from": "#2842", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}