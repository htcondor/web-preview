{"id": 5166, "title": "Ticket #5166: Scheduler universe jobs should default to \"correct\" schedd", "description": "<blockquote>\nThe schedd should automatically set the following two environment variables correctly for the scheduler universe:\n\n<p></p><div class=\"verbatim\">\n<pre>_condor_SCHEDD_DAEMON_AD_FILE\n_condor_SCHEDD_ADDRESS_FILE\n</pre></div>\n\n\n<p>When there are multiple schedds per host, this will ensure that any condor_dagman instances will submit to the schedd they are running under - instead of the default schedd for the host.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Jul-28 14:18:21 by bbockelm:</em> <br/>\n\nWhoops - set 'creator' to Jaime instead of assigned.  Reassigning for review.\n\n<p></p><hr/>\n<em>2015-Aug-07 11:29:19 by jfrey:</em> <br/>\n\nI believe this is only an issue when you have multiple schedds sharing the same configuration file and you use environment variables to change the SPOOL directory. In this situation, would it be better to have an option for scheduler universe jobs to inherit the schedd's environment, like we allow with the starter?\n\n<p></p><hr/>\n<em>2015-Aug-07 11:34:30 by jfrey:</em> <br/>\n\nOn second thought, this can also be a problem when each schedd has its own configuration file. But propagating CONDOR_CONFIG from the schedd's environment sounds like a better solution, as there could be parameters beyond SCHEDD_DAEMON_AD_FILE and SCHEDD_ADDRESS_FILE that DAGMan should know about from the schedd's configuration.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-20 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58f52d59a0dc783a1cec3f909204a20dd88fafec\">[46046]</a></span>: Version history for scheduler universe env.var. changes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5166\" onclick=\"get_ticket_and_populate_wrapper('5166'); return false;\" title='Scheduler universe jobs should default to \"correct\" schedd'>#5166</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-22 22:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6805108a8aa9cb7f617e6f56926a234355645010\">[45389]</a></span>: Set environment variables so scheduler job will find schedd. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5166\" onclick=\"get_ticket_and_populate_wrapper('5166'); return false;\" title='Scheduler universe jobs should default to \"correct\" schedd'>#5166</a></span> This commit sets _condor_SCHEDD_DAEMON_AD_FILE _condor_SCHEDD_ADDRESS_FILE environment variables for all scheduler universe jobs; this allows the job to find the schedd they were launched under.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Oct-20 16:44", "status": "resolved", "created": "2015-Jul-20 22:11", "fixed_version": "2015-Jul-20 22:11", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "#5162", "creator": "bbockelm", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}