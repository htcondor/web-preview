{"id": 2093, "title": "Ticket #2093: add definitions of undocumented negotiator classad attributes", "description": "<blockquote>\nMany new statistical attributes about the negotiation cycle (LastNegotiationCycleXXXXXX) were added to the Negotiator Ad as part of <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=1705\" onclick=\"get_ticket_and_populate_wrapper('1705'); return false;\" title=\"RFE: Advertise some additional performance-related negotiator stats\">#1705</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1303\" onclick=\"get_ticket_and_populate_wrapper('1303'); return false;\" title=\"JobRouter hard-codes path to instance lock as /tmp\">#1303</a></span>, but only 7 out of 20 ended up being documented in the <em>Negotiator Classad Attributes</em> section of Appendix A in the Manual.  Of the 7 that were documented, there are errors: for instance, in the v7.6.0 Manual, <code>LastNegotiationCycleDuration&lt;X&gt;</code> is documented twice on the same page with conflicting definitions.\n\n<p>The definitive list of attributes that must be documented appears to be:\n\n</p><p></p><ol>\n<li><span class=\"quote\">LastNegotiationCycleActiveSubmitterCount</span>\n</li><li><span class=\"quote\">LastNegotiationCycleCandidateSlots</span>\n</li><li><span class=\"quote\">LastNegotiationCycleDuration</span>\n</li><li><span class=\"quote\">LastNegotiationCycleEnd</span>\n</li><li><span class=\"quote\">LastNegotiationCycleMatches</span>\n</li><li><span class=\"quote\">LastNegotiationCycleMatchRate</span>\n</li><li><span class=\"quote\">LastNegotiationCycleMatchRateSustained</span>\n</li><li><span class=\"quote\">LastNegotiationCycleNumIdleJobs</span>\n</li><li><span class=\"quote\">LastNegotiationCycleNumJobsConsidered</span>\n</li><li><span class=\"quote\">LastNegotiationCycleNumSchedulers</span>\n</li><li><span class=\"quote\">LastNegotiationCyclePeriod</span>\n</li><li><span class=\"quote\">LastNegotiationCyclePhase&lt;X&gt;Duration</span>\n</li><li><span class=\"quote\">LastNegotiationCycleRejections</span>\n</li><li><span class=\"quote\">LastNegotiationCycleSlotShareIter</span>\n</li><li><span class=\"quote\">LastNegotiationCycleSubmittersFailed</span>\n</li><li><span class=\"quote\">LastNegotiationCycleSubmittersOutOfTime</span>\n</li><li><span class=\"quote\">LastNegotiationCycleSubmittersShareLimit</span>\n</li><li><span class=\"quote\">LastNegotiationCycleTime</span>\n</li><li><span class=\"quote\">LastNegotiationCycleTotalSlots</span>\n</li><li><span class=\"quote\">LastNegotiationCycleTrimmedSlots</span></li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Apr-26 13:50:57 by tannenba:</em> <br/>\n\nErik, as you wrote the code, could you please either update the Manual, or add a remark in this ticket w/ the info and ask Karen to insert it into the manual?  Thanks!\n\n<p></p><hr/>\n<em>2011-Apr-26 14:19:09 by eje:</em> <br/>\n\nI had attached a doc patch to an abandoned version of the ticket (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=1705\" onclick=\"get_ticket_and_populate_wrapper('1705'); return false;\" title=\"RFE: Advertise some additional performance-related negotiator stats\">#1705</a></span>) -- I attached a copy here as well.\n\n<p></p><hr/>\n<em>2011-Apr-26 14:27:33 by tannenba:</em> <br/>\n\nPerfect, thanks Erik!  Re-assigning this ticket to Karen for merging into the Manual.\n\n<p></p><hr/>\n<em>2011-Jun-28 12:56:34 by smoler:</em> <br/>\n\nThe diff provide in the doc patch does not contain (from Todd's list) definitions for\n\n<p>14.  <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastNegotiationCycleSlotShareIter\" title=\"Last Negotiation Cycle Slot Share Iter\">LastNegotiationCycleSlotShareIter</a></span>\n\n</p><p>17.  <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastNegotiationCycleSubmittersShareLimit\" title=\"Last Negotiation Cycle Submitters Share Limit\">LastNegotiationCycleSubmittersShareLimit</a></span>\n\n</p><p>18.  <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastNegotiationCycleTime\" title=\"Last Negotiation Cycle Time\">LastNegotiationCycleTime</a></span>\n\n</p><p>And, the current 7.6.1 appendix section contains a definition of\nLastNegotiationCycleStartTime&lt;X&gt;, which does NOT appear in Todd's list.  I've commented this one out of the manual unless I hear that it was incorrectly missing from Todd's list.\n\n</p><p>Please provide definitions (and correct attribute names) for these 3 as remarks (not a diff, since the LaTeX version that I have will not work with a doc patch), or let me know that these 3 are not actually attributes.\n\n</p><p></p><hr/>\n<em>2011-Jul-14 10:54:32 by smoler:</em> <br/>\n\nThe definition given in the additional patch for <code>LastNegotiationCycleSlotShareIter&lt;X&gt;</code> is unusable.  Please define what your invented term \"Allocation Round\" refers to.  When writing quality documentation, it is generally best to keep the number of invented terms to the minimum possible. Further, if you <em>must</em> introduce a new term, then you have to define your term!  Otherwise, those trying to use the documentation don't know what you are talking about.\n\n<p><em>Give your definition in a remark to this ticket.  Do not give an additional patch, as it cannot be used!</em>\n\n</p><p>Hopefully, final question:  was the existing documentation  of the nonexistent attribute <code>LastNegotiationCycleStartTime&lt;X&gt;</code> simply an incorrect attribute name?  Seems like the definition is the same as for  <code>LastNegotiationCycleTime&lt;X&gt;</code>. If yes, you blew it in your naming, as the 'CycleStartTime' implies the definition of a start time, while 'CycleTime' does not.\n\n</p><p></p><hr/>\n<em>2011-Jul-14 11:11:50 by eje:</em> <br/>\n\nAn Allocation Round is a sequence of quota allocation, followed by negotitation.  In pre-HGQ negotiation, this only happened once.  Now, it may be allowed to happen multiple times.  An accounting group may not be able to use is allotted quota, in which case that quota may be re-assigned to other accounting groups in a subsequent Allocation Round.\n\n<p>see also: <a class=\"external\" href=\"http://www.cs.wisc.edu/condor/manual/v7.6/3_3Configuration.html#19800\">http://www.cs.wisc.edu/condor/manual/v7.6/3_3Configuration.html#19800</a>\n\n</p><p></p><hr/>\n<em>2011-Jul-14 11:18:28 by eje:</em> <br/>\n\nRegarding the non-existent attribute LastNegotiationCycleStartTime&lt;X&gt;, I assume that I introduced it as an accidental (and also mis-typed) copy of the <strong>actual</strong> attribute LastNegotiationCycleTime&lt;X&gt;.\n\n<p>The attribute LastNegotiationCycleTime&lt;X&gt; was introduced by somebody else, at some earlier time.  It isn't one of the ones I created.\n\n</p><p></p><hr/>\n<em>2011-Jul-14 11:40:09 by smoler:</em> <br/>\n\nDocumentation of remaining attributes went into V7_6_2-branch.  Fixed version field remains 7.6.1, as most of the info went out with the 7.6.1 release.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/332/new_neg_stats_doc_uw.patch\">new_neg_stats_doc_uw.patch</a>\n6690 bytes added by eje on 2011-Apr-26 19:17:18 UTC.\n<br/>\nDoc patch, moved from <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=1705\" onclick=\"get_ticket_and_populate_wrapper('1705'); return false;\" title=\"RFE: Advertise some additional performance-related negotiator stats\">#1705</a></span><br/>\n</li><li><a href=\"../files/409/gt2093_additional_attr_doc.patch\">gt2093_additional_attr_doc.patch</a>\n3303 bytes added by eje on 2011-Jul-12 18:54:47 UTC.\n<br/>\nFills in descriptions for:\nLastNegotiationCycleSlotShareIter&lt;X&gt;\nLastNegotiationCycleSubmittersShareLimit&lt;X&gt;\nLastNegotiationCycleTime&lt;X&gt;\n\n<p>Also removes spurious LastNegotiationCycleStartTime&lt;X&gt;\n<br/>\n</p></li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jul-14 11:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d0bc74858b4edf22a3205756cb753d6d1f88064f\">[26065]</a></span>: completed definitions of negotiator performance <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attributes ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2093\" onclick=\"get_ticket_and_populate_wrapper('2093'); return false;\" title=\"add definitions of undocumented negotiator classad attributes\">#2093</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-29 10:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/07b76f4cf87da21c8896ee078c0488b6f3c82569\">[26053]</a></span>: added most (but not all) missing LastNegotiationCycle* negotiator <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attribute definitions; gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2093\" onclick=\"get_ticket_and_populate_wrapper('2093'); return false;\" title=\"add definitions of undocumented negotiator classad attributes\">#2093</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2011-Jul-14 11:40", "status": "resolved", "created": "2011-Apr-26 13:49", "fixed_version": "2011-Apr-26 13:49", "broken_version": "v070505", "priority": "3", "subsystem": "Daemons", "assigned_to": "smoler", "derived_from": "#1497", "creator": "tannenba", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "tannenba@cs.wisc.edu, smoler@cs.wisc.edu, danb@cs.wisc.edu, eje@redhat.com", "due_date": ""}