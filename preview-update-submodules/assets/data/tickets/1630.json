{"id": 1630, "title": "Ticket #1630: condor_chirp put segfaults when passed only 1 file name", "description": "<blockquote>\ncondor_chirp segfaults when using the put option with only one local file name and no remote file name.\n\n<p></p><div class=\"verbatim\">\n<pre>Program received signal SIGSEGV, Segmentation fault.\n0x080f3f29 in vsprintf_chirp (command=0xbfffc204 \"open \",\n    fmt=0x83a4ebb \"open %s %s %d\\n\", args=0xbfffc61c \"qM:\\b\\377\\001\")\n    at chirp_client.c:629\n629                                     while(*w) {\n(gdb) bt\n#0  0x080f3f29 in vsprintf_chirp (command=0xbfffc204 \"open \",\n    fmt=0x83a4ebb \"open %s %s %d\\n\", args=0xbfffc61c \"qM:\\b\\377\\001\")\n    at chirp_client.c:629\n#1  0x080f3fc9 in simple_command (c=0x84602f8, fmt=0x83a4ebb \"open %s %s %d\\n\")\n    at chirp_client.c:665\n#2  0x080f38fd in chirp_client_open (c=0x84602f8, path=0x0,\n    flags=0x83a4d71 \"cwat\", mode=511) at chirp_client.c:397\n#3  0x080f2743 in chirp_put_one_file (local=0xbfffe9d3 \"file\", remote=0x0,\n    mode=0x83a4d71 \"cwat\", perm=511) at condor_chirp.cpp:165\n#4  0x080f2a6a in chirp_put (argv=0xbfffe814) at condor_chirp.cpp:263\n#5  0x080f2edc in main (argc=3, argv=0xbfffe814) at condor_chirp.cpp:374\n</pre></div>\n\n\n<p>The chirp_put() function in condor_chirp.cpp doesn't check the number of arguments. Checking that the value of argc is at least 4  should be a simple solution.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-01 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f11d0c3df271c5c89d55e721260514f0ad41e1f\">[18901]</a></span>: Updated condor_chirp put to check that both a local file and a remote file are provided. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1630\" onclick=\"get_ticket_and_populate_wrapper('1630'); return false;\" title=\"condor_chirp put segfaults when passed only 1 file name\">#1630</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Sep-01 10:57", "status": "resolved", "created": "2010-Aug-30 15:36", "fixed_version": "2010-Aug-30 15:36", "broken_version": "v070000", "priority": "4", "subsystem": "Tools", "assigned_to": "slauson", "derived_from": "#1628", "creator": "slauson", "rust": "", "customer_group": "other", "visibility": "public", "notify": "slauson@cs.wisc.edu", "due_date": ""}