{"id": 566, "title": "Ticket #566: Quill exceeding QUILL_DBSIZE_LIMIT warning, claims 75%, actually 100%", "description": "<blockquote>\nIn ManagedDatabase::PurgeDatabase() in ManageDatabase.cpp:\n\n<p></p><ul>\n<li>around line 225: \"/* if dbsize is bigger than 75% the dbSizeLimit, send a\"\n</li><li>around line 243: \"bigger than 75 percent of the limit (%d GB). Please \"\n</li></ul>\n\n<p>The actual test reads:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">\t\tif (dbsize/1024 &gt; dbSizeLimit) {\n</pre></div>\n\n\n<p>As best I can tell, neither dbsize nor dbSizeLimit has been modified to account for the \"75%\" described in the comment and email message.  (dbsize is in MB, while dbSizeLimit is in GB, thus the /1024.)\n\n</p><p>Fix: Either omit the references to 75% and report that the dbsize now exceeds the limit, or add a \"*.75\" somewhere, probably like so:\n</p><div class=\"code\">\n<pre class=\"code\">\t\tif (dbsize/1024 &gt; 0.75*dbSizeLimit) {\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Aug-23 17:07:50 by adesmet:</em> <br/>\n\nBulk change of target version from v070402 to v070404 using ./ticket_target_mover.\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Jun-04 15:02", "status": "new", "created": "2009-Jun-15 16:06", "fixed_version": "2009-Jun-15 16:06", "broken_version": "", "priority": "5", "subsystem": "Quill", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}