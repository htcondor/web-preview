{"id": 871, "title": "Ticket #871: condor_q -xml -format changed behavior", "description": "<blockquote>\nUpon upgrading to a pre-release of 7.4.0, CMS found that the behavior of the following query changed in a way that broke the prodAgent instance serving the OSG:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">condor_q -xml -format \"%s\" Attr1+Attr2+Attr3\n</pre></div>\n\n\n<p>Prior to 7.3.2, the behavior of the above query was to produce xml output including all of the specified attributes (plus a few others that were always there by mistake/default).  In 7.3.2 and the current pre-release of 7.4.0, the effect was to output an empty ad.\n\n</p><p>The workaround is to query in 7.4.0 using the new syntax:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_q -xml -attributes Attr1,Attr2,Attr3\n</pre></div>\n\n\n<p>but this does no work with older condor versions.\n\n</p><p>A different workaround is to use multiple -format specifications:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_q -xml -format \"%s\" Attr1 -format \"%s\" Attr2 -format \"%s\" Attr3\n</pre></div>\n\n\n<p>However, this change in behavior was not intentional and could cause problems for more people.  I am making a patch that fixes it.  I would like to get this into 7.4.0 so that there is no stable series version with the changed behavior.</p></blockquote>", "remarks": "<blockquote>\nThe decision was to push this patch in 7.4.1.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-04 10:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bed76319ade43aeecad84b14fb9d12478c5e1f14\">[25091]</a></span>: Documented fix for condor_q -xml -format problem. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=871\" onclick=\"get_ticket_and_populate_wrapper('871'); return false;\" title=\"condor_q -xml -format changed behavior\">#871</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Oct-20 12:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1d318a1846116128e69903e9cab206fc1ab9bf3\">[16129]</a></span>: Fixed changed behavior of condor_q -xml -f \"%s\" Attr1+Attr2. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=871\" onclick=\"get_ticket_and_populate_wrapper('871'); return false;\" title=\"condor_q -xml -format changed behavior\">#871</a></span> The behavior was unintentionally changed in 7.3.2. It resulted in an empty ad being displayed, instead of an ad containing Attr1 and Attr2.  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Feb-01 11:05", "status": "resolved", "created": "2009-Oct-20 12:11", "fixed_version": "2009-Oct-20 12:11", "broken_version": "v070302", "priority": "4", "subsystem": "Tools", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "dan@hep.wisc.edu", "due_date": ""}