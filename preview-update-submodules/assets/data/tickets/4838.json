{"id": 4838, "title": "Ticket #4838: HTCondor 8.3.3 excepts on start-up on SL 6.3", "description": "<blockquote>\nTurned out the problem was that if asked to resolve a host with one AAAA DNS and one A DNS record, the version of getaddrinfo() on SL 6.3 would return a two-element list, where the first element was the correct IPv4 record and the second element was completely bogus.  This tripped an except in the condor_sockaddr code, which checks to make sure that the address family of the socket is something we can work with.\n\n<p>Enabling IPv6 works around this problem.\n\n</p><p>Worked around by never asking getaddrinfo() to filter by address family.  Instead, filter them out in our address info iterator class.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Jan-29 10:43:13 by tlmiller:</em> <br/>\n\nConfirmed as a bug in 8.3.3 and fixed before release; no version history necessary.\n\n<p></p><hr/>\n<em>2015-Feb-02 14:03:48 by tlmiller:</em> <br/>\n\nCoverity discovered a problem with this fix, which the patch in the check-in below remedies); this will not need documentation if merged to 8.3.3 (see above).  Please code review.  (The flag could be a global, but then we'd have to be sure to reset it on every reconfig; I don't think we maintain an address iterator across reconfigs, but changing one in mid-iteration seems like a good way to break things.  And this is a way smaller change.)</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-02 11:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/28a48f3a1a388b1de74c602bdad570b32bd1af6a\">[42509]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4838\" onclick=\"get_ticket_and_populate_wrapper('4838'); return false;\" title=\"HTCondor 8.3.3 excepts on start-up on SL 6.3\">#4838</a></span>) Fix a bug (uncopied member) in the work-around.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-22 14:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f9c05b610477150ce885993ffb4019b602f24fe3\">[42318]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4838\" onclick=\"get_ticket_and_populate_wrapper('4838'); return false;\" title=\"HTCondor 8.3.3 excepts on start-up on SL 6.3\">#4838</a></span>) Worked around a bug in getaddrinfo() on SL 6.3.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Feb-16 15:00", "status": "resolved", "created": "2015-Jan-22 14:08", "fixed_version": "2015-Jan-22 14:08", "broken_version": "", "priority": "1", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}