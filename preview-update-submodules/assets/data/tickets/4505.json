{"id": 4505, "title": "Ticket #4505: service condor stop emits syntax error after condor_off", "description": "<blockquote>\nA relatively minor problem in the init.d script for Condor causes errors to be incorrectly printed to the screen (unsure if stdout/err) upon stopping the HTCondor service after a graceful shutdown of the startd. Steps to reproduce on Debian 7:\n\n<p></p><ol>\n<li>Run condor_off $nodename from central manager\n</li><li>Wait for startd to shutdown leaving procd and condor_master\n</li><li>On execute node, run \"service condor stop\". Get this output:\n</li></ol>\n\n<p></p><pre>  root@execute1000:~# service condor stop\n  Shutting down Condor (fast-shutdown mode)...  /etc/init.d/condor: 1: kill: Usage: kill [-s sigspec | -signum | -sigspec] [pid | job]... or\n  kill -l [exitstatus]\n  done.\n</pre>\n\n<p>Despite error, Condor has shutdown.\n\n</p><p>Normal behavior:\n\n</p><p></p><pre>  root@execute1000:~# service condor start\n  Starting up Condor...    done.\n  root@execute1000:~# service condor stop\n  Shutting down Condor (fast-shutdown mode)...  done.</pre>\n</blockquote>", "remarks": "<blockquote>\nI'm assuming based on the age of this ticket, and the fact that (I think?) it's just an annoyance and UI issue and not a functional problem, that it's safe to demote to priority 5.  If I'm wrong, please speak up.\n\n<p></p><hr/>\n<em>2019-Apr-10 15:41:15 by tpdownes:</em> <br/>\n\nI presume it's worth killing based on pre-systemd-ness. The main impact of this (going by memory) is that configuration management systems want to know the state of services and do so through commands like \"systemctl status condor.service\".\n\n<p>If \"service X stop\" returns something other than code 0 then puppet borks and a chain of other configuration management problems can occur where a node stops properly updating its config. So it's important that systemctl/service commands be \"clean\" in their behavior.\n\n</p><p>Relatedly: Condor is a giant problem in state management because (effectively) condor_master knows more state than systemd.\n\n</p><p>I'd just close it but wanted to provide some context.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2019-Apr-10 15:41", "status": "new", "created": "2014-Aug-01 10:56", "fixed_version": "2014-Aug-01 10:56", "broken_version": "v080200", "priority": "5", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "downes@uwm.edu,pcouvare@caltech.edu", "due_date": ""}