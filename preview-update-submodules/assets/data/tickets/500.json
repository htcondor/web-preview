{"id": 500, "title": "Ticket #500: Run cross-tests on additional flavours of Windows", "description": "<blockquote>\nEnable cross testing for:\n\n<p></p><ul>\n<li>Windows 7\n</li><li>Windows 7 64-bit\n</li><li>Vista\n<ul>\n<li>2009-05-20: Work started\n</li></ul>\n</li><li>Vista 64-bit\n</li><li>Server 2008\n</li><li>Server 2008 64-bit\n</li><li>Server 2003\n</li><li>Server 2003 64-bit\n</li><li>XP\n<ul>\n<li>2009-05-20: Done: we build and test here\n</li></ul>\n</li><li>XP 64-bit\n<ul>\n<li>2009-05-20: Work started\n</li><li>2009-07-10: The resolved DNS issues (see \"2009-May-26 14:40:42 by tannenba\" for problem\") should fix some of the problems we were seeing on this platform\n</li></ul>\n</li><li>2000\n</li></ul>\n\n<p>It is my opinion that supporting the other flavors can be accomplished by using a beefy machine running several Windows VMs.  We won't build directly on them, so the turn around on the tests should be very quick.  That said, it may also be worth building Condor continuously on a different flavor of Windows than we currently do.  This could help identify any Windows version specific dependencies/assumptions.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-May-21 17:15:15 by tannenba:</em> <br/>\n\nI would argue that cross-testing on XP64 and Vista are <em>not</em> done, as the cross tests fail before they even get off the ground.  A very quick look at <a class=\"external\" href=\"http://nmi-s006.cs.wisc.edu/results/Run-condor-cross-details.php?runid=154284&amp;platform=nmi:x86_winnt_5.1&amp;user=cndrauto\">last nights results</a> shows the tests didn't even succeed at submitting jobs, due to either missing test subdirectories (XP64) or faulty Perl/Cygwin installation (Vista).\n\n<p>Changing the status at the top of the ticket to reflect this.\n\n</p><p></p><hr/>\n<em>2009-May-21 17:23:28 by tannenba:</em> <br/>\n\nBased upon feedback from users, including support users, lets prioritize XP64, Server 2003 64bit, and Vista.\n\n<p></p><hr/>\n<em>2009-May-21 17:51:29 by tannenba:</em> <br/>\n\nAlso, we don't make changes to v7.2 tests except for critical known problems.  The cross-testing should be added to the master only, and reverted from the v7.2-branch.\n\n<p></p><hr/>\n<em>2009-May-25 15:35:11 by burnett:</em> <br/>\n\n&gt; Also, we don't make changes to v7.2 tests except for critical known problems.\n\n<p>I'd argue that this is not a change in the tests, since it's only running them on more platforms.  I would think this is a good idea, especially if something breaks on the stable branch, and not the master, on a flavor that we don't currently test on.  If users don't like the fact that we are not testing 64-bit, I'm sure they'd hate the idea that we turned testing on for 64-bit, but not for the stable branch.\n\n</p><p></p><hr/>\n<em>2009-May-26 13:59:48 by tannenba:</em> <br/>\n\nYour above post makes several good points.  However, we debated this at length in FW and decided that in the final evaluation, changing the test situation on the stable branch in general the cons outweighed the pros (such as the pros you mention above).\n\n<p>If you wish to re-open the debate, you may do so.   But until a different decision is made, please follow our team's policy and only fix bugs to tests on the stable branch -- do not add \"new\" tests (including enabling tests for the first time).\n\n</p><p></p><hr/>\n<em>2009-May-26 14:40:42 by tannenba:</em> <br/>\n\nbgietzel points out the following that may explain why cross-tests are failing on XP64 :\n\n<p></p><div class=\"verbatim\">\n<pre>\nERROR: 05/20 23:05:13 Can't find address for credd nmi-build41.batlab.cs.wisc.edu\nERROR: 05/20 23:05:13 STORE_CRED: In mode 'query'\nERROR: 05/20 23:05:13 Starting a command on a REMOTE schedd\nERROR: 05/20 23:05:14 attempt to connect to &lt;192.168.0.43:3202&gt; failed: connect errno = 10061 connection refused.\nERROR: 05/20 23:05:14 STORE_CRED: Failed to start command.\nERROR: 05/20 23:05:14 STORE_CRED: Unable to contact the REMOTE schedd.\nERROR:\nERROR: ERROR: No credential stored for condor-reuse-slot2@NMI-BUILD41\nERROR:\nERROR: \tCorrect this by running:\nERROR: \tcondor_store_cred add\nERROR: Output done:\n\n</pre></div>\n\n\n<p></p><hr/>\n<em>2009-May-26 14:56:19 by burnett:</em> <br/>\n\nFrom random email:\n\n<p>&gt;&gt; + Started cross tests for Windows.  Nothing but red.\n&gt;&gt;  Looks like the machines will need a little love  before they are\n&gt;&gt; ready to do their job.\n&gt;\n&gt;Is there an associated ticket I can use to track the issue(s)?  From\n&gt;the logfiles of the test runs I checked last week, it looked like there\n&gt;was a problem with the Condor credd and paths, not the machines.\n\n</p><p>By machines I was referring to the general configuration, not the hardware.\nI think the credd errors are indicative of problems elsewhere, since there is no special user being used to run the job.  As for the paths, I'm not sure if it's just paths, there seems to be missing executables, like 'uptime'.  Added to that, there may be some obstacles Condor may be running into; for instance, lines like the one bellow, from the starter, are a little scary:\n\n</p><p></p><pre>  ...\n  5/25 23:25:18 perm::set_acls(C:\\Condor\\execute\\dir_1868\\userdir\\externals\\build_external): Unable to set file ACL(err=6).\n  5/25 23:25:18 perm::set_acls(C:\\Condor\\execute\\dir_1868\\userdir\\externals\\bundles): Unable to set file ACL(err=6).\n  ...\n</pre>\n\n<p></p><hr/>\n<em>2009-May-26 15:22:34 by bgietzel:</em> <br/>\n\n<div class=\"verbatim\">\n<pre>The \"Unable to set file ACL(err=6).\" messages show up on WinXP for successful jobs.  I would not consider that a cause for the recent test failures.\n</pre></div>\n\n\n<p></p><hr/>\n<em>2009-May-26 15:46:35 by bgietzel:</em> <br/>\n\nWe install a small subset of Cygwin to avoid versioning problems.  A couple of the Windows machines accidentally have more packages installed.  Do the tests actually use the 'uptime' executable or were you just pointing out that the Cygwin install seemed incomplete?\n\n<p></p><hr/>\n<em>2009-May-26 16:04:49 by burnett:</em> <br/>\n\nThe 'uptime' executable was used in one of the tests I looked at.  I'd need to back-track my steps to find which one it was.\n\n<p>As for the setacls, good to hear it's unlikely the culprit, still a little disconcerting to see them.\n\n</p><p></p><hr/>\n<em>2009-Oct-21 15:42:21 by psilord:</em> <br/>\n\nBen Burnett has left the Condor Project. This ticket is being unassigned.\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=513\" onclick=\"get_ticket_and_populate_wrapper('513'); return false;\" title='\"Unable to set file ACL\" error in NMI, when running Condor tests.'>#513</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\n\"Unable to set file ACL\" error in NMI, when running Condor tests.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-28 18:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/74c6314e10628e8a65ebba0a25ec06d72bf6711e\">[15205]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Added the ability to compile 32-bit Condor on a 64-bit Windows machine.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-13 15:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/806d46d0313ec41d5465bb2a1b430c84bc6c39b7\">[15065]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Removing Vista from cross tests, since it does not work at all yet.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-12 16:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9dd37b5f1303c6e54ca53933d06a27f686cc0ead\">[15060]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Adding Vista to cross tests, just for kicks. Since nothing seems to be happening, and seeing it fail might help.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-12 13:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1337302f775d10e581c2904ea6bdb9dcdebfc923\">[15058]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Whoops, cross tests have not prereq information to worry about. Not sure if this will help though.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-11 23:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b67ad8b3a564623c778a7da8a6c604c76fdac1e4\">[15057]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: WTF is up with this submit_file format?!... One more go.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-11 22:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4405775338def6ec744825945a4e9a15784c0921\">[15056]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: The stupid x64 machine in NMI is running Windows version 5.2, but it's advertized as 5.1... <strong>sigh</strong>  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-11 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6426f5f359018b95aec4172132ed5393e499d888\">[15054]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: One more poke at enabling cross tests on Windows x64.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-10 23:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f9dfcc8afa417eb5bfe5b70a68652420fff677e7\">[15053]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Enabling cross tests on Windows XP x64.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-May-26 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1dc897b1e8d887c998e1d8ef47000f1a85c72aa\">[14758]</a></span>: Revert \"Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Run cross-tests on Vista.\" This reverts commit 30342e3947305f7004a070d061f77bc30f0b6c5f.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-May-26 15:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1307fc28f765268618f47358c01b6c71a604e228\">[14757]</a></span>: Revert \"Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Run cross-tests on XP 64-bit.\" This reverts commit 430b29cea25b6ee85f88adb4e0f94dd1458f23ad.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-May-20 13:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/430b29cea25b6ee85f88adb4e0f94dd1458f23ad\">[14734]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Run cross-tests on XP 64-bit.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-May-20 12:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/30342e3947305f7004a070d061f77bc30f0b6c5f\">[14733]</a></span>: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=500\" onclick=\"get_ticket_and_populate_wrapper('500'); return false;\" title=\"Run cross-tests on additional flavours of Windows\">#500</a></span>: Run cross-tests on Vista.  (By Ben Burnett )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Oct-17 05:58", "status": "new", "created": "2009-May-20 12:28", "fixed_version": "2009-May-20 12:28", "broken_version": "v070300", "priority": "3", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}