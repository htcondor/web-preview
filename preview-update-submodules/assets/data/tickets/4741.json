{"id": 4741, "title": "Ticket #4741: Python bindings segfault when querying schedd", "description": "<blockquote>\nAfter specifying the port for the collector in the python bindings, querying the schedd will cause a segfault. To reproduce this, you can start a personal condor pool, submit a sleep job and run the following script:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">#!/bin/env python\n\nimport htcondor\nimport socket\nimport classad\n\nhostname = socket.gethostbyaddr(socket.gethostname())[0]\ncoll = htcondor.Collector('%s:9618' % hostname)\nad = coll.locate(htcondor.DaemonTypes.Schedd, hostname)\nschedd = htcondor.Schedd(ad)\nschedd.query()\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Dec-02 16:18:01 by blin:</em> <br/>\n\nIt looks like querying in general may be broken. Querying the collector here seems to be causing issues <a class=\"external\" href=\"https://jira.opensciencegrid.org/browse/SOFTWARE-1669?focusedCommentId=327656&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-327656\">https://jira.opensciencegrid.org/browse/SOFTWARE-1669?focusedCommentId=327656&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-327656</a>.\n\n<p></p><hr/>\n<em>2015-Jan-06 09:28:06 by bbockelm:</em> <br/>\n\nNote - I think this got fixed in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4f9e7bb1a4dc87281a62cf1bc3a6cdd4b74dc766\">[41498]</a></span>.\n\n<p></p><hr/>\n<em>2015-Jan-09 13:22:25 by tim:</em> <br/>\n\nYes, the changes for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4681\" onclick=\"get_ticket_and_populate_wrapper('4681'); return false;\" title=\"Expose classad external / internal refs through python bindings\">#4681</a></span> are confirmed to fix this problem.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-27 20:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4f9e7bb1a4dc87281a62cf1bc3a6cdd4b74dc766\">[41498]</a></span>: Provide python access to the external references in a expression. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4681\" onclick=\"get_ticket_and_populate_wrapper('4681'); return false;\" title=\"Expose classad external / internal refs through python bindings\">#4681</a></span> This allows the python bindings to access the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GetExternalReferences\" title=\"Get External References\">GetExternalReferences</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GetInternalReferences\" title=\"Get Internal References\">GetInternalReferences</a></span> functions in classad::ClassAd - essential for implementing auto-clustering.  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jan-09 13:22", "status": "resolved", "created": "2014-Nov-25 18:17", "fixed_version": "2014-Nov-25 18:17", "broken_version": "v080301", "priority": "1", "subsystem": "Libs", "assigned_to": "bbockelm", "derived_from": "#4555", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu marian.zvada@cern.ch bbockelm@cse.unl.edu cat@cs.wisc.edu tim@cs.wisc.edu", "due_date": ""}