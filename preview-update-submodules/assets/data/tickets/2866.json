{"id": 2866, "title": "Ticket #2866: Named instance settings are not overriding global settings", "description": "<blockquote>\nI've run in to a weird situation running multiple schedds on one machine using the more modern named daemon configuration syntax.\n\n<p>The following settings are defined by their default values:\n\n</p><p></p><pre>  SPOOL = $(LOCAL_DIR)/spool\n  SCHEDD_ADDRESS_FILE = $(SPOOL)/.schedd_address\n  SCHEDD_DAEMON_AD_FILE = $(SPOOL)/.schedd_classad\n</pre>\n\n<p>I started out with the following definition for a named schedd instance:\n\n</p><p></p><pre>  SCHEDD1 = $(SCHEDD)\n  SCHEDD1_ARGS = -f -local-name Q1\n  SCHEDD1_LOG = $(LOG)/ScheddLog.1\n  SCHEDD1_SPOOL = $(SPOOL)/1\n  SCHEDD.Q1.SCHEDD_NAME = Q1@$(HOSTNAME)\n  SCHEDD.Q1.SPOOL = $(SCHEDD1_SPOOL)\n  SCHEDD.Q1.SCHEDD_LOG = $(SCHEDD1_LOG)\n</pre>\n\n<p>This kind of worked. The spool directory for the instance was created and the scheduler was using it as expected.\n\n</p><p>But the .schedd_address and .schedd_classad file for the scheduler were showing up in the spool/ directory instead of the spool/1 directory where they were expected. This was causing errors in the log file on shut down when the schedds on the machine were &gt;1 because of collisions and races to delete these files from the multiple schedulers.\n\n</p><p>I had to override SCHEDD_ADDRESS_FILE and SCHEDD_DAEMON_AD_FILE explicitly for each named scheduler on the machine to get things to work:\n\n</p><p></p><pre>  SCHEDD.Q1.SCHEDD_ADDRESS_FILE = $(SCHEDD1_SPOOL)/.schedd_address\n  SCHEDD.Q1.SCHEDD_DAEMON_AD_FILE = $(SCHEDD1_SPOOL)/.schedd_classad\n</pre>\n\n<p>I was fairly certain this wasn't required in previous versions of Condor though I'd have to go back to make sure now. Should the SCHEDD.&lt;name&gt;.SPOOL setting not have overridden the global value for each of the named instances here? It seems to be an error that the global SPOOL value was used for these settings and not the per-named-instance values.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2012-Mar-06 16:12", "status": "new", "created": "2012-Mar-06 16:12", "fixed_version": "2012-Mar-06 16:12", "broken_version": "v070606", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "ichesal", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}