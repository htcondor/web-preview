{"id": 2726, "title": "Ticket #2726: condor_q fails with error, \"Two clusters with the same ID\"", "description": "<blockquote>\nBrian reports the following strange behavior using code from the current trunk:\n\n<p></p><div class=\"verbatim\">\n<pre>$ condor_q -pool red-condor.unl.edu -name red-gw2.unl.edu -format '%s' ResidentSetSize\nError: Two clusters with the same ID.\ntempCPS: -1 -1 -1 -1\nComparing against: -1 -1 -1 -1\n</pre></div>\n\n\n<p>I reverted 99f1b6974e9d7823b5587ed11860b82fde66c32f (from <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span>), recompiled condor_q (not the schedd), and the problem went away.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-21 11:07:19 by nwp:</em> <br/>\n\nOn IRC, Brian reports using the <code>-stream</code> option.  But then this code path would have been avoided, by my reading of the code.\n\n<p></p><hr/>\n<em>2011-Dec-21 11:14:32 by danb:</em> <br/>\n\nWhen using the -stream option, the error does not happen.  The error only happens when I do not use the -stream option.\n\n<p></p><hr/>\n<em>2011-Dec-21 11:17:29 by bbockelm:</em> <br/>\n\nSorry about that - I copy/pasted the working command, not the broken command, on IRC.  It does succeed with -stream.\n\n<p></p><hr/>\n<em>2011-Dec-21 11:39:56 by nwp:</em> <br/>\n\nI added code which fixed this specific problem, and tested it successfully by querying UNL. I'll leave the ticket open in case Brian turns up more issues with my fix for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span>.  We need a regression test for this; the problem happens with glideins, correct?  Is there a way to test glideins?\n\n<p></p><hr/>\n<em>2011-Dec-21 11:45:40 by danb:</em> <br/>\n\ncondor_q -analyze has a -jobads option.  I wish -jobads worked more generally in condor_q.  Then perhaps a regression test for this and other cases would be easier to write.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-21 11:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/373970bd35508190777717970417cd7f0c11331d\">[28889]</a></span>: Allow condor_q to sort with negative clusterID ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2726\" onclick=\"get_ticket_and_populate_wrapper('2726'); return false;\" title='condor_q fails with error, \"Two clusters with the same ID\"'>#2726</a></span> Fix the bug below, noticed by Brian Bockelman:\u00a0[...]\n (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Jan-29 14:08", "status": "resolved", "created": "2011-Dec-21 10:55", "fixed_version": "2011-Dec-21 10:55", "broken_version": "v070705", "priority": "3", "subsystem": "", "assigned_to": "nwp", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "bbockelm@cse.unl.edu,dan@hep.wisc.edu", "due_date": ""}