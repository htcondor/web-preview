{"id": 4002, "title": "Ticket #4002: vm-gahp strips cdrom, floppy, serial and parallel devices from vmware", "description": "<blockquote>\nfor VMware, the vm-gahp strips everything from the .vmx file that it doesn't recognize, and explicitly strips CDROM devices as well.\n\n<p>a VM might want to boot off of a CDROM, or even a floppy drive.  serial and parallel devices can be useful for communicating with the outside world, especially since VMware can configured to write the output of serial and parallel devices to a file.\n\n</p><p>These devices should not be stripped out of the .vmx file.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Nov-27 14:17:50 by johnkn:</em> <br/>\n\n<span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a342c69c2223a70e7fcd5fb38bbc029a886021dc\">[38875]</a></span> is a partial fix, it preserves floppy, serial &amp; parallel devices. cdrom devices need more work to prevent attempts to connect to a physical device rather than a cdrom image.\n<span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f82592fbb3c193360b75413a7009fcf5fc48ab8f\">[38877]</a></span> adds refines the cdroms_list as the strip_list; adds cdrom, serial, parallel and floppy devices that refer to physical devices to this list, and then strips those devices from the resulting .vmx file.\n\n<p></p><hr/>\n<em>2013-Dec-03 10:23:32 by johnkn:</em> <br/>\n\nThis change no longer removes from the vm description file cdrom, floppy, serial and parallel devices refer to image files.\n\n<p></p><hr/>\n<em>2013-Dec-03 13:15:16 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p></p><ul>\n<li>Checking for paths starting with \"/dev/\" won't stop malicious users, but they wouldn't be able to access something they couldn't access from a vanilla job, so I'm not worried about that.\n\n<p></p></li><li>Why add the new functions starts_with() and starts_with_ignore_case(), beyond not having to pass a length argument with strncmp() and strncasecmp()?\n</li></ul>\n\n<p></p><hr/>\n<em>2013-Dec-03 17:38:28 by johnkn:</em> <br/>\n\nfunctions starts_with, etc are lifted from stl string utils.  I find they make more readable code than strncmp. at the time I wasn't sure whether I could get away with with using stl string utils in the vm gahp.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-03 11:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/675c8771661338e8acc38cf69f13837cfc8b5255\">[38922]</a></span>: edit of 8.0.5 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4002\" onclick=\"get_ticket_and_populate_wrapper('4002'); return false;\" title=\"vm-gahp strips cdrom, floppy, serial and parallel devices from vmware\">#4002</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-03 10:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ace237f9722c2fb738a04d2bddca72b9d1318c8\">[38913]</a></span>: 8.0.5 version history item for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4002\" onclick=\"get_ticket_and_populate_wrapper('4002'); return false;\" title=\"vm-gahp strips cdrom, floppy, serial and parallel devices from vmware\">#4002</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-27 16:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f82592fbb3c193360b75413a7009fcf5fc48ab8f\">[38877]</a></span>: don't strip cdrom images for vmware vm-universe jobs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4002\" onclick=\"get_ticket_and_populate_wrapper('4002'); return false;\" title=\"vm-gahp strips cdrom, floppy, serial and parallel devices from vmware\">#4002</a></span> also reject serial, floppy, parallel, references to actual devices ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-27 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a342c69c2223a70e7fcd5fb38bbc029a886021dc\">[38875]</a></span>: don't strip floppy, serial &amp; parallel devices from vm jobs in vm universe <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4002\" onclick=\"get_ticket_and_populate_wrapper('4002'); return false;\" title=\"vm-gahp strips cdrom, floppy, serial and parallel devices from vmware\">#4002</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Dec-09 15:08", "status": "resolved", "created": "2013-Oct-22 10:36", "fixed_version": "2013-Oct-22 10:36", "broken_version": "v080000", "priority": "4", "subsystem": "VM", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}