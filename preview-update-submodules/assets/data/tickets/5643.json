{"id": 5643, "title": "Ticket #5643: Python ClassAd parser fails on streams", "description": "<blockquote>\nThe new python <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> parsing code currently rewinds the stream in two places:\n<ol>\n<li>To auto-detect whether the old classad or new classad parser should be used (hm - we should probably parse XML too at some point!).\n</li><li>To reset the file pointer at the end of the ad.  This simplifies the interaction with buffering of file streams.\n</li></ol>\n\n<p>So, right now a irreversible stream (such as with a Unix pipe) will cause an exception.  However, we can proceed as long as the user specifies the parser to use.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Apr-20 07:57:32 by tim:</em> <br/>\n\nThis ticket is a duplicate of <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5274\" onclick=\"get_ticket_and_populate_wrapper('5274'); return false;\" title=\"Python ClassAd parser cannot handle streams\">#5274</a></span>\n\n<p></p><hr/>\n<em>2016-Apr-20 08:12:49 by bbockelm:</em> <br/>\n\nAh!  I thought that this had been filed before -- I just couldn't find it with the gittrac search functionality.\n\n<p>In fact, would be possible to get a 'python bindings' subsystem?  That would make aggregating these tickets easier.\n\n</p><p>Anyhow, fix is pushed to the branch as well as a unittest.\n\n</p><p></p><hr/>\n<em>2016-Apr-29 13:52:31 by tim:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Thank you for finally fixing this. It looks fine. Now on to fix the example in the manual.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-31 14:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56f73f4219e2a6ea30e78914290c6bcdb3c83d72\">[48454]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span>) Documentation and version history  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-29 16:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/76987a3b4cbaa65a159ac3bbe62db255b4b4ff66\">[48334]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span>) Fixup python binding unit test  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-29 13:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1386100ad064801c6cfb15ca1b3f0e4050deac40\">[48332]</a></span>: Add unit test for pipe parsing regression. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span> Committer: Tim Theisen  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-29 13:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8abf6ba0ec68961c8c32c8884938830856106a68\">[48331]</a></span>: Do not require seek/tell to be functional. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span> This fixes the use of the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> parser on Unix pipes. Committer: Tim Theisen  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-20 08:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/830ca9483971469c6cadb99c5df79e3130660cbd\">[48249]</a></span>: Add unit test for pipe parsing regression. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-19 21:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ea336ce5a622b146ef7ad052ee682f5e990f0b5c\">[48247]</a></span>: Do not require seek/tell to be functional. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span> This fixes the use of the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> parser on Unix pipes.  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-May-31 14:47", "status": "resolved", "created": "2016-Apr-19 21:37", "fixed_version": "2016-Apr-19 21:37", "broken_version": "v080307", "priority": "3", "subsystem": "Tools", "assigned_to": "tim", "derived_from": "#5274", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}