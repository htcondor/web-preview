{"id": 4628, "title": "Ticket #4628: Should condor_rm'ed DAGMan wait for nodes to exit before FINAL runs?", "description": "<blockquote>\nIn the course of working on <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4618\" onclick=\"get_ticket_and_populate_wrapper('4618'); return false;\" title=\"Remove DAGMan code that condor_rms node jobs on condor_rm of DAGMan\">#4618</a></span>, it occurred to me that maybe DAGMan should wait for removed node jobs to exit the queue before submitting a FINAL node.  (This is in the case that the DAGMan job itself is condor_rm'ed or an ABORT-DAG-On fires.)  Right now DAGMan condor_rm's any queued node jobs before submitting the FINAL node, but doesn't wait for them to exit from the queue.\n\n<p>I think this probably makes sense -- if, for example, the FINAL node is supposed to do some kind of cleanup, we should run it <strong>after</strong> any other nodes have generated whatever output they're going to create.\n\n</p><p>Maybe there should be an option for waiting or not waiting before submitting the FINAL node?\n\n</p><p>(Also see <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3995\" onclick=\"get_ticket_and_populate_wrapper('3995'); return false;\" title=\"Condor_rm'ed DAGMan waits for node jobs to exit\">#3995</a></span>.)</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2014-Sep-30 14:32", "status": "new", "created": "2014-Sep-30 14:32", "fixed_version": "2014-Sep-30 14:32", "broken_version": "v080301", "priority": "4", "subsystem": "Dag", "assigned_to": "", "derived_from": "#4618", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}