{"id": 3056, "title": "Ticket #3056: Schedd should automatically trigger a reschedule when job goes idle", "description": "<blockquote>\nAfter condor_submit submits a new job, it sends a reschedule command to the schedd to have it notice the new job and initiate trying to get it running. <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=3026\" onclick=\"get_ticket_and_populate_wrapper('3026'); return false;\" title=\"JobRouter should issue a reschedule command\">#3026</a></span> describes one case where a reschedule isn't sent and the job is ignored until the schedd's periodic check of the job queue. We have seen other cases in the past.\n\n<p>The schedd should be smart enough to figure out for itself when it needs trigger a reschedule event. This would be when a new job is submitted or when a held job is released.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jun-28 13:03:36 by tannenba:</em> <br/>\n\nAlso see wisdom duplicate ticket <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=810\" onclick=\"get_ticket_and_populate_wrapper('810'); return false;\" title=\"Schedd should be able to intelligently reschedule all on its own\">#810</a></span>\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \n...we want the schedd to call StartLocalJobs() whenever it sees one or more scheduler or local universe jobs enter the queue, and timeout() whenever it sees jobs of any other universe. </td></tr></tbody></table></div>\n\n\n<p></p><hr/>\n<em>2013-Apr-01 17:12:32 by jfrey:</em> <br/>\n\nThe schedd may also need to call these functions when jobs are released from being held.\n\n<p></p><hr/>\n<em>2013-Apr-01 17:53:13 by bbockelm:</em> <br/>\n\nWhat about when <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OnExitRemove\" title=\"On Exit Remove\">OnExitRemove</a></span> evaluates to false and the job reenters the queue?\n\n<p></p><hr/>\n<em>2014-Feb-25 11:19:32 by bbockelm:</em> <br/>\n\nAny update on this?\n\n<p></p><hr/>\n<em>2015-Feb-25 15:31:57 by tannenba:</em> <br/>\n\nShould make sure the request from the schedd to the negotiator\nis non-blocking.\n\n<p>Maybe it is just as simple as decreasing the default SCHEDD_INTERVAL\nand the default count_jobs timeslice?\n\n</p><p></p><hr/>\n<em>2015-Apr-22 15:27:16 by bbockelm:</em> <br/>\n\nPer OSG/HTCondor call:\n\n<p>Going to be a knob that enables this; defaults to off.  OSG will only turn it to \"on\" for condor-ce.\n\n</p><p>Other than that, we think this will happen in the next week or so.\n\n</p><p></p><hr/>\n<em>2015-May-06 15:18:49 by bbockelm:</em> <br/>\n\nPer HTCondor/OSG call - what's the status update?  Is this still going to make 8.3.6 (which is the original schedule).\n\n<p></p><hr/>\n<em>2015-Jun-17 20:53:03 by bbockelm:</em> <br/>\n\nPer HTCondor / OSG call, we ran out the clock for the 8.3 series.  Current plan is to try for 8.5 and backport into 8.4 (but hidden behind a HTCondor-CE-only knob).\n\n<p></p><hr/>\n<em>2015-Oct-07 15:30:29 by bbockelm:</em> <br/>\n\nCurrent plan is to tie this into the 'priority queue' work so we instantly know when a job is ready to be rescheduled.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5903\" onclick=\"get_ticket_and_populate_wrapper('5903'); return false;\" title=\"Fix RESCHEDULE command sent to schedd after job submission\">#5903</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix RESCHEDULE command sent to schedd after job submission</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2016-Nov-16 15:34", "status": "active", "created": "2012-Jun-13 16:25", "fixed_version": "2012-Jun-13 16:25", "broken_version": "v070800", "priority": "3", "subsystem": "Daemons", "assigned_to": "tannenba", "derived_from": "#4555", "creator": "jfrey", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "bbockelm@cse.unl.edu tannenba@cs.wisc.edu dan@hep.wisc.edu jfrey@cs.wisc.edu samf@cs.wisc.edu johnkn@cs.wisc.edu tstclair@redhat.com marian.zvada@cern.ch", "due_date": ""}