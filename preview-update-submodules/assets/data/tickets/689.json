{"id": 689, "title": "Ticket #689: Serious error message hidden in D_FULLDEBUG in condor_crontab.cpp", "description": "<blockquote>\ncondor_crontab.cpp in CronTab::nextRunTime( long timestamp ), around lines 483 and 494 are two lines that look like this:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">dprintf( D_FULLDEBUG, \"CronTab: Generated a runtime that is in \"\n    \"the past (%d &lt; %d)\\n\",\n    (int)runtime, (int)timestamp );\n</pre></div>\n\n\n<p>and\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">dprintf( D_FULLDEBUG, \"CronTab: Failed to find a match for timestamp %d\\n\",\n    (int)timestamp );\n</pre></div>\n\n\n<p>If we hit these errors, I believe these are internal consistency errors and the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CronTab\" title=\"Cron Tab\">CronTab</a></span> must have a bug (excepting bad RAM, etc).  In the first case, nextRunTime has generated a time in past, which should never happen.  In the second case, we are apparently invalid, but an earlier check claims we are valid.\n\n</p><p>These should at the very least become D_ALWAYS, as they represent a serious problem.  A deferred job will currently silently fail to run without any clues.\n\n</p><p>These might be better as EXCEPT()ions, as it means the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CronTab\" title=\"Cron Tab\">CronTab</a></span> object can no longer be trusted.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Jun-30 14:36:34 by psilord:</em> <br/>\n\nAccording to Alan: \"If we hit that code path, our internal consistency is fscked anyway. You're in the land of undefined behavior.\"\n\n<p>It should be changed to EXCEPT() in V7_4-branch and merged to master.\n\n</p><p>Ensure to build and test it in NMI so what little crontab testing stuff we have\nin the test suite can chew on it.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jul-29 11:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6b854ec5407c0eb34cbe6b9767a3d8b3bdba8e3c\">[18642]</a></span>: Changed error messages to exceptions in condor_crontab.cpp. The first check-in was incorrectly committed to the master branch. Committed to the V7_4-branch this check-in. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=689\" onclick=\"get_ticket_and_populate_wrapper('689'); return false;\" title=\"Serious error message hidden in D_FULLDEBUG in condor_crontab.cpp\">#689</a></span>  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jul-01 10:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0b7cd23defcb74045fad3499a7a49cbab9e210a8\">[18535]</a></span>: Changed error messages to exceptions in condor_crontab.cpp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=689\" onclick=\"get_ticket_and_populate_wrapper('689'); return false;\" title=\"Serious error message hidden in D_FULLDEBUG in condor_crontab.cpp\">#689</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jul-01 10:55", "status": "resolved", "created": "2009-Aug-24 15:29", "fixed_version": "2009-Aug-24 15:29", "broken_version": "", "priority": "2", "subsystem": "Daemons", "assigned_to": "slauson", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu", "due_date": ""}