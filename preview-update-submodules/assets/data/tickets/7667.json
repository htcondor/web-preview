{"id": 7667, "title": "Ticket #7667: master should not fork/return until log file is useful", "description": "<blockquote>\nThe <code>condor_master</code> currently forks before its log file exists, much less has anything useful in it. This makes using <code>condor_who</code> to wait for a personal pool to be ready very annoying. The master shouldn't give control back until its log file is useful.\n\n<p>It might be even better to delay the exit of the fork parent until the child is responding to commands, this mean that if the shared port daemon is being used, that shared port is alive.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-01 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/36791e133f0c6714d226553565d1ee358f3180a2\">[60051]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7667\" onclick=\"get_ticket_and_populate_wrapper('7667'); return false;\" title=\"master should not fork/return until log file is useful\">#7667</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7588\" onclick=\"get_ticket_and_populate_wrapper('7588'); return false;\" title=\"cross-slot posting of p-slot Child attrs needs work to be reliable\">#7588</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7654\" onclick=\"get_ticket_and_populate_wrapper('7654'); return false;\" title=\"ExprTree should be able to take an ExprTree as an argument\">#7654</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-11 17:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c19e891036b4389cd4a4da176d6498b0057c5d5\">[59847]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7667\" onclick=\"get_ticket_and_populate_wrapper('7667'); return false;\" title=\"master should not fork/return until log file is useful\">#7667</a></span>, when condor_master forks into the background, the parent process does not exit until the forked child has finished initializing. so this works now. condor_master &amp;&amp; condor_who -daemons ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Jul-01 16:28", "status": "resolved", "created": "2020-May-28 15:10", "fixed_version": "2020-May-28 15:10", "broken_version": "", "priority": "3", "subsystem": "DaemonMaster", "assigned_to": "johnkn", "derived_from": "", "creator": "karpel", "rust": "", "customer_group": "other", "visibility": "public", "notify": "karpel@wisc.edu johnkn@cs.wisc.edu", "due_date": ""}