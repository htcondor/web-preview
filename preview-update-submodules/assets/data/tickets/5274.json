{"id": 5274, "title": "Ticket #5274: Python ClassAd parser cannot handle streams", "description": "<blockquote>\nIn writing up the documentation for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4990\" onclick=\"get_ticket_and_populate_wrapper('4990'); return false;\" title=\"condor_submit -dump produces ClassAd unparsable by python bindings\">#4990</a></span>, I noticed that the following example no longer works:\n<div class=\"code\">\n<pre class=\"code\">&gt;&gt;&gt; import classad\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; fd = os.popen(\"condor_history -l -match 4\")\n&gt;&gt;&gt; ads = classad.parseAds(fd)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIOError: [Errno 29] Illegal seek\n&gt;&gt;&gt;\n</pre></div>\n\nIn addition, even if you tell it the type of class ads, it still doesn't work:\n<div class=\"code\">\n<pre class=\"code\">&gt;&gt;&gt; import classad\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; fd = os.popen(\"condor_history -l -match 4\")\n&gt;&gt;&gt; ads = classad.parseAds(fd, classad.Parser.Old)\n&gt;&gt;&gt; print [ad[\"ClusterId\"] for ad in ads]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIOError: [Errno 29] Illegal seek\n&gt;&gt;&gt;\n</pre></div>\n\nSo, it works on files. But, it no longer works on streams.</blockquote>", "remarks": "<blockquote>\n<em>2016-May-31 14:47:21 by tim:</em> <br/>\n\nThis work done under <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5643\" onclick=\"get_ticket_and_populate_wrapper('5643'); return false;\" title=\"Python ClassAd parser fails on streams\">#5643</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nPython <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> parser fails on streams</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2016-May-31 14:47", "status": "defer", "created": "2015-Sep-23 10:24", "fixed_version": "2015-Sep-23 10:24", "broken_version": "v080307", "priority": "5", "subsystem": "Tools", "assigned_to": "tim", "derived_from": "#4990", "creator": "tim", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pcouvare@caltech.edu", "due_date": ""}