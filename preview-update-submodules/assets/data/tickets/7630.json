{"id": 7630, "title": "Ticket #7630: Normalize arguments names in Schedd.{query, xquery, history}", "description": "<blockquote>\nThe signatures of these Python bindings functions are annoying:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">Schedd.query(constraint, attr_list, ...)\nSchedd.xquery(requirements, projection, ...)\nSchedd.history(requirements, projection, ...)\n</pre></div>\n\n\n<p>Not only do they not match, none of them has the names we actually prefer. Per a Slack discussion, we're going to change them all to <code>(constraint, projection, ...)</code>.\n\n</p><p>Unfortunately, doing this immediately could break existing users who are using named arguments for these functions. So instead we'll change the names in the C++ layer and write a Python wrapper around them that normalizes the names at runtime and emits a deprecation warning when appropriate. In the next series release, we'll remove the wrapper and enforce the new naming scheme (and add a loud warning to the upgrade path documentation).</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Jun-23 08:29:49 by karpel:</em> <br/>\n\nOff to ToddM for review\n\n<p></p><hr/>\n<em>2020-Jun-23 17:15:02 by tlmiller:</em> <br/>\n\nThis code is being reviewed on its own branch for merging into <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7690\" onclick=\"get_ticket_and_populate_wrapper('7690'); return false;\" title=\"Deprecate old, bad Python interfaces\">#7690</a></span>, on which it quite properly depends.  It will not appear in master until <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7690\" onclick=\"get_ticket_and_populate_wrapper('7690'); return false;\" title=\"Deprecate old, bad Python interfaces\">#7690</a></span> is merged there, which ought to be before Friday.\n\n<p><strong>Code Review</strong>\n\n</p><p>The implementation will temporarily allow any of the aliases to be used with any function, but since doing so will produce a warning, I prefer the resulting simplification of the code.\n\n</p><p></p><hr/>\n<em>2020-Jun-23 17:27:42 by karpel:</em> <br/>\n\nMerged the branch for this ticket into the branch for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7690\" onclick=\"get_ticket_and_populate_wrapper('7690'); return false;\" title=\"Deprecate old, bad Python interfaces\">#7690</a></span> ; it will not need to be merged independently.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-06 09:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1a314e76cf1b03305dc34d68da1afd3fa813dbd1\">[60077]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7682\" onclick=\"get_ticket_and_populate_wrapper('7682'); return false;\" title=\"Integrate htcondor-dags into the Python bindings\">#7682</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7630\" onclick=\"get_ticket_and_populate_wrapper('7630'); return false;\" title=\"Normalize arguments names in Schedd.{query, xquery, history}\">#7630</a></span>) add htcondor.dags tutorial; update other Python bindings tutorials for 8.9.8  (By Josh Karpel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-01 22:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/89a0d57c3c6071c83e68212e83bf1a9ef70b4d21\">[60052]</a></span>: move the version history entry for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7630\" onclick=\"get_ticket_and_populate_wrapper('7630'); return false;\" title=\"Normalize arguments names in Schedd.{query, xquery, history}\">#7630</a></span> up to release notes with the other deprecations; fix typo  (By Josh Karpel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-23 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/316667e47a431bcff2d693314fca442026db6c5e\">[59952]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7630\" onclick=\"get_ticket_and_populate_wrapper('7630'); return false;\" title=\"Normalize arguments names in Schedd.{query, xquery, history}\">#7630</a></span>) version history  (By Josh Karpel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-22 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cdfb8dc645db5e34468249f8d3c6f870859b549f\">[59949]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7630\" onclick=\"get_ticket_and_populate_wrapper('7630'); return false;\" title=\"Normalize arguments names in Schedd.{query, xquery, history}\">#7630</a></span>) normalize argument names for Schedd.{query,xquery,history}, with a deprecation warning for old names (for now, both names can be used), and update docstrings  (By Josh Karpel )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Jun-24 15:27", "status": "resolved", "created": "2020-May-04 15:19", "fixed_version": "2020-May-04 15:19", "broken_version": "", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "karpel", "derived_from": "", "creator": "karpel", "rust": "", "customer_group": "other", "visibility": "public", "notify": "karpel@wisc.edu,", "due_date": ""}