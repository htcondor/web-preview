{"id": 1431, "title": "Ticket #1431: Adding SCHEDD.lock to VALID_SPOOL_FILES", "description": "<blockquote>\n<a class=\"external\" href=\"http://www.cs.wisc.edu/condor/manual/v7.4/3_11High_Availability.html#31590\">http://www.cs.wisc.edu/condor/manual/v7.4/3_11High_Availability.html#31590</a>\n<a class=\"external\" href=\"http://www.cs.wisc.edu/condor/manual/v7.5/3_11High_Availability.html#32344\">http://www.cs.wisc.edu/condor/manual/v7.5/3_11High_Availability.html#32344</a>\n\n<p></p><div class=\"verbatim\">\n<pre>MASTER_HA_LIST = SCHEDD\nSPOOL = /share/spool\nHA_LOCK_URL = file:/share/spool\nVALID_SPOOL_FILES = SCHEDD.lock\n</pre></div>\n\n\n<p>Configuration macro MASTER_HA_LIST identifies the condor_schedd daemon as the daemon that is to be watched to make sure that it is running. Each machine with this configuration must have access to the lock (the job queue) which synchronizes which single machine does run the condor_schedd daemon. This lock and the job queue must both be located in a shared file space, and is currently specified only with a file URL. The configuration specifies the shared space (SPOOL), and the URL of the lock. condor_preen is not currently aware of the lock file and will delete it if it is placed in the SPOOL directory, so be sure to add SCHEDD.lock to VALID_SPOOL_FILES .\n{endverbatim}\n\n</p><p>The example is wrong. To actually \"add SCHEDD.lock\", especially since VALID_SPOOL_FILES is in condor_config, is to use\n</p><div class=\"code\">\n<pre class=\"code\">VALID_SPOOL_FILES = $(VALID_SPOOL_FILES), SCHEDD.lock</pre></div>\n\n\n<p>Using the example in the manual will result in hilarity.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-08 12:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e6a3072b220df510224b326ebc5b0a87ad6e22f0\">[25520]</a></span>: correct HA example config; gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1431\" onclick=\"get_ticket_and_populate_wrapper('1431'); return false;\" title=\"Adding SCHEDD.lock to VALID_SPOOL_FILES\">#1431</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2010-Jun-08 12:30", "status": "resolved", "created": "2010-Jun-08 09:33", "fixed_version": "2010-Jun-08 09:33", "broken_version": "v070400", "priority": "4", "subsystem": "", "assigned_to": "smoler", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}