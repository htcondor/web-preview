{"id": 1690, "title": "Ticket #1690: Gridmanager assumes job not in queue if SetAttribute fails", "description": "<blockquote>\nWhen SetAttribute() fails when the gridmanager is connected to the schedd, and the failure is not caused by a network failure, the gridmanager assumes the job is no longer in the queue. As a result, it skips setting any subsequent dirty attributes. This can lead to a situation like <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1689\" onclick=\"get_ticket_and_populate_wrapper('1689'); return false;\" title=\"Gridmanager puts newline in HoldReason on Cream transfer failure\">#1689</a></span>, where a job ends up not being held when it should be.\n\n<p>To see if a job really has left the queue when SetAttribute() fails, the gridmanager could try a GetAttribute() on an attribute that exists in all job ads. If that succeeds, the job is still in the queue. It's unclear what the gridmanager should do in this case, but pretending the job isn't in the queue is certainly the wrong answer.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Jan-30 14:25", "status": "new", "created": "2010-Oct-04 23:31", "fixed_version": "2010-Oct-04 23:31", "broken_version": "v070400", "priority": "5", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}