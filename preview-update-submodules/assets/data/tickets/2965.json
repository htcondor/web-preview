{"id": 2965, "title": "Ticket #2965: Can you backport 7.7.0 windows ACL dir fixes to 7.6.x?", "description": "<blockquote>\nI've got a large pool where PIDs are recycling fast enough that I'm running in to issues where Condor can't clean up old directories.\n\n<p>Initially I see an error like this:\n\n</p><p></p><pre>  05/01/12 09:11:07 Starter pid 3960 exited with status 0\n  05/01/12 09:11:07 perm: SetNamedSecurityInfo(D:\\MRM\\condor\\execute\\dir_3960\\condor_exec.exe) failed (err=5)\n  05/01/12 09:11:07 ERROR: D:\\MRM\\condor\\execute\\dir_3960 still exists after trying to add Full control to ACLs for PRIV_CONDOR\n</pre>\n\n<p>And then later that day a new job fails to run on the machine with:\n\n</p><p></p><pre>  05/01/12 11:34:57 setting the orig job name in starter\n  05/01/12 11:34:57 setting the orig job iwd in starter\n  05/01/12 11:34:57 couldn't create dir D:\\MRM\\condor\\execute\\dir_3960: File exists\n  05/01/12 11:34:57 Failed to initialize JobInfoCommunicator, aborting\n  05/01/12 11:34:57 Unable to start job.\n  05/01/12 11:34:57 **** condor_starter (condor_STARTER) pid 3960 EXITING WITH STATUS 1\n</pre>\n\n<p>I see in the 7.7.0 release notes the following:\n\n</p><p></p><ul>\n<li>On Windows platforms, improved the ability of the condor_starter and condor_shadow daemons to clean up the execute directory, if jobs have changed the ACLs or permissions on files they have created.\n</li></ul>\n\n<p>Any chance you can backport that to 7.6.x?</p></blockquote>", "remarks": "<blockquote>\n<em>2012-May-01 16:20:17 by ichesal:</em> <br/>\n\nYes. I have condor_rmdir on these machines. No, the WINDOWS_RMDIR option was not set.\n\n<p>Setting it now. Thanks!\n\n</p><p></p><hr/>\n<em>2012-May-03 13:48:57 by ichesal:</em> <br/>\n\nThat did the trick. Thanks.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2012-May-03 13:49", "status": "abandoned", "created": "2012-May-01 15:04", "fixed_version": "2012-May-01 15:04", "broken_version": "v070606", "priority": "4", "subsystem": "Win32", "assigned_to": "ziliang", "derived_from": "", "creator": "ichesal", "rust": "", "customer_group": "users", "visibility": "public", "notify": "", "due_date": ""}