{"id": 832, "title": "Ticket #832: DAGMan erroneously reports cycle when user log unreadable", "description": "<blockquote>\nIf condor_dagman is unable to read the user log file, it will claim \"a cycle exists in the DAG,\" which is nonsensical.\n\n<p>To reproduce:\n\n</p><p></p><ol>\n<li>Create \"submit\" containing:\n<div class=\"code\">\n<pre class=\"code\">cat &gt; submit\nuniverse=vanilla\nexecutable = /bin/date\nlog =eraseme.log\nnotification=never\nqueue\n</pre></div>\n\n</li><li>Create \"dag\" containing:\n<div class=\"code\">\n<pre class=\"code\">job A submit\n</pre></div>\n\n</li><li>\"touch eraseme.log\"\n</li><li>\"chmod u-w eraseme.log\"\n</li><li>\"condor_submit_dag dag\"\n</li><li>Wait for the condor_dagman job to exit\n</li><li>Inspect dag.dagman.out, observe the following:\n<div class=\"code\">\n<pre class=\"code\">10/09 12:46:16 DAGMan::Job:8001:ERROR: Unable to monitor log file for node A|ReadMultipleUserLogs:9004:Error initializing log file /scratch/adesmet/rust/admin-19790/minimal/eraseme.log|MultiLogFiles:9001:Error (13, Permission denied) opening file /scratch/adesmet/rust/admin-19790/minimal/eraseme.log for creation or truncation\n10/09 12:46:16 Of 1 nodes total:\n10/09 12:46:16  Done     Pre   Queued    Post   Ready   Un-Ready   Failed\n10/09 12:46:16   ===     ===      ===     ===     ===        ===      ===\n10/09 12:46:16     0       0        0       0       0          1        0\n10/09 12:46:16 ERROR: a cycle exists in the DAG\n</pre></div>\n</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Jan-13 16:02:13 by wenger:</em> <br/>\n\nThis is fixed both by the fix for gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1586\" onclick=\"get_ticket_and_populate_wrapper('1586'); return false;\" title=\"Fix cycle detection test or re-word 'cycle exists in the dag' message\">#1586</a></span> (incorrect reporting of cycles in DAG) and the fact that failing to monitor a log file is now a fatal error.  Therefore, I'm going to resolve this ticket.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2011-Jan-21 07:30", "status": "resolved", "created": "2009-Oct-09 12:50", "fixed_version": "2009-Oct-09 12:50", "broken_version": "", "priority": "4", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}