{"id": 6944, "title": "Ticket #6944: Add JobEventLog API for intermittent readers", "description": "<blockquote>\nAn API where the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobEventLog\" title=\"Job Event Log\">JobEventLog</a></span> constructor takes an optional seek argument and has a tell() function would allow CMS (and the hopefully none others who used the old and broken API) to move to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobEventLog\" title=\"Job Event Log\">JobEventLog</a></span> API (and for us to remove the old API).  This approach deliberately ignores the complexities inherent in a stop-and-start approach to reading rotating logs; we'll address those if someone should ever need that feature.  (Currently, the only job event log which rotates is the schedd's event log.)</blockquote>", "remarks": "<blockquote>\n<em>2019-May-01 10:22:14 by tlmiller:</em> <br/>\n\nAfter discussion with BrianB and TJ, we'll move forward instead by pickling the whole <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobEventLog\" title=\"Job Event Log\">JobEventLog</a></span> object, instead.  This should be easy to implement, and is an even weaker API than <code>tell()</code> and a <code>seek</code> parameter to the constructor; if we need those later, it won't hurt to have pickling.  Since we don't anticipate the class getting much more complicated, maintaining the pickling code shouldn't be a burden.\n\n<p></p><hr/>\n<em>2019-Jul-10 14:11:09 by tlmiller:</em> <br/>\n\nDelaying documentation (and thus officially supporting this API) until CRAB verifies that it works for them.\n\n<p></p><hr/>\n<em>2019-Jul-31 16:57:30 by tlmiller:</em> <br/>\n\nJosh has verified that it works for him.  Poking CRAB.\n\n<p></p><hr/>\n<em>2019-Aug-29 11:14:21 by tlmiller:</em> <br/>\n\nStill haven't heard back from CRAB, but it's not the end of the world if we have to change our mind about something in dev series.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-09 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/49e2598a49ca5d11f0b6be7c30784acccb6565fc\">[57796]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6690\" onclick=\"get_ticket_and_populate_wrapper('6690'); return false;\" title=\"Ensure that Docker jobs run on condor_annex default AMI\">#6690</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Release notes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-29 11:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db44b8a2cbca50463aac4dbacd9e3dfc2fea9831\">[57738]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Hopefully we won't have to change this later.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-10 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a7a854c296e46b1a6f95d91b7b0c3774244a1044\">[57374]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Fix the Python bindings to format events as per the HTCondor configuration.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-10 13:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1f2c33a627c5a5f5ff6d8b10900f28f3b8b8043\">[57372]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Remove some debug-only dprintf()s.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-09 16:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0489f7eb0179ecd60fa307db39f7c2495f722daf\">[57370]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Allow <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobEventLog\" title=\"Job Event Log\">JobEventLog</a></span> objects to be pickled and unpickled.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-29 11:14", "status": "resolved", "created": "2019-Mar-07 12:02", "fixed_version": "2019-Mar-07 12:02", "broken_version": "v080800", "priority": "2", "subsystem": "PythonBinding", "assigned_to": "tlmiller", "derived_from": "#6939", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, jfrey@cs.wisc.edu, karpel@wisc.edu", "due_date": ""}