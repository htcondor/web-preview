{"id": 7657, "title": "Ticket #7657: Bindings constraint arguments should all support passing ExprTree", "description": "<blockquote>\nThe bindings <code>Schedd</code> method <code>xquery</code> allows for a <code>classad.ExprTree</code> to be passed as the constraint, which is useful for users who are using <code>ExprTree</code> to build up complex queries. The other methods which take a constraint, <code>query</code>, <code>act</code>, and <code>edit</code>, only allow string constraints. They should all be able to take either a string (containing an expression) or a <code>classad.ExprTree</code>.\n\n<p>Methods that take a constraint\n\n</p><p></p><ul>\n<li>Collector.query\n</li><li>Schedd.query\n</li><li>Schedd.xquery\n</li><li>Schedd.act\n</li><li>Schedd.edit\n</li><li>Schedd.history\n</li><li>Startd.drainJobs\n</li><li>Startd.history</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2020-Jul-08 14:28:53 by johnkn:</em> <br/>\n\na brace of helper function was created that accepts a python object that can be a string, an <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ExprTreeHolder\" title=\"Expr Tree Holder\">ExprTreeHolder</a></span> or a python native object of type None, Bool, Long, Int or Float.\n\n<p>One helper function converts the above into a classad::ExprTree*, the other converts the above into a constraint string (which is what most of the native c++ APIs actually consume)\n\n</p><p>-tj</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7727\" onclick=\"get_ticket_and_populate_wrapper('7727'); return false;\" title=\"python bindings treats constraint=None as constraint=false\">#7727</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\npython bindings treats constraint=None as constraint=false</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-05 10:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9095b04dcd493b7a600bf608c460a658b363a7ed\">[61423]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7657\" onclick=\"get_ticket_and_populate_wrapper('7657'); return false;\" title=\"Bindings constraint arguments should all support passing ExprTree\">#7657</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-21 16:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4695cc9025a3c4122c9550435538849e92a3b7c4\">[60181]</a></span>: fix <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7657\" onclick=\"get_ticket_and_populate_wrapper('7657'); return false;\" title=\"Bindings constraint arguments should all support passing ExprTree\">#7657</a></span>, act must not have an empty constraint, so use true  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-20 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/19c342777083462d3eb2863f1cce3e52294018f6\">[60160]</a></span>: fix for previous commit to <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7657\" onclick=\"get_ticket_and_populate_wrapper('7657'); return false;\" title=\"Bindings constraint arguments should all support passing ExprTree\">#7657</a></span>, Strings are not Lists for actOnJobs  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-08 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/399cc778ec87c06e6d1a435f31bb36191ccc65e5\">[60100]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7657\" onclick=\"get_ticket_and_populate_wrapper('7657'); return false;\" title=\"Bindings constraint arguments should all support passing ExprTree\">#7657</a></span>, consisting conversion of input for python-bindings functions that have a constraint argument  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Oct-05 10:55", "status": "resolved", "created": "2020-May-21 17:26", "fixed_version": "2020-May-21 17:26", "broken_version": "", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "johnkn", "derived_from": "", "creator": "karpel", "rust": "", "customer_group": "other", "visibility": "public", "notify": "karpel@wisc.edu", "due_date": ""}