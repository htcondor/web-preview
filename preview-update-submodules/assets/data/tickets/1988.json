{"id": 1988, "title": "Ticket #1988: quill fails due to duplicate key", "description": "<blockquote>\nSteve Timm reports seeing the following error in the quill log:\n\n<p></p><div class=\"verbatim\">\n<pre>03/17 15:01:54 SQL COMMAND: INSERT INTO ClusterAds_Horizontal (scheddname,\ncluster_id) VALUES ('hostname.edited', '2726591')\n03/17 15:01:54 [SQL EXECUTION ERROR2] ERROR:  duplicate key value violates\nunique constraint \"clusterads_horizontal_pkey\"\n</pre></div>\n\n\n<p>The job in question has already finished.  Updates fail until job_queue.log rotates.\n\n</p><p>Steve notes that this error happened in conjunction with\na reboot of the machines.  In this case the condor_schedd/condor_quill\nmachine rebooted and came back up before the postgres server was rebooted.\n\n</p><p>Theory: perhaps an update to the db succeeded to modify the db but failed to consume this entry from the sql log, leaving behind a record that causes all subsequent updates to fail.\n\n</p><p>Suggested workaround: manually remove conflicting entries from the db.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2012-Oct-22 13:39", "status": "abandoned", "created": "2011-Mar-21 11:59", "fixed_version": "2011-Mar-21 11:59", "broken_version": "", "priority": "4", "subsystem": "Quill", "assigned_to": "", "derived_from": "", "creator": "danb", "rust": "a21808", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}