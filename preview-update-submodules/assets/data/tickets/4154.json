{"id": 4154, "title": "Ticket #4154: Improve expression building in python", "description": "<blockquote>\nExpression building in python, even after <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3900\" onclick=\"get_ticket_and_populate_wrapper('3900'); return false;\" title=\"Improve expression building in python\">#3900</a></span>, is still quite unsatisfactory.\n\n<p>We should be able to do the following:\n\n</p><p></p><div class=\"verbatim\">\n<pre>foo = \"bar\"\nexpr = classad.Attribute(\"MyType\") == classad.Literal(foo)\n</pre></div>\n\n\n<p>to create the expression <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> == \"bar\".  This allows more careful expression building\u00a0(such as and-ing together multiple expressions to form a requirements); the prior ticket only helped with string literals.  We should expose the following functionality:\n</p><ul>\n<li>As many operators as natively possible in python (multiply / divide / add / subtract / bitwise ops / comparison ops,\n</li><li>Provide functions for operators that are not possible to override / don't exist in python (such as the logical and, logical or, is, and isnt),\n</li><li>\"sameAs\" for expression comparison,\n</li><li>Match classads,\n</li><li>and \"flatten\" for partial evaluation.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Jan-13 09:19:11 by bbockelm:</em> <br/>\n\nCommit includes documentation and version history, but docs probably should be reviewed.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-23 09:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b9b798e0987c5f6b7f75a850c1772b15a3c626cd\">[39216]</a></span>: edit of doc for new python bindings flatten(), matches(), symmetricMatch(), Attribute(), Function(), and Literal(). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4154\" onclick=\"get_ticket_and_populate_wrapper('4154'); return false;\" title=\"Improve expression building in python\">#4154</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-13 09:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fc3176fcfa2fb9b9377dbe3209d18e4991dcc69d\">[39145]</a></span>: Improve the art of expression building in python. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4154\" onclick=\"get_ticket_and_populate_wrapper('4154'); return false;\" title=\"Improve expression building in python\">#4154</a></span> This commit provides greater capacity to manipulate and build expressions from python. Includes implementation, unit tests, and documentation.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Feb-24 14:38", "status": "resolved", "created": "2014-Jan-12 22:02", "fixed_version": "2014-Jan-12 22:02", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "bbockelm", "derived_from": "#3900", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}