{"id": 848, "title": "Ticket #848: Merge execute directory cleanup code", "description": "<blockquote>\nThe code to clean up an execute directories is duplicated between condor_starter.V6.1/baseStarter.cpp:2665 CStarter::removeTempExecuteDir and condor_startd.V6/util.cpp:284 cleanup_execute_dir.  This increases the risk of the two implementations diverging, creating future bugs.\n\n<p>The schedd (which manages starters under the local universe) has no such code at all.  If the starter exits abruptly, execute directories may be leaked.\n\n</p><p></p><ol>\n<li>Merge the two existing implementations into a single implementation in a shared location, perhaps condor_c++_util.\n</li><li>Replace implementations of two existing implementations with calls to the single unified implementation.\n</li><li>Have the condor_schedd call into that single unified implementation when a local universe starter exits for any reason, ensuring the directory is cleaned.\n</li></ol>\n\n<p>It may be worth looking at <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=692\" onclick=\"get_ticket_and_populate_wrapper('692'); return false;\" title=\"local universe job with unwritable job log leaks spool directory\">#692</a></span>, of which this is a spawn.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=1268\" onclick=\"get_ticket_and_populate_wrapper('1268'); return false;\" title=\"condor cron with local universe not cleaning up execute dir\">#1268</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor cron with local universe not cleaning up execute dir</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2009-Dec-17 14:19", "status": "new", "created": "2009-Oct-13 16:41", "fixed_version": "2009-Oct-13 16:41", "broken_version": "", "priority": "2", "subsystem": "", "assigned_to": "", "derived_from": "#692", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}