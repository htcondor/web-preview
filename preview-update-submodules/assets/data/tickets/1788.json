{"id": 1788, "title": "Ticket #1788: Opening /dev/null for write with O_CREATE fails on solaris 11", "description": "<blockquote>\nOn x86-64 Solaris 11, attempts to open /dev/null for writing with O_CREAT via safe_open_wrapper() fails with errno 6 (ENXIO). This is because safe_open_wrapper() first tries to open the file with O_EXCL and bombs out if that fails with an error other than EEXIST. On Solaris 11, the open returns ENXIO instead.\n\n<p>On Solaris, /dev/null is a sym-link to /devices/pseudo/mm@0:null, a character special file. Attempts to open the character special file with O_EXCL work as expected (fail with EEXIST). Attempts to open a file that sym-links to the character special file with O_EXCL work as expected (fail with EEXIST). But on Solaris 11, opening /dev/null with O_EXCL fails with ENXIO. This goes against the man-page for open(), which says opening a sym-link with O_EXCL always fails with EEXIST.\n\n</p><p>This came up in the test suite, where the Condor-C test jobs have their stdout and stderr set to /dev/null.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-01 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0e982c406ad3c359a3137ce23623f47da699eb56\">[19503]</a></span>: Fix procd problems <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1785\" onclick=\"get_ticket_and_populate_wrapper('1785'); return false;\" title=\"privsep switchboard fails on broken symlinks\">#1785</a></span> and solaris 11 /dev/null problem <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=1788\" onclick=\"get_ticket_and_populate_wrapper('1788'); return false;\" title=\"Opening /dev/null for write with O_CREATE fails on solaris 11\">#1788</a></span> starter would error is user created symbolic link to nowhere in the sandbox. Ignore symbolic links when changing owner. This is ok because symbolic links are 0777 and the directory owner controls removal.\u00a0[...]\n (By James A. Kupsch )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Feb-01 16:21", "status": "new", "created": "2010-Nov-30 13:52", "fixed_version": "2010-Nov-30 13:52", "broken_version": "v070400", "priority": "4", "subsystem": "Libs", "assigned_to": "kupsch", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}