{"id": 4166, "title": "Ticket #4166: Fix bug processing some condor_q flags when using Quill", "description": "<blockquote>\nThis piece of code leads to compile problems on Windows (VS 2008 if I rmemeber correctly).</blockquote>", "remarks": "<blockquote>\n<em>2014-Jan-21 14:27:44 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>The patch does not look correct to me.  I think the compiler here is flagging a legit parameter passing bug; seems like the patch should really be\n</p><div class=\"code\">\n<pre class=\"code\">diff --git a/src/condor_utils/condor_q.cpp b/src/condor_utils/condor_q.cpp\nindex dd6849b..37567d7 100644\n--- a/src/condor_utils/condor_q.cpp\n+++ b/src/condor_utils/condor_q.cpp\n@@ -447,7 +447,7 @@ CondorQ::fetchQueueFromDBAndProcess ( const char *dbconn,\n\n        while (ad != (ClassAd *) 0) {\n                        // Process the data and insert it into the list\n-               if ((*process_func) (ad, process_func_data) ) {\n+               if ((*process_func) (process_func_data, ad) ) {\n                        ad-&gt;Clear();\n                        delete ad;\n                }\n</pre></div>\n\n\n<p>Felix, do you agree?\n\n</p><p></p><hr/>\n<em>2014-Jan-21 15:06:33 by f.wolfheimer:</em> <br/>\n\nYes, you're right! According to the declaration of condor_q_process_func the function call should have the suggested form.\n\n<p></p><hr/>\n<em>2014-Jan-21 15:08:35 by tannenba:</em> <br/>\n\nCool, I'll push the patch above.  Thanks Felix for finding this!</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/819/cast.patch\">cast.patch</a>\n530 bytes added by f.wolfheimer on 2014-Jan-17 10:18:14 UTC.\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-21 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5ef57c4185f0b9e13b9a7a4a6e2d93bd9baf3a29\">[39205]</a></span>: Fix bug processing some condor_q flags when using Quill. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4166\" onclick=\"get_ticket_and_populate_wrapper('4166'); return false;\" title=\"Fix bug processing some condor_q flags when using Quill\">#4166</a></span>  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Jan-21 15:13", "status": "resolved", "created": "2014-Jan-17 04:18", "fixed_version": "2014-Jan-17 04:18", "broken_version": "v080005", "priority": "5", "subsystem": "Quill", "assigned_to": "tannenba", "derived_from": "", "creator": "f.wolfheimer", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}