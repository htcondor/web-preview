{"id": 3540, "title": "Ticket #3540: Add grid-type boinc to gridmanager", "description": "<blockquote>\nAdd code to the gridmanager to support a new grid-type boinc. Jobs are submitted to a BOINC service via a boinc_gahp.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-21 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f621a47489f684bbac6dd3c41cdf8513584ea19\">[40205]</a></span>: Corrections to new BOINC grid type documentation, and define BOINC_GAHP configuration variable. Unrelated, but included: removed duplicate defn of GCE_GAHP definition. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3385\" onclick=\"get_ticket_and_populate_wrapper('3385'); return false;\" title=\"Add BOINC as a grid universe-supported service\">#3385</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-21 13:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c693d49ebf9c5b5fdff5e549b4ee1bb5767988f3\">[40200]</a></span>: Docs for new grid-type boinc. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3385\" onclick=\"get_ticket_and_populate_wrapper('3385'); return false;\" title=\"Add BOINC as a grid universe-supported service\">#3385</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-21 10:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/229f52125263ef4d955fc751bebfc2865201fe03\">[40196]</a></span>: Version history for new grid-type boinc. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-18 11:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bd00cb244dc3942279a4fa992566710057c7df43\">[39990]</a></span>: Update boinc_gahp external. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-18 09:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/96bc0e58cd111d12d57bc87cf6fa54d11e786598\">[39984]</a></span>: Group boinc jobs by app name rather than condor cluster id. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Mar-25 10:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/05ee6ede120c70cdc1db828186ce9b6833e227e1\">[39704]</a></span>: Use more efficient form of BOINC_QUERY_BATCHES. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> GAHP command BOINC_QUERY_BATCHES allows allows you to query for status changes since a previous query. Now, we take advantage of that in the gridmanager.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Mar-20 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4beb69763c926069dc452fa8df5fac7ff25aef4d\">[39669]</a></span>: Update BOINC_QUERY_BATCHES gahp command syntax. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> The updated command takes a time of last query and returns the time of the current query. This allows us to ask for only jobs that have changed status since the last time we asked. For now, we just ask for all changes since the beginning of time (the\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-03 09:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d5389788fcafeda97b0957550aa940841f0ec0ce\">[39295]</a></span>: Allow canceling of jobs with BOINC ERROR status. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-09 14:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/36033734e2813ade9e5637ecc2df5882e83a36db\">[38960]</a></span>: Add Boinc GAHP external. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> The Boinc GAHP is currently kept in the BOINC git repository. Add it as an external in the HTCondor build.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-09 14:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9985e6320c7b3399f9de2ee09445d65e286a8320\">[38959]</a></span>: Don't use 'stderr' as a name. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-09 14:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2a1d5a2334cc3868e66f7d69c01bcf9dfb8ab8e9\">[38958]</a></span>: Store boinc authenticator in its on own file, not in the job ad. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> This allows the user to keep the authenticator secret.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-24 16:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4b5541bdbaa958999778639fa11833d70208568a\">[37715]</a></span>: Issue Boinc retire batch command when last job is done. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-24 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e7595a241e18ef07105c2c907a282c960afcc64c\">[37714]</a></span>: Remove unnecessary code and data in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BoincJob\" title=\"Boinc Job\">BoincJob</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-24 16:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9529e31fa1d6841e0d4f518d52d73fc642680902\">[37713]</a></span>: Fix boinc lease management and other timer values. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-16 13:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/238848d1161a86beeb5e5f34ffc6e422f655a0e4\">[37712]</a></span>: Retry boinc batch query on \"no batch named\" error. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> The query is retried without the offending batch.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-04 10:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/709a65a672b2cb0b24e40f3ece4518de64936580\">[37711]</a></span>: Better failure handling for boinc jobs during submission. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> If we restart during submission and and boinc server is down, don't stay stuck waiting to find out if the submission succeeded.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-26 16:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cb69af261239cd61f91e831481be951b8a83911e\">[37357]</a></span>: More changes in the gridmanager boinc code. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-07 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/05038a758b6afc18337bb72f99b6de295f38f852\">[37122]</a></span>: Fix some bugs in gridmanager boinc code. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-20 14:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e920f98b224da4c3d49ba94508b765e31d405d5b\">[35823]</a></span>: Correct some boinc gahp command names. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-28 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1b784194d7c3bc83417658213554527fd9dc737d\">[35289]</a></span>: More work on new grid-type boinc. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> * <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BoincAuthenticator\" title=\"Boinc Authenticator\">BoincAuthenticator</a></span> attribute * Support talking to multiple Boinc servers * Updates of gahp protocol * Add batch-management code, including submission and lease renewal  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-14 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/798d323e7fd53a5b3a793acb27773216d3ff7085\">[35168]</a></span>: Additional code for new grid-type boinc. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> All gahp command handlers implemented. Major pieces remaining: * Coordinating batch submission. * Lease renewal. * Failure recovery.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-12 17:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d0449ab92cd83a416d7dccb52039495c7a9ad0f4\">[35167]</a></span>: Initial code for new grid-type boinc. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3540\" onclick=\"get_ticket_and_populate_wrapper('3540'); return false;\" title=\"Add grid-type boinc to gridmanager\">#3540</a></span> Gridmanager and condor_submit now recognize new grid-type 'boinc'. The gridmanager has new classes <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BoincJob\" title=\"Boinc Job\">BoincJob</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BoincResource\" title=\"Boinc Resource\">BoincResource</a></span>, and understands new boinc gahp commands. Large chunks of this code remains to be written.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-May-21 14:00", "status": "resolved", "created": "2013-Mar-12 17:13", "fixed_version": "2013-Mar-12 17:13", "broken_version": "v070900", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#3385", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}