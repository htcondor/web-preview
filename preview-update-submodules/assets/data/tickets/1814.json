{"id": 1814, "title": "Ticket #1814: parent process needs to remember if child has UDP port", "description": "<blockquote>\nCurrently, unix shadows do not have a UDP command port.  This is done to save memory.  Currently, all messages sent from the schedd to the shadow are sent via unix signals, but if new DC signals were added (as proposed by Rob for pushing out changes from condor_q), DaemonCore::Send_Signal() doesn't know that the child lacks a UDP port, so it might not correctly send the message (depends on network settings, but definitely doesn't work in the default case).\n\n<p>What is needed is a flag in the address of the child that indicates that it cannot receive UDP.  This will be useful in other situations (such as when using TCP forwarding) where a daemon needs to advertise this fact.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-20 11:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9ce444038725c50ce96114339baba6c5c11939fa\">[19718]</a></span>: Cleaned up method of controlling whether shadow supports UDP commands. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1814\" onclick=\"get_ticket_and_populate_wrapper('1814'); return false;\" title=\"parent process needs to remember if child has UDP port\">#1814</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-18 20:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58731f014b7aeca500144e77c756e21bc1f7174f\">[19710]</a></span>: Make short-term fix to allow local universe jobs to run 901f29c1f02d5146284d3395ed12564244932cab <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1813\" onclick=\"get_ticket_and_populate_wrapper('1813'); return false;\" title=\"section 3.12.5, the condor_kbdd, needs editing\">#1813</a></span> broke local uni because the starter is also run under the schedd in local universe, but the starter (for now) needs the UDP command port.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-17 17:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/901f29c1f02d5146284d3395ed12564244932cab\">[19701]</a></span>: Support launching <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span> children without a UDP command port. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1814\" onclick=\"get_ticket_and_populate_wrapper('1814'); return false;\" title=\"parent process needs to remember if child has UDP port\">#1814</a></span> This is used by the schedd when launching shadows in unix. Previously, it created a UDP port for the shadow, and then the shadow closed it when it started up (in order to save memory). This patch improves the situation by never creating\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Dec-17 17:50", "status": "resolved", "created": "2010-Dec-17 17:19", "fixed_version": "2010-Dec-17 17:19", "broken_version": "v070500", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu,rrati@redhat.com", "due_date": ""}