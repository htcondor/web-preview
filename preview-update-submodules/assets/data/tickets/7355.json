{"id": 7355, "title": "Ticket #7355: condor_submit should never set the Owner attribute of the job", "description": "<blockquote>\n<strong>condor_submit</strong> will normally set the <code>Owner</code> attribute of the cluster ad that it is submitting to the name of the current user unless it is submitting to a remote schedd.  (for the python bindings it doesn't know that the submit is remote, so it always sets the <code>Owner</code> attribute)\n\n<p>This can cause submission to fail, because the schedd will reject the submit if the Owner attribute does not match the name of the mapped authenticated user that submits the job.\n\n</p><p>For remote submits, <strong>condor_submit</strong> sets the <code>Owner</code> attribute to undefined since it knows it cannot assume that the mapped authenticated name is the same as the name of the current user.\n\n</p><p>But anytime there is a map file, there is a danger that the mapped authenticated user is not the same as the current username.  This can apply even when submitting locally.  So condor_submit should never set the <code>Owner</code> attribute of the job, relying instead on the Schedd to set it.\n\n</p><p>The downside of this change is that the schedd will no longer reject submissions when the mapping is broken and it would be unable to copy files from the submit directory, the jobs will instead be submitted, but then go on hold when file transfer fails.\n\n</p><p>a new knob <code>SUBMIT_SHOULD_SET_LOCAL_OWNER</code> will be added. It will default to false in the code (not in the param table). setting it to true will restore the pre 8.9.5 behavior.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-06 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e2719394c0566a9ddef481bfb04c058ddd87ea7e\">[58389]</a></span>: fix <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=AssignAccoutingGroup\" title=\"Assign Accouting Group\">AssignAccoutingGroup</a></span> test broken by <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7355\" onclick=\"get_ticket_and_populate_wrapper('7355'); return false;\" title=\"condor_submit should never set the Owner attribute of the job\">#7355</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-05 12:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/440efb34c0039b370cc71b891c8ec59a705600aa\">[58373]</a></span>: fixes for test breakage for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7355\" onclick=\"get_ticket_and_populate_wrapper('7355'); return false;\" title=\"condor_submit should never set the Owner attribute of the job\">#7355</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-01 13:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/873edf4d999f678035561a6907f78d22b53197ce\">[58327]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7355\" onclick=\"get_ticket_and_populate_wrapper('7355'); return false;\" title=\"condor_submit should never set the Owner attribute of the job\">#7355</a></span>, condor_submit (submit_utils) should never set Owner attribute of the job submit_utils will always set Owner=undefined unless SUBMIT_SHOULD_SET_LOCAL_OWNER knob is set to true. It defaults to false and is not in the param table. ===VersionHistory:Complete===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Dec-02 12:47", "status": "resolved", "created": "2019-Nov-01 10:52", "fixed_version": "2019-Nov-01 10:52", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "#7353", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}