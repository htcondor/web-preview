{"id": 1670, "title": "Ticket #1670: Make analysis Unknown Reasons less Unknown: No chance to match yet", "description": "<blockquote>\n<div class=\"verbatim\">\n<pre>$ condor_q\n-- Submitter: localhost6.localdomain6 : &lt;127.0.0.1:52262&gt; : localhost6.localdomain6\n ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD\n0 jobs; 0 idle, 0 running, 0 held\n\n$ condor_status\nName               OpSys      Arch   State     Activity LoadAv Mem   ActvtyTime\nlocalhost6.localdo LINUX      X86_64 Unclaimed Idle     0.080  3760  0+00:00:04\n                     Machines Owner Claimed Unclaimed Matched Preempting\n        X86_64/LINUX        1     0       0         1       0          0\n               Total        1     0       0         1       0          0\n\n$ echo 'cmd=/bin/sleep\\nargs=1d\\nqueue 3' | condor_submit\nSubmitting job(s)...\n3 job(s) submitted to cluster 2392.\n\n$ condor_q -bet\n-- Submitter: localhost6.localdomain6 : &lt;127.0.0.1:52262&gt; : localhost6.localdomain6\n---\n2392.000:  Run analysis summary.  Of 1 machines,\n      0 are rejected by your job's requirements\n      0 reject your job because of their own requirements\n      0 match but are serving users with a better priority in the pool\n      1 match but reject the job for unknown reasons\n      0 match but will not currently preempt their existing job\n      0 match but are currently offline\n      0 are available to run your job\n---\n2392.001:  Run analysis summary.  Of 1 machines,\n      0 are rejected by your job's requirements\n      0 reject your job because of their own requirements\n      0 match but are serving users with a better priority in the pool\n      1 match but reject the job for unknown reasons\n      0 match but will not currently preempt their existing job\n      0 match but are currently offline\n      0 are available to run your job\n---\n2392.002:  Run analysis summary.  Of 1 machines,\n      0 are rejected by your job's requirements\n      0 reject your job because of their own requirements\n      0 match but are serving users with a better priority in the pool\n      1 match but reject the job for unknown reasons\n      0 match but will not currently preempt their existing job\n      0 match but are currently offline\n      0 are available to run your job\n\n$ condor_q\n-- Submitter: localhost6.localdomain6 : &lt;127.0.0.1:52262&gt; : localhost6.localdomain6\n ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD\n2392.0   matt            9/21 16:26   0+00:00:01 R  0   0.0  sleep 1d\n2392.1   matt            9/21 16:26   0+00:00:00 I  0   0.0  sleep 1d\n2392.2   matt            9/21 16:26   0+00:00:00 I  0   0.0  sleep 1d\n3 jobs; 2 idle, 1 running, 0 held\n\n$ condor_q -bet\n-- Submitter: localhost6.localdomain6 : &lt;127.0.0.1:52262&gt; : localhost6.localdomain6\n---\n2392.000:  Request is being serviced\n---\n2392.001:  Run analysis summary.  Of 1 machines,\n      0 are rejected by your job's requirements\n      0 reject your job because of their own requirements\n      0 match but are serving users with a better priority in the pool\n      1 match but reject the job for unknown reasons\n      0 match but will not currently preempt their existing job\n      0 match but are currently offline\n      0 are available to run your job\n\tNo successful match recorded.\n\tLast failed match: Tue Sep 21 16:26:52 2010\n\tReason for last match failure: no match found\n---\n2392.002:  Run analysis summary.  Of 1 machines,\n      0 are rejected by your job's requirements\n      0 reject your job because of their own requirements\n      0 match but are serving users with a better priority in the pool\n      1 match but reject the job for unknown reasons\n      0 match but will not currently preempt their existing job\n      0 match but are currently offline\n      0 are available to run your job\n</pre></div>\n\n\n<p>We can make the output considerably better here in two ways -\n\n</p><p>First, consider the first -bet and 2392.2 from the second -bet, we can state that the job has not been considered by the negotiator, which is not an unknown reason. We can probably do this by simply looking for a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastRejMatchTime\" title=\"Last Rej Match Time\">LastRejMatchTime</a></span>, not there? not considered yet!\n\n</p><p>Second, consider 2392.1 and the second -bet, we have information about why the job isn't running, we even report it, but we still say the job is not running for Unknown Reasons. This second piece is a critical observation, the system has given us information about what is going on, we should use it, and maybe the system should give more information.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Dec-01 10:52:23 by tannenba:</em> <br/>\n\nAlso, we should deal with the fact that condor_q -better-analyze doesn't deal w/ classad functions gracefully - errors get reported during the analysis.\n\n<p></p><hr/>\n<em>2011-Jan-25 16:31:14 by willb:</em> <br/>\n\nI expect that at least the first part of this ticket is on track for 2/4.  Handling functions may be trickier.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Feb-08 14:50:08 by willb:</em> <br/>\n\nI'm testing a patch to fix this now.\n\n<p></p><hr/>\n<em>2011-Feb-09 17:55:01 by willb:</em> <br/>\n\nI split out the simplest case (jobs that haven't been considered yet) in my patch and have pushed it.  Greg and I are going to chat about other cases later.  Since the simplest case is absolutely the most common, I'm inclined to mark this ticket resolved at this point and consider other analysis improvements in the post-7.6 timeframe.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-30 11:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/194c79e076da351956ecbeae53f5c99a4ce75bbb\">[21196]</a></span>: Cosmetic and usability cleanup to condor_q -bet output. This is a fix for confusing output introduced in an earlier commit addressing <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1670\" onclick=\"get_ticket_and_populate_wrapper('1670'); return false;\" title=\"Make analysis Unknown Reasons less Unknown: No chance to match yet\">#1670</a></span>. Red Hat Bugzilla 692140 is also related.\u00a0[...]\n (By Will Benton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-09 17:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2eea45896c3ce0a8d27cb0943a2727cce015d42a\">[20370]</a></span>: condor_q now ensures that a job's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastRejMatchTime\" title=\"Last Rej Match Time\">LastRejMatchTime</a></span> is nonzero before commencing analysis. If <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastRejMatchTime\" title=\"Last Rej Match Time\">LastRejMatchTime</a></span> is zero, condor_q displays a more informative message.\u00a0[...]\n (By Will Benton )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Feb-09 17:57", "status": "resolved", "created": "2010-Sep-21 16:34", "fixed_version": "2010-Sep-21 16:34", "broken_version": "v070000", "priority": "2", "subsystem": "Tools", "assigned_to": "willb", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": "20110209"}