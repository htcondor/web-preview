{"id": 1646, "title": "Ticket #1646: create StdUnivSock", "description": "<blockquote>\nCurrently, standard universe uses <code>ReliSock</code> plus a number of things <code>ReliSock</code> depends on.  Standard universe doesn't actually depend on a lot of the functionality of <code>ReliSock</code>.  As a result, we end up including stuff in the syscall library that we don't really need (such as openssl).  This also makes it difficult for us to maintain both standard universe and the rest of Condor, because we have to be careful about introducing new dependencies that break standard universe.  Some things are stubbed out when linking with standard universe in order to avoid adding dependencies.  Some object files are compiled twice with different precompiler flags.  In general, this all makes it difficult to understand and maintain the code.\n\n<p>Without investing much effort, we can derive a new socket class <code>StdUnivSock</code> that just includes the functionality that standard universe needs.  I have found that it does not take much effort to refactor <code>Stream</code> so that we can reuse that code as the base class.  More refactoring could lead to more code sharing (e.g. would be nice to get rid of std_univ_buffers.cpp), but\nwe all agreed that sharing Stream was good enough.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-09 14:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c326d7fd6d32dce0b8204cb7f1e0a410591bf17e\">[18950]</a></span>: Made <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StdUnivSock\" title=\"Std Univ Sock\">StdUnivSock</a></span> replace <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ReliSock\" title=\"Reli Sock\">ReliSock</a></span> as the syscall socket in std univ. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1646\" onclick=\"get_ticket_and_populate_wrapper('1646'); return false;\" title=\"create StdUnivSock\">#1646</a></span> This reduces entanglement of standard universe and condor_io, making it easier to maintain both.  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Sep-09 14:50", "status": "resolved", "created": "2010-Sep-08 17:30", "fixed_version": "2010-Sep-08 17:30", "broken_version": "v070503", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu tstclair@redhat.com psilord@cs.wisc.edu matt@cs.wisc.edu", "due_date": ""}