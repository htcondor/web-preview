{"id": 231, "title": "Ticket #231: ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted in pers condor", "description": "<blockquote>\nWhen running a green computing enabled condor that understands how to wake on lan in a personal condor situation, you get this in the log files:\n\n<p></p><div class=\"verbatim\">\n<pre>2/20 13:41:27 ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted (1)\n</pre></div>\n\n\n<p>This happens because Condor is trying to tinker with the ETHTOOL interface on the LAN device and can't because it doesn't have root permission.\n\n</p><p>If the personal Condor administrator doesn't care about the WOL feature, they can ignore this error. Otherwise, if Condor is running as root and you see this error, it means something very bad happened with the WOL initialization and it likely won't work.\n\n</p><p>In any event, the error message should be fixed, and potentially the WOL feature disabled at a higher level (with the disabling message being written to the log) if it is discovered there aren't good enough permissions to utilize it.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Mar-16 15:06:29 by nleroy:</em> <br/>\n\nFor 7.2, I just added a message after the above informing the user that the above error can be safely ignored if hibernation is not being used.  A better solution (to surpress the error entirely if hibernation isn't being used) would be more involved, and probably shouldn't be employed for the 7.2 series.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2021-Oct-04 15:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cb9b4ce6f1dc3268bf91e608c4cf2ef587557029\">[64578]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a382b7dd253469d842ba19b631ec657939c27967\">[63528]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/29587ddb3d89736249b9ec764470a76666e78526\">[63531]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e978c6cac563665c357d8366f28ef1a228a188e6\">[63532]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/570d4d9fd9b297ae5ba1b73fbaf2877454e0398a\">[63535]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/289692cc868b40c9351cf5000614291ca3707c97\">[63543]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2457d87dc1d5388354058b004dd54fbd492e8c99\">[63548]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/158df7e23c06aadbefab8e7bfffd5f49937103ed\">[63549]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3b2f611aec4f71a224d45bfd632251456ef0111c\">[63550]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/87d96e095470ae1aa7b19a42418d389f15e39183\">[63553]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3246dc5717107147f9300a6678cbb17b888a5a43\">[63718]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dff4e3c5a9ddd17ee7dd1da6b1a68c11077fc59d\">[63719]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7fab9c8c50e69bd866624df8597ae5cd55401b32\">[63720]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/449f95994920e1d58961721ec28f1655e77b396c\">[63726]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/619dca3b0a852b1f9893e6c88151d8c9244ebe61\">[63737]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2216dabf84e9b60b75461671898b1a53f3639235\">[63747]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/813290bc470c36c56aae0ec1ba3bec9924917fab\">[63761]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9787aae975fedca8c3ba4c927aee3b1292a48cea\">[63764]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ef0d19edb8043ecc1eefd71804921e3063d952b8\">[63789]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cdfa98b8b52d3883bd3b65e44b33823787aa56b3\">[63823]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5b29f677c1eb1de55b5621424d2843e466e8b7f6\">[63824]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/680301b8b6cf6a61525eedd725e64c789209ec71\">[63827]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/62b4f07c445fff7ae20f8252a1a4f571687c2cd1\">[63837]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0eb4c10bada175cb7eb83b01545cb9b23024c6ee\">[63840]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c4cde5b1020dcc4baa0a59bae5a90926e75a98c\">[63842]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1b3987d71fc4c61cd3b12f653e57bd4912059674\">[63845]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/183f49ff2b5fe19a98cf6047d3349a4b0cbd12d4\">[63861]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f548832450be2ea02fea1cc4b20f4d977d435d0\">[63876]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2e32a1b1c890782c31b87239080cfe024852d18d\">[63878]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1c5d76021f0d17be08c788f7caaa5da990b4e6e6\">[63886]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/efd5edeba2fc92d8d7694d852e9b5366925dcf8f\">[63888]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2f3664e9e6d5b5374f0768fc54801f5f3eb648fa\">[63894]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4c934d5084a880e07e088af7bfd7fa65c78affb0\">[63895]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de58b5f40530534efd0b7c1a629b2e9282041a6f\">[63896]</a></span>,\u00a0[...]\n (By <span class=\"wiki\"><a href=\"wiki?p=GregThain\" title=\"Greg Thain\">GregThain</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-16 15:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/402d63af188c26172e36058630a27d68159e9c43\">[14245]</a></span>: Only print the ioctl(SIOCETHTOOL/GWOL) error if errno isn't EPERM or the EUID is zero. (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=231\" onclick=\"get_ticket_and_populate_wrapper('231'); return false;\" title=\"ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted in pers condor\">#231</a></span>)  (By Nick <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeRoy\" title=\"Le Roy\">LeRoy</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-16 15:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3a4bc9bc02ef740eac7f8786fe35d8c879f01817\">[14244]</a></span>: Added a simple message along with the error generated when the ioctl for detecting Wake-On-LAN fails -- that the error can be ignored unless you're using hibernation. (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=231\" onclick=\"get_ticket_and_populate_wrapper('231'); return false;\" title=\"ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted in pers condor\">#231</a></span>)  (By Nick <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeRoy\" title=\"Le Roy\">LeRoy</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-16 15:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2ebcc568ae3513de821756bdac287bd0948ddc1f\">[14242]</a></span>: Only print the ioctl(SIOCETHTOOL/GWOL) error if errno isn't EPERM or the EUID is zero. (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=231\" onclick=\"get_ticket_and_populate_wrapper('231'); return false;\" title=\"ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted in pers condor\">#231</a></span>)  (By Nick <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeRoy\" title=\"Le Roy\">LeRoy</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-16 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/85e61c90f7138591f8025b8dd7b384d4b7efdb82\">[14241]</a></span>: Added a simple message along with the error generated when the ioctl for detecting Wake-On-LAN fails -- that the error can be ignored unless you're using hibernation. (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=231\" onclick=\"get_ticket_and_populate_wrapper('231'); return false;\" title=\"ioctl(SIOCETHTOOL/GWOL) failed: Operation not permitted in pers condor\">#231</a></span>)  (By Nick <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeRoy\" title=\"Le Roy\">LeRoy</a></span> )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-08 16:06", "status": "abandoned", "created": "2009-Feb-20 16:22", "fixed_version": "2009-Feb-20 16:22", "broken_version": "v070200", "priority": "4", "subsystem": "Libs", "assigned_to": "nleroy", "derived_from": "#383", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}