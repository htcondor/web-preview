{"id": 3856, "title": "Ticket #3856: Need Condor version exchange in ft-gahp", "description": "<blockquote>\nThe file transfer protocol was changed in 8.1.0 to allow throttling of disk load (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3613\" onclick=\"get_ticket_and_populate_wrapper('3613'); return false;\" title=\"throttle file transfer disk load\">#3613</a></span>). Newer daemons/tools need to know when they're talking to an older peer, so that they can fall back to the old protocol. Otherwise, transfers will fail. Currently, there's no exchange of versions between the gridmanager and the ft-gahp. They assume they are are the same version. Since they reside on different machines, this is an unreasonable assumption.\n\n<p>We need to add a new GAHP command for the ft-gahp that allows it and the gridmanager to exchange Condor versions strings, which are then fed to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4473\" onclick=\"get_ticket_and_populate_wrapper('4473'); return false;\" title=\"condor_ft-gahp doesn't work with older condor_gridmanager\">#4473</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_ft-gahp doesn't work with older condor_gridmanager</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 13:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c5f89c7b26613425ee82dfec09b773a710e634ca\">[37260]</a></span>: Remove code meant for a different (uncommitted) feature. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3856\" onclick=\"get_ticket_and_populate_wrapper('3856'); return false;\" title=\"Need Condor version exchange in ft-gahp\">#3856</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 10:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cbbbf36299d77ff91574de16997a407d8d34687a\">[37247]</a></span>: Version history for gridmanager/ft-gahp file transfer failures. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3856\" onclick=\"get_ticket_and_populate_wrapper('3856'); return false;\" title=\"Need Condor version exchange in ft-gahp\">#3856</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9f7850f85b02e333a956ce339c7ef9b794b285e4\">[37246]</a></span>: Add CONDOR_VERSION command to gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3856\" onclick=\"get_ticket_and_populate_wrapper('3856'); return false;\" title=\"Need Condor version exchange in ft-gahp\">#3856</a></span> The file transfer protocol changed in 8.1.0. Newer daemons/tools need to know when they're talking to an older peer or else transfers will fail. Since the gridmanager and ft-gahp reside in different machines, it's very possible that they will be different\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 10:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/23b4bfbc27f25f17d136c14829ecc9b34a301ed4\">[37245]</a></span>: Add CONDOR_VERSION command to ft-gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3856\" onclick=\"get_ticket_and_populate_wrapper('3856'); return false;\" title=\"Need Condor version exchange in ft-gahp\">#3856</a></span> The file transfer protocol changed in 8.1.0. Newer daemons/tools need to know when they're talking to an older peer or else transfers will fail. Since the gridmanager and ft-gahp reside in different machines, it's very possible that they will be different\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 10:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6e87571f0873005bd45394468faba159e60b1ded\">[37244]</a></span>: Make a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorVersionInfo\" title=\"Condor Version Info\">CondorVersionInfo</a></span> from a set of version integers. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3856\" onclick=\"get_ticket_and_populate_wrapper('3856'); return false;\" title=\"Need Condor version exchange in ft-gahp\">#3856</a></span> Add a new constructor for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorVersionInfo\" title=\"Condor Version Info\">CondorVersionInfo</a></span> that takes the broken-down components of a Condor version: integers for the components of the version and an optional char* for the build date and other trailing info. This is useful for the gridmanager\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Aug-19 17:37", "status": "resolved", "created": "2013-Aug-16 09:31", "fixed_version": "2013-Aug-16 09:31", "broken_version": "v080100", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#3613", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}