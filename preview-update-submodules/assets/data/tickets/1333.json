{"id": 1333, "title": "Ticket #1333: GSI cert settings ignore config settings from environment", "description": "<blockquote>\nSetting _CONDOR_GSI_DAEMON_TRUSTED_CA_DIR and/or _CONDOR_GSI_DAEMON_DIRECTORY in the environment does not override configuration file settings for condor tools such as condor_status or condor_q.  This is caused by the placement of the call to condor_auth_config() before the loading of configuration settings from the environment.\n\n<p>Furthermore, setting X509_CERT_DIR has no effect on condor tools, contrary to the manual.  This change appears to be a side-effect of the addition of ALLOW/DENY_CLIENT in 7.1.0.  We needed tools to look for the map file in the same default location as daemons do, and we accidentally also made tools share code with the daemon for finding the trusted CA directory.\n\n</p><p>We could revert to the old behavior in which tools rely on X509_CERT_DIR to find their trusted certificates.  However, it is tempting instead to continue having tools and daemons share the same configuration.  If we decide to do that, then the following things need to be fixed:\n\n</p><p></p><ol>\n<li>configuration settings need to be settable from the environment, as normal [DONE in 7.4.3]\n\n<p></p></li><li>GSI_DAEMON_DIRECTORY and GSI_DAEMON_TRUSTED_CA_DIR both have 'DAEMON' in their name, which makes them unsuitable for being the settings that apply to both daemons and tools.  Perhaps we could just remove 'DAEMON' from the name.  The old settings could be preserved for backward compatibility.\n\n<p></p></li><li>the manual needs to be updated</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-13 10:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/472eeb9fafacc893a1d09540f5e6a3e470ed4243\">[17852]</a></span>: Allow environmental configuration of GSI_DAEMON_TRUSTED_CA_DIR and GSI_DAEMON_DIRECTORY. <span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=1333\" onclick=\"get_ticket_and_populate_wrapper('1333'); return false;\" title=\"GSI cert settings ignore config settings from environment\">#1333</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Oct-27 16:40", "status": "stalled", "created": "2010-Apr-06 12:39", "fixed_version": "2010-Apr-06 12:39", "broken_version": "v070100", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "dan@hep.wisc.edu,sfiligoi@fnal.gov,jfrey@cs.wisc.edu,zmiller@cs.wisc.edu", "due_date": ""}