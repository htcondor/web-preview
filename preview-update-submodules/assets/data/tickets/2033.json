{"id": 2033, "title": "Ticket #2033: Add _CONDOR_PROCID and _CONDOR_CLUSTERID to default job environment", "description": "<blockquote>\nIt is occasionally useful for a job to know its own Cluster.Proc.  It lets the job name various output files, or log useful debugging information.  This can be accomplished by passing $(ClusterId).$(ProcId) into the arguments or the environment in the submit file, but that seems a bit silly since it's information passed all the way through to the starter anyway.\n\n<p>Proposed: Two new environment variables automatically set by the starter:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">_CONDOR_CLUSTERID=42\n_CONDOR_PROCID=0\n</pre></div>\n\n\n<p>These directly map to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClusterId\" title=\"Cluster Id\">ClusterId</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ProcId\" title=\"Proc Id\">ProcId</a></span> in the job's classad.  It should be identical to putting or appending the following to the \"environment\" in your submit file:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">environment=\"_CONDOR_CLUSTERID=$(ClusterId) _CONDOR_PROCID=$(ProcId)\"\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Nov-04 13:25:54 by adesmet:</em> <br/>\n\nI presumably had a specific use case when I wrote this.  I now have another: we are providing a wrapper script for end users.  This script would benefit from knowing the Cluster and Process; it can use it to avoid multiple jobs writing to the same filename.  At the moment, we need to rely on users correctly passing the Cluster and Process down to us.  An urgent job failed to do so, and it's making debugging hard.\n\n<p></p><hr/>\n<em>2011-Nov-16 16:12:11 by adesmet:</em> <br/>\n\nUse case mentioned above is CHTC trac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=191\" onclick=\"get_ticket_and_populate_wrapper('191'); return false;\" title=\"Push more testing functionality into CondorTest.pm\">#191</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Nov-16 16:12", "status": "new", "created": "2011-Apr-04 14:08", "fixed_version": "2011-Apr-04 14:08", "broken_version": "v070000", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}