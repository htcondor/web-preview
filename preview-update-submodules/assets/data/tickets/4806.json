{"id": 4806, "title": "Ticket #4806: condor_q should support \"-limit\" to control the number of results", "description": "<blockquote>\nWhen debugging a schedd, I often want to look at a single job out of a problematic task.  Hence, I do something along the lines of:\n\n<p></p><div class=\"verbatim\">\n<pre>condor_q -const BLAH | head\n</pre></div>\n\n\n<p>to get a job ID, then\n\n</p><p></p><div class=\"verbatim\">\n<pre>condor_q 12345.6 -l | sort\n</pre></div>\n\n\n<p>to get the attributes I'm interested in.\n\n</p><p>In some cases, BLAH may match a few 10k worth of jobs - and I throw out everything but the first.  Then, I have to do a second query (meaning a second fork on busy schedds, etc).  It'd be more convenient (and more efficient use of resources) if I could combine this into a single query:\n\n</p><p></p><div class=\"verbatim\">\n<pre>condor_q -const BLAH -l -limit 1 | sort\n</pre></div>\n\n\n<p>Note that <code>condor_history</code> uses -match for this, it should be changed to also take -limit as a synonym.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-17 11:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/11074ce7aab8f98bdc14064442ebff1a854550f4\">[43381]</a></span>: complete documentation for new -limit option to condor_q and condor_history. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-16 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3db864d2c4c7b086d07bcf1bc7e6210963604f13\">[43369]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4792\" onclick=\"get_ticket_and_populate_wrapper('4792'); return false;\" title=\"simple option to condor_q to query the negotiator's autocluster\">#4792</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4797\" onclick=\"get_ticket_and_populate_wrapper('4797'); return false;\" title=\"SCHEDD should have blacklist and whitelist for significant attributes\">#4797</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4828\" onclick=\"get_ticket_and_populate_wrapper('4828'); return false;\" title=\"CONDOR_Q_USE_V3_PROTOCOL should be on by default\">#4828</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-13 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6e36c146540b9f25ebb8e6726cb29611f270a430\">[42181]</a></span>: add support for -limit to the v2 and v1 condor_q protocol for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span> ===VersionHistory:None===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-13 09:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6ecac3cf57942cab1be9849978870554e77dcac7\">[42180]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span> change -match to -limit in condor_q and add -limit to condor_history. implement -limit for -autocluster queries, and fix merge issues with master branch  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-02 16:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b664589b579fd9360bc8388f533a65c60ae3787e\">[42079]</a></span>: Client-side changes for match limits. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-02 16:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f65c53f0ef524fb1b2190ee68e9ea91dcbc2061f\">[42078]</a></span>: Have the schedd possibly return a fixed number of matches. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4806\" onclick=\"get_ticket_and_populate_wrapper('4806'); return false;\" title='condor_q should support \"-limit\" to control the number of results'>#4806</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Feb-18 15:32", "status": "resolved", "created": "2015-Jan-02 16:22", "fixed_version": "2015-Jan-02 16:22", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}