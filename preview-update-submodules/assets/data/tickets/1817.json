{"id": 1817, "title": "Ticket #1817: condor_status -direct is incompatible with old classads", "description": "<blockquote>\ncondor_status -direct from a version of condor_status from before 7.5.2 (old classads) does not retrieve any ads from a startd of 7.5.2+.  The problem is that the function IsAHalfMatch() in addition to checking requirements also checks <code>TargetType</code>.  The query ad from the older condor_status does not contain <code>TargetType</code>.</blockquote>", "remarks": "<blockquote>\nI am fixing this by making the startd call a new function called <code>IsAHalfMatchIgnoringTargetType()</code>.  All other uses of <code>IsAHalfMatch()</code> should be reviewed to see which function they should call.\n\n<p></p><hr/>\n<em>2010-Dec-20 21:56:33 by danb:</em> <br/>\n\nI was wrong about the true cause of this problem.  The true cause was that in 7.5.5, the specially transferred <code>MyType</code> and <code>TargetType</code> were getting cleared and replaced by attributes in the ad of the same name.  Since old classads did not send these as attributes, <code>MyType</code> and <code>TargetType</code> were basically empty for ads received from a version of condor using old classads.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-20 21:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/67a8a17aedcd8c7218c02e1e7831575b00791fc2\">[25835]</a></span>: Removed release note for fix to <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1817\" onclick=\"get_ticket_and_populate_wrapper('1817'); return false;\" title=\"condor_status -direct is incompatible with old classads\">#1817</a></span>, because this was internal to 7.5.5.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-20 21:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8f2ac2c1dd35d0b672dbfd44b76c60bb73255652\">[25834]</a></span>: Documented fix for condor_status -direct incompatibility. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1817\" onclick=\"get_ticket_and_populate_wrapper('1817'); return false;\" title=\"condor_status -direct is incompatible with old classads\">#1817</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-20 21:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f31972d2c79c292a57690e8446b04ec53d943468\">[19741]</a></span>: Revert \"Fixed incompatibility with old classads version of condor_status -direct. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1817\" onclick=\"get_ticket_and_populate_wrapper('1817'); return false;\" title=\"condor_status -direct is incompatible with old classads\">#1817</a></span>\" This reverts commit 65dccffe9cd7487a94a722e99ec0f3ad54283228.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-19 12:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/65dccffe9cd7487a94a722e99ec0f3ad54283228\">[19712]</a></span>: Fixed incompatibility with old classads version of condor_status -direct. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1817\" onclick=\"get_ticket_and_populate_wrapper('1817'); return false;\" title=\"condor_status -direct is incompatible with old classads\">#1817</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Dec-20 22:12", "status": "resolved", "created": "2010-Dec-19 12:46", "fixed_version": "2010-Dec-19 12:46", "broken_version": "v070505", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "jfrey@cs.wisc.edu", "due_date": ""}