{"id": 1774, "title": "Ticket #1774: The ExitCode attribute is magic, appears to be mostly broken", "description": "<blockquote>\nI've got a 7.4.4 Linux scheduler and 7.0.5 execute nodes. I'm trying to form a on_exit_hold expression that holds jobs that don't exit with a 0 code. The <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ExitCode\" title=\"Exit Code\">ExitCode</a></span> is not in the ad after a job completes, but testing if it's undefined returns false. For example:\n\n<p></p><pre>  [root@anpvgrd1 log]# condor_q -l 24 | grep -i exit\n  ExitStatus = 0\n  ExitBySignal = FALSE\n  WhenToTransferOutput = \"ON_EXIT\"\n  OnExitHold = isUndefined(ExitCode) != FALSE\n  OnExitRemove = isUndefined(ExitCode)\n  RequeueReason = \"The job attribute OnExitRemove expression 'isUndefined(ExitCode)' evaluated to FALSE\"\n</pre>\n\n<p>I would have expected isUndefined(ExitCode) to return True because <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ExitCode\" title=\"Exit Code\">ExitCode</a></span> is definitely not in the job's ad. It's un-printable:\n\n</p><p></p><pre>  [root@anpvgrd1 log]# condor_q -f \"%s\\n\" ExitCode\n  [root@anpvgrd1 log]#\n</pre>\n\n<p>Un-eval-able:\n\n</p><p></p><pre>  [root@anpvgrd1 log]# condor_q -f \"%s\\n\" 'ExitCode == 0'\n  [root@anpvgrd1 log]#\n</pre>\n\n<p>FWIW the following works when my scheduler is <strong>Windows</strong> and either 7.0.5 <em>or</em> 7.4.4:\n\n</p><p></p><pre>  OnExitHold = (ExitCode != 0)\n  OnExitRemove = (ExitCode == 0)\n</pre>\n\n<p>In that case the jobs hold and remove properly according to their <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ExitCode\" title=\"Exit Code\">ExitCode</a></span> values. This appears to be some Linux scheduler/Windows execute node anomaly.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Nov-17 11:04", "status": "new", "created": "2010-Nov-17 11:04", "fixed_version": "2010-Nov-17 11:04", "broken_version": "v070404", "priority": "4", "subsystem": "Unknown", "assigned_to": "", "derived_from": "", "creator": "ichesal", "rust": "", "customer_group": "other", "visibility": "public", "notify": "ichesal@cyclecomputing.com, ialderman@cyclecomputing.com", "due_date": ""}