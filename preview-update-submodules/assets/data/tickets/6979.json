{"id": 6979, "title": "Ticket #6979: condor_status -af nestedClassAd and condor_status -af:r undefined", "description": "<blockquote>\n<div class=\"code\">\n<pre class=\"code\">$ condor_status -af ToE\n[  ]\n</pre></div>\n\n\n<p>Is not really OK and could easily cause a crash, instead.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ condor_status -af:r undefinedAttribute\nundefinedAttribute\n</pre></div>\n\n\n<p>This is super not-helpful and TJ has supplied a fix.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Apr-04 17:12:49 by tlmiller:</em> <br/>\n\nNeeds a unit test for the new value type.\n\n<p></p><hr/>\n<em>2019-Apr-05 13:36:38 by tlmiller:</em> <br/>\n\nThis is (technically) also an API/semantic change, so this needs to be documented.\n\n<p></p><hr/>\n<em>2019-May-29 16:27:26 by tlmiller:</em> <br/>\n\nSince we don't actually specify the results of -af:r anywhere (after twenty seconds of careful research), I won't document anywhere but the release notes the subtle changes here.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-29 15:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/12a0b27873057e35535a075a09e0a4763b500294\">[56984]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6979\" onclick=\"get_ticket_and_populate_wrapper('6979'); return false;\" title=\"condor_status -af nestedClassAd and condor_status -af:r undefined\">#6979</a></span>) Version history item.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-09 17:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ba6ee8d6d31fd1cf19f0545cad3a428ba0d954a4\">[56562]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6979\" onclick=\"get_ticket_and_populate_wrapper('6979'); return false;\" title=\"condor_status -af nestedClassAd and condor_status -af:r undefined\">#6979</a></span>) Remove potentially-dangling pointers.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-04 18:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ff20e7a331947e81dfcf37065d9bd2096c6d77f3\">[56512]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6979\" onclick=\"get_ticket_and_populate_wrapper('6979'); return false;\" title=\"condor_status -af nestedClassAd and condor_status -af:r undefined\">#6979</a></span>) Fix -af:r not printing undefined when attribute reference is undefined. Fix -af not printing a nested classad.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-04 18:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e163a513bbbaca64e2ec745be8429992a7889b6\">[56511]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6979\" onclick=\"get_ticket_and_populate_wrapper('6979'); return false;\" title=\"condor_status -af nestedClassAd and condor_status -af:r undefined\">#6979</a></span>) Fix IsClassAdValue(...) for SCLASSAD_VALUE.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-04 17:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d88ecea333c1a1283a7751b690bfff5d1d45b9e7\">[56509]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6979\" onclick=\"get_ticket_and_populate_wrapper('6979'); return false;\" title=\"condor_status -af nestedClassAd and condor_status -af:r undefined\">#6979</a></span>) Add SCLASSAD_VALUE, like SLIST_VALUE, but for nested <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>. (So that the value object holds and frees the pointer.)  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-May-29 16:27", "status": "resolved", "created": "2019-Apr-04 17:10", "fixed_version": "2019-Apr-04 17:10", "broken_version": "v080900", "priority": "2", "subsystem": "Libs", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}