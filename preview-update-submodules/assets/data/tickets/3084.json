{"id": 3084, "title": "Ticket #3084: Negotiator will repeatedly wait for wedged schedd; slows negotiation", "description": "<blockquote>\n(Based on a report by roy. See \"Thoughts on bad negotiation cycles\" to condor-team, June 22, 2012.)\n\n<p>If the negotiator times out talking to a schedd, it will go to the next submittor and try to connect, even if that submittor is on the same schedd.   If you have a bunch of submittors on a non-responsive schedd, this might mean a multi-minute wait.\n\n</p><p>Alain Roy has seen the negotiator waste 5.5 minutes out of every negotiation cycle trying to connect to the same unresponsive schedd for multiple submittors.  This dragged the cycle from about 5 minutes out to 10 minutes.\n\n</p><p>Proposed: If a schedd times out, drop all submittors from that schedd from the list to be processed, at least until the next negotiation cycle.\n\n</p><p>Representative <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NegotiatorLog\" title=\"Negotiator Log\">NegotiatorLog</a></span>, anonymized.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">06/22/12 01:56:56 Socket to user1@node.example.com (&lt;XXX.XXX.XXX.45:56330&gt;) not in cache, creating one\n06/22/12 01:57:26 condor_read(): timeout reading 5 bytes from schedd user1@node.example.com.\n06/22/12 01:57:26 IO: Failed to read packet header\n06/22/12 01:57:26   Error: Ignoring submitter for this cycle\n...\n06/22/12 01:57:26 Socket to user2@node.example.com (&lt;XXX.XXX.XXX.45:56330&gt;) not in cache, creating one\n06/22/12 01:57:56 condor_read(): timeout reading 5 bytes from schedd user2@node.example.com.\n06/22/12 01:57:56 IO: Failed to read packet header\n06/22/12 01:57:56   Error: Ignoring submitter for this cycle\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2012-Jun-25 11:14", "status": "new", "created": "2012-Jun-25 11:14", "fixed_version": "2012-Jun-25 11:14", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}