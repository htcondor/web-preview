{"id": 3314, "title": "Ticket #3314: condor_who truncates program name", "description": "<blockquote>\nI noticed that condor_who sometimes truncates the last column.  Look at the example below (first case is with an 80-character terminal; second case is 225-character-wide terminal).\n\n<p>I think it's because the last column is right-aligned and there's a huge difference between the sizes of the command-lines of the program (glideinWMS jobs have a several-hundred-character long arguments).  When things are right-aligned, the program name is completely cut off in this case.\n\n</p><p>Can we change just the last column to left-aligned?\n\n</p><p>Brian\n\n</p><p></p><div class=\"verbatim\">\n<pre>[root@red-d9n1 ~]#   condor_who\n\nOWNER                 CLIENT          SLOT JOB        RUNTIME    PID    PROGRA\nuscmsPool2705@unl.edu red-gw1.unl.edu  1_7 373917.0   0+05:43:45 17323  /var/l\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_9 373907.0   0+05:44:46 7463   /var/l\nuscmsPool2717@unl.edu     red.unl.edu 1_15 372684.0   0+06:03:04 8679   /var/l\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_11 373551.0   0+06:05:10 1973   /var/l\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_16 373549.0   0+06:05:37 24952  /var/l\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_13 373543.0   0+06:05:38 24951  /var/l\nuscmsPool2708@unl.edu red-gw1.unl.edu 1_10 373541.0   0+06:06:05 21248  /var/l\nuscmsPool2714@unl.edu     red.unl.edu  1_8 372624.0   0+06:07:03 12938  /var/l\nuscmsPool2716@unl.edu red-gw2.unl.edu  1_6 373576.0   0+06:07:50 5717   /var/l\nuscmsPool2705@unl.edu red-gw1.unl.edu  1_3 373522.0   0+06:08:14 2292   /var/l\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_2 373531.0   0+06:08:40 27422  /var/l\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_1 373524.0   0+06:08:41\n       engage@unl.edu     red.unl.edu 1_12 370940.0   0+15:18:54 30884  /var/l\n       engage@unl.edu red-gw1.unl.edu  1_5 369352.0   1+01:26:14 6842   /var/l\nuscmsPool2703@unl.edu red-gw1.unl.edu 1_14 366980.0   1+16:54:02\n</pre></div>\n\n\n<p></p><div class=\"verbatim\">\n<pre>[root@red-d9n1 ~]#   condor_who\n\nOWNER                 CLIENT          SLOT JOB        RUNTIME    PID    PROGRAM\nuscmsPool2705@unl.edu red-gw1.unl.edu  1_7 373917.0   0+05:43:32 17323  /var/lib/condor/execute/dir_17312/condor_exec.exe -v std -cluster 324893 -name v2_1 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.main -subclu\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_9 373907.0   0+05:44:33 7463   /var/lib/condor/execute/dir_7416/condor_exec.exe -v std -cluster 324949 -name v2_1 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.main -subclus\nuscmsPool2717@unl.edu     red.unl.edu 1_15 372684.0   0+06:02:51 8679   /var/lib/condor/execute/dir_8674/condor_exec.exe -v std -cluster 1051498 -name Production_v4_3 -entry CMS_T2_US_Nebraska_Red -clientname UCSD-v5_4.main\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_11 373551.0   0+06:04:57 1973   /var/lib/condor/execute/dir_1952/condor_exec.exe -v std -cluster 702407 -name Production_v4_3 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.ma\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_16 373549.0   0+06:05:24 24952  /var/lib/condor/execute/dir_24923/condor_exec.exe -v std -cluster 702407 -name Production_v4_3 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.m\nuscmsPool2717@unl.edu red-gw1.unl.edu 1_13 373543.0   0+06:05:25 24951  /var/lib/condor/execute/dir_24910/condor_exec.exe -v std -cluster 702407 -name Production_v4_3 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.m\nuscmsPool2708@unl.edu red-gw1.unl.edu 1_10 373541.0   0+06:05:52 21248  /var/lib/condor/execute/dir_21183/condor_exec.exe -v std -cluster 843835 -name v1_2 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.main -subclu\nuscmsPool2714@unl.edu     red.unl.edu  1_8 372624.0   0+06:06:50 12938  /var/lib/condor/execute/dir_12933/condor_exec.exe -v std -cluster 1006493 -name v1_2 -entry CMS_T2_US_Nebraska_Red -clientname UCSD-v5_4.main -subcluste\nuscmsPool2716@unl.edu red-gw2.unl.edu  1_6 373576.0   0+06:07:37 5717   /var/lib/condor/execute/dir_5706/condor_exec.exe -v std -cluster 722086 -name v1_2 -entry CMS_T2_US_Nebraska_Red_gw2 -clientname UCSD-v5_4.main -subclus\nuscmsPool2705@unl.edu red-gw1.unl.edu  1_3 373522.0   0+06:08:01 2292   /var/lib/condor/execute/dir_2287/condor_exec.exe -v std -cluster 843818 -name v1_2 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.main -subclus\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_2 373531.0   0+06:08:27 27422  /var/lib/condor/execute/dir_27411/condor_exec.exe -v std -cluster 843817 -name v1_2 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname UCSD-v5_4.main -subclu\nuscmsPool2708@unl.edu red-gw1.unl.edu  1_1 373524.0   0+06:08:28\n       engage@unl.edu     red.unl.edu 1_12 370940.0   0+15:18:41 30884  /var/lib/condor/execute/dir_30879/condor_exec.exe -v std -cluster 1003713 -name v1_2 -entry CMS_T2_US_Nebraska_Red -clientname EngageVO-submit3-v1_0.mai\n       engage@unl.edu red-gw1.unl.edu  1_5 369352.0   1+01:26:01 6842   /var/lib/condor/execute/dir_6469/condor_exec.exe -v std -cluster 839456 -name v1_2 -entry CMS_T2_US_Nebraska_Red_gw1 -clientname EngageVO-submit3-v1_0.m\nuscmsPool2703@unl.edu red-gw1.unl.edu 1_14 366980.0   1+16:53:49\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nI noticed the left-alignment problem a few weeks ago and fixed it.  Truncation can be avoided in 7.9.0 by using the -wide option.\n\n<p></p><hr/>\n<em>2012-Nov-13 07:15:24 by bbockelm:</em> <br/>\n\nHi Johnkn,\n\n<p>I updated to git HEAD from Monday and it is now worse.  See below; the first two lines don't line up with the rest.\n\n</p><p>Brian\n\n</p><p>[root@red-d9n1 ~]# condor_who\n\n</p><p></p><div class=\"verbatim\">\n<pre>OWNER            CLIENT     SLOT JOB      RUNTIME    PID    PROGRAM\nxjanssen@unl.edu t3.unl.edu  1_9 149.69   0+01:54:33 12281  /var/lib/condor/exe\nxjanssen@unl.edu t3.unl.edu  1_8 149.40   0+03:29:46 9861   /var/lib/condor/exe\nuscmsPool2703@unl.edu red.unl.edu 1_15 379798.0   0+03:37:11\nuscmsPool2703@unl.edu red.unl.edu  1_7 379575.0   0+04:23:29 13135  /var/lib/co\nuscmsPool2707@unl.edu red-gw1.unl.edu 1_14 381598.0   0+04:27:11 24007  /var/li\nuscmsPool2703@unl.edu red-gw1.unl.edu  1_5 381548.0   0+04:33:38 30830  /var/li\n     xjanssen@unl.edu      t3.unl.edu 1_12 149.530    0+05:34:35 5328   /var/li\n     xjanssen@unl.edu      t3.unl.edu 1_11 151.287    0+05:54:41 4228   /var/li\n     xjanssen@unl.edu      t3.unl.edu  1_4 151.235    0+06:00:24 9801   /var/li\nuscmsPool2704@unl.edu red-gw1.unl.edu 1_16 380990.0   0+06:26:36 6990   /var/li\n         glow@unl.edu red-gw1.unl.edu 1_13 380933.0   0+06:42:59 12639  /var/li\n     xjanssen@unl.edu      t3.unl.edu  1_6 151.58     0+07:00:35 15149  /var/li\nuscmsPool2703@unl.edu red-gw1.unl.edu 1_10 379847.0   0+10:51:42 11010  /var/li\nuscmsPool2706@unl.edu     red.unl.edu  1_1 377374.0   0+15:07:37\n         glow@unl.edu red-gw2.unl.edu  1_2 377960.0   0+21:57:13 15206  /var/li\n         glow@unl.edu     red.unl.edu  1_3 376485.0   0+21:58:49 5889   /var/li\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Nov-13 08:54:15 by johnkn:</em> <br/>\n\nThis is not new behavior.  You must have been getting relatively wider data in the first row in eariler tests.\n\n<p>condor_who re-sets column widths as it goes along to avoid truncating data. The alternative is to render the whole data set once to dev/nul, then again for display.\n\n</p><p></p><hr/>\n<em>2012-Nov-13 09:12:45 by bbockelm:</em> <br/>\n\nHi,\n\n<p>I think rendering to /dev/null and re-aligning the columns would probably be preferable here...\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2012-Nov-15 14:51:18 by johnkn:</em> <br/>\n\nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7a18b54403d9a0ce203878f43a4ab8f176504105\">[34103]</a></span> changes the code to render once to calculate column widths, then again for output.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-15 13:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dc8a60eaec844a4cd8694de713f7df6fdc177317\">[34126]</a></span>: Add version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3314\" onclick=\"get_ticket_and_populate_wrapper('3314'); return false;\" title=\"condor_who truncates program name\">#3314</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3318\" onclick=\"get_ticket_and_populate_wrapper('3318'); return false;\" title=\"job log doesn't show resources used when machine ad is referenced\">#3318</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-13 13:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7a18b54403d9a0ce203878f43a4ab8f176504105\">[34103]</a></span>: fix problems with column widths in condor_who <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3314\" onclick=\"get_ticket_and_populate_wrapper('3314'); return false;\" title=\"condor_who truncates program name\">#3314</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Dec-04 14:42", "status": "resolved", "created": "2012-Nov-11 17:26", "fixed_version": "2012-Nov-11 17:26", "broken_version": "v070900", "priority": "4", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}