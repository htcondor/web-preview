{"id": 6557, "title": "Ticket #6557: RemoteResource::allowRemoteWriteAttributeAccess() problems", "description": "<blockquote>\n<ol>\n<li>Does not check for (SYSTEM_)IMMUTABLE_JOB_ATTRS.\n</li><li>Uses contains_anycase_withwildcard for CHIRP_DELAYED_UPDATE_PREFIX, which is defined to be a prefix and therefore doesn't need a wildcard.\n</li></ol>\n\n<p>While addressing the first point, the speed of checking for attributes (now that there will by default be some) should be improvable by using a std::set instead of a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StringList\" title=\"String List\">StringList</a></span>; there should already be a function for constructing a std::set from a string-containing-a-list.</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Feb-07 10:38:56 by tlmiller:</em> <br/>\n\nDid not document change to CHIRP_DELAYED_UPDATE_PREFIX implementation because it doesn't change any user-visible behaviour.\n\n<p></p><hr/>\n<em>2018-Feb-13 09:00:00 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> the new code for chirp delayed update prefix is a case-sensitive comparison, it should be case-insensitive.  you could use starts_with_ignore_case() from stl_string_utils to do a case-insensitive compare.\n\n<p></p><hr/>\n<em>2018-Feb-13 12:34:19 by tlmiller:</em> <br/>\n\nGood catch, thanks.\n\n<p></p><hr/>\n<em>2018-Mar-01 11:50:08 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> change looks good.\n\n<p></p><hr/>\n<em>2018-Mar-09 11:18:50 by tim:</em> <br/>\n\n<strong>DOC REVIEW:</strong> Looks good.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6958\" onclick=\"get_ticket_and_populate_wrapper('6958'); return false;\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nParam CHIRP_DELAYED_UPDATE_PREFIX is broken</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-08 17:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/21e56fcf573837e0f2d13a32e6d9b07b214bf223\">[56545]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6958\" onclick=\"get_ticket_and_populate_wrapper('6958'); return false;\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6557\" onclick=\"get_ticket_and_populate_wrapper('6557'); return false;\" title=\"RemoteResource::allowRemoteWriteAttributeAccess() problems\">#6557</a></span>) Partially revert code changes and rewrite documentation for CHIRP_DELAYED_UPDATE_PREFIX.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-13 12:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ffef7b1c3e65e380b59aef2575d127247d8993c8\">[54286]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6557\" onclick=\"get_ticket_and_populate_wrapper('6557'); return false;\" title=\"RemoteResource::allowRemoteWriteAttributeAccess() problems\">#6557</a></span>) The delayed-update prefix is now case-insensitive, as it should be.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-07 10:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/16fd81b362dfa38d9a8bfa48175ba23c98493bb3\">[54228]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6557\" onclick=\"get_ticket_and_populate_wrapper('6557'); return false;\" title=\"RemoteResource::allowRemoteWriteAttributeAccess() problems\">#6557</a></span>) Check immutable job attrs in RemoteResource::allowRemoteWriteAttributeAccess(); also rewrite CHIRP_DELAYED_UPDATE_PREFIX handling to be less inefficient and better match the manual.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Mar-09 11:18", "status": "resolved", "created": "2018-Feb-05 12:10", "fixed_version": "2018-Feb-05 12:10", "broken_version": "", "priority": "2", "subsystem": "DaemonsSubmitNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}