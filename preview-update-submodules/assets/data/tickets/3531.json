{"id": 3531, "title": "Ticket #3531: Eliminate unnecessary proxy refreshes for grid-type batch jobs", "description": "<blockquote>\nFor grid-type batch jobs, the gridmanager attempts refreshing the proxy in a couple cases where it's not necessary.\n\n<p>The ft-gahp doesn't support forwarding a refreshing proxy. So when the blahp (and ft-gahp) are running on a remote machine via ssh, don't bother trying to refresh the proxy in the blahp.\n\n</p><p>For other grid-types, we save the expiration time of the delegated proxy in the job ad so that on restart, we don't redelegate the proxy if the local one hasn't changed. We should do the same for batch jobs.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-07 16:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e7a13308146afb5115e8b2ca9dd26c5d3291fd0f\">[35103]</a></span>: Fix syntax error in grid-type batch proxy refresh change. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3531\" onclick=\"get_ticket_and_populate_wrapper('3531'); return false;\" title=\"Eliminate unnecessary proxy refreshes for grid-type batch jobs\">#3531</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-07 16:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/312e4cef94c1c0ad24b8e92b199c22384f506fe8\">[35100]</a></span>: Don't refresh batch job proxies on gridmanager restart. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3531\" onclick=\"get_ticket_and_populate_wrapper('3531'); return false;\" title=\"Eliminate unnecessary proxy refreshes for grid-type batch jobs\">#3531</a></span> Set ATTR_DELEGATED_PROXY_EXPIRATION in the job ad for grid-type batch jobs. Then, we don't have to do a proxy refresh to the blahp on restart unless it's actually necessary. We already do this for some other types of grid jobs.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-07 16:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ee5ded904dc137f1e82f828e3a3d8afa918f9b2d\">[35099]</a></span>: Don't try proxy refresh when talking to the blahp over ssh. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3531\" onclick=\"get_ticket_and_populate_wrapper('3531'); return false;\" title=\"Eliminate unnecessary proxy refreshes for grid-type batch jobs\">#3531</a></span> The ft-gahp doesn't support delegating a refreshed proxy, so there's no way to get the new proxy to the blahp.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Mar-29 10:40", "status": "resolved", "created": "2013-Mar-07 15:55", "fixed_version": "2013-Mar-07 15:55", "broken_version": "v070900", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}