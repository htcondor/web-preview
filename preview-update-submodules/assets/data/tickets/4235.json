{"id": 4235, "title": "Ticket #4235: procd logs \"short read\" error if any running process has a space in it", "description": "<blockquote>\nIf there is a running process on the system with a space in the name, the procd logs a \"short read\" error.  This isn't a problem if the process is a system process, not part of a condor tree of processes.  If the job has a space in it, it will escape measurement of the procd.</blockquote>", "remarks": "<blockquote>\n<em>2014-Mar-03 11:43:48 by pfc:</em> <br/>\n\nThanks, Greg!  Note that this is still incorrect in the pathological but allowed case where a process name also has one or more parentheses in it.\n\n<p></p><hr/>\n<em>2014-Mar-03 14:30:40 by jfrey:</em> <br/>\n\nActually, this handles the pathological case of process names containing parenthesis characters. It looks for the first left paren and last right paren, and converts all spaces between the two to underscores.\n\n<p></p><hr/>\n<em>2014-Mar-03 14:38:05 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p></p><ul>\n<li>You can use the full buffer size in the call to fgets().\n</li><li>It's not safe to print the <code>line</code> buffer when fgets() returns NULL.\n</li><li>You should print the error string in addition to the errno number (i.e. print result of <code>strerror(errno)</code>).</li></ul>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 11:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c31011e261541f3118d233809d9351a06b9d52a7\">[40344]</a></span>: write 8.0.7 version history item <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4235\" onclick=\"get_ticket_and_populate_wrapper('4235'); return false;\" title='procd logs \"short read\" error if any running process has a space in it'>#4235</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Mar-03 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/babdfd5cc73dfd55172f91bb69adc764778bd097\">[39517]</a></span>: Fixes as per code review <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4235\" onclick=\"get_ticket_and_populate_wrapper('4235'); return false;\" title='procd logs \"short read\" error if any running process has a space in it'>#4235</a></span> Thanks, jfrey!  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-28 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c38872c707ab24470483535f68687ea572ad245c\">[39512]</a></span>: Fix procd problem with spaces in exes and \"short read\" <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4235\" onclick=\"get_ticket_and_populate_wrapper('4235'); return false;\" title='procd logs \"short read\" error if any running process has a space in it'>#4235</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Mar-03 16:46", "status": "defer", "created": "2014-Feb-28 13:55", "fixed_version": "2014-Feb-28 13:55", "broken_version": "v080000", "priority": "5", "subsystem": "DaemonProcD", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu,pcouvare@caltech.edu", "due_date": "20130228"}