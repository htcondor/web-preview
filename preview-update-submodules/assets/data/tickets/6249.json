{"id": 6249, "title": "Ticket #6249: Make TCP updates to View collectors asynchronous", "description": "<blockquote>\nWe noticed that some CE ads weren't being reported to the OSG central collector and it turned out to be due to UDP packets being dropped. We would like to make <code>UPDATE_VIEW_COLLECTOR_WITH_TCP=true</code> the default for our CEs but that creates a dependency on the uptime of the central collector because the TCP connections are blocking.</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2020-Apr-10 07:46:13 by tim:</em> <br/>\n\nBulk change of target version from v080906 to v080907 using ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-23 11:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/311fa3a664016b63e53a3ef2ebaed4d2f83ec583\">[61554]</a></span>: Fix build breakage after merge of master into <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=6249\" onclick=\"get_ticket_and_populate_wrapper('6249'); return false;\" title=\"Make TCP updates to View collectors asynchronous\">#6249</a></span> work branch  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-21 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0027ff2d68be896a51ea7e1db399645d3f21b10a\">[61546]</a></span>: Simplify view collector forwarding code. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=6249\" onclick=\"get_ticket_and_populate_wrapper('6249'); return false;\" title=\"Make TCP updates to View collectors asynchronous\">#6249</a></span> We don't need two code paths into the forwarding code. Committer: John (TJ) Knoeller  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-30 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/766ca13d20458194548ac48843cef755d5b33312\">[61540]</a></span>: Initial code for nonblocking TCP updates to the view collector. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=6249\" onclick=\"get_ticket_and_populate_wrapper('6249'); return false;\" title=\"Make TCP updates to View collectors asynchronous\">#6249</a></span> When in nonblocking mode, if the TCP socket to the view collector fills up, it is registered with <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span> and subsequent updates are queued locally. When the backlog clears, the queue updates are then sent. There is a cap on the\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-30 14:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3bd969a19ea45a7491cff24d3349d3dea0cc8652\">[61539]</a></span>: Simplify view collector forwarding code. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=6249\" onclick=\"get_ticket_and_populate_wrapper('6249'); return false;\" title=\"Make TCP updates to View collectors asynchronous\">#6249</a></span> We don't need two code paths into the forwarding code.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Nov-23 10:39", "status": "active", "created": "2017-May-04 16:06", "fixed_version": "2017-May-04 16:06", "broken_version": "", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "gthain", "derived_from": "#4555", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu tannenba@cs.wisc.edu", "due_date": ""}