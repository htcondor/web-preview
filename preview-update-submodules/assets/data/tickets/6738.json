{"id": 6738, "title": "Ticket #6738: Unexpected behavior from Collector.locate() in the python bindings", "description": "<blockquote>\nAccording to TJ, htcondor.Collector().locate() is supposed to return a limited projection of the ad with enough information for the daemon to be contacted*. However, if you specify the hostname as the arg to the Collector constructor or use locateAll(), the full ad is returned.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">#!/bin/env python\n\nimport socket\nimport htcondor\n\ndt_coll = htcondor.DaemonTypes.Collector\n\n# ad projection\nprint(htcondor.Collector().locate(dt_coll))\n\n# full ad\nhostname = socket.getfqdn()\nprint(htcondor.Collector(hostname).locate(dt_coll))\nprint(htcondor.Collector().locateAll(dt_coll))\n</pre></div>\n\n\n<p>The issue with fixing this bug is that anyone that depends on the full ad from the locate functions will have their script break.\n\n</p><p>* The docstrings for locate() and locateAll() don't really indicate that they return a limited projection, though:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">    locate( (Collector)arg1, (DaemonTypes)arg2 [, (str)arg3]) -&gt; object :\n        Query the collector for a particular daemon.\n        :param daemon_type: Type of daemon; must be from the DaemonTypes enum.\n        :param name: Name of daemon to locate.  If not specified, it searches for the local daemon.\n        :return: The ad of the corresponding daemon.\n</pre></div>\n\n\n<p>and\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">    locateAll( (Collector)arg1, (DaemonTypes)arg2) -&gt; object :\n        Query the collector for all ads of a particular type.\n        :param daemon_type: Type of daemon; must be from the DaemonTypes enum.\n        :return: A list of matching ads.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2018-Aug-16 11:13", "status": "new", "created": "2018-Aug-14 10:54", "fixed_version": "2018-Aug-14 10:54", "broken_version": "v080611", "priority": "4", "subsystem": "PythonBinding", "assigned_to": "tannenba", "derived_from": "#4882", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu jpatton@cs.wisc.edu", "due_date": ""}