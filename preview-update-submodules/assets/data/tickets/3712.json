{"id": 3712, "title": "Ticket #3712: startd should advertise statistics about preemption", "description": "<blockquote>\nMany user want to configure HTCondor to never preempt jobs.  Today, there's no easy way to verify that preemption is successfully disabled.  We should add startd-side statistics to measure number of job preemptions in the life of the startd.</blockquote>", "remarks": "<blockquote>\n<em>2013-Jun-19 14:30:39 by bbockelm:</em> <br/>\n\nGreat idea!\n\n<p>Is it possible to include this in the Negotiator and Schedd statistics also?\n\n</p><p></p><hr/>\n<em>2013-Jun-19 14:54:56 by gthain:</em> <br/>\n\nwe'll start with the stard, and maybe add Negotiator later.  I'd really like to get more information into the userlog too, so the user can have more visibility into what is going on wrt preemption.\n\n<p>Getting the terminology so the user can understand what is going on is vital, we need to be clear the differences between preemption, eviction and maybe other reasons a job was removed before completion.\n\n</p><p></p><hr/>\n<em>2013-Jun-24 17:30:54 by bbockelm:</em> <br/>\n\nLooking at the design doc - you may want to also advertise the preemption rates using the statistic's EMA class.\n\n<p></p><hr/>\n<em>2013-Jul-08 15:41:18 by bbockelm:</em> <br/>\n\nHi Greg -\n\n<p>Just a bump - are you planning on adding Ganglia metrics for this?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Aug-12 23:16:29 by bbockelm:</em> <br/>\n\nI'd still like to see more done here before release.\n\n<p>Per Dan's testing, this can't be used in START expressions. CMS is really looking to use this as a mechanism for having hosts limit per-worker startup rates.\n\n</p><p>I also think we should add a Ganglia stat by default.\n\n</p><p></p><hr/>\n<em>2013-Sep-13 10:19:31 by johnkn:</em> <br/>\n\nCODE_REVIEW: looks good to me. -tj</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4101\" onclick=\"get_ticket_and_populate_wrapper('4101'); return false;\" title=\"rename STARTD preemption stats to be consistent with SCHEDD stats\">#4101</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nrename STARTD preemption stats to be consistent with SCHEDD stats</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/763/PreemptionStats.docx\">PreemptionStats.docx</a>\n31651 bytes added by gthain on 2013-Jun-24 19:55:42 UTC.\n<br/>\nDesign doc<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-11 14:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9c23a731d1f1c134283b6ca773175cecca074686\">[37549]</a></span>: edit of new machine attribute defns and version history item; correct spelling ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3712\" onclick=\"get_ticket_and_populate_wrapper('3712'); return false;\" title=\"startd should advertise statistics about preemption\">#3712</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-09 14:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1c76d8da3833ce89dd02696cf98596d227ace146\">[37528]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3712\" onclick=\"get_ticket_and_populate_wrapper('3712'); return false;\" title=\"startd should advertise statistics about preemption\">#3712</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-15 14:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5a130eaa4003bb08683515ac3f8149ed748201a6\">[37237]</a></span>: Advance start Job start statistics at a reasonable rate <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3712\" onclick=\"get_ticket_and_populate_wrapper('3712'); return false;\" title=\"startd should advertise statistics about preemption\">#3712</a></span> This allows <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RecentTotalJobStarts\" title=\"Recent Total Job Starts\">RecentTotalJobStarts</a></span> to be used in matchmaking  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-25 15:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d5c0dec2f489983a7adfefdb8e7ce402f65305cd\">[36682]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f5e78924921da2f8006e014169276bcb9241382b\">[36681]</a></span>, Add <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3712\" onclick=\"get_ticket_and_populate_wrapper('3712'); return false;\" title=\"startd should advertise statistics about preemption\">#3712</a></span> statistics for preemptions and job starts per startd  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-25 15:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f5e78924921da2f8006e014169276bcb9241382b\">[36681]</a></span>: Add startd stats object <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3712\" onclick=\"get_ticket_and_populate_wrapper('3712'); return false;\" title=\"startd should advertise statistics about preemption\">#3712</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Sep-13 10:19", "status": "resolved", "created": "2013-Jun-19 14:14", "fixed_version": "2013-Jun-19 14:14", "broken_version": "v080000", "priority": "1", "subsystem": "DaemonsExecNode", "assigned_to": "johnkn", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}