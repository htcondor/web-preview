{"id": 1659, "title": "Ticket #1659: unit test test_is_executable_true() failing", "description": "<blockquote>\nThis unit test was failing:\n\n<p></p><div class=\"verbatim\">\n<pre>TEST:  Test that IsExecutable() returns true for a file that is executable.\nINPUT:\n    Directory Path:  /home/condor/execute/dir_772/userdir/src/condor_tests/\n    File Name:  condor_unit_tests\nEXPECTED OUTPUT:\n    RETURN:  TRUE\nACTUAL OUTPUT:\n    RETURN:  FALSE\nRESULT:  FAILURE, test failed at line 1541 (0.000259 seconds)\n</pre></div>\n\n\n<p>I found it failed because it assumed the current working directory was the same in which the <code>condor_unit_test</code> executable resided. This wasn't true when the unit tester was run in NMI.\n\n</p><p>I fixed it by specifically creating an executable file in the <code>setup()</code> function for that test file and using that instead. The newly created file is also cleaned up properly in the <code>cleanup()</code> function.\n\n</p><p>I also fixed a leaked fd while I was in there.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-16 10:49:12 by psilord:</em> <br/>\n\nFixed and checked in.\n\n<p></p><hr/>\n<em>2010-Sep-17 14:08:51 by slauson:</em> <br/>\n\nThere are several unit tests that assume that the README file is in the current working directory. I'm not sure if the README file is there in NMI, but it may be good practice to change its uses to an explicitly created file or remove the tests entirely to avoid any issues.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-16 10:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2ee0a2e1e3f9d4bab662f6a1ad2388acfaa779d7\">[18990]</a></span>: Fixed a unit test which was assuming that the executable \"condor_unit_tests\" was in the current working directory. In NMI, this wasn't the case. Now for the unit test which tests that an executable file is executable, there is an explicit file created and set to be executable. This is for ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1659\" onclick=\"get_ticket_and_populate_wrapper('1659'); return false;\" title=\"unit test test_is_executable_true() failing\">#1659</a></span>.\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Sep-17 14:08", "status": "resolved", "created": "2010-Sep-16 10:45", "fixed_version": "2010-Sep-16 10:45", "broken_version": "v070503", "priority": "4", "subsystem": "Tests", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu slauson@cs.wisc.edu", "due_date": "20100916"}