{"id": 1625, "title": "Ticket #1625: Directory::Remove_Entire_Directory() should return false if not a dir", "description": "<blockquote>\nIf a Directory object is constructed from a path that is not a directory, then Remove_Entire_Directory() should return false, not true. Rewind(), a function that rewinds the directory to start at the first file, currently returns false for an identical Directory object.\n<br/>\n<br/>\n\nThe unit test output:\n<div class=\"verbatim\">\n<pre>TEST:  Test that Remove_Entire_Directory() returns false for a Directory constru\ncted from a file path.\nINPUT:\n    Directory:  /scratch/slauson/git-build/src/condor_unit_tests/tmp/full_dir/em\npty_file\nEXPECTED OUTPUT:\n    RETURN:  FALSE\nCan't open directory \"/scratch/slauson/git-build/src/condor_unit_tests/tmp/full_\ndir/empty_file\" as PRIV_UNKNOWN, errno: 20 (Not a directory)\nCan't open directory \"/scratch/slauson/git-build/src/condor_unit_tests/tmp/full_\ndir/empty_file\" as PRIV_UNKNOWN, errno: 20 (Not a directory)\nACTUAL OUTPUT:\n    RETURN:  TRUE\nRESULT:  FAILURE, test failed at line 2321 (0.000046 seconds)\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2010-Aug-27 14:25:28 by slauson:</em> <br/>\n\nOf all the call sites, the return value is only checked in one case and all it does is print an error message if the return value is false. Modifying Remove_Entire_Directory() to return false in the case given above shouldn't cause any issues.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-01 13:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a0943c5b756d491d7495f14ba06bfe457f65bbd9\">[18907]</a></span>: Added check that makes Directory::Remove_Entire_Directory() return false if not a directory. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1625\" onclick=\"get_ticket_and_populate_wrapper('1625'); return false;\" title=\"Directory::Remove_Entire_Directory() should return false if not a dir\">#1625</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Sep-01 14:00", "status": "resolved", "created": "2010-Aug-27 12:18", "fixed_version": "2010-Aug-27 12:18", "broken_version": "v070500", "priority": "4", "subsystem": "Libs", "assigned_to": "slauson", "derived_from": "#1239", "creator": "slauson", "rust": "", "customer_group": "other", "visibility": "public", "notify": "slauson@cs.wisc.edu psilord@cs.wisc.edu", "due_date": ""}