{"id": 5624, "title": "Ticket #5624: condor_startd EXCEPTs if /var/run/utmp is missing", "description": "<blockquote>\nIf <code>/var/run/utmp</code> is not present on the filesystem, the <code>condor_startd</code> will EXCEPT.\n\n<p>It seems that this file is traditionally managed by the init system.  However, if the startd is run in other contexts (think - pilot starting in a Docker container), there may not be a traditional init system.\n\n</p><p>Looking at the code, an <strong>empty</strong> file is acceptable, but not a missing one.  We should just relax that.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Apr-15 08:42:33 by gthain:</em> <br/>\n\nI believe that setting STARTD_HAS_BAD_UTMP = true will work around this problem.  Also, some supercomputing centers run mini-distros \"compute-node linux\" which may be missing utmp as well.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-19 13:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d3312136a16509ab0f8e9ffba11aac21c7f54f5d\">[48244]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5624\" onclick=\"get_ticket_and_populate_wrapper('5624'); return false;\" title=\"condor_startd EXCEPTs if /var/run/utmp is missing\">#5624</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-19 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2ef6be6c0855aa6d3735589f6496545866b964d\">[48243]</a></span>: If /var/run/utmp is missing, don't except <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5624\" onclick=\"get_ticket_and_populate_wrapper('5624'); return false;\" title=\"condor_startd EXCEPTs if /var/run/utmp is missing\">#5624</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-May-04 10:28", "status": "resolved", "created": "2016-Apr-13 14:39", "fixed_version": "2016-Apr-13 14:39", "broken_version": "", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}