{"id": 4880, "title": "Ticket #4880: addrinfo_iterator constructors fails to initialize ipv6", "description": "<blockquote>\nFrom bbockelm:\nValgrind is complaining that the \u2018ipv6\u2019 member variable of addrinfo_iterator is being used uninitialized.  Does the patch below look OK?\n\n<p></p><div class=\"code\">\n<pre class=\"code\">--- a/src/condor_utils/ipv6_addrinfo.cpp\n+++ b/src/condor_utils/ipv6_addrinfo.cpp\n@@ -89,6 +89,7 @@ addrinfo_iterator::addrinfo_iterator(const addrinfo_iterator&amp; rhs) :\n addrinfo_iterator::addrinfo_iterator(addrinfo* res) : cxt_(new shared_context),\n        current_(NULL)\n {\n+       ipv6 = param_boolean( \"ENABLE_IPV6\", false );\n        cxt_-&gt;add_ref();\n        cxt_-&gt;head = res;\n }\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Feb-11 13:21:23 by adesmet:</em> <br/>\n\nThere is a deeper question about how necessary the ipv6 member variable is. But that's another ticket. For tlmiller and adesmet agree we should apply the patch.\n\n<p></p><hr/>\n<em>2015-Feb-11 13:33:17 by adesmet:</em> <br/>\n\nSee also <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4881\" onclick=\"get_ticket_and_populate_wrapper('4881'); return false;\" title=\"Eliminate or expand addrinfo_iterator::ipv6\">#4881</a></span>: Eliminate or expand addrinfo_iterator::ipv6</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-11 13:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/abc44ed50ea8597d2392e2489a5a4cd36a209f51\">[43327]</a></span>: Ensure addrinfo_iterator::ipv6 is initialized <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4880\" onclick=\"get_ticket_and_populate_wrapper('4880'); return false;\" title=\"addrinfo_iterator constructors fails to initialize ipv6\">#4880</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Apr-13 14:33", "status": "resolved", "created": "2015-Feb-11 13:20", "fixed_version": "2015-Feb-11 13:20", "broken_version": "v080304", "priority": "4", "subsystem": "", "assigned_to": "adesmet", "derived_from": "#4492", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}