{"id": 6258, "title": "Ticket #6258: condor_submit proxy reading requires X.509 certificate directory", "description": "<blockquote>\nWhen condor_submit attempts to read a job's X.509 proxy, it uses a GSI function that requires the existence of an X.509 certificates directory. The function doesn't perform any verification of the proxy certificate, and the certificates directory can be empty. Other parts of Condor use a different GSI function, which doesn't have this pointless requirement.\n\n<p>This issue was first reported in <a class=\"external\" href=\"https://jira.opensciencegrid.org/browse/SOFTWARE-2284\">https://jira.opensciencegrid.org/browse/SOFTWARE-2284</a></p></blockquote>", "remarks": "<blockquote>\n<em>2017-May-12 13:42:19 by jfrey:</em> <br/>\n\nThis is an issue only when submitting to a schedd older than 8.5.8. In more recent versions, condor_submit doesn't need to examine the proxy (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>).\n\n<p></p><hr/>\n<em>2017-Jun-20 09:54:56 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> Looks good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-May-12 14:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d7e5f6eba459df0fc51f674d061ef769fd78b13d\">[50640]</a></span>: Docs for condor_submit missing x509 CA cert dir bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6258\" onclick=\"get_ticket_and_populate_wrapper('6258'); return false;\" title=\"condor_submit proxy reading requires X.509 certificate directory\">#6258</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-May-12 13:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d162610072f18c911585b75110891bccbc820a40\">[50639]</a></span>: Remove unsued functions for reading proxy files. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6258\" onclick=\"get_ticket_and_populate_wrapper('6258'); return false;\" title=\"condor_submit proxy reading requires X.509 certificate directory\">#6258</a></span> These functions use gss_import_cred() to read a proxy file. This function fails if it can't find an X.509 CA certificates directory. But it doesn't verify the proxy certificate; an empty directory is fine. Former users of these functions have been\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-May-12 13:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/be60a10aa1de622437a38f6e929d8717d38d936a\">[50638]</a></span>: condor_submit proxy reading requires X.509 certificate directory <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6258\" onclick=\"get_ticket_and_populate_wrapper('6258'); return false;\" title=\"condor_submit proxy reading requires X.509 certificate directory\">#6258</a></span> Change the GSI function that condor_submit uses to read a proxy file to one that doesn't require the existence of an X.509 CA certificates directory. The old function didn't verify the proxy certificate, and accepted an empty certificates\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Jun-20 09:55", "status": "resolved", "created": "2017-May-12 12:04", "fixed_version": "2017-May-12 12:04", "broken_version": "v080400", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}