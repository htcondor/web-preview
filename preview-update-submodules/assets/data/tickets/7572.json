{"id": 7572, "title": "Ticket #7572: getenv in submit should support a blacklist and whitelist", "description": "<blockquote>\nIn order to integrate the jupyter batch spawner with HTCondor, it would be useful to have a way to use the <code>condor_submit</code> <code>getenv</code> keyword, but with a way to import less than all of the current environment.  What is needed for jupyter spawner is probably a blacklist, but for most users, a whitelist might be better.\n\n<p>We should add a mechanism that does both.  Perhaps by allowing the argument of getenv to be a boolean <strong>or</strong> a list of patterns like this\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\"># get all but PATH or PYTHONPATH (case insensitive)\ngetenv = !PATH, !PYTHONPATH\n# get any environment variables that start with PY or GO and don't end in ly (case insensitive)\ngetenv = PY* GO* !*LY\n</pre></div>\n\n\n<p>There will be no provision for case-sensitive matching for environment, we could possibly add it in the future if needed, but some platforms are case-insensitive for environment variables, so we should be case-preserving but case-insensitive.\n\n</p><p>We should use Stringlist match semantics rather than regex, although we will have to separate this into two lists internally, a blacklist and a whitelist.  If the whitelist is empty, then * will be presumed.  if the blacklist is empty then nothing will be blacklisted.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-08 08:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/273fb3c291fa9191e04ee6e4a38b39b60199285a\">[60095]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7572\" onclick=\"get_ticket_and_populate_wrapper('7572'); return false;\" title=\"getenv in submit should support a blacklist and whitelist\">#7572</a></span>) fix broken formatting in condor_submit's get_env man page entry  (By Josh Karpel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-17 13:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0e3eb565c276f365c1f2e674c327e8e5b60a28d4\">[59395]</a></span>: docs and version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7572\" onclick=\"get_ticket_and_populate_wrapper('7572'); return false;\" title=\"getenv in submit should support a blacklist and whitelist\">#7572</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-10 14:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7b84c06cac90f92eae001ba00499bcc905148774\">[59314]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7572\" onclick=\"get_ticket_and_populate_wrapper('7572'); return false;\" title=\"getenv in submit should support a blacklist and whitelist\">#7572</a></span>, allow the argument of the getenv keyword in submit_utils to be a black/white list or a boolean ===VersionHistory:Pending==  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Apr-17 13:21", "status": "resolved", "created": "2020-Mar-30 16:08", "fixed_version": "2020-Mar-30 16:08", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}