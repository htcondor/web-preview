{"id": 5011, "title": "Ticket #5011: Improve DAGMan lock file use", "description": "<blockquote>\nI think we should make two improvements to the DAGMan lock file:\n\n<p></p><ul>\n<li>DAGMan should get a write lock on the lock file before it first checks for its existence, and hold that lock until after it either decides to kill itself or writes its own info to the lock file.\n\n<p></p></li><li>It's not as important, but I think it would make sense to check the lock file <strong>before</strong> we parse the DAG.\n</li></ul>\n\n<p>(BillT just had a DAG that got all goofed up because two instances of DAGMan were running on the same DAG at the same time.  Now why that happened is another question -- seems like the schedd got itself confused...)</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2015-Apr-17 14:25", "status": "new", "created": "2015-Apr-17 14:25", "fixed_version": "2015-Apr-17 14:25", "broken_version": "v080305", "priority": "4", "subsystem": "Dag", "assigned_to": "", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "wenger@cs.wisc.edu, zmiller@cs.wisc.edu", "due_date": ""}