{"id": 5121, "title": "Ticket #5121: Starter unaware of Shadow exit when TransferOutput file doesn't exist", "description": "<blockquote>\nI looked at this issue with TJ today (2015-06-24).  User sverchko was submitting jobs from submit-5.chtc.wisc.edu.  Some of the jobs were running his executable successfully, but don't seem to be creating his <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TransferOutput\" title=\"Transfer Output\">TransferOutput</a></span> file, <code>apn_sample.mat</code>.\n\n<p>You can see the executable exit with status 0 in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span>:\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:51 (pid:29879) Process exited, pid=29883, status=0\n</pre></div>\n\n\n<p>Upload of non-existent file <code>apn_ample.mat</code> fails (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:53 (pid:29879) DoUpload: (Condor error code 13, subcode 2) STARTER at 128.104.55.26 failed to send file(s) to &lt;128.104.101.92:9618&gt;: error reading from /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.104.55.26:36432&gt;\n</pre></div>\n\n\n<p>The Shadow exits (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ShadowLog\" title=\"Shadow Log\">ShadowLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:53 (1653895.0) (23140): **** condor_shadow (condor_SHADOW) pid 23140 EXITING WITH STATUS 112\n</pre></div>\n\n\n<p>The Starter keeps chugging, trying to talk to the Shadow (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:53 (pid:29879) condor_read() failed: recv(fd=6) returned -1, errno = 104 Connection reset by peer, reading 5 bytes from &lt;128.104.101.92:33230&gt;.\n06/24/15 11:15:53 (pid:29879) IO: Failed to read packet header\n06/24/15 11:15:53 (pid:29879) Lost connection to shadow, waiting 1200 secs for reconnect\n06/24/15 11:15:53 (pid:29879) Sent job ClassAd update to startd.\n</pre></div>\n\n\n<p>20 seconds later, Startd calls deactivate_claim, puts starter into Preempting/Vacating (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:16:13 slot1_3: Called deactivate_claim()\n06/24/15 11:16:13 slot1_3: State change: received RELEASE_CLAIM command\n06/24/15 11:16:13 slot1_3: Changing state and activity: Claimed/Busy -&gt; Preempting/Vacating\n</pre></div>\n\n\n<p>slot1_3's Starter is confused (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:16:13 (pid:29879) Got SIGTERM, but we've already done graceful shutdown.  Ignoring.\n06/24/15 11:16:13 (pid:29879) Got SIGTERM, but we've already done graceful shutdown.  Ignoring.\n</pre></div>\n\n\n<p>About 10 minutes (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxVacateTime\" title=\"Max Vacate Time\">MaxVacateTime</a></span>) later, Startd tries to fast shutdown Starter (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:25:53 slot1_3: max vacate time expired.  Escalating to a fast shutdown of the job.\n</pre></div>\n\n\n<p>Starter gets the message, but doesn't shut down because it's still waiting to hear from the (dead) Shadow (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:25:53 (pid:29879) Got SIGQUIT.  Performing fast shutdown.\n06/24/15 11:25:53 (pid:29879) ShutdownFast all jobs.\n06/24/15 11:25:53 (pid:29879) Got ShutdownFast when no jobs running.\n...\n06/24/15 11:25:53 (pid:29879) Notifying exit status=0 reason=100\n06/24/15 11:25:53 (pid:29879) Failed to send job exit status to shadow\n06/24/15 11:25:53 (pid:29879) JobExit() failed, waiting for job lease to expire or for a reconnect attempt\n</pre></div>\n\n\n<p>10 more minutes later, the Startd commits murder on the Starter (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span>):\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:35:53 slot1_3: starter (pid 29879) is not responding to the request to hardkill its job.  The startd will now directly hard kill the starter and all its decendents.\n06/24/15 11:35:53 slot1_3: State change: starter exited\n06/24/15 11:35:53 slot1_3: State change: No preempting claim, returning to owner\n06/24/15 11:35:53 slot1_3: Changing state and activity: Preempting/Vacating -&gt; Owner/Idle\n06/24/15 11:35:53 slot1_3: State change: IS_OWNER is false\n06/24/15 11:35:53 slot1_3: Changing state: Owner -&gt; Unclaimed\n06/24/15 11:35:53 slot1_3: Changing state: Unclaimed -&gt; Delete\n06/24/15 11:35:53 slot1_3: Resource no longer needed, deleting\n</pre></div>\n\n\n<p>So, the slot ends up staying in Preempting/Vacating for 20 minutes while the Starter waits for the Shadow to talk back to it.\n\n</p><p>Here are the more complete logs:\n\n</p><p>Submit-5.chtc.wisc.edu <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ShadowLog\" title=\"Shadow Log\">ShadowLog</a></span>, grepped for jobid\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:10 (1653895.0) (23140): Request to run on slot1@c007.chtc.wisc.edu &lt;128.104.55.26:53704?addrs=128.104.55.26-53704&gt; was ACCEPTED\n06/24/15 11:15:10 (1653895.0) (23140): File transfer completed successfully.\n06/24/15 11:15:10 (1653895.0) (23140): WriteUserLog checking for event log rotation, but no lock\n06/24/15 11:15:53 (1653895.0) (23140): DoDownload: STARTER at 128.104.55.26 failed to send file(s) to &lt;128.104.101.92:9618&gt;: error reading from /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.104.55.26:36432&gt;\n06/24/15 11:15:53 (1653895.0) (23140): Mock terminating job 1653895.0: exited_by_signal=FALSE, exit_code=0 OR exit_signal=0, core_dumped=FALSE, exit_reason=\"Exited normally\"\n06/24/15 11:15:53 (1653895.0) (23140): File transfer failed (status=0).\n06/24/15 11:15:53 (1653895.0) (23140): WriteUserLog checking for event log rotation, but no lock\n06/24/15 11:15:53 (1653895.0) (23140): Job 1653895.0 going into Hold state (code 13,2): Error from slot1@c007.chtc.wisc.edu: STARTER at 128.104.55.26 failed to send file(s) to &lt;128.104.101.92:9618&gt;: error reading from /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.104.55.26:36432&gt;\n06/24/15 11:15:53 (1653895.0) (23140): **** condor_shadow (condor_SHADOW) pid 23140 EXITING WITH STATUS 112\n</pre></div>\n\n\n<p>c007.chtc.wisc.edu <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span> grepped for slot1_3:\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:08 slot1_3: Changing activity: Busy -&gt; Idle\n06/24/15 11:15:10 slot1_3: Got activate_claim request from shadow (128.104.101.92)\n06/24/15 11:15:10 slot1_3: Remote job ID is 1653895.0\n06/24/15 11:15:10 slot1_3: Setting affinity env to 3\n06/24/15 11:15:10 slot1_3: Got universe \"VANILLA\" (5) from request classad\n06/24/15 11:15:10 slot1_3: State change: claim-activation protocol successful\n06/24/15 11:15:10 slot1_3: Changing activity: Idle -&gt; Busy\n06/24/15 11:15:53 slot1_3: Called deactivate_claim()\n06/24/15 11:15:53 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:53 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:54 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:54 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:55 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:55 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:56 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:56 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:57 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:57 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:58 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:58 slot1_3: Telling shadow to try again later.\n06/24/15 11:15:59 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:15:59 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:00 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:00 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:01 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:01 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:02 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:02 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:03 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:03 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:04 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:04 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:05 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:05 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:06 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:06 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:07 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:07 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:08 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:08 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:09 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:09 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:10 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:10 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:11 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:11 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:12 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:12 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:13 slot1_3: Got activate claim while starter is still alive.\n06/24/15 11:16:13 slot1_3: Telling shadow to try again later.\n06/24/15 11:16:13 slot1_3: Called deactivate_claim()\n06/24/15 11:16:13 slot1_3: State change: received RELEASE_CLAIM command\n06/24/15 11:16:13 slot1_3: Changing state and activity: Claimed/Busy -&gt; Preempting/Vacating\n06/24/15 11:25:53 slot1_3: max vacate time expired.  Escalating to a fast shutdown of the job.\n06/24/15 11:35:53 slot1_3: starter (pid 29879) is not responding to the request to hardkill its job.  The startd will now directly hard kill the starter and all its decendents.\n06/24/15 11:35:53 slot1_3: State change: starter exited\n06/24/15 11:35:53 slot1_3: State change: No preempting claim, returning to owner\n06/24/15 11:35:53 slot1_3: Changing state and activity: Preempting/Vacating -&gt; Owner/Idle\n06/24/15 11:35:53 slot1_3: State change: IS_OWNER is false\n06/24/15 11:35:53 slot1_3: Changing state: Owner -&gt; Unclaimed\n06/24/15 11:35:53 slot1_3: Changing state: Unclaimed -&gt; Delete\n06/24/15 11:35:53 slot1_3: Resource no longer needed, deleting\n</pre></div>\n\n\n<p>c007.chtc.wisc.edu <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> for slot1_3, beginning at 11:15:51, ending at 11:33:53\n</p><div class=\"code\">\n<pre class=\"code\">06/24/15 11:15:51 (pid:29879) DaemonCore: No more children processes to reap.\n06/24/15 11:15:51 (pid:29879) Process exited, pid=29883, status=0\n06/24/15 11:15:51 (pid:29879) Inside VanillaProc::JobReaper()\n06/24/15 11:15:51 (pid:29879) Inside OsProc::JobReaper()\n06/24/15 11:15:51 (pid:29879) Inside UserProc::JobReaper()\n06/24/15 11:15:51 (pid:29879) Reaper: all=1 handled=1 ShuttingDown=0\n06/24/15 11:15:51 (pid:29879) In VanillaProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) Inside OsProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) Inside UserProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) HOOK_JOB_EXIT not configured.\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab/R2014b\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.META\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.matlab\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s_8DFEAF83E6D336378A7B6F483E83CF49\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/structure_steps\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/compiler\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal/+toolboxes\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset\n06/24/15 11:15:51 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset/private\n06/24/15 11:15:51 (pid:29879) In VanillaProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) Inside OsProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) Inside UserProc::PublishUpdateAd()\n06/24/15 11:15:51 (pid:29879) Entering JICShadow::updateShadow()\n06/24/15 11:15:51 (pid:29879) Sent job ClassAd update to startd.\n06/24/15 11:15:51 (pid:29879) Leaving JICShadow::updateShadow(): success\n06/24/15 11:15:51 (pid:29879) Inside JICShadow::transferOutput(void)\n06/24/15 11:15:51 (pid:29879) JICShadow::transferOutput(void): Transferring...\n06/24/15 11:15:51 (pid:29879) Begin transfer of sandbox to shadow.\n06/24/15 11:15:51 (pid:29879) entering FileTransfer::UploadFiles (final_transfer=1)\n06/24/15 11:15:51 (pid:29879) SharedPortClient: sent connection request to daemon at &lt;128.104.101.92:9618&gt; for shared port id 16522_fe59_242605\n06/24/15 11:15:51 (pid:29879) SECMAN: command 61001 FILETRANS_DOWNLOAD to daemon at &lt;128.104.101.92:9618&gt; from TCP port 36432 (blocking).\n06/24/15 11:15:51 (pid:29879) Using requested session filetrans.&lt;128.104.55.26:53704&gt;#1434981062#952.\n06/24/15 11:15:51 (pid:29879) SECMAN: found cached session id filetrans.&lt;128.104.55.26:53704&gt;#1434981062#952 for {&lt;128.104.101.92:9618?addrs=128.104.101.92-9618&amp;noUDP&amp;sock=16522_fe59_242605&gt;,&lt;61001&gt;}.\nAuthMethods = \"FS, PASSWORD, CLAIMTOBE, GSI, SSL\"\nSessionDuration = \"86400\"\nSid = \"filetrans.&lt;128.104.55.26:53704&gt;#1434981062#952\"\nAuthentication = \"NO\"\nEnact = \"YES\"\nSubsystem = \"STARTER\"\nUseSession = \"YES\"\nParentUniqueID = \"c007:25462:1434981062\"\nTriedAuthentication = true\nIntegrity = \"NO\"\nCryptoMethods = \"3DES\"\nOutgoingNegotiation = \"REQUIRED\"\nUser = \"submit-side@matchsession\"\nEncryption = \"NO\"\nSessionLease = 3600\nServerPid = 29879\n06/24/15 11:15:51 (pid:29879) SECMAN: Security Policy:\nAuthMethods = \"FS, PASSWORD, CLAIMTOBE, GSI, SSL\"\nSessionDuration = \"86400\"\nSid = \"filetrans.&lt;128.104.55.26:53704&gt;#1434981062#952\"\nAuthentication = \"NO\"\nEnact = \"YES\"\nSubsystem = \"STARTER\"\nUseSession = \"YES\"\nParentUniqueID = \"c007:25462:1434981062\"\nTriedAuthentication = true\nIntegrity = \"NO\"\nCryptoMethods = \"3DES\"\nOutgoingNegotiation = \"REQUIRED\"\nUser = \"submit-side@matchsession\"\nEncryption = \"NO\"\nSessionLease = 3600\nServerPid = 29879\n06/24/15 11:15:51 (pid:29879) SECMAN: negotiating security for command 61001.\n06/24/15 11:15:51 (pid:29879) SECMAN: sending DC_AUTHENTICATE command\n06/24/15 11:15:51 (pid:29879) SECMAN: sending following classad:\nCommand = 61001\nAuthMethods = \"FS, PASSWORD, CLAIMTOBE, GSI, SSL\"\nSessionDuration = \"86400\"\nSid = \"filetrans.&lt;128.104.55.26:53704&gt;#1434981062#952\"\nAuthentication = \"NO\"\nEnact = \"YES\"\nSubsystem = \"STARTER\"\nUseSession = \"YES\"\nServerCommandSock = \"&lt;128.104.55.26:41382?addrs=128.104.55.26-41382&gt;\"\nParentUniqueID = \"c007:25462:1434981062\"\nTriedAuthentication = true\nIntegrity = \"NO\"\nRemoteVersion = \"$CondorVersion: 8.3.6 Jun 17 2015 BuildID: 324322 $\"\nCryptoMethods = \"3DES\"\nOutgoingNegotiation = \"REQUIRED\"\nUser = \"submit-side@matchsession\"\nEncryption = \"NO\"\nSessionLease = 3600\nServerPid = 29879\n06/24/15 11:15:51 (pid:29879) Getting authenticated user from cached session: submit-side@matchsession\n06/24/15 11:15:51 (pid:29879) SECMAN: startCommand succeeded.\n06/24/15 11:15:51 (pid:29879) Authorizing server 'submit-side@matchsession/128.104.101.92'.\n06/24/15 11:15:51 (pid:29879) FileTransfer::UploadFiles: sent TransKey=1#558ad78e65b755132c9ed22d\n06/24/15 11:15:51 (pid:29879) entering FileTransfer::Upload\n06/24/15 11:15:51 (pid:29879) entering FileTransfer::DoUpload\n06/24/15 11:15:51 (pid:29879) DoUpload: sending file apn_sample.mat\n06/24/15 11:15:51 (pid:29879) FILETRANSFER: outgoing file_command is 1 for apn_sample.mat\n06/24/15 11:15:53 (pid:29879) Received GoAhead from peer to send /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat.\n06/24/15 11:15:53 (pid:29879) Sending GoAhead for 128.104.101.92 to receive /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat and all further files.\n06/24/15 11:15:53 (pid:29879) ReliSock::put_file_with_permissions(): Failed to stat file '/var/lib/condor/execute/slot1/dir_29879/apn_sample.mat': No such file or directory (errno: 2, si_error: 1)\n06/24/15 11:15:53 (pid:29879) DoUpload: exiting at 3286\n06/24/15 11:15:53 (pid:29879) DoUpload: (Condor error code 13, subcode 2) STARTER at 128.104.55.26 failed to send file(s) to &lt;128.104.101.92:9618&gt;: error reading from /var/lib/condor/execute/slot1/dir_29879/apn_sample.mat: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.104.55.26:36432&gt;\n06/24/15 11:15:53 (pid:29879) End transfer of sandbox to shadow.\n06/24/15 11:15:53 (pid:29879) Sandbox transfer failed.\n06/24/15 11:15:53 (pid:29879) In VanillaProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside OsProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside UserProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside JICShadow::notifyJobTermination()\n06/24/15 11:15:53 (pid:29879) JICShadow::notifyJobTermination(): Sending mock terminate event.\n06/24/15 11:15:53 (pid:29879) In VanillaProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside OsProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside UserProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside JICShadow::transferOutputMopUp(void)\n06/24/15 11:15:53 (pid:29879) JICShadow::transferOutputMopUp(void): Mopping up failed transfer...\n06/24/15 11:15:53 (pid:29879) JIC::transferOutput() failed, waiting for job lease to expire or for a reconnect attempt\n06/24/15 11:15:53 (pid:29879) Returning from CStarter::JobReaper()\n06/24/15 11:15:53 (pid:29879) Got SIGTERM. Performing graceful shutdown.\n06/24/15 11:15:53 (pid:29879) Started timer to call main_shutdown_fast in 1800 seconds\n06/24/15 11:15:53 (pid:29879) ShutdownGraceful all jobs.\n06/24/15 11:15:53 (pid:29879) Got ShutdownGraceful when no jobs running.\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab/R2014b\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.META\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s_8DFEAF83E6D336378A7B6F483E83CF49\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/structure_steps\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/compiler\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal/+toolboxes\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset/private\n06/24/15 11:15:53 (pid:29879) In VanillaProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside OsProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Inside UserProc::PublishUpdateAd()\n06/24/15 11:15:53 (pid:29879) Entering JICShadow::updateShadow()\n06/24/15 11:15:53 (pid:29879) condor_read() failed: recv(fd=6) returned -1, errno = 104 Connection reset by peer, reading 5 bytes from &lt;128.104.101.92:33230&gt;.\n06/24/15 11:15:53 (pid:29879) IO: Failed to read packet header\n06/24/15 11:15:53 (pid:29879) Lost connection to shadow, waiting 1200 secs for reconnect\n06/24/15 11:15:53 (pid:29879) Sent job ClassAd update to startd.\n06/24/15 11:15:53 (pid:29879) JICShadow::updateShadow(): failed to send update\n06/24/15 11:15:53 (pid:29879) Inside JICShadow::transferOutput(void)\n06/24/15 11:15:53 (pid:29879) JICShadow::transferOutput(void): Transferring...\n06/24/15 11:15:53 (pid:29879) Inside JICShadow::transferOutputMopUp(void)\n06/24/15 11:15:53 (pid:29879) Inside OsProc::JobExit()\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab/R2014b\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.META\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s_8DFEAF83E6D336378A7B6F483E83CF49\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/structure_steps\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/compiler\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal/+toolboxes\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset\n06/24/15 11:15:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset/private\n06/24/15 11:15:53 (pid:29879) Notifying exit status=0 reason=100\n06/24/15 11:15:53 (pid:29879) Sent job ClassAd update to startd.\n06/24/15 11:15:53 (pid:29879) Failed to send job exit status to shadow\n06/24/15 11:15:53 (pid:29879) JobExit() failed, waiting for job lease to expire or for a reconnect attempt\n06/24/15 11:16:13 (pid:29879) Got SIGTERM, but we've already done graceful shutdown.  Ignoring.\n06/24/15 11:16:13 (pid:29879) Got SIGTERM, but we've already done graceful shutdown.  Ignoring.\n06/24/15 11:25:53 (pid:29879) Got SIGQUIT.  Performing fast shutdown.\n06/24/15 11:25:53 (pid:29879) ShutdownFast all jobs.\n06/24/15 11:25:53 (pid:29879) Got ShutdownFast when no jobs running.\n06/24/15 11:25:53 (pid:29879) Inside JICShadow::transferOutput(void)\n06/24/15 11:25:53 (pid:29879) Inside JICShadow::transferOutputMopUp(void)\n06/24/15 11:25:53 (pid:29879) Inside OsProc::JobExit()\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.matlab/R2014b\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.META\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/.matlab\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/single_apn_s_8DFEAF83E6D336378A7B6F483E83CF49\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/structure_steps\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/compiler\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/local/+matlab/+internal/+toolboxes\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset\n06/24/15 11:25:53 (pid:29879) Initializing Directory: curr_dir = /var/lib/condor/execute/slot1/dir_29879/tmp/.mcrCache8.4/single0/toolbox/stats/stats/@sobolset/private\n06/24/15 11:25:53 (pid:29879) Notifying exit status=0 reason=100\n06/24/15 11:25:53 (pid:29879) Failed to send job exit status to shadow\n06/24/15 11:25:53 (pid:29879) JobExit() failed, waiting for job lease to expire or for a reconnect attempt\n06/24/15 11:33:53 (pid:29879) DaemonCore: in SendAliveToParent()\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Jul-31 16:17:55 by moate:</em> <br/>\n\nThis issue was triggerd by a user who submitted jobs with TRANSFER_OUTPUT_FILE set, and an executable that failed at times to create the TRANSFER_OUTPUT_FILE.\n\n<p></p><hr/>\n<em>2015-Aug-03 16:37:08 by johnkn:</em> <br/>\n\nI reproduce this trivially on Windows.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">c:\\condor\\log&gt;tail -f StarterLog.slot1_1\n08/03/15 16:13:27 (pid:176) JICShadow::notifyJobTermination(): Sending mock terminate event.\n08/03/15 16:13:27 (pid:176) JIC::transferOutput() failed, waiting for job lease to expire or for a reconnect attempt\n08/03/15 16:13:27 (pid:176) Returning from CStarter::JobReaper()\n08/03/15 16:13:27 (pid:176) Got SIGTERM. Performing graceful shutdown.\n08/03/15 16:13:27 (pid:176) ShutdownGraceful all jobs.\n08/03/15 16:13:27 (pid:176) condor_read() failed: recv(fd=464) returned -1, errno = 10054 , reading 5 bytes from &lt;128.105.136.32:50915&gt;.\n08/03/15 16:13:27 (pid:176) IO: Failed to read packet header\n08/03/15 16:13:27 (pid:176) Lost connection to shadow, waiting 2400 secs for reconnect\n08/03/15 16:13:27 (pid:176) Failed to send job exit status to shadow\n08/03/15 16:13:27 (pid:176) JobExit() failed, waiting for job lease to expire or for a reconnect attempt\n08/03/15 16:23:27 (pid:176) Got SIGQUIT.  Performing fast shutdown.\n08/03/15 16:23:27 (pid:176) ShutdownFast all jobs.\n08/03/15 16:23:27 (pid:176) Failed to send job exit status to shadow\n08/03/15 16:23:27 (pid:176) JobExit() failed, waiting for job lease to expire or for a reconnect attempt\n\nc:\\condor\\log&gt;tail -f ShadowLog\n08/03/15 16:12:54 Daemon Log is logging: D_ALWAYS D_ERROR\n08/03/15 16:12:54 Daemoncore: Listening at &lt;0.0.0.0:50912&gt; on TCP (ReliSock) and UDP (SafeSock).\n08/03/15 16:12:54 DaemonCore: command socket at &lt;128.105.136.32:50912?addrs=128.105.136.32-50912&gt;\n08/03/15 16:12:54 DaemonCore: private command socket at &lt;128.105.136.32:50912?addrs=128.105.136.32-50912&gt;\n08/03/15 16:12:54 Initializing a VANILLA shadow for job 1059.0\n08/03/15 16:12:54 (1059.0) (17920): Request to run on slot1@crane.cs.wisc.edu &lt;128.105.136.32:50742?addrs=128.105.136.32-50742&gt; was ACCEPTED\n\n08/03/15 16:13:27 (1059.0) (17920): DoDownload: STARTER at 128.105.136.32 failed to send file(s) to &lt;128.105.136.32:50912&gt;: error reading from C:\\Condor\\execute\\dir_176\\env.txt not_file.txt: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.105.136.32:50926&gt;\n08/03/15 16:13:27 (1059.0) (17920): Mock terminating job 1059.0: exited_by_signal=FALSE, exit_code=0 OR exit_signal=0, core_dumped=FALSE, exit_reason=\"Exited normally\"\n08/03/15 16:13:27 (1059.0) (17920): Job 1059.0 going into Hold state (code 13,2): Error from slot1@crane.cs.wisc.edu: STARTER at 128.105.136.32 failed to send file(s) to &lt;128.105.136.32:50912&gt;: error reading from C:\\Condor\\execute\\dir_176\\env.txt not_file.txt: (errno 2) No such file or directory; SHADOW failed to receive file(s) from &lt;128.105.136.32:50926&gt;\n08/03/15 16:13:27 (1059.0) (17920): **** condor_shadow (condor_SHADOW) pid 17920 EXITING WITH STATUS 112\n</pre></div>\n\n\n<p></p><hr/>\n<em>2015-Aug-04 17:22:16 by tannenba:</em> <br/>\n\nApparently the shadow asks the startd to send the starter a SIGQUIT and then exits.  The starter notices the shadow exited and sets a timer to sit around until the job lease expires.\n\n<p>So brainstorm thoughts on patching this -\n\n</p><p></p><ol>\n<li>If the starter receives a SIGQUIT (daemoncore shutdown fast), then it should consider the job lease expired at that moment and exit.  This will also handle the case if a <code>condor_off -fast</code> not potentially falling into the same problem as above.\n\n<p></p></li><li>Perhaps the shadow could give up on reconnecting to the starter if it receives an ECONNREFUSED errno.  This will handle the case of the shadow not waiting around for a starter that exited after a <code>condor_off -fast</code>, and also handle the case of a job not being locked to a machine for the entire job lease in the event the execute node daemons were killed (think glideins).\n</li></ol>\n\n<p></p><hr/>\n<em>2015-Aug-07 08:53:39 by jfrey:</em> <br/>\n\nI propose two changes:\n\n<p></p><ul>\n<li>As described above, the starter shouldn't wait around for the shadow when it receives a SIGQUIT (shutdown fast). The same should apply for failing to talk to the schedd in the local universe.\n\n<p></p></li><li>When the shadow is aborting due to a file transfer failure or similar \"critical\" error, it should request a fast shutdown of the starter (DEACTIVATE_CLAIM_FORCIBLY). Currently, it requests a graceful shutdown (DEACTIVATE_CLAIM) by default (configurable via the config file or job ad).\n</li></ul>\n\n<p></p><hr/>\n<em>2015-Aug-07 13:44:07 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Patches look good, thanks.  Resolving.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-07 11:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/18f72d6c88d615c664af705e1212d0759bcaa423\">[45519]</a></span>: Docs for starter hang on transfer failure bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5121\" onclick=\"get_ticket_and_populate_wrapper('5121'); return false;\" title=\"Starter unaware of Shadow exit when TransferOutput file doesn't exist\">#5121</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-07 09:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/360bcacb91bfabb8df6f7b65f669fd38cfed58a8\">[45510]</a></span>: When shadow is exiting quickly, tell the starter to do the same. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5121\" onclick=\"get_ticket_and_populate_wrapper('5121'); return false;\" title=\"Starter unaware of Shadow exit when TransferOutput file doesn't exist\">#5121</a></span> When the shadow is doing a quick \"hold job and exit\" operation, it should always request a fast shutdown of the starter, instead of the default graceful shutdown request. With a graceful shutdown, the starter may wait around for a\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-07 09:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/14dbcc48723e4e2e97bcd6eac1ecd4699dd2a3e2\">[45509]</a></span>: Starter shouldn't wait for reconnect during a fast shutdown. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5121\" onclick=\"get_ticket_and_populate_wrapper('5121'); return false;\" title=\"Starter unaware of Shadow exit when TransferOutput file doesn't exist\">#5121</a></span> When the starter is doing a fast shutdown (due to receiving a SIGQUIT), communication with the shadow/schedd is now best-effort. Any failures will not be retried.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Aug-07 13:44", "status": "resolved", "created": "2015-Jun-24 13:57", "fixed_version": "2015-Jun-24 13:57", "broken_version": "v080208", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "jfrey", "derived_from": "", "creator": "moate", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "moate@cs.wisc.edu, lmichael@wisc.edu, jfrey@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}