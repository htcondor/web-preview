{"id": 1109, "title": "Ticket #1109: Remove old ClassAds library", "description": "<blockquote>\nWe've decided to completely replace old <span class=\"quote\">ClassAds</span> with new <span class=\"quote\">ClassAds</span> in Condor (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=131\" onclick=\"get_ticket_and_populate_wrapper('131'); return false;\" title=\"Decide between old and new Class Ad Libraries\">#131</a></span>). We have written a compatibility layer to ease the transition (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=619\" onclick=\"get_ticket_and_populate_wrapper('619'); return false;\" title=\"Write compatibility functions for conversion from old to new ClassAds\">#619</a></span>). Now, it's time to get Condor working without old <span class=\"quote\">ClassAds</span>. This will involve extensive testing of the Condor daemons, command-line tools, and libraries.\n\n<p>Milestones:\n</p><ul>\n<li>Choose old or new <span class=\"quote\">ClassAds</span> with flip of a switch (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=952\" onclick=\"get_ticket_and_populate_wrapper('952'); return false;\" title=\"Add configure switch to build with new / old classads\">#952</a></span>) [DONE]\n</li><li>Get daemons running [DONE]\n</li><li>Pass test suite on one platform [DONE]\n</li><li>Build on all platforms [DONE]\n</li><li>Pass nightly test suite in NMI [DONE]\n</li><li>Release Condor with only new <span class=\"quote\">ClassAds</span> library [DONE]\n</li><li>Remove old <span class=\"quote\">ClassAds</span> code [DONE]</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2010-Jan-27 16:18:05 by jfrey:</em> <br/>\n\nThe V7_5-new_classads-branch passes the nightly test suite (list_quick) on RHEL 5.4 when run interactively.\n\n<p></p><hr/>\n<em>2010-Jan-29 13:25:55 by jfrey:</em> <br/>\n\nBuilding on hpux fails because the tarballs are too big. A tarball of all the unstripped binaries is larger than 2GB, which causes tar to fail. We don't know if this is a limit of the OS, the filesystem, or tar. A compressed tarball would be smaller than 2GB. We could change our build process to avoid producing uncompressed tarballs, or drop hpux for Condor 7.5.\n\n<p></p><hr/>\n<em>2010-Apr-27 13:50:22 by psilord:</em> <br/>\n\nI fixed the hpux builds, it needed a newer tar/gzip? and have large file support turned on in a file system.\n\n<p></p><hr/>\n<em>2010-Apr-27 13:57:22 by jfrey:</em> <br/>\n\nCondor 7.5.1 and beyond are built and released without the old <span class=\"quote\">ClassAds</span> library. The code can switched back to building with old library using a configure flag. We'll probably wait until Condor 7.7.x to rip out the old code entirely.\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=952\" onclick=\"get_ticket_and_populate_wrapper('952'); return false;\" title=\"Add configure switch to build with new / old classads\">#952</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd configure switch to build with new / old classads</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1105\" onclick=\"get_ticket_and_populate_wrapper('1105'); return false;\" title=\"New Classads: get collector working\">#1105</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nNew Classads: get collector working</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1112\" onclick=\"get_ticket_and_populate_wrapper('1112'); return false;\" title=\"Fix mixed use of TARGET scope in expressions\">#1112</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix mixed use of TARGET scope in expressions</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1140\" onclick=\"get_ticket_and_populate_wrapper('1140'); return false;\" title=\"Run old ClassAds tests on compatibility layer\">#1140</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nRun old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> tests on compatibility layer</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1163\" onclick=\"get_ticket_and_populate_wrapper('1163'); return false;\" title=\"Build without old ClassAds on Windows\">#1163</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBuild without old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> on Windows</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1234\" onclick=\"get_ticket_and_populate_wrapper('1234'); return false;\" title=\"Add implicit target scoping to new ClassAds\">#1234</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd implicit target scoping to new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span></td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1242\" onclick=\"get_ticket_and_populate_wrapper('1242'); return false;\" title=\"Add config knob for strict target scoping\">#1242</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd config knob for strict target scoping</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1579\" onclick=\"get_ticket_and_populate_wrapper('1579'); return false;\" title=\"Fix collector query expressions\">#1579</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix collector query expressions</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Feb-26 20:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/98dd817076133cc490a0d04e7786b2189c5e87d5\">[20778]</a></span>: Remove old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> code. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1109\" onclick=\"get_ticket_and_populate_wrapper('1109'); return false;\" title=\"Remove old ClassAds library\">#1109</a></span> This code has been disabled for most of the 7.5.x series and will remain so for 7.6.x. Now, we remove it entirely.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-29 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/65b835ac2c662e51293824fbdb00a9127bd48b4e\">[17042]</a></span>: Make building without old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> the default on unix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1109\" onclick=\"get_ticket_and_populate_wrapper('1109'); return false;\" title=\"Remove old ClassAds library\">#1109</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-28 15:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/37e0b3addce8dc13dc7d7cc2dd70938f12970a8f\">[17041]</a></span>: Fix bad usage of FALSE instead of NULL. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1109\" onclick=\"get_ticket_and_populate_wrapper('1109'); return false;\" title=\"Remove old ClassAds library\">#1109</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Mar-04 10:20", "status": "resolved", "created": "2010-Jan-14 16:22", "fixed_version": "2010-Jan-14 16:22", "broken_version": "v070000", "priority": "3", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#131", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}