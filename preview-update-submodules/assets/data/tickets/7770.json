{"id": 7770, "title": "Ticket #7770: PreCmd and PostCmd should work with absolute paths", "description": "<blockquote>\nCurrently both the <code>PreCmd</code> and <code>PostCmd</code> submit arguments expect the name of a file (without path), which a user is expected to ship along with the job's input files. When these submit arguments are specified, the <code>condor_starter</code> prepends the path of the job's working directory before it attempts to run the script.\n\n<p>However if a user has specified a full absolute path for the <code>PreCmd</code> or <code>PostCmd</code>, the starter will still prepend the working directory path, resulting in an invalid path and the job going on hold.\n\n</p><p>The starter should check if the user has specified an absolute path. In this case, it should not prepend anything, and just run the script at the path exactly as provided by the user.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Oct-13 15:40:10 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Checking if <code>tmp</code> is <code>NULL</code> is either uneccessary (because the lookup succeeded) or insufficient (because we append it to <code>exe_path</code> and then <code>free()</code> it immediately after the conditional).\n\n</p><p>No need to change that for the release, though.  (If it helps prevent the compiler(s) from complaining, considering adding it to the existing early-out conditional immediately preceding the patch.)\n\n</p><p></p><hr/>\n<em>2020-Oct-13 15:40:59 by tlmiller:</em> <br/>\n\nConsider adding a release note.\n\n<p></p><hr/>\n<em>2020-Oct-14 17:22:05 by coatsworth:</em> <br/>\n\nSounds good, thanks! The compiler isn't complaining so I'm going to leave this as is for now. Version history added.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-14 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/477ec715aedf2f4604a1fbc87e14276079a60102\">[61494]</a></span>: Added version history (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7770\" onclick=\"get_ticket_and_populate_wrapper('7770'); return false;\" title=\"PreCmd and PostCmd should work with absolute paths\">#7770</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-03 16:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6facf882088bf1fd72abbaa31d4ad60ff7b39837\">[60327]</a></span>: Updated <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=PostCmd\" title=\"Post Cmd\">PostCmd</a></span> + <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=PreCmd\" title=\"Pre Cmd\">PreCmd</a></span> absolute path check to use platform-independent fullpath() (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7770\" onclick=\"get_ticket_and_populate_wrapper('7770'); return false;\" title=\"PreCmd and PostCmd should work with absolute paths\">#7770</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-03 13:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/36d612afb17935fa0f0d75d600fedb9e4ba69728\">[60325]</a></span>: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=PreCmd\" title=\"Pre Cmd\">PreCmd</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=PostCmd\" title=\"Post Cmd\">PostCmd</a></span> now check + work correctly with absolute paths (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7770\" onclick=\"get_ticket_and_populate_wrapper('7770'); return false;\" title=\"PreCmd and PostCmd should work with absolute paths\">#7770</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2020-Oct-14 17:22", "status": "resolved", "created": "2020-Jul-30 16:03", "fixed_version": "2020-Jul-30 16:03", "broken_version": "", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "s101112", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}