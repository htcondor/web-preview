{"id": 6716, "title": "Ticket #6716: Prioritize Condor-C GAHP commands", "description": "<blockquote>\nThe gridmanager throttles the number of requests it will issue to each GAHP at a time, with a default of 100. Additional requests are queued until previous requests complete. This can result in time-critical requests being delayed by a large number of older lower-priority requests. In <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=958\" onclick=\"get_ticket_and_populate_wrapper('958'); return false;\" title=\"Prioritizing GAHP commands\">#958</a></span>, we added a priority queue with three levels of priority, but we only prioritized CREAM and GRAM requests. For other grid types, the queueing of GAHP requests is strict FIFO.\n\n<p>Recently, this caused a problem for CMS with Condor-C (grid-type condor) jobs. When a large number of jobs (e.g. 6000) are submitted at once, all of those jobs must be submitted to the remote schedd (100 at a time) before the input files for any of them are staged. The jobs are Held in the remote queue waiting for their input files. If we set the submit request to a low priority, then the early jobs could get their input file staged sooner and the remote schedd could start running them. Delay of job lease renewal is another problem that would be avoided.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-22 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/74d1bc0ecdd25b3dfa6b2724223aae981c4a9a09\">[55602]</a></span>: Docs for Condor-C gahp command prioritization work. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6716\" onclick=\"get_ticket_and_populate_wrapper('6716'); return false;\" title=\"Prioritize Condor-C GAHP commands\">#6716</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jul-19 09:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d522c181073ad0eefbfbb0e4b0c4253941caade3\">[55190]</a></span>: Prioritize Condor-C GAHP commands. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6716\" onclick=\"get_ticket_and_populate_wrapper('6716'); return false;\" title=\"Prioritize Condor-C GAHP commands\">#6716</a></span> Similar to previous work for CREAM jobs, commands that affect multiple jobs are highest priority and submission of new jobs is lowest priority. Other commands are medium priority.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Oct-22 15:18", "status": "resolved", "created": "2018-Jul-18 10:12", "fixed_version": "2018-Jul-18 10:12", "broken_version": "", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#958", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}