{"id": 3926, "title": "Ticket #3926: how can I set CLASSAD_LIFETIME=121 and not miss any ads?", "description": "<blockquote>\nThis issue should ultimately be resolved via a documentation fix either in the manual or the wiki.\n\n<p>I want to set CLASSAD_LIFETIME=121 and *_UPDATE_INTERVAL=60 for all daemons.\n\n</p><p>If you set CLASSAD_LIFETIME=121 but don't correctly set UPDATE_INTERVAL for all daemons, random daemon ads start getting dropped and all heck breaks loose in the pool.  (I learned this the hard way.)\n\n</p><p>The problem is that it's not well-documented which *_UPDATE_INTERVALS exist and need to be set.  I know about:\n\n</p><p>UPDATE_INTERVAL\nSCHEDD_UPDATE_INTERVAL\nMASTER_UPDATE_INTERVAL\nNEGOTIATOR_UPDATE_INTERVAL\n\n</p><p>Is there one for the checkpoint server?  The shadow?  The starter?  The collector itself (for when there are &gt;1)?\n\n</p><p>Is there anything else that needs to be set so that this works?</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-17 15:38:00 by gthain:</em> <br/>\n\nEach of the daemons has a different knob for their update period:\n\n<p>Note that the shadow and the starter don't talk to the collector, so they don't have a corresponding update interval knob.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">Startd:  UPDATE_INTERVAL\nNegotiator: NEGOTIATOR_UPDATE_INTERVAL\nCollector: COLLECTOR_UPDATE_INTERVAL\nMaster: MASTER_UPDATE_INTERVAL\nSchedd: SCHEDD_INTERVAL\nCheckpoint Server: CKPT_SERVER_INTERVAL\n</pre></div>\n\n\n<p></p><hr/>\n<em>2013-Sep-17 15:45:39 by pfc:</em> <br/>\n\nThanks!  FYI, I'm not going to test this until <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3925\" onclick=\"get_ticket_and_populate_wrapper('3925'); return false;\" title=\"condor_master stops sending update ads\">#3925</a></span> is resolved so that I'm not creating a moving target...\n\n<p></p><hr/>\n<em>2013-Sep-17 16:22:04 by pfc:</em> <br/>\n\nAlso, just to be precise, is the above list believe to be the <strong>complete</strong> list of daemon update knobs that need to be set in a Condor pool?  What about other <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span> code like DAGMan?  I don't care about Quill or Stork -- but if I did, would I need to set those too?\n\n<p></p><hr/>\n<em>2013-Sep-17 16:31:59 by gthain:</em> <br/>\n\nDAGman doesn't put an ad in the collector\n\n<p>Quill is a contrib and not supported.  If it were supported, you would set UPDATE_INTERVAL\n\n</p><p>Stork is now supported by SUNY-Buffalo.\n\n</p><p></p><hr/>\n<em>2015-Jan-12 13:25:48 by pfc:</em> <br/>\n\nSo the following is indeed a complete list of what needs to be set so that nothing is left unsynchronized with the collector's CLASSAD_LIFETIME?\n\n<p></p><ul>\n<li>UPDATE_INTERVAL\n</li><li>SCHEDD_UPDATE_INTERVAL\n</li><li>MASTER_UPDATE_INTERVAL\n</li><li>NEGOTIATOR_UPDATE_INTERVAL\n</li></ul>\n\n<p>Can this be updated in the docs (ideally, where CLASSAD_LIFETIME is explained)?</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-14 12:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aafd7b979747a378f354dd146688e464929dfd06\">[42198]</a></span>: documentation details for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3926\" onclick=\"get_ticket_and_populate_wrapper('3926'); return false;\" title=\"how can I set CLASSAD_LIFETIME=121 and not miss any ads?\">#3926</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2015-Jan-14 13:02", "status": "defer", "created": "2013-Sep-17 15:35", "fixed_version": "2013-Sep-17 15:35", "broken_version": "v080002", "priority": "5", "subsystem": "DaemonsCM", "assigned_to": "smoler", "derived_from": "#3925", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu,pcouvare@caltech.edu", "due_date": ""}