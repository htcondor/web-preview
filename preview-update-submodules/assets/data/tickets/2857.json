{"id": 2857, "title": "Ticket #2857: Add %v format to classad printing to print value without knowing type", "description": "<blockquote>\nWhen printing out classad values, especially when using condor_status -format, it is necessary to know the type of an attribute before you can specify the appropriate printf format tag.  It would be easier if you could just request that the printing code print the 'value' and use whatever type was appropriate.\n\n<p>I propose adding %v and %V as tags that printf_format.cpp and  ad_printmask.cpp understand.  %v will mean 'print the value' and %V will mean 'print the value as it would show up in -long format. (i.e strings should be quoted).\n\n</p><p>This would allow you to do\n</p><div class=\"verbatim\">\n<pre>condor_status -format \"%v\" Name -format \" %v\\n\" LastMatchTime\n</pre></div>\n\nand the first value would print using %s format and the second with %d, because Name is text and <span class=\"quote\">LastMatchTime</span> is integer.\n\n<p>Qualifiers to the format tag will behave the same as qualifiers for %s.\nso \"%-12v\" would left justify to 12 columns, and \"%13.12v\" would truncate to 12 columns and right align to 13 columns.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Mar-07 16:01:13 by jfrey:</em> <br/>\n\nThis change looks good to me. I'll have the %V code ready momentarily.\n\n<p></p><hr/>\n<em>2012-Mar-07 16:11:57 by jfrey:</em> <br/>\n\nTJ, can you code review my addition for %V?\n\n<p></p><hr/>\n<em>2012-Mar-16 14:08:16 by johnkn:</em> <br/>\n\nJaime's changes for %V look good.\n\n<p></p><hr/>\n<em>2012-Mar-20 14:41:51 by smoler:</em> <br/>\n\nChecked with TJ, and common code implements this functionality for condor_q as well as for condor_status.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2960\" onclick=\"get_ticket_and_populate_wrapper('2960'); return false;\" title=\"Support new ClassAd types for %v format\">#2960</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSupport new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> types for %v format</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-20 14:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/473f79eaa3172fbf1f836763754f665dffe52882\">[30978]</a></span>: %v/%V also implemented for condor_q -format option ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2857\" onclick=\"get_ticket_and_populate_wrapper('2857'); return false;\" title=\"Add %v format to classad printing to print value without knowing type\">#2857</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-19 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/defdf293af5dcfcaee3b1f766bdb73f404ec8910\">[30965]</a></span>: Documented %v and %V conversion characters for condor_status -format option. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2857\" onclick=\"get_ticket_and_populate_wrapper('2857'); return false;\" title=\"Add %v format to classad printing to print value without knowing type\">#2857</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-07 16:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9b1b129481ae51edead69fb3099b1a5da661cedf\">[30855]</a></span>: Add %V format tag for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> value formatting (a.k.a -format). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2857\" onclick=\"get_ticket_and_populate_wrapper('2857'); return false;\" title=\"Add %v format to classad printing to print value without knowing type\">#2857</a></span> %V differs from %v in that strings are quoted. That is, they appear the same as they would in condor_status -long. ===VersionHistory:Complete===  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-01 14:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/29d29ae28ab01b36f272594d0f9fe1229582b891\">[30764]</a></span>: Add version history for %v format tag. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2857\" onclick=\"get_ticket_and_populate_wrapper('2857'); return false;\" title=\"Add %v format to classad printing to print value without knowing type\">#2857</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-01 14:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/55c91ec6628942bd24028931ba6208892b7cdea8\">[30762]</a></span>: Add %v format for classad printing and -format. %v means 'print the value' this is equivalent to %s format but with a request that numeric values be converted to strings first. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2857\" onclick=\"get_ticket_and_populate_wrapper('2857'); return false;\" title=\"Add %v format to classad printing to print value without knowing type\">#2857</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Apr-17 14:02", "status": "resolved", "created": "2012-Mar-01 14:43", "fixed_version": "2012-Mar-01 14:43", "broken_version": "v070705", "priority": "3", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}