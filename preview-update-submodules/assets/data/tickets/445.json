{"id": 445, "title": "Ticket #445: Gracefully handle two DAGs with identical node names sharing user log", "description": "<blockquote>\nA user reported to me that he had two DAGs, with different submit files, that were using the same user log file.  The DAGs were different copies but unfortunately had the same node names.  When the second DAGMan started, the first one noticed the duplicated node name go by, freaked out, and exited.\n\n<p>In an ideal world, DAGMan would handle this more gracefully.\n\n</p><p>Option 1: Prefix note names with something unique.  Options might include the full path to the submit.dag file, the hash of the full path, or the hash of the dag's contents.\n\n</p><p>Option 2: If DAGMan observes symptoms of this, it should exit with a warning that includes suggestions for possible causes.  One possible symptom to detect would be noticing a node you haven't submitted already present in the user log.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-May-12 17:30:43 by wenger:</em> <br/>\n\nActually, what we want to do is add some kind of unique identifier of the <strong>DAGMan</strong> instance to the node names in the submit events -- you really should be able to run two instances of the same DAG at the same time.  A combination of the schedd name and cluster ID might suffice.\n\n<p></p><hr/>\n<em>2010-Mar-12 14:24:13 by wenger:</em> <br/>\n\nThis problem can be worked around by using the DAGMan default node log feature -- if you do that, even if you use some of the same submit files in two different DAGs, the events from each DAG run will go to different log files, and things will be okay.\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2012-Sep-06 11:09:29 by nwp:</em> <br/>\n\nSince <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2807\" onclick=\"get_ticket_and_populate_wrapper('2807'); return false;\" title=\"Have DAGMan use a single node job user log file\">#2807</a></span> went in, this should no longer be a problem, with DAGMan for condor version &gt;= 7.9.0</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=2160\" onclick=\"get_ticket_and_populate_wrapper('2160'); return false;\" title=\"Avoid having to truncate node job user log files\">#2160</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAvoid having to truncate node job user log files</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2013-Feb-13 10:17", "status": "new", "created": "2009-Apr-30 17:52", "fixed_version": "2009-Apr-30 17:52", "broken_version": "", "priority": "5", "subsystem": "Dag", "assigned_to": "PitS", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}