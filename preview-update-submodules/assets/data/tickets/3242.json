{"id": 3242, "title": "Ticket #3242: remove an interactive job if client interrrupted before it starts", "description": "<blockquote>\nWhen the user runs <code>condor_submit -interactive</code>, they may have to wait quite a while for the job to get scheduled.  If the user hits ctrl-c or closes the window before the job starts, the job should be immediately removed from the queue.\n\n<p><strong>Implementation</strong>\nFor now, handle this simply via an interrupt handler in <code>ssh_to_job</code> that catches ctrl-c (SIGINT), windows closing (SIGHUP), etc, and have the interrupt handler remove the job. This handler is installed via the command-line switch <code>-remove-on-interrupt</code> to <code>ssh_to_job</code>; this switch is used by <code>condor_submit -i</code>.\n\n</p><p>Note this solution still leaves a window of vulnerability if the user hits ctrl-c after condor_submit completes but before ssh_to_job spawns.  This could be handled in the future via a lease on the job that gets renewed every time ssh_to_job polls to check if the job is running.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-03 12:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/16a2a930c7e23fd4908d0976dd3fbc22f5a8bcfc\">[33582]</a></span>: Document that interactive jobs will be removed if client interrupted. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3242\" onclick=\"get_ticket_and_populate_wrapper('3242'); return false;\" title=\"remove an interactive job if client interrrupted before it starts\">#3242</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-01 14:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/41496ea408fefbf78eadb965acf3ca2fff5826ef\">[33577]</a></span>: Remove an interactive job if client interrupted before it starts. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3242\" onclick=\"get_ticket_and_populate_wrapper('3242'); return false;\" title=\"remove an interactive job if client interrrupted before it starts\">#3242</a></span>  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Oct-03 14:01", "status": "resolved", "created": "2012-Oct-01 14:54", "fixed_version": "2012-Oct-01 14:54", "broken_version": "v070900", "priority": "3", "subsystem": "Tools", "assigned_to": "tannenba", "derived_from": "#3088", "creator": "tannenba", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}