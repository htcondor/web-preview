{"id": 4968, "title": "Ticket #4968: Periodic Application-Level Checkpoints in the Vanilla Universe", "description": "<blockquote>\nIf an application (a) can checkpoint itself when sent a signal and (b) never partially-overwrites its checkpoint file(s), then it seems relatively simple to alter the vanilla universe to periodically send it such a signal, and having done so, do intermediate file transfer.\n\n<p>See <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4297\" onclick=\"get_ticket_and_populate_wrapper('4297'); return false;\" title=\"Prototype vanilla universe self-checkpointing support.\">#4297</a></span> for more details.\n\n</p><p></p><div>\n<table border=\"1\" cellpadding=\"2\" cellspacing=\"0\" summary=\"EMBED: Status Table of Derived Tickets\">\n<caption>\n  <a href=\"rptview?rn=86\" rel=\"nofollow\" title=\"EMBED: Status Table of Derived Tickets\">EMBED: Status Table of Derived Tickets</a>\n</caption>\n<tbody><tr>\n<td colspan=\"11\"><form action=\"rptview\" method=\"GET\">\n<input name=\"rn\" type=\"hidden\" value=\"86\"/>\nTN: <input name=\"TN\" type=\"text\" value=\"4968\"/>\n<input type=\"submit\" value=\"Go\"/>\n</form></td></tr> \n<tr>\n<th><a href=\"rptview?rn=86&amp;order_by=2&amp;order_dir=ASC&amp;TN=4968\">Developer</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=3&amp;order_dir=ASC&amp;TN=4968\">#</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=4&amp;order_dir=ASC&amp;TN=4968\">Status</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=5&amp;order_dir=ASC&amp;TN=4968\">Type</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=6&amp;order_dir=ASC&amp;TN=4968\">Pri</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=7&amp;order_dir=ASC&amp;TN=4968\">Created</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=8&amp;order_dir=ASC&amp;TN=4968\">Changed</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=9&amp;order_dir=ASC&amp;TN=4968\">Target</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=10&amp;order_dir=ASC&amp;TN=4968\">Due Date</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=11&amp;order_dir=ASC&amp;TN=4968\">Days left</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=12&amp;order_dir=ASC&amp;TN=4968\">Title</a></th>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4971,86\">4971</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\ndefect\n</td>\n<td valign=\"top\">\n2\n</td>\n<td valign=\"top\">\n2015 Apr\n</td>\n<td valign=\"top\">\n2020 Oct\n</td>\n<td valign=\"top\">\nv080811\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nCorrectly track resource usage across vanilla universe checkpoints\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntannenba\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=6986,86\">6986</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\ndefect\n</td>\n<td valign=\"top\">\n3\n</td>\n<td valign=\"top\">\n2019 Apr\n</td>\n<td valign=\"top\">\n2019 Apr\n</td>\n<td valign=\"top\">\nv080803\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nVanilla-universe ckpt restarts nest extra condor_pid_ns_init calls\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njpatton\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=5518,86\">5518</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2016 Feb\n</td>\n<td valign=\"top\">\n2019 Sep\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nDocument application-level checkpoint support in the Vanilla Universe\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\"><a href=\"tktview?tn=5651,86\">5651</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2016 Apr\n</td>\n<td valign=\"top\">\n2019 Apr\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nConsider using signals for atomic checkpoint transfer.\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=5246,86\">5246</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2015 Aug\n</td>\n<td valign=\"top\">\n2016 Apr\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nIncrease monitorability of vanilla universe checkpointing.\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=5647,86\">5647</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2016 Apr\n</td>\n<td valign=\"top\">\n2016 Apr\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nStarter should not log \"unhandled job exit\" if it's a self-checkpoint.\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4969,86\">4969</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2015 Apr\n</td>\n<td valign=\"top\">\n2016 Apr\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nCorrectly report checkpointing status from vanilla universe.\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=5592,86\">5592</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2016 Mar\n</td>\n<td valign=\"top\">\n2016 Mar\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nApplication-level vanilla universe checkpointing needs attr, reqs.\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4970,86\">4970</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\nexperimental\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2015 Apr\n</td>\n<td valign=\"top\">\n2016 Feb\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nAdd checkpoint server support for vanilla universe checkpointing.\n</td>\n</tr>\n</tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Sep-21 12:05:55 by tpdownes:</em> <br/>\n\nI am going to mark ticket <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=2007\" onclick=\"get_ticket_and_populate_wrapper('2007'); return false;\" title=\"Can stduniv run as a vanilla job with standalone checkpointing?\">#2007</a></span> as abandoned, but it is relevant to the vanilla checkpointing problem and perhaps worth a re-read.\n\n<p><a class=\"external\" href=\"https://htcondor-wiki.cs.wisc.edu/index.cgi/tktview?tn=2007,4\">https://htcondor-wiki.cs.wisc.edu/index.cgi/tktview?tn=2007,4</a>\n\n</p><p></p><hr/>\n<em>2015-Sep-22 15:09:35 by tpdownes:</em> <br/>\n\nTicket <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=3138\" onclick=\"get_ticket_and_populate_wrapper('3138'); return false;\" title=\"Periodic evicts/fast restart in vanilla universe (checkpoints)\">#3138</a></span> is also an attempt to document vanilla checkpointing and I am marking it as abandoned.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4297\" onclick=\"get_ticket_and_populate_wrapper('4297'); return false;\" title=\"Prototype vanilla universe self-checkpointing support.\">#4297</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nPrototype vanilla universe self-checkpointing support.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4969\" onclick=\"get_ticket_and_populate_wrapper('4969'); return false;\" title=\"Correctly report checkpointing status from vanilla universe.\">#4969</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCorrectly report checkpointing status from vanilla universe.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4970\" onclick=\"get_ticket_and_populate_wrapper('4970'); return false;\" title=\"Add checkpoint server support for vanilla universe checkpointing.\">#4970</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd checkpoint server support for vanilla universe checkpointing.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4971\" onclick=\"get_ticket_and_populate_wrapper('4971'); return false;\" title=\"Correctly track resource usage across vanilla universe checkpoints\">#4971</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCorrectly track resource usage across vanilla universe checkpoints</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4972\" onclick=\"get_ticket_and_populate_wrapper('4972'); return false;\" title=\"Support non-periodic application-level checkpoints in vanilla universe\">#4972</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSupport non-periodic application-level checkpoints in vanilla universe</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=5238\" onclick=\"get_ticket_and_populate_wrapper('5238'); return false;\" title=\"Implement transfer_[checkpoint|intermediate]_files.\">#5238</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nImplement transfer_[checkpoint|intermediate]_files.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5246\" onclick=\"get_ticket_and_populate_wrapper('5246'); return false;\" title=\"Increase monitorability of vanilla universe checkpointing.\">#5246</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nIncrease monitorability of vanilla universe checkpointing.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5518\" onclick=\"get_ticket_and_populate_wrapper('5518'); return false;\" title=\"Document application-level checkpoint support in the Vanilla Universe\">#5518</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDocument application-level checkpoint support in the Vanilla Universe</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5592\" onclick=\"get_ticket_and_populate_wrapper('5592'); return false;\" title=\"Application-level vanilla universe checkpointing needs attr, reqs.\">#5592</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nApplication-level vanilla universe checkpointing needs attr, reqs.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5647\" onclick=\"get_ticket_and_populate_wrapper('5647'); return false;\" title=\"Starter should not log &quot;unhandled job exit&quot; if it's a self-checkpoint.\">#5647</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nStarter should not log \"unhandled job exit\" if it's a self-checkpoint.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5651\" onclick=\"get_ticket_and_populate_wrapper('5651'); return false;\" title=\"Consider using signals for atomic checkpoint transfer.\">#5651</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nConsider using signals for atomic checkpoint transfer.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6986\" onclick=\"get_ticket_and_populate_wrapper('6986'); return false;\" title=\"Vanilla-universe ckpt restarts nest extra condor_pid_ns_init calls\">#6986</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nVanilla-universe ckpt restarts nest extra condor_pid_ns_init calls</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-02 14:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dc986f72fcfe8c293f1c9d9b41009bd7c8e32b48\">[44931]</a></span>: (<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4968\" onclick=\"get_ticket_and_populate_wrapper('4968'); return false;\" title=\"Periodic Application-Level Checkpoints in the Vanilla Universe\">#4968</a></span>) Correlate tickets and FIXMEs.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-01 13:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ffd89baec5915f2abd78a6c61bc94ecf793e3a4a\">[44487]</a></span>: (<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4968\" onclick=\"get_ticket_and_populate_wrapper('4968'); return false;\" title=\"Periodic Application-Level Checkpoints in the Vanilla Universe\">#4968</a></span>) Fix a bug where shadow reconnection would truncate the output (or error) log when streaming to it.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Sep-22 15:09", "status": "defer", "created": "2015-Apr-01 13:10", "fixed_version": "2015-Apr-01 13:10", "broken_version": "", "priority": "5", "subsystem": "DaemonsExecNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, downes@uwm.edu,pcouvare@caltech.edu", "due_date": ""}