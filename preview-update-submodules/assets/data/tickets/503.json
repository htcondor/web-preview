{"id": 503, "title": "Ticket #503: Remove any Cygwin depencies from Condor proper.", "description": "<blockquote>\nCondor currently depends on Cygwin to make up for some of the deficits of the Windows OS.  The original design of the VM universe made use of a tool commonly found on a Linux system, but one that needed to be shipped with Condor for the Windows platform.  An unfortunate byproduct of using this tool is that it depends on Cygwin.  This meant that we forced to also distribute the Cygwin runtime along with Condor.  We now have access to a tool that can be built with Visual Studio and has no additional dependencies than those of Condor proper.</blockquote>", "remarks": "<blockquote>\n<em>2009-May-21 14:53:28 by ziliang:</em> <br/>\n\nThe cdmake executable I built with VS works, and I've modified the perl script to use it when on Windows.  So far, it's looking like it works.  The ISO is built, it's loaded into the VM, and the VM starts up.  I also pulled a copy of the created ISO to double check its contents and it was all there.\n\n<p></p><hr/>\n<em>2009-May-22 10:53:37 by tannenba:</em> <br/>\n\nDr Will had a really good idea; he said:\n\n<p><em>You might also look at using mingw (either the native compiler or the\nlinux-&gt;windows cross-compiler) to compile mkisofs; that would eliminate\nthe cygwin dependency and could be a path of less resistance.</em>\n\n</p><p>What says you?\n\n</p><p></p><hr/>\n<em>2009-May-22 15:17:38 by ziliang:</em> <br/>\n\nThe issue is no one else seems to be compiling mkisofs with mingw and the official Windows port also uses cygwin, which seems to suggest that it was never written to be run without it.  The ROS team actually compiles cdmake as part of the overall complication process for the OS, and they also use mingw.  I'll check out the mkisofs source, but my current impression is a mingw build might not be doable.\n\n<p></p><hr/>\n<em>2009-May-26 09:57:43 by willb:</em> <br/>\n\nZ, a cursory googling indicates that many people have, in fact, compiled mkisofs with mingw.  If you'd like, I'm happy to chat with you about getting it set up (or using the cross-compiler from Fedora).\n\n<p></p><hr/>\n<em>2009-May-26 14:02:52 by ziliang:</em> <br/>\n\nI'll either need to do it with the Fedora cross compile or sit down with you to go over the make file for mkisofs that's included with cdrecord.  I just tried it with mingw on Windows and it complained about rules.\n\n<p></p><hr/>\n<em>2009-Sep-01 12:31:02 by ziliang:</em> <br/>\n\nThe quickest way to resolve this issue would be to create a bat file called makeisofs that acts as a wrapper for cdmake on Windows, adding the equivalent flags for cdmake to create a correct ISO that the vmware universe can use.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1551\" onclick=\"get_ticket_and_populate_wrapper('1551'); return false;\" title=\"Making isos for vm universe broke on Windows.\">#1551</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMaking isos for vm universe broke on Windows.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Sep-22 16:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3b29076d2f6fce5e5bcd45f9e898a59f629df107\">[15723]</a></span>: Change the dorelease.bat file to correctly copy the new cdmake and mkisofs wrappers and not copy the non-existent mkisofs.exe and cygwin dll. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=503\" onclick=\"get_ticket_and_populate_wrapper('503'); return false;\" title=\"Remove any Cygwin depencies from Condor proper.\">#503</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Sep-22 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3f45a5b2d1d9ae000d618e92a0174859941c1e4\">[15722]</a></span>: Delete mkisofs.exe and the cygwin dll in comdor_vm-gahp, as they are no longer needed by Condor with the addition of cdmake and the mkisofs wrapper. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=503\" onclick=\"get_ticket_and_populate_wrapper('503'); return false;\" title=\"Remove any Cygwin depencies from Condor proper.\">#503</a></span>  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Sep-16 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/597676a7c99fec3206d620b9f0a5ae2d8a506825\">[15703]</a></span>: Adding cdmake.exe and mkisofs.bat to remove dependency on cygwin caused by mkisofs.exe. mkisofs.bat acts as a wrapper that calls cdmake with the appropriate flags. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=503\" onclick=\"get_ticket_and_populate_wrapper('503'); return false;\" title=\"Remove any Cygwin depencies from Condor proper.\">#503</a></span>  (By Ziliang Guo )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-31 13:40", "status": "resolved", "created": "2009-May-21 14:07", "fixed_version": "2009-May-21 14:07", "broken_version": "v070200", "priority": "2", "subsystem": "VM", "assigned_to": "ziliang", "derived_from": "", "creator": "burnett", "rust": "s7829", "customer_group": "other", "visibility": "public", "notify": "burnett@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}