{"id": 5936, "title": "Ticket #5936: enable cgroups by default", "description": "<blockquote>\ncgroup support for managing jobs has been in condor for several releases now, but is off by default.  We should turn it on by default, now that it has had some mileage on it.</blockquote>", "remarks": "<blockquote>\n<em>2016-Oct-06 13:52:44 by mvpelletier:</em> <br/>\n\nI suggest creating a package-supplied /etc/cgconfig.d/htcondor.conf on EL6 platforms containing the group specification as described in the manual. This doesn't appear to be necessary on RHEL7.\n\n<p></p><hr/>\n<em>2016-Oct-07 10:06:17 by mvpelletier:</em> <br/>\n\nWill this create a package dependency on the libcgroup RPM and require that the cgconfig init is done before HTCondor startup, or will the pool run properly with BASE_CGROUP set in the configuration without any cgroup capabilities available?\n\n<p></p><hr/>\n<em>2016-Oct-07 10:15:15 by gthain:</em> <br/>\n\nThe idea is that the master's linux_kernel_tuning script would set everything up before the startd starts.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6210\" onclick=\"get_ticket_and_populate_wrapper('6210'); return false;\" title=\"cgroups documentation not updated after on-by-default changes\">#6210</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncgroups documentation not updated after on-by-default changes</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-30 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a4a867328f23b5191bab704e297d6048b76cd206\">[49686]</a></span>: More <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span> docs  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-30 16:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/019133292f24c7739020e77938fb5f49c169ca39\">[49685]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-17 16:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bf253198977b5f11abc19b6b79b4da651c263475\">[49597]</a></span>: Switch cgroup memory limit policy to \"none\" by default <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-16 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c6422aa2d64fe331589e48718df36a247fe90f48\">[49593]</a></span>: More cgroup defaultry <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-02 11:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3d346c10b36916f58c303cf2609b07a27217757\">[49516]</a></span>: Now that cgroups are on by default, make CGROUP_MEMORY_LIMIT_POLICY=none <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Oct-14 11:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1da877dcc06b1ac2e80e3eee938e8da36be772ad\">[49436]</a></span>: Mount cgroups in linux_kernel_tuning if not already mounted <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-30 10:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fc1752b86d284170e74a1fe39aa2ad707c9b49b1\">[49355]</a></span>: Turn on cgroup by default <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5936\" onclick=\"get_ticket_and_populate_wrapper('5936'); return false;\" title=\"enable cgroups by default\">#5936</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Nov-30 16:16", "status": "resolved", "created": "2016-Sep-30 10:33", "fixed_version": "2016-Sep-30 10:33", "broken_version": "v080500", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}