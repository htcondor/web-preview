{"id": 1383, "title": "Ticket #1383: ldap dependencies in nordugrid_gahp cause portability headaches", "description": "<blockquote>\nThe nordugrid_gahp is linked against the system OpenLDAP library. On many of our linux platforms, OpenLDAP is dependent on SASL or SASL2. For static linking, the SASL/SASL2 library needs to be included on the link line. With the way our build scripts are structured, the same link options are used for dynamic and static.\n\n<p>It turns out that explicitly naming SASL/SASL2 on the link line makes the binary less portable between linux flavors. The WMS group discovered that a dynamic nordugrid_gahp built on rhel3 seg-faults on scientific linux 4. This is because rhel3's ldap uses sasl, while sl4's ldap uses sasl2. Both sasl libraries end up in the running process and butt heads. Removing the sasl library from the link line fixes the problem, but then the static link fails.\n\n</p><p>For now, I'm going to hack the makefile to use different lists of libraries for the dynamic and static links of nordugrid_gahp. This requires manually expanding an imake macro, which is ugly and wrong. If we can dump the building of static binaries (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1136\" onclick=\"get_ticket_and_populate_wrapper('1136'); return false;\" title='Eliminate \"static\" releases of Condor'>#1136</a></span>), this mess will go away.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Apr-28 10:49:15 by jfrey:</em> <br/>\n\nPushed a fix to V7_4-branch for 7.4.3.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-28 10:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ccd10640ab8def0948fa27d07895c33047913267\">[25456]</a></span>: Document nordugrid_gahp fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1383\" onclick=\"get_ticket_and_populate_wrapper('1383'); return false;\" title=\"ldap dependencies in nordugrid_gahp cause portability headaches\">#1383</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-28 10:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d73d744a86f631419e63ff8c37dbbeb8064636f3\">[17925]</a></span>: Fix nordugrid_gahp portability problems due to ldap dependencies. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1383\" onclick=\"get_ticket_and_populate_wrapper('1383'); return false;\" title=\"ldap dependencies in nordugrid_gahp cause portability headaches\">#1383</a></span> The nordugrid_gahp is linked against the system OpenLDAP library. On many of our linux platforms, OpenLDAP is dependent on SASL or SASL2. For static linking, the SASL/SASL2 library needs to be included on the link line. With the\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Apr-28 10:51", "status": "resolved", "created": "2010-Apr-28 10:40", "fixed_version": "2010-Apr-28 10:40", "broken_version": "v070400", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "s7907", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}