{"id": 6014, "title": "Ticket #6014: Fix preemption_requirements and preemption_rank regression from 8.5.7", "description": "<blockquote>\nIn v8.5.7, the patch for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5785\" onclick=\"get_ticket_and_populate_wrapper('5785'); return false;\" title=\"Disable negotiator cross-slot user priority advertising by default\">#5785</a></span> introduced a regression preventing accounting attributes like <code>RemoteUserPrio</code>, <code>RemoteGroup</code>, etc, from being inserted into a resource offer by the negotiator.  Thus PREEMPTION_REQUIREMENTS for most admins would always end up being undefined, effectively disabling preemption due to priority.\n\n<p>The regression came about because the initial implementation for NEGOTIATOR_CROSS_SLOT_PRIOS=false (the default) was overly aggressive.   This patch will fix the problem for v8.5.8+.  Meanwhile, users on v8.5.7 can work around the problem by setting in condor_config\n\n</p><p></p><pre>   NEGOTIATOR_CROSS_SLOT_PRIOS=True</pre>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-15 15:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f615b341a57c4223a074a52a04908184ad0d12f9\">[49589]</a></span>: Documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6014\" onclick=\"get_ticket_and_populate_wrapper('6014'); return false;\" title=\"Fix preemption_requirements and preemption_rank regression from 8.5.7\">#6014</a></span>.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-15 14:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3685ba62cc3b393ca028605425f75d0a27bee28\">[49588]</a></span>: Fix preemption_requirements and preemption_rank regression. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6014\" onclick=\"get_ticket_and_populate_wrapper('6014'); return false;\" title=\"Fix preemption_requirements and preemption_rank regression from 8.5.7\">#6014</a></span> The initial implementation for NEGOTIATOR_CROSS_SLOT_PRIOS prevented any accounting attributes from being inserted into preemption_requirements at all. Patch now correctly just targets cross-slot attributes as originally intended.  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Nov-15 15:11", "status": "resolved", "created": "2016-Nov-15 14:39", "fixed_version": "2016-Nov-15 14:39", "broken_version": "v080507", "priority": "2", "subsystem": "DaemonsCM", "assigned_to": "tannenba", "derived_from": "#5785", "creator": "tannenba", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "gthain@cs.wisc.edu", "due_date": ""}