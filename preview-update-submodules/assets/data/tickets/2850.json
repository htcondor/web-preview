{"id": 2850, "title": "Ticket #2850: startd expressions to enable default rules on partitionable resources", "description": "<blockquote>\nWe need a way for the startd to impose defaults for partitionable resources (memory, cpus, etc) in the event that the schedd does not request them.\n\n<p>Besides defaults, the startd may need to impose policy on the request, such as refusing a request for &lt; 1 CPUs, and/or quantizing the value of memory.\n\n</p><p>All default expressions must be in the param table.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Apr-02 15:13:43 by tstclair:</em> <br/>\n\nI see no changes in the param table.\n\n<p></p><hr/>\n<em>2012-Jun-06 11:20:16 by smoler:</em> <br/>\n\nDocumentation appears in the 7.8.2 manual.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2947\" onclick=\"get_ticket_and_populate_wrapper('2947'); return false;\" title=\"valgrind reports startd memory leaks with partitionable slots\">#2947</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nvalgrind reports startd memory leaks with partitionable slots</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-06 12:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fae39c40be7d071828e0b6580659c0fd96820539\">[32211]</a></span>: edit and correct new subsection on defaults for config knobs for partitionable slots ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-06 11:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f9da433a384fb80670cad7548864f896c664be9e\">[32206]</a></span>: Prose documentatino for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-24 13:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/14369891dbbf0a698ebe287f71058abc294b936c\">[32110]</a></span>: document 7.7.6 new config knobs: MODIFY_REQUEST_EXPR_REQUESTCPUS, MODIFY_REQUEST_EXPR_REQUESTDISK, MODIFY_REQUEST_EXPR_REQUESTMEMORY, and MUST_MODIFY_REQUEST_EXPRS ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-09 15:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0bb16fa1332c0b557ec6801de775ae8478f0908e\">[31985]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2835\" onclick=\"get_ticket_and_populate_wrapper('2835'); return false;\" title=\"revamp default job requirements esp given partitionable slots\">#2835</a></span> &amp; <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2783\" onclick=\"get_ticket_and_populate_wrapper('2783'); return false;\" title=\"Add attributes to JobAd to show time spent in file transfer\">#2783</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-03 20:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2cee75379ee9ff85452238a34ef496eba62d0ab2\">[31099]</a></span>: Added defaults for startd MODIFY_REQUEST_EXPR knobs into param table. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-02 10:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c01178e676b5c0b45bd626cda55a06bf377a5869\">[31063]</a></span>: Added startd knob MUST_MODIFY_REQUEST_EXPRS, defaults to false. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span> If false, then MODIFY_REQUEST_EXPRs are only applied if the job claim still matches the partitionable slot after modification. If true, the modifications always take place, and if the modifications cause the claim to no longer match,\u00a0[...]\n (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-28 14:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/55659912a4409b9fbb8439a5ff75599184ad9ca1\">[31061]</a></span>: Add startd expressions to enable default rules on partitionable resources. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span> Added the following startd knobs: MODIFY_REQUEST_EXPR_RequestCpus MODIFY_REQUEST_EXPR_RequestMemory MODIFY_REQUEST_EXPR_RequestDisk These will modify the user RequestX attributes. The expressions are evaluated within the\u00a0[...]\n (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Jun-06 11:20", "status": "resolved", "created": "2012-Feb-27 15:56", "fixed_version": "2012-Feb-27 15:56", "broken_version": "", "priority": "2", "subsystem": "Daemons", "assigned_to": "smoler", "derived_from": "#2842", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com, tannenba@cs.wisc.edu", "due_date": ""}