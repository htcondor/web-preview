{"id": 4099, "title": "Ticket #4099: Clean up DAGMan default/workflow log file path implementation", "description": "<blockquote>\nThere are a few cleanups that we should probably make to the <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3930\" onclick=\"get_ticket_and_populate_wrapper('3930'); return false;\" title=\"Allow better specification of DAGMan default/workflow log file path\">#3930</a></span> implementation:\n<ol>\n<li>The job_dagman_default_log test should test putting @(CLUSTER) into the default log file name.\n</li><li>It would be nice to figure out a way to use '$' instead of '@' for the special DAG_FILE, DAG_DIR, and CLUSTER macros, just to be more consistent.\n</li><li>Do we need any more special macros to make this work for LIGO?\n</li></ol>\n\n<p>The <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3930\" onclick=\"get_ticket_and_populate_wrapper('3930'); return false;\" title=\"Allow better specification of DAGMan default/workflow log file path\">#3930</a></span> fix should go into 8.1.3; get feedback from LIGO after they've tried it out.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Sep-22 11:35:30 by tpdownes:</em> <br/>\n\nCondor 8.3/8.4 series features the following macros.\n\n<p>DAG_DIR (directory of .dag file)\nDAG_FILE (filename of .dag file)\nCLUSTER (condor_dagman <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClusterId\" title=\"Cluster Id\">ClusterId</a></span>)\nOWNER (condor_dagman <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>: Owner)\nNODE_NAME (\"undef\" for top-level DAG, name of sub-DAG, but sub-DAGs also have different <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClusterId\" title=\"Cluster Id\">ClusterId</a></span>)\n\n</p><p>So, for LIGO's purposes, the following\n\n</p><p>DAGMAN_DEFAULT_NODE_LOG = /localscratch/@OWNER/daglogs/@DAGFILE.@CLUSTER.nodes.log\n\n</p><p>is sufficient. So it's resolved from LIGO's perspective but Kent wants to exercise it a bit more in testing. Removing LIGO tag from ticket. Leaving at priority 4.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2015-Sep-22 11:35", "status": "new", "created": "2013-Nov-26 11:13", "fixed_version": "2013-Nov-26 11:13", "broken_version": "v080102", "priority": "4", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "#3930", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, tannenba@cs.wisc.edu, pfcouvar@syr.edu, tpdownes@gravity.phys.uwm.edu", "due_date": ""}