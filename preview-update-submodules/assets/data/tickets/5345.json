{"id": 5345, "title": "Ticket #5345: Create DAGMan maxidle test(s)", "description": "<blockquote>\nI'm breaking this out into a separate ticket, because I want to be able to resolve <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5333\" onclick=\"get_ticket_and_populate_wrapper('5333'); return false;\" title=\"Potential bug with DAGMan maxidle/DAGMAN_MAX_JOBS_IDLE\">#5333</a></span> once the bug is actually fixed and tested manually; and I think that actually writing tests for maxidle will be kind of tricky.</blockquote>", "remarks": "<blockquote>\n<em>2015-Oct-28 09:33:35 by wenger:</em> <br/>\n\nWorking on this on the V8_4-gittrac_5333-branch branch as I fix <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5333\" onclick=\"get_ticket_and_populate_wrapper('5333'); return false;\" title=\"Potential bug with DAGMan maxidle/DAGMAN_MAX_JOBS_IDLE\">#5333</a></span>.\n\n<p></p><hr/>\n<em>2015-Oct-28 13:59:54 by wenger:</em> <br/>\n\nI've been wondering how to make these tests work -- it's easy to submit node jobs that stay in the idle state -- but then at some point something has to happen for the DAG to finish so the test can pass.\n\n<p>One idea I had was to have a \"monitor\" job that's submitted with a real high priority -- this job would run for the whole duration of the DAG and monitor the queue to make sure that there aren't too many idle jobs.  Maybe it would also get the idle jobs to eventually run.  (To make sure the \"monitor\" job runs first, we could have PRE scripts for all of the other jobs that wait for the \"monitor\" job to run before continuing.\n\n</p><p></p><hr/>\n<em>2015-Oct-28 16:35:23 by wenger:</em> <br/>\n\nNote:  We should test various ways of jobs becoming idle and non-idle (e.g., held/released, job finishes, job is removed).</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-28 12:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d1e5e1ff39e4b6aeee5e8f0c32f47ec56730434c\">[46129]</a></span>: Gittrac <span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=5345\" onclick=\"get_ticket_and_populate_wrapper('5345'); return false;\" title=\"Create DAGMan maxidle test(s)\">#5345</a></span>: Starting on maxidle tests -- I have a couple of DAGs that demonstrate problems when run manually, but I don't have things set up yet to automatically detect pass/fail.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Jun-01 13:47", "status": "stalled", "created": "2015-Oct-26 13:40", "fixed_version": "2015-Oct-26 13:40", "broken_version": "v080401", "priority": "3", "subsystem": "Dag", "assigned_to": "", "derived_from": "#5333", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, zmiller@cs.wisc.edu, coatsworth@cs.wisc.edu", "due_date": ""}