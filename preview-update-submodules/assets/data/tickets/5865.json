{"id": 5865, "title": "Ticket #5865: Better documentation of meta-knobs", "description": "<blockquote>\nAs per conversation today with TJ -- we should probably create a new section in the manual, or something like that, for meta-knobs, rather than just mixing them in with the hundreds of \"regular\" knobs in the existing configuration section.</blockquote>", "remarks": "<blockquote>\n<em>2016-Nov-02 12:32:23 by wenger:</em> <br/>\n\nRight now we have sections like this in the manual:\n\n<p></p><pre>  3. Administrators' Manual\n    3.1 Introduction\n    3.2 Installation, Start Up, Shut Down, and Reconfiguration\n    3.3 Configuration\n    3.4 User Priorities and Negotiation\n</pre>\n\n<p>Are you saying that we should have a new meta-configuration section at the same level as the existing configuration, like this?:\n\n</p><p></p><pre>  3. Administrators' Manual\n    3.1 Introduction\n    3.2 Installation, Start Up, Shut Down, and Reconfiguration\n    3.3 Configuration\n    3.4 Meta-configuration\n    3.5 User Priorities and Negotiation\n</pre>\n\n<p></p><hr/>\n<em>2016-Nov-02 12:38:55 by wenger:</em> <br/>\n\nHmm -- maybe \"configuration templates\" is a better term than \"meta knobs\".\n\n<p>Also, TJ suggests putting the meta knob/config template section <strong>before</strong> the \"regular\" config section, to encourage people to use the templates as much as possible...\n\n</p><p></p><hr/>\n<em>2016-Nov-02 12:49:55 by wenger:</em> <br/>\n\nCreated V8_5_8-gittrac_5865-branch for this, since it will be a pretty big change.\n\n<p></p><hr/>\n<em>2016-Nov-02 13:13:08 by wenger:</em> <br/>\n\nHmm -- need to document what happens if you use a meta-knob and then explicitly set one of the \"regular\" knobs set by that meta-knob.\n\n<p></p><hr/>\n<em>2016-Nov-02 13:15:38 by wenger:</em> <br/>\n\nIs there a way to dump out what settings correspond to a meta-knob?  I'd kind of prefer to not put this directly into the documentation, in case it changes in the future...\n\n<p></p><hr/>\n<em>2016-Nov-02 13:21:25 by wenger:</em> <br/>\n\nHmm, I'm kind of wondering whether we should have an \"Introduction to configuration files\" section, a \"Configuration templates\" section, and a \"Configuration settings\" section.\n\n<p></p><hr/>\n<em>2016-Nov-02 13:22:47 by wenger:</em> <br/>\n\nMaybe section 3.5 Policy Configuration for Execute Hosts and for Submit Hosts, for example, should include references to the meta-knob section.\n\n<p></p><hr/>\n<em>2016-Nov-02 13:35:02 by wenger:</em> <br/>\n\nThe arguments to knobs feature (\"use FEATURE : Knob(arg1, , arg3)\", see param_info.in) does not seem to be documented.  (And, from the description in param_info.in, I'm not sure how it works.  Should this really be \"use &lt;category id&gt; : &lt;name of set&gt; (&lt;args&gt;)\"?)\n\n<p></p><hr/>\n<em>2016-Nov-02 13:37:31 by wenger:</em> <br/>\n\nI don't really like the formatting of the config set descriptions -- I don't think the names stand out enough.  Also, some of the available sets (e.g., Preempt_If) are not documented at all.\n\n<p></p><hr/>\n<em>2016-Nov-02 13:56:00 by wenger:</em> <br/>\n\nOkay, TJ agrees to go for three sections:\n<ul>\n<li>Config intro/syntax\n</li><li>Meta-knobs/config templates\n</li><li>Individual config knobs\n</li></ul>\n\n<p>condor_config_val use &lt;category&gt; dumps the set names for that category.\n\n</p><p>condor_config_val use &lt;category&gt;:&lt;set name&gt; dumps the values that meta-knob sets (spaces not allowed around colon).\n\n</p><p>condor_config_val use &lt;category&gt;:&lt;set name&gt; -expand dumps the expanded values.\n\n</p><p>\"condor_config_val use...\" is not in the condor_config_val man page or the usage message.\n\n</p><p></p><hr/>\n<em>2016-Nov-04 13:52:56 by wenger:</em> <br/>\n\nDo any of the config files we ship use meta-knobs?  If not, they probably should...\n\n<p></p><hr/>\n<em>2016-Nov-07 14:14:34 by wenger:</em> <br/>\n\nOkay, flightworthy meeting decided to call these \"configuration templates\".\n\n<p></p><hr/>\n<em>2016-Nov-14 10:14:30 by wenger:</em> <br/>\n\nTJ looked at this and gave a few suggestions, so I'm going to make the ticket active again for a short time.\n\n<p></p><ul>\n<li>UWCS knobs <strong>were</strong> in the param table; not anymore.  The config template just exists for people who use those knobs -- they now need to use that config template.\n\n<p></p></li><li>Move non-generic cron hooks above generic ones.\n\n<p></p></li><li>Add a cron hook example.\n</li></ul>\n\n<p>Also, it just occurred to me that I should probably have a link from the policy page to the config template page.\n\n</p><p></p><hr/>\n<em>2016-Nov-14 15:45:23 by wenger:</em> <br/>\n\ncron hook metaknob example from TJ\n\n<p></p><pre>  # update dynamic GPU information every 15 minutes\n  use FEATURE : StartdCronPeriodic(DYNGPU, 15*60, $(LOCAL_DIR)\\dynamic_gpu_info.pl, $(LIBEXEC)\\condor_gpu_discovery -dynamic)\n</pre>\n\n<p>where dynamic_gpu_info.pl is a simple perl script that strips off the DetectedGPUs line from condor_gpu_discovery\n\n</p><p></p><pre>    #!/usr/bin/env perl\n    my @attrs = `@ARGV`;\n    for (@attrs) {\n        next if ($_ =~ /^Detected/i);\n        print $_;\n    }</pre>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5993\" onclick=\"get_ticket_and_populate_wrapper('5993'); return false;\" title=\"Condor_config_val -usage doesn't include &quot;use&quot; (for metaknobs)\">#5993</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCondor_config_val -usage doesn't include \"use\" (for metaknobs)</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-14 17:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/23da74c7dd29396189757783079478a8e315927b\">[49585]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Cleaned up a few things based on feedback from TJ.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-11 17:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/61650fc3b8715ebb84f697b9ca4d8a7c86f472a1\">[49577]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Finished up a couple of config template examples (probably should add more at some point).  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-11 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56a11c9c859056123875bc2eba8f24ee861ee8aa\">[49576]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Finished configuration template stuff except for adding some more examples.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-10 16:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/517df33dedd3401637fa3fee7546a5c680a44643\">[49573]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Added a bunch more configuration template stuff.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-07 16:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/60a3d5a572b2f7a37633a989deb2dbf455fb0bd0\">[49551]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Changed \"metaknob\" to \"configuration template\" and made related changes.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-05 17:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7757365c0518a24bf108d73c446a129eb943d77a\">[49547]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Pretty much finished up condor_config_val man page changes; removed now-redundant stuff from the various configuration sections; started on other metaknob-related improvements.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-04 18:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ff7f811699e1b8afdff051e6b77c4ca3a405ac4\">[49546]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5865\" onclick=\"get_ticket_and_populate_wrapper('5865'); return false;\" title=\"Better documentation of meta-knobs\">#5865</a></span>: Started on documentation: created new \"config intro\" and \"config metaknobs\" manual sections, started on changes to them, started on changes to condor_config_val man page.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2016-Nov-14 17:43", "status": "resolved", "created": "2016-Aug-24 11:58", "fixed_version": "2016-Aug-24 11:58", "broken_version": "v080506", "priority": "1", "subsystem": "Unknown", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}