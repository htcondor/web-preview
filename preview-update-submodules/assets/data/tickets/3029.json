{"id": 3029, "title": "Ticket #3029: job_dagman_large_dag test is failing often", "description": "<blockquote>\nIt seems like the job_dagman_large_dag started failing after dprintf 'flags' went into the repository at cd1b60d.  The annoying thing is that it only fails sporadically, but more or less consistently on the  x86_64_sol_5.11 x86_freebsd_7.4\tx86_rhap_5.8 x86_rhap_6.2 x86_sl_5.8 platforms.</blockquote>", "remarks": "<blockquote>\n<em>2012-Jun-04 14:49:28 by nwp:</em> <br/>\n\nMy understanding is that it is failing on 32-bit platforms.  Greg believes it might be an issue of (systemwide) fd-limits.\n\n<p></p><hr/>\n<em>2012-Jun-05 16:57:20 by nwp:</em> <br/>\n\nIt looks like the log is being truncated when dagman starts up in recovery mode on these platforms.\n\n<p></p><hr/>\n<em>2012-Jun-06 09:04:02 by nwp:</em> <br/>\n\nLooks like line 323 in <code>src/condor_utils/dprintf_config.cpp</code> (commit b4934a0 -- master on 6 June 2012) is where the problem occurs:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">DebugParams[param_index].want_truncate = dprintf_param_funcs-&gt;param_boolean_int(pname, DebugParams[param_index].want_truncate) ? 1 : 0;\n</pre></div>\n\nbacktrace in gdb shows the following:\n<div class=\"code\">\n<pre class=\"code\">#0  dprintf_config (subsys=0x66d2b0 \"DAGMAN\", p_funcs=0x7ffff7f56200, p_info=0x0, c_info=0) at /afs/cs.wisc.edu/u/n/w/nwp/CONDOR_SRC/src/condor_utils/dprintf_config.cpp:323\n#1  0x00007ffff7bfd1be in dc_main (argc=16, argv=0x7fffffffd868) at /afs/cs.wisc.edu/u/n/w/nwp/CONDOR_SRC/src/condor_daemon_core.V6/daemon_core_main.cpp:1949\n#2  0x0000000000430939 in main (argc=16, argv=0x7fffffffd868) at /afs/cs.wisc.edu/u/n/w/nwp/CONDOR_SRC/src/condor_dagman/dagman_main.cpp:1432\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Jun-07 07:28:13 by nwp:</em> <br/>\n\nThis bug never appeared in a released version, so no version history is needed for this bug.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-07 07:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4f462cc766ac53e245e9c7cf7b6727ab12c08877\">[32234]</a></span>: Watch your copy constructors <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3029\" onclick=\"get_ticket_and_populate_wrapper('3029'); return false;\" title=\"job_dagman_large_dag test is failing often\">#3029</a></span> This seems to have fixed the job_dagman_large_dag test.  (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Jan-29 14:11", "status": "resolved", "created": "2012-Jun-04 11:22", "fixed_version": "2012-Jun-04 11:22", "broken_version": "v070900", "priority": "3", "subsystem": "Tests", "assigned_to": "johnkn", "derived_from": "", "creator": "nwp", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}