{"id": 2683, "title": "Ticket #2683: keep x509UserProxyExpiration up to date", "description": "<blockquote>\nThe job attributes <code>x509userproxysubject</code> <code>x509UserProxyExpiration</code> <code>x509UserProxyVOName</code> <code>x509UserProxyFirstFQAN</code> <code>x509UserProxyFQAN</code> are set by condor_submit.  They are never updated.  If they were, it would be possible to have a policy that holds/removes jobs with expired proxies or other policy based on DNs and VOMS attributes.\n\n<p>TODO:\n</p><ul>\n<li>commit\n</li><li>test\n</li><li>document</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-02 10:38:47 by danb:</em> <br/>\n\nOnce this is done, it should be possible to make it a requirement that jobs with expired proxies cannot match to machines configured to use glexec.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3265\" onclick=\"get_ticket_and_populate_wrapper('3265'); return false;\" title=\"Shadow sets wrong x509userproxysubject attribute in job ad\">#3265</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nShadow sets wrong x509userproxysubject attribute in job ad</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-11 10:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b135441e04c9dc5bfd621c767d4253fb6e22acb4\">[33654]</a></span>: Shadow now sets correct x509userproxysubject on proxy update. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2683\" onclick=\"get_ticket_and_populate_wrapper('2683'); return false;\" title=\"keep x509UserProxyExpiration up to date\">#2683</a></span> When it detected a renewed proxy, the shadow updates the proxy-related attributes in the job ad in the schedd. It was setting attribute x509userproxysubject to the proxy's subject name when it should be setting it to the proxy's identity.\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-17 15:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7767491969eeba86f4482ffbe2f61c3f58e48a37\">[30638]</a></span>: Added plubming to actually push the updated attributes to the schedd (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2683\" onclick=\"get_ticket_and_populate_wrapper('2683'); return false;\" title=\"keep x509UserProxyExpiration up to date\">#2683</a></span>)  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-15 17:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/228b4e931876358da2e01c82b3abbc21e26e61c1\">[30620]</a></span>: while a job is running, whenever we check the proxy to see if we should push it to the execute machine we also update the x509 and VOMS attributes in the job ad. (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2683\" onclick=\"get_ticket_and_populate_wrapper('2683'); return false;\" title=\"keep x509UserProxyExpiration up to date\">#2683</a></span>)  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Dec-17 12:36", "status": "resolved", "created": "2011-Dec-02 10:16", "fixed_version": "2011-Dec-02 10:16", "broken_version": "v070700", "priority": "2", "subsystem": "", "assigned_to": "zmiller", "derived_from": "#2753", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "isfiligoi@ucsd.edu,dan@hep.wisc.edu,burt@fnal.gov,zmiller@cs.wisc.edu", "due_date": "20120216"}