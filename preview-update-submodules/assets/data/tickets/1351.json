{"id": 1351, "title": "Ticket #1351: Allow file transfer plugins to work with vm universe", "description": "<blockquote>\nSeveral of our users have requested the ability to pre-stage VM images on execute machines. Currently, the code assumes the image files are visible on the submit machine (and may be accessible on the execute machine via a shared file system). We can support pre-staging fairly easily use the file transfer plugins and the file:// URL type. Some changes need to be made, mainly with the <code>vmware_dir</code> submit attribute.\n\n<p><span class=\"section\"></span></p><h2>Milestones </h2>\n\n<p></p><ul>\n<li>Make <code>vmware_dir</code> optional <strong>DONE</strong>\n</li><li>Test using file transfer plugins with vm universe jobs <strong>DONE</strong>\n</li></ul>\n\n<p><span class=\"section\"></span></p><h2>Details </h2>\n\n<p>For VMWare jobs, the user specifies <code>vmware_dir</code> (a required attribute), which points at the directory containing all of the files that describe the image. condor_submit grovels around in that directory for several files, which are then used to set several attributes in the job ad:\n\n</p><p></p><ul>\n<li><code>VMPARAM_VMware_VMX_File</code> = &lt;.vmx file&gt;\n</li><li><code>VMPARAM_VMware_VMDK_Files</code> = &lt;list of .vmdk files&gt;\n</li><li>Add the above files and <code>nvram</code> to <code>TransferInputFiles</code>\n</li></ul>\n\n<p>We should make <code>vmware_dir</code> optional. If it's given, all of the appropriate files are added to <code>TransferInputFiles</code> by condor_submit. If it's not given, then the user needs to list all of the files in <code>transfer_input_files</code>, possibly as URLs. condor_submit can then search <code>TransferInputFiles</code> and set the other job attributes.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Apr-21 10:10:49 by jfrey:</em> <br/>\n\nPushed commit making <code>vmware_dir</code> optional to master for 7.5.3.\n\n<p></p><hr/>\n<em>2010-Jun-04 15:59:27 by tannenba:</em> <br/>\n\nShouldn't this ticket be resolved?</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-30 10:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b22c993b720ca110f5a04d2279bfc544b622904a\">[25542]</a></span>: initial documentation for using file tranfer plugins for vm universe jobs; gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1351\" onclick=\"get_ticket_and_populate_wrapper('1351'); return false;\" title=\"Allow file transfer plugins to work with vm universe\">#1351</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-07 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5ccb5f0b91d72ed09e350843e8a5b6c9e237d489\">[25512]</a></span>: Add version history entry for file transfer plugsin with vm universe. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1351\" onclick=\"get_ticket_and_populate_wrapper('1351'); return false;\" title=\"Allow file transfer plugins to work with vm universe\">#1351</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-21 10:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3a074f1081c2bf6381f3625c27a069743d7142db\">[17889]</a></span>: Make vmware_dir submit attribute optional for vmware jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1351\" onclick=\"get_ticket_and_populate_wrapper('1351'); return false;\" title=\"Allow file transfer plugins to work with vm universe\">#1351</a></span> If vmware_dir isn't specified in the submit file, all of the VM image files must be listed in transfer_input_files. condor_submit will check that list and complain if a .vmx file isn't present. The job ad attributes VMPARAM_VMware_VMX_File\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jun-07 11:46", "status": "resolved", "created": "2010-Apr-14 17:07", "fixed_version": "2010-Apr-14 17:07", "broken_version": "v070400", "priority": "3", "subsystem": "Unknown", "assigned_to": "jfrey", "derived_from": "#523", "creator": "jfrey", "rust": "", "customer_group": "purdue", "visibility": "public", "notify": "", "due_date": "20100421"}