{"id": 1158, "title": "Ticket #1158: Condor Daemon Log can't grow beyond 2GB", "description": "<blockquote>\nCondor daemon log files are limited to 2GB on 32/64-bit machines, or any machine where int is 4 bytes wide, due to the fact that the param() return type is int, and the value we read from the config file passes through atoi().\n\n<p>Some work was done to compensate for the 2GB boundary during log rotations as found in ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=823\" onclick=\"get_ticket_and_populate_wrapper('823'); return false;\" title=\"Log rotation problem at 2GB boundary\">#823</a></span>, but it is not enough as described in the remarks on that ticket.</p></blockquote>", "remarks": "<blockquote>\nResolved by adding the option to have more than just one rotated log file. Thus, files still won't grow beyond 2GB but one can specify arbitrarily many. The oldest daemon log history file will still have the *.old ending whereas the others have a timestamp ending (timestamp being from the time when the file was rotated away).</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4359\" onclick=\"get_ticket_and_populate_wrapper('4359'); return false;\" title=\"Memory leak in log rotation code\">#4359</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMemory leak in log rotation code</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-24 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0a6fb58df6bf3d085e5c176d2903322ba81417a5\">[18518]</a></span>: Dealt with a potential rotation problem if there is a separate file per debug level. This is related to ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1158\" onclick=\"get_ticket_and_populate_wrapper('1158'); return false;\" title=\"Condor Daemon Log can't grow beyond 2GB\">#1158</a></span>.  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-23 13:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9b40fcb04772ff1ce92dc69710634941b93a5208\">[25537]</a></span>: Version history entry for new daemon log rotation (gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1158\" onclick=\"get_ticket_and_populate_wrapper('1158'); return false;\" title=\"Condor Daemon Log can't grow beyond 2GB\">#1158</a></span>) and adding the new config knobs to admin manual configuration section.  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-16 19:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6c2c71c7afa1a918639cee00f5fcd8164e4dd841\">[18478]</a></span>: Centralized rotation with timestamp file ending. Also added a parameter MAX_NUM_&lt;subsys&gt;_LOG for specifying how many old log files should be kept. This will for example solve the max 2GB log file issue in ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1158\" onclick=\"get_ticket_and_populate_wrapper('1158'); return false;\" title=\"Condor Daemon Log can't grow beyond 2GB\">#1158</a></span> (also part of umbrella ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1016\" onclick=\"get_ticket_and_populate_wrapper('1016'); return false;\" title=\"Unified Logging and Rotation\">#1016</a></span>).  (By Cathrin Weiss )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jun-16 19:57", "status": "defer", "created": "2010-Jan-29 11:28", "fixed_version": "2010-Jan-29 11:28", "broken_version": "v050000", "priority": "5", "subsystem": "Libs", "assigned_to": "cweiss", "derived_from": "#988", "creator": "psilord", "rust": "a14573", "customer_group": "ligo", "visibility": "public", "notify": "psilord@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}