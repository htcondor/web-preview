{"id": 4114, "title": "Ticket #4114: May start multiple simultaneous instances for one job on OpenStack", "description": "<blockquote>\nFrom GM_START_VM in doEvaluateState in ec2job.cpp, if ec2_vm_start() fails with NEED_CHECK_VM_START, we return to the GM_START_VM state up to three times, retrying the VM start three times.  However, if we're using SSH keypair IDs to implement idempotence (e.g., for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpenStack\" title=\"Open Stack\">OpenStack</a></span> (before Havana (see #FIXME))), each call to ec2_vm_start() which returns NEED_CHECK_VM_START could start its own job -- it won't return the first call's instance ID instead of a new one because it's ignoring the client token we supply.\n\n<p>We should do Something Clever instead.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Dec-11 15:20", "status": "new", "created": "2013-Dec-11 15:20", "fixed_version": "2013-Dec-11 15:20", "broken_version": "", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}