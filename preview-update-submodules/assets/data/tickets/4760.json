{"id": 4760, "title": "Ticket #4760: Ignore additional files in config directory", "description": "<blockquote>\nThe current default list of files to ignore in the configuration directory is insufficient. At a minimum, cfengine backup files should be added to the list.\n\n<p>From Tom Downes on the HTCondor-LIGO mailing list:\n\n</p><p>I'd like you to consider changes to how you manage the\n/etc/condor/config.d directory. I suggest that you either explicitly\nexclude some common extensions that are produced as backups (.*~$\n.*\\.cfsaved$ .*\\.dpkg-dist \\*.rpmsave etc) or only poll for files with\nan explicit extension (like /etc/ld.so.conf.d).\n\n</p><p>Reasoning: cfengine produces cfsaved backup files all over the place\nunless you ask it not to. Because these backups occur lexically after\ntheir intended replacement, they overwrite the values that you were\nactually trying to change!\n\n</p><p>I have managed to find LOCAL_CONFIG_DIR_EXCLUDE_REGEXP and I think you\nshould just expand it to include more default values.\n\n</p><p>^((\\..*)|(.*~)|(#.*)|(.*\\.rpmsave)|(.*\\.rpmnew)|(.*\\.dpkg-dist)|(.*cfsaved))$\n\n</p><p>I'm not sure the interior parens are necessary if this is an extended\nregular expression... but maybe you need them because of the\nparentheses everywhere rule in condor configurations.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Jan-16 13:21:03 by tim:</em> <br/>\n\n<strong>Code Review:</strong> Brian Lin looked over this configuration change. After some discussion it was approved. The only concern was the dpkg-old file (which are equivalent to the rpmsave files). However, a problem would only occur if we screwed up the packaging in a major way or some other package would be providing HTCondor configuration files. In the end, it made more sense to exclude backup files from RPMs and debs in the same way as from editors and cfengine.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-05 12:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/73e0573672abfd514ee86fb93c76727255298c1c\">[43264]</a></span>: edits to 8.2.7 version history items <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4737\" onclick=\"get_ticket_and_populate_wrapper('4737'); return false;\" title=\"Fix-up python / classad object conversion\">#4737</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4556\" onclick=\"get_ticket_and_populate_wrapper('4556'); return false;\" title=\"UDP invalidations can be sent to hosts without a UDP command socket\">#4556</a></span> <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4760\" onclick=\"get_ticket_and_populate_wrapper('4760'); return false;\" title=\"Ignore additional files in config directory\">#4760</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-05 11:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/342764956bc61cf2191683d48cfda52a13028856\">[43263]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4737\" onclick=\"get_ticket_and_populate_wrapper('4737'); return false;\" title=\"Fix-up python / classad object conversion\">#4737</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4556\" onclick=\"get_ticket_and_populate_wrapper('4556'); return false;\" title=\"UDP invalidations can be sent to hosts without a UDP command socket\">#4556</a></span> and <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4760\" onclick=\"get_ticket_and_populate_wrapper('4760'); return false;\" title=\"Ignore additional files in config directory\">#4760</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-16 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a0f69302dcdfedc52ce8890c5eebf811da30d09a\">[42261]</a></span>: (<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4760\" onclick=\"get_ticket_and_populate_wrapper('4760'); return false;\" title=\"Ignore additional files in config directory\">#4760</a></span>) Add .dpkg-old .dpkg-dist and .cfsaved to LOCAL_CONFIG_DIR_EXECLUDE_REGEXP  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Feb-05 13:51", "status": "defer", "created": "2014-Dec-08 11:44", "fixed_version": "2014-Dec-08 11:44", "broken_version": "", "priority": "5", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "tpdownes@gravity.phys.uwm.edu,pcouvare@caltech.edu", "due_date": ""}