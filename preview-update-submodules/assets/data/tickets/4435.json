{"id": 4435, "title": "Ticket #4435: Starter logs \"Unable to set OOM control\" on newer kernels", "description": "<blockquote>\nOn Fedora 20, when running with cgroups enabled, the starter logs the error\n\n<p>\"Unable to set OOM control to 1 for starter: 22 Invalid argument\"\n\n</p><p>As a side effect, the starter then never listens for the OOM event and doesn't catch it, and put jobs on hold that exceed their memory limit.</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Dec-15 08:50:28 by bbockelm:</em> <br/>\n\nSee <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4774\" onclick=\"get_ticket_and_populate_wrapper('4774'); return false;\" title=\"OOM Management issues\">#4774</a></span>; the work in this ticket allowed the OOM killer to still be active while OOM notification was turned on. This made a pre-existing race condition (OOM occurs at the same time the job exits) much more likely to occur. Fixes will go in derived ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4774\" onclick=\"get_ticket_and_populate_wrapper('4774'); return false;\" title=\"OOM Management issues\">#4774</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nOOM Management issues</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-18 10:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/37a0129c40e2d9d132a9e149f8008576c460fc0b\">[40700]</a></span>: minor edit of 8.2.2 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4435\" onclick=\"get_ticket_and_populate_wrapper('4435'); return false;\" title='Starter logs \"Unable to set OOM control\" on newer kernels'>#4435</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-10 16:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f433f551d08ad76be9accd386b5ae004d5d1fbef\">[40604]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4435\" onclick=\"get_ticket_and_populate_wrapper('4435'); return false;\" title='Starter logs \"Unable to set OOM control\" on newer kernels'>#4435</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-10 16:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c8c9eebeb24df4b24ff1e6d8a494fea114be039a\">[40603]</a></span>: If oom_control can't be written, still try to catch OOM events. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4435\" onclick=\"get_ticket_and_populate_wrapper('4435'); return false;\" title='Starter logs \"Unable to set OOM control\" on newer kernels'>#4435</a></span> This is a short term workaround until we understand what the kernel is really doing.  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Dec-15 08:50", "status": "resolved", "created": "2014-Jul-02 09:28", "fixed_version": "2014-Jul-02 09:28", "broken_version": "v080200", "priority": "4", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}