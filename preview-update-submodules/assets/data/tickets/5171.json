{"id": 5171, "title": "Ticket #5171: DetectedCpus and DetectedMemory is stuffed into ALL ads", "description": "<blockquote>\nWhen the <code>DetectedCpus</code> and <code>DetectedMemory</code> attributes were added to the schedd &amp; startd ads, the code was placed into <code>DCCollector::sendUpdate</code>, so the attributes end up published into ALL ads sent to the collector including submittor ads.\n\n<p>The comments on the code indicate the developer was unaware that there were ads going through this code other than the deaemon ads.\n\n</p><p>The code to publish <code>DetectedCpus</code> and <code>DetectedMemory</code> needs to be moved out of <code>DCCollector::sendUpdate</code> and put into the individual daemons that want this information.  The Startd and Master seem most approprate,  We will add it to the Schedd also because the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RedHat\" title=\"Red Hat\">RedHat</a></span> folks seemed to want that.</p></blockquote>", "remarks": "<blockquote>\nI'm putting this in doc-pending state, but I'm not sure that it really needs any doc.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-25 14:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cdaaa015644432f0cef1b6aea371d1924e713238\">[45669]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5159\" onclick=\"get_ticket_and_populate_wrapper('5159'); return false;\" title=\"condor_submit should allow an empty file transfer list.\">#5159</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5210\" onclick=\"get_ticket_and_populate_wrapper('5210'); return false;\" title=\"condor_kbdd should not report transient mouse movement as 'activity'\">#5210</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5127\" onclick=\"get_ticket_and_populate_wrapper('5127'); return false;\" title=\"make condor_userprio -long output easier to process\">#5127</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5155\" onclick=\"get_ticket_and_populate_wrapper('5155'); return false;\" title=\"condor_q -better -reverse output confusing when expr uses CurrentTime\">#5155</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4836\" onclick=\"get_ticket_and_populate_wrapper('4836'); return false;\" title=\"Enable python bindings in windows\">#4836</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5132\" onclick=\"get_ticket_and_populate_wrapper('5132'); return false;\" title=\"fix problems with SLOT_TYPE_n_* params\">#5132</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5171\" onclick=\"get_ticket_and_populate_wrapper('5171'); return false;\" title=\"DetectedCpus and DetectedMemory is stuffed into ALL ads\">#5171</a></span> <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5172\" onclick=\"get_ticket_and_populate_wrapper('5172'); return false;\" title=\"condor_q tries to parse usernames starting with digits as job ids\">#5172</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5188\" onclick=\"get_ticket_and_populate_wrapper('5188'); return false;\" title=\"$REAL() macro substitution doesn't evaluate\">#5188</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5189\" onclick=\"get_ticket_and_populate_wrapper('5189'); return false;\" title=\"$CHOICE() macro should allow empty items\">#5189</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-23 11:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/30beda71639bfab70b41f52410a869592e730b08\">[45393]</a></span>: move code to stuff <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DetectedCpus\" title=\"Detected Cpus\">DetectedCpus</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DetectedMemory\" title=\"Detected Memory\">DetectedMemory</a></span> so it doesn't pollute all ads sent to the collector <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5171\" onclick=\"get_ticket_and_populate_wrapper('5171'); return false;\" title=\"DetectedCpus and DetectedMemory is stuffed into ALL ads\">#5171</a></span> with this change, any ad that gets the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SelfMonitor\" title=\"Self Monitor\">SelfMonitor</a></span> attribute also gets <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DetectedCpus\" title=\"Detected Cpus\">DetectedCpus</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DetectedMemory\" title=\"Detected Memory\">DetectedMemory</a></span>. ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Sep-18 08:41", "status": "resolved", "created": "2015-Jul-23 11:05", "fixed_version": "2015-Jul-23 11:05", "broken_version": "v070800", "priority": "3", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}