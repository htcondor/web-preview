{"id": 6632, "title": "Ticket #6632: Add -[aws-?]region flag to condor_annex", "description": "<blockquote>\nAs a first step towards making it less painful to use <code>condor_annex</code> with multiple regions, make it less painful to use condor_annex with a single region that isn't <code>us-east-1</code>.\n\n<p></p><ul>\n<li>The first step of this is to add a <strong>-[aws-?]region</strong> flag that sets all the various AWS URL options in the obvious way.\n</li><li>The second step is for <code>condor_annex</code> to read the default region from configuration.\n</li><li>The third step is to add special handling for for the <strong>-setup</strong> flag, where <strong>-[aws-]region</strong> also sets the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CloudFormation\" title=\"Cloud Formation\">CloudFormation</a></span> URL, and if setup succeeds, changes the default region in configuration.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-29 16:55:25 by tlmiller:</em> <br/>\n\nAlso, documentation.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6633\" onclick=\"get_ticket_and_populate_wrapper('6633'); return false;\" title=\"Add default AMI IDs for all regions we currently support.\">#6633</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd default AMI IDs for all regions we currently support.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-23 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/25a0ccd1111b8ea31ca504b36aa0a1f8ce422b4d\">[54787]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Forgot about the audit log.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-02 17:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/64aa3665cdedbfeab3b781f1bd2f2c7d56e8282b\">[54651]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Missed some documentation for condor_annex -setup.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-30 16:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2ed2d46572a33435486fc91fc32c67b6f6a9ea0\">[54639]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Documentation.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-30 16:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4184df395463e153cd1af03e0b850da4587a7723\">[54638]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6629\" onclick=\"get_ticket_and_populate_wrapper('6629'); return false;\" title=\"condor_annex fails when uploading config files to us-east-2\">#6629</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6633\" onclick=\"get_ticket_and_populate_wrapper('6633'); return false;\" title=\"Add default AMI IDs for all regions we currently support.\">#6633</a></span>) Release notes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-30 14:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fbb36e78cd87e1afad65ff61ffff5eb1324fdd56\">[54631]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Set <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CloudFormation\" title=\"Cloud Formation\">CloudFormation</a></span> URL if -aws-region given along with -setup. Allow -setup to omit third positional parameter (if last flag on line). When using -setup with -aws-region, record the setup as specific to that region.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-30 10:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de267698b9f07724b8f8446a1fc0bb6fef707569\">[54628]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Add default region config knob (step 2).  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-29 16:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ab64887a4935af49abd03dca2d71e43b290dc086\">[54622]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6632\" onclick=\"get_ticket_and_populate_wrapper('6632'); return false;\" title=\"Add -[aws-?]region flag to condor_annex\">#6632</a></span>) Add -aws-region flag, step 1.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Mar-30 16:40", "status": "resolved", "created": "2018-Mar-29 15:17", "fixed_version": "2018-Mar-29 15:17", "broken_version": "", "priority": "2", "subsystem": "Annex", "assigned_to": "tlmiller", "derived_from": "#6629", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}