{"id": 5064, "title": "Ticket #5064: Set x509 job attributes from authenticated socket", "description": "<blockquote>\nCurrently, the X509 (and VOMS) job attributes are set by the <code>condor_submit</code> utility.  There's no verification on the schedd side - hence, they are inappropriate for use in security-related situations.\n\n<p>I propose that we should do at least one of these two alternates:\n</p><ol>\n<li>If GSI security is used, then fill in the X509/VOMS attributes from the authenticated socket object.\n</li><li>If a proxy is delegated (regardless of auth used), then fill in the attributes from the proxy.\n</li></ol>\n\n<p>See the <a class=\"external\" href=\"https://docs.google.com/document/d/1OapGY1kCZPo9Hc17d2RnqfGEieAKfZ3y7NqcoUuf_HU/edit?usp=sharing\">design document</a>.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Jan-20 15:55:31 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>:  I'm confused about the three lines starting at <code>qmgmt.cpp:3248</code>\n\n<p>It instantiates <code>proc_ad</code> and then populates it with <code>AddAttrsFromTransaction()</code> but then <code>proc_ad</code> is ignored for the rest of the function.  Was <code>proc_ad</code> supposed to be instantiated as a copy of <code>policy_ad</code>?  Or should should the loop on line 3252 be iterating <code>proc_ad</code> instead of <code>policy_ad</code>?\n\n</p><p>Also, it seems that <code>ATTR_X509_USER_PROXY_EXPIRATION</code> isn't set in <code>condor_auth_x509.cpp</code> nor in <code>condor_secman.cpp</code>, although it is mentioned in <code>schedd.cpp</code>.  Was this intentional or just oversight?\n\n</p><p></p><hr/>\n<em>2016-Jan-26 14:25:55 by zmiller:</em> <br/>\n\nI'm reworking this patch to clean it up and get it merged.  One question:\n\n<p>If GSI is used for submission, AND x509userproxy is set in the job ad, which set of x509 attributes should prevail?  My assumption is the attributes from the proxy file specified in the job ad.\n\n</p><p>In fact, I'm a bit dubious about pulling them from the GSI auth at all, actually.  Do you really want those attributes in the job ad if there is <strong>NO</strong> actual proxy associated with the job?  For what purpose?\n\n</p><p>If you could chime on how you envision this being used, that would help.\n\n</p><p></p><hr/>\n<em>2016-Jan-27 20:40:37 by bbockelm:</em> <br/>\n\nHi Zach,\n\n<p>In the case of both being available, I'd like the proxy file to take precedence (this should also be the easier case: proxy is uploaded after the job is submitted).\n\n</p><p>Why should a proxy be required for x509 attributes?  In the case of remote submission via GSI, I see no reason why we should require a proxy (maybe the job has an alternate method for authentication at runtime?).\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2016-Apr-21 15:24:46 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>I ran into several problems with this feature:\n\n</p><p></p><ul>\n<li>The X509 attributes need to be updated when a proxy file is received, in Scheduler::updateGSICred() and Scheduler::generalJobFilesWorkerThread(). Maybe combine with the existing AuditLogJobProxy().\n<ul>\n<li>It appears AuditLogJobProxy() assumes the spool files will be owned by condor. Need to fix that.\n</li></ul>\n</li><li>In SetAttribute(), the schedd reads the proxy as user condor, which is almost guaranteed to be wrong.\n<ul>\n<li>To do this correctly, we need the job owner, which may not be set yet when a job is being submitted.\n</li></ul>\n</li><li>In SetAttribute(), the schedd may need to consult the Iwd, in case the proxy path is relative. Iwd may not be set yet if the job is being submitted.\n</li><li>In SetAttribute(), we need to enforce that the proxy filename attribute is a string literal. Otherwise, the user can change the proxy filename without the schedd noticing.\n</li></ul>\n\n<p></p><hr/>\n<em>2016-Apr-21 15:32:18 by bbockelm:</em> <br/>\n\nRather than trying to put this in <code>SetAttribute</code>, wouldn't it make more sense to do this as a pre-commit hook?\n\n<p></p><hr/>\n<em>2016-Apr-21 15:36:32 by jfrey:</em> <br/>\n\nYes, I was thinking the same thing. Another problem with having the check in SetAttribute(): User submits a cluster of jobs with x509userproxy=\"job.proxy\" for all jobs and Iwd set differently for each job. Each job will use a different job.proxy, but the X.509 attributes will be those of the first job for all of them.\n\n<p></p><hr/>\n<em>2016-Apr-22 14:44:53 by zmiller:</em> <br/>\n\nHey all -- having spoke with Jaime and Brian, here's the plan for 8.5.4:\n\n<p></p><ol>\n<li>Go back to having submit (c-grahp, jobrouter) put the x509/voms attributes in.  This means they will not be \"secure attributes\".\n\n<p></p></li><li>Keep the code that examines the sock used for submit and if GSI was used, place those attributes into the job ad (overwriting any user-supplied values)\n\n<p></p></li><li>Comment out (for 8.5.4) all code in the Schedd that tries to extract attributes from the proxy file since it won't work in its current state and the semantics are not at all obvious.\n</li></ol>\n\n<p>Then, for 8.5.5:\n\n</p><p></p><ol>\n<li>Have the schedd, as a pre-commit hook, put the x509 attributes into the job ad(s).  This is done ONLY ONCE and further updates to either the proxy location or the file itself are NOT reflected in the attributes.  This is less than ideal but at least it is well-understood and consistent:  These were the values when the job was submitted.\n\n<p></p></li><li>Have submit (c-gahp, jobrouter) stop putting the attributes in.\n\n<p></p></li><li>Change them back to \"secure\" attributes.\n</li></ol>\n\n<p>Then, the future:\n\n</p><p></p><ol>\n<li>Decide if we want to have the attributes updated \"in real time\" to reflect changes to either the location or the proxy itself.  This requires the SchedD periodically checking the file for updates, etc.\n</li></ol>\n\n<p></p><hr/>\n<em>2016-Apr-26 20:48:13 by tim:</em> <br/>\n\nThe revert in the commit log below only refers to the V8_5_4_1-branch. This change still exists in master for the 8.5.5 release.\n\n<p></p><hr/>\n<em>2016-Aug-31 08:55:00 by bbockelm:</em> <br/>\n\nNote that CMS has also hit this issue - can we revive it?\n\n<p></p><hr/>\n<em>2016-Sep-27 10:29:05 by jfrey:</em> <br/>\n\nLatest work for this ticket is on branch V8_5-gt5064-x509_attrs.\n\n<p></p><hr/>\n<em>2016-Nov-28 13:47:13 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Looks good.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5510\" onclick=\"get_ticket_and_populate_wrapper('5510'); return false;\" title='Schedd needs an \"internal\" SetAttribute() for SECURE attributes'>#5510</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSchedd needs an \"internal\" SetAttribute() for SECURE attributes</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5573\" onclick=\"get_ticket_and_populate_wrapper('5573'); return false;\" title=\"support &quot;secure attributes&quot; which can't be modified over Q_SOCK\">#5573</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nsupport \"secure attributes\" which can't be modified over Q_SOCK</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5579\" onclick=\"get_ticket_and_populate_wrapper('5579'); return false;\" title=\"have submit stop sending x509 attrs to schedds that set it themselves\">#5579</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nhave submit stop sending x509 attrs to schedds that set it themselves</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6188\" onclick=\"get_ticket_and_populate_wrapper('6188'); return false;\" title=\"Allow SUBMIT_REQUIREMENT to reference X509 secure attributes\">#6188</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAllow SUBMIT_REQUIREMENT to reference X509 secure attributes</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6240\" onclick=\"get_ticket_and_populate_wrapper('6240'); return false;\" title=\"Setting x509 attributes on file transfer corrupts job queue log\">#6240</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSetting x509 attributes on file transfer corrupts job queue log</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6283\" onclick=\"get_ticket_and_populate_wrapper('6283'); return false;\" title=\"condor_submit should still check proxy expiration\">#6283</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_submit should still check proxy expiration</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6342\" onclick=\"get_ticket_and_populate_wrapper('6342'); return false;\" title=\"Memory leak during clean-up of an authenticated socket\">#6342</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMemory leak during clean-up of an authenticated socket</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-08 07:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/98345e5e3af6ab5d8613988161300799abf8dd16\">[49755]</a></span>: Add version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-28 10:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e93a1ad866842ebbfcebcf1b0d09c850d2c6a49c\">[49323]</a></span>: Fix build warning for ReadProxyFileIntoAd() on Fedora. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-27 14:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1f27d8e449505aface26c55c771235a41f11ab2f\">[49316]</a></span>: Make proxy file info extraction conditional on Globus external. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-26 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7145f783cabbd984ffdc176ce38363b72f46c11a\">[49309]</a></span>: Make proxy expiration a non-secure attribute. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> The shadow needs to update the proxy expiration time in the job ad during job execution, so make it a non-secure attribute. Also, have the shadow stop updating the other x509 attributes, which shouldn't change after job submission and need to remain\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-26 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fb90110d9257e0bc29db85babacae9a700e54396\">[49308]</a></span>: Set x509 attrs from proxy file at commit time, not in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SetAttribute\" title=\"Set Attribute\">SetAttribute</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> Examine the proxy given by attribute x509userproxy only when the job is submitted (at commit time), not every time the attribute is set. At commit time, if x509 attributes are available from both the client connection and the job's\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-22 16:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3234faaf5c7af070e31d17bf9763b2fa121bff7c\">[49306]</a></span>: Minor changes to schedd setting of X509 job attributes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5510\" onclick=\"get_ticket_and_populate_wrapper('5510'); return false;\" title='Schedd needs an \"internal\" SetAttribute() for SECURE attributes'>#5510</a></span> * Remove \"Raw\" from SetAttributeString() functions. * Optimize early returns in AddSessionAttributes(). * Always set X509 attributes when a proxy is present, preventing bleed-through of old values if new proxy doesn't have voms attributes.\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-22 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/784c674a3fa008d7adf0a7ac4ecb671fee125e11\">[49300]</a></span>: Revert \"Revert \"Have schedd maintain x.509 attributes in the job ad. (Squash-merge into master of branch V8_3-gt5064.) <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>\"\" This reverts commit bfcd0862e00c5b44da2fc50472d6364f604143e6. Conflicts: src/condor_includes/condor_secman.h src/condor_io/condor_secman.cpp src/condor_schedd.V6/qmgmt.cpp  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-22 14:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d29605d60318098144fcedbe5dba4b3b0b0d80ed\">[49299]</a></span>: Revert \"Revert \"now that all the pieces are finally in place, make x509 attrs secure. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>\"\" This reverts commit f7a1e9a2fe6b41e150498e42de4ed6a020ce1c6c.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-03 02:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f7a1e9a2fe6b41e150498e42de4ed6a020ce1c6c\">[48348]</a></span>: Revert \"now that all the pieces are finally in place, make x509 attrs secure. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>\" This reverts commit fd88b902455998c5bca16ee0c284d981ce9cab96.  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-03 01:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bfcd0862e00c5b44da2fc50472d6364f604143e6\">[48347]</a></span>: Revert \"Have schedd maintain x.509 attributes in the job ad. (Squash-merge into master of branch V8_3-gt5064.) <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>\" This reverts commit e10c84126d428e1505e94810e4221e9388280986.  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-26 13:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/42ce000b8ace51fe18bbb34d9f75cdfa2d8d1383\">[48289]</a></span>: Revert \"Have schedd maintain x.509 attributes in the job ad. (Squash-merge into master of branch V8_3-gt5064.) <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>\" This reverts commit e10c84126d428e1505e94810e4221e9388280986.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-23 17:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fd88b902455998c5bca16ee0c284d981ce9cab96\">[48098]</a></span>: now that all the pieces are finally in place, make x509 attrs secure. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5510\" onclick=\"get_ticket_and_populate_wrapper('5510'); return false;\" title='Schedd needs an \"internal\" SetAttribute() for SECURE attributes'>#5510</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-09 10:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e10c84126d428e1505e94810e4221e9388280986\">[47685]</a></span>: Have schedd maintain x.509 attributes in the job ad. (Squash-merge into master of branch V8_3-gt5064.) <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Feb-17 16:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eb4e5fee74807d8e56b6be91679dfebd2459983b\">[47617]</a></span>: Extract x509 attributes whenever the x509userproxy is set (during submission or qedit). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> Make them have precedence over attributes coming from the socket authentication.  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jan-26 19:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/54f29763365d29f79d6607b17e98904151edf78c\">[47496]</a></span>: Changes on branch V8_3-gt5064 to address code review. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-26 10:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4c035c3ce84ae013eafffe3fe4dac8601660d4c0\">[44885]</a></span>: Have schedd automatically manage X509/VOMS attributes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5064\" onclick=\"get_ticket_and_populate_wrapper('5064'); return false;\" title=\"Set x509 job attributes from authenticated socket\">#5064</a></span> This commit has the schedd track X509/VOMS attributes for a given session and automatically inserts them into ads when they are committed for the first time.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Dec-08 07:22", "status": "resolved", "created": "2015-May-26 08:00", "fixed_version": "2015-May-26 08:00", "broken_version": "", "priority": "2", "subsystem": "DaemonsSubmitNode", "assigned_to": "zmiller", "derived_from": "#4882", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "zmiller@cs.wisc.edu, bbockelm@cse.unl.edu, tannenba@cs.wisc.edu", "due_date": ""}