{"id": 5697, "title": "Ticket #5697: IPv6 addresses in config file unfortunately inconsistent.", "description": "<blockquote>\nSetting <code>COLLECTOR_HOST</code> to <code>::1</code> causes problems.  To quote the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MasterLog\" title=\"Master Log\">MasterLog</a></span>:\n\n<p></p><div class=\"verbatim\">\n<pre>05/24/16 13:24:49 Warning: Configuration file sets 'COLLECTOR_HOST=::1'.  This does not look like a valid host name with optional port.\n05/24/16 13:24:49 Invalid address: ::1\n</pre></div>\n\n\n<p>This, of course, is a blatant lie.  Further, running <code>condor_status</code>:\n\n</p><p></p><div class=\"verbatim\">\n<pre>Error: communication error\nCONDOR_STATUS:1:Unable to resolve COLLECTOR_HOST (::1).\n</pre></div>\n\n\n<p>Setting <code>COLLECTOR_HOST</code> to <code>[::1]</code> works fine.\n\n</p><p>Setting <code>CONDOR_HOST</code> to <code>[::1]</code> throws a warning in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MasterLog\" title=\"Master Log\">MasterLog</a></span>:\n\n</p><p></p><div class=\"verbatim\">\n<pre>05/26/16 16:07:20 WARNING: Not attempting to resolve '[::1]' from the security list: it looks like a Sinful string.\n</pre></div>\n\n\n<p>But setting <code>CONDOR_HOST</code> to <code>::1</code> works just fine.\n\n</p><p>I've verified that this confusion is not specific to ::1.\n\n</p><p>See also <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=2785\" onclick=\"get_ticket_and_populate_wrapper('2785'); return false;\" title=\"Allow square brackets in IPv6 address in NETWORK_INTERFACE\">#2785</a></span> and <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4655\" onclick=\"get_ticket_and_populate_wrapper('4655'); return false;\" title=\"$(IP_ADDRESS) should [bracket] IPv6 addresses\">#4655</a></span>, although failing to resolve an unbracketed IPv6 address (or recognize a bracketed one in the security configuration) is a little upsetting.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-May-26 16:43:47 by tlmiller:</em> <br/>\n\n<div class=\"verbatim\">\n<pre>$ condor_status -pool fe80::21b:63ff:fe97:976\n\nError: COLLECTOR address or hostname not specified in config file\n\nExtra Info: You specified a hostname for a pool (the -pool argument). That\nshould be the Internet host name for the central manager of the pool, but it\ndoes not seem to be a valid hostname. (The DNS lookup failed.)\n</pre></div>\n\n\n<p>vs\n\n</p><p></p><div class=\"verbatim\">\n<pre>$ condor_status -pool ip6-localhost\nError: communication error\nCEDAR:6001:Failed to connect to &lt;[::1]:9618&gt;\nError: Couldn't contact the condor_collector on ip6-localhost (&lt;[::1]:9618&gt;).\n\nExtra Info: the condor_collector is a process that runs on the central\nmanager of your Condor pool and collects the status of all the machines and\njobs in the Condor pool. The condor_collector might not be running, it might\nbe refusing to communicate with you, there might be a network problem, or\nthere may be some other problem. Check with your system administrator to fix\nthis problem.\n\nIf you are the system administrator, check that the condor_collector is\nrunning on ip6-localhost (&lt;[::1]:9618&gt;), check the ALLOW/DENY configuration\nin your condor_config, and check the MasterLog and CollectorLog files in your\nlog directory for possible clues as to why the condor_collector is not\nresponding. Also see the Troubleshooting section of the manual.\n</pre></div>\n\n\n<p>vs\n\n</p><p></p><div class=\"verbatim\">\n<pre>$ condor_status -pool '[::1]'\nError: communication error\nCEDAR:6001:Failed to connect to &lt;[::1]:9618&gt;\nError: Couldn't contact the condor_collector on &lt;unknown_host&gt;\n(&lt;[::1]:9618&gt;).\n\nExtra Info: the condor_collector is a process that runs on the central\nmanager of your Condor pool and collects the status of all the machines and\njobs in the Condor pool. The condor_collector might not be running, it might\nbe refusing to communicate with you, there might be a network problem, or\nthere may be some other problem. Check with your system administrator to fix\nthis problem.\n\nIf you are the system administrator, check that the condor_collector is\nrunning on &lt;unknown_host&gt; (&lt;[::1]:9618&gt;), check the ALLOW/DENY configuration\nin your condor_config, and check the MasterLog and CollectorLog files in your\nlog directory for possible clues as to why the condor_collector is not\nresponding. Also see the Troubleshooting section of the manual.\n</pre></div>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-17 15:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e7c84190592442675e4a985ff24e0879db7c353e\">[53155]</a></span>: Docs for more flexible IPv6 address use in config file. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5697\" onclick=\"get_ticket_and_populate_wrapper('5697'); return false;\" title=\"IPv6 addresses in config file unfortunately inconsistent.\">#5697</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-19 11:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bce0c4e1766cbe7ddd6f493cee9b6b166262549f\">[53053]</a></span>: Accept bare unbracketed IPv6 addresses in Sinful. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5697\" onclick=\"get_ticket_and_populate_wrapper('5697'); return false;\" title=\"IPv6 addresses in config file unfortunately inconsistent.\">#5697</a></span> The main user-visible effect is that an unbracketed IPv6 address can be used with COLLECTOR_HOST and -pool. If a port number needs to be specified, then the brackets must be used.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-19 11:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/084707fc8905ddb7a29d54c8ab9e910af7c03dd8\">[53052]</a></span>: Improve handling of IPv6 addresses in ALLOW_* config params. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5697\" onclick=\"get_ticket_and_populate_wrapper('5697'); return false;\" title=\"IPv6 addresses in config file unfortunately inconsistent.\">#5697</a></span> Accept IPv6 addresses both with and without square brackets (but not when using an asterix wildcard). Reject mixing an IPv6 address with an IPv4-style net mask (e.g. fe80::/255.255.0.0).  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Jan-17 15:59", "status": "resolved", "created": "2016-May-26 16:21", "fixed_version": "2016-May-26 16:21", "broken_version": "v080505", "priority": "4", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}