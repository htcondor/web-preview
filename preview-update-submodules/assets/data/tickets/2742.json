{"id": 2742, "title": "Ticket #2742: Add support for EC2 Instance Resource Tagging", "description": "<blockquote>\nAWS EC2 provides the ability to tag resources, including instances.\n\n<p><a class=\"external\" href=\"http://aws.typepad.com/aws/2010/09/new-amazon-ec2-feature-resource-tagging.html\">http://aws.typepad.com/aws/2010/09/new-amazon-ec2-feature-resource-tagging.html</a>\n\n</p><p>Condor should expose this ability.\n\n</p><p></p><ul>\n<li>ec2_tag_&lt;name&gt; commands in condor_submit. Optional. Allows ec2_tag_foo=bar to assign tag foo the value bar.\n</li><li>ec2_tag_names command in condor_submit. Optional. Allows ec2_tag_names=fOo to specify case of tag name, above fOo=bar. Tag names are case sensitive, attribute names are not.\n</li><li>Default tag named \"Name\" to Cmd's value (the execute condor_submit command), for integration with AWS Console.\n</li></ul>\n\n<p>Note: Tags are garbage collected by AWS when they are no longer referenced. Thus no cleanup step in the gridmanager or gahp.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jan-04 15:02:07 by matt:</em> <br/>\n\nCommits are in branch master-ec2-idempotent-runinstances-and-tagging\n\n<p></p><hr/>\n<em>2012-Jan-17 13:15:21 by tstclair:</em> <br/>\n\nSmall code modifications have been made but mostly benign.  The only minor thing I noticed was that condor does not detect changes in tags if they are done outside of creation.  I don't really even consider it an issue, given the typical use cases.\n\n<p></p><hr/>\n<em>2012-Jan-17 13:31:03 by matt:</em> <br/>\n\nSyncing EC2 -&gt; Job for tags, security groups &amp; start time is desirable, but not something I was considering in this ticket.\n\n<p></p><hr/>\n<em>2012-Jan-17 13:47:55 by tstclair:</em> <br/>\n\nmarked as pending waiting to chat with ToddT about ssh key issue.\n\n<p></p><hr/>\n<em>2012-Feb-08 14:45:36 by tstclair:</em> <br/>\n\nwaiting for master to become V7.9 for merging. Modifications to add back keypair generation are done.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-08 14:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a9a387a75f697b1409ed5caaa53e856f255ce593\">[30522]</a></span>: Add back support for keypair generation, but keep the state machine ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2600\" onclick=\"get_ticket_and_populate_wrapper('2600'); return false;\" title=\"Use idempotent EC2 RunInstances\">#2600</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-17 13:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e436e762cf2f0ce339db7f5d4298c3c6a3890aec\">[29131]</a></span>: Minor updates from review ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2600\" onclick=\"get_ticket_and_populate_wrapper('2600'); return false;\" title=\"Use idempotent EC2 RunInstances\">#2600</a></span> ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6b27dc309c22cb7c49038fe80660bfdc8b3a3f3a\">[28979]</a></span>: Documentation for EC2KeyPair and ec2_tag_names, ec2_tag_&lt;name&gt;, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2600\" onclick=\"get_ticket_and_populate_wrapper('2600'); return false;\" title=\"Use idempotent EC2 RunInstances\">#2600</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ee050b056320fe4e31cee4436c28aaee126efa4\">[28978]</a></span>: Added explicit support for tags in condor_submit, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/333b9ae127870f15dbd7dc018d4777a2dcc32b19\">[28977]</a></span>: Changed EC2 tag prefix to EC2Tag, even though there could be a collision with EC2TagNames, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c6d91d5e15d23eb2713e56ba0d5ec443a7cbb9b\">[28976]</a></span>: In condor_submit, set EC2 tag Name to value of executable, compatibility with AWS Console, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/af111765fbcb1865e05a8139d0fd312b2b3cb3a9\">[28975]</a></span>: Call <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreateTags\" title=\"Create Tags\">CreateTags</a></span> from EC2Job's PROBE_INFO, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5f7ead68f59e4d8fee1e172d782259daafd90e30\">[28974]</a></span>: Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreateTags\" title=\"Create Tags\">CreateTags</a></span> call to gahp-client, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d255f4dee49f0b7f9f7d9888314c2b095bb6b798\">[28973]</a></span>: Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreateTags\" title=\"Create Tags\">CreateTags</a></span> call to ec2_gahp, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2742\" onclick=\"get_ticket_and_populate_wrapper('2742'); return false;\" title=\"Add support for EC2 Instance Resource Tagging\">#2742</a></span>  (By Matthew Farrellee )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Feb-14 12:30", "status": "resolved", "created": "2012-Jan-04 14:55", "fixed_version": "2012-Jan-04 14:55", "broken_version": "v070701", "priority": "4", "subsystem": "", "assigned_to": "tstclair", "derived_from": "#2150", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}