{"id": 4647, "title": "Ticket #4647: Unify sinful regexes in test suite", "description": "<blockquote>\nSeveral parts of the test suite have their own regexes for examining sinful strings.  This should be unified so that 1. it's easy to add support for new protocols and 2. it's easy to make the test more accurate (the current test is rough).\n\n<p>This should be after <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> is merged in, as it contains the IPv6 regexes!\n\n</p><p>Known locations as of October 10, 2014:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">/src/condor_tests/job_schedd_restart-holdjobs-ok.run\n123:            if($after =~ /^(-- Submitter.*&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:)(\\d+)(&gt; : .*)$/) {\n125:                if($before =~ /^(-- Submitter.*&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:)(\\d+)(&gt; : .*)$/) {\n\n/src/condor_tests/cmd_q_shows-better-analyze.run\n64:             if( $line =~ /^&lt;\\[[:0-9A-Za-z]+]:\\d+.*$/ || $line =~ /^&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:\\d+.*$/ ) {\n74:             if( $line =~ /^&lt;\\[[:0-9A-Za-z]+]:\\d+.*$/ || $line =~ /^&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:\\d+.*$/ ) {\n\n/src/condor_tests/job_schedd_restart-runningjobs-ok.run\n144:            if($after =~ /^(-- Submitter.*&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:)(\\d+)(&gt; : .*)$/) {\n146:                if($before =~ /^(-- Submitter.*&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:)(\\d+)(&gt; : .*)$/) {\n\n/src/condor_scripts/CondorTest.pm\n2712:                   $line =~ /^&lt;\\d+\\.\\d+\\.\\d+\\.\\d+:\\d+.*$/ ) {\n</pre></div>\n\n\n<p>Two of these use cases are extracting fields (the IP address and port).  Either we can have one function that returns these and as a side effect tests if it's valid, or perhaps two.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2014-Oct-10 16:45", "status": "new", "created": "2014-Oct-10 16:44", "fixed_version": "2014-Oct-10 16:44", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}