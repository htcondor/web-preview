{"id": 138, "title": "Ticket #138: Reorganize /src/condor_tests", "description": "<blockquote>\n/src/condor_tests is a mess.\n\n<p>It's almost entirely flat, with a given test having anywhere from 1 to 5+ files.  (foo.run, foo.pl, foo.cmd, foo.dag, foo.in, foo.data, etc). It's a mess to wade through, with 1,010 files at the moment.  After running tests it's an even bigger mess as many test dump their contents in the same directory. The rest use subdirectories, which helps some, but we're still looking at a directory with 2,937 files and subdirectories after a test run (based on x86 RHAP 5 on master branch on 2009-01-28).  As we add tests, it will just get worse.\n\n</p><p>We need to rethink this.  A strawman is proposed below, but it's intended as a starting point to find a good plan, not as a solid proposal:\n\n</p><p>Each test gets it's own subdirectory named after itself.  Enumerating the tests becomes as simple as enumerating the subdirectories minus a few exceptions (anything beginning with a ., potentially \"output\").  (Complication: Many tests share files, for example the entire x_* set of files, though there are others.)\n\n</p><p>Output is placed either within a sub-subdirectory (so, src/condor_tests/lib_eventlog_rotation-no_rotations_1/output) or in a shared directory (src/condor_tests/output/lib_eventlog_rotation-no_rotations_1).  They have different advantages.\n\n</p><p>As much as possible this functionality should either be in the scripts driving the tests, or in CondorTest.pm.  Asking individual tests to sort it out for themselves is a recipe for a mess, and is part of how we ended up here.</p></blockquote>", "remarks": "<blockquote>\nWe got here because Derek designed it this way.\n\n<p></p><hr/>\n<em>2010-Jun-30 15:08:13 by adesmet:</em> <br/>\n\nThis work has been moved into <span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=1124\" onclick=\"get_ticket_and_populate_wrapper('1124'); return false;\" title=\"Make condor_tests better\">#1124</a></span> and particularly <span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=1147\" onclick=\"get_ticket_and_populate_wrapper('1147'); return false;\" title=\"Make tests more self contained / expand CondorTests.pm\">#1147</a></span>. Resolving.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2010-Jun-30 15:08", "status": "resolved", "created": "2009-Jan-28 13:56", "fixed_version": "2009-Jan-28 13:56", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}