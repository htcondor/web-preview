{"id": 2158, "title": "Ticket #2158: batch_test.pl waits 10 seconds if a FQDN can't be found", "description": "<blockquote>\n<a class=\"file\" href=\"rlog?f=src/condor_scripts/batch_test.pl\">/src/condor_scripts/batch_test.pl</a>, around line 119, when starting up waits 10 seconds if `hostname` doesn't return a fully qualified domain name.  There doesn't appear to be a good reason for this.  For BATLab builds, batch_test.pl can be called as many as 250 times for a single platform.  If this code path gets triggered (and it does on some platforms!), this could mean tests were spending about 45 minutes just waiting!\n\n<p>Fix: remove the sleep(10).</p></blockquote>", "remarks": "<blockquote>\n<em>2011-May-12 16:39:08 by adesmet:</em> <br/>\n\n<a class=\"external\" href=\"http://nmi-s006.cs.wisc.edu/results/Run-condor-branch.php?branch=workspace:%20batch_test.pl%20speed%20fix%20test&amp;user=adesmet\">testing</a>\n\n<p></p><hr/>\n<em>2011-May-13 11:33:26 by adesmet:</em> <br/>\n\nFixed.  Shaved about 25 minutes off of a RHEL5 x86-64 build; I would expect similar savings for most platforms.  Lots of tests that were taking 11 or 12 seconds now take 1 or 2.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-May-12 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f26339f59fada9e2f33cc181bb74442290964122\">[21860]</a></span>: The entire hostname checking codepath appears to serve no purpose and has several disadvantages. Removed. - <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2158\" onclick=\"get_ticket_and_populate_wrapper('2158'); return false;\" title=\"batch_test.pl waits 10 seconds if a FQDN can't be found\">#2158</a></span> - Stop uselessly sleep(10)ing - <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span> - Stop writing useless warning to stderr ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2158\" onclick=\"get_ticket_and_populate_wrapper('2158'); return false;\" title=\"batch_test.pl waits 10 seconds if a FQDN can't be found\">#2158</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-May-13 11:33", "status": "resolved", "created": "2011-May-12 16:22", "fixed_version": "2011-May-12 16:22", "broken_version": "v070600", "priority": "1", "subsystem": "Tests", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": "20110517"}