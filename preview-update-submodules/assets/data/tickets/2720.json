{"id": 2720, "title": "Ticket #2720: condor_submit creating files with $$([])", "description": "<blockquote>\ncondor_submit is helpful and checks to see if output, error, log, etc files can be written to by pre-creating them. However, this is the wrong thing to do if a file name is evaluated with $$([]). In the general case, it is impossible to guess the file name. Instead of trying, condor_submit should skip the file and assume it will be ok later.\n\n<p>Example -\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ cat test.sub\ncmd = /bin/echo\nargs = $$([$(Process)+100])\noutput = test.out.$$([$(Process)+100])\nqueue 10\n</pre></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ cat test.out.*\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n</pre></div>\n\n\n<p>However,\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ ls test.out.*\n0 test.out.$$([0+100])  0 test.out.$$([5+100])  4 test.out.100  4 test.out.105\n0 test.out.$$([1+100])  0 test.out.$$([6+100])  4 test.out.101  4 test.out.106\n0 test.out.$$([2+100])  0 test.out.$$([7+100])  4 test.out.102  4 test.out.107\n0 test.out.$$([3+100])  0 test.out.$$([8+100])  4 test.out.103  4 test.out.108\n0 test.out.$$([4+100])  0 test.out.$$([9+100])  4 test.out.104  4 test.out.109\n</pre></div>\n\n\n<p>The expected result does not have the \"test.out.$$([#+100])\" files.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-15 21:30:52 by nwp:</em> <br/>\n\nUser can always supply <code>-disable</code> flag at command line or insert <em>skip_filechecks = True</em> in the submit file.\n<hr/>\n<em>2012-Sep-11 11:06:53 by johnkn:</em> <br/>\n\nBulk change of target version from v070803 to v070804 using ./ticket-target-mover.\n<hr/>\n<em>2012-Sep-19 16:15:53 by zmiller:</em> <br/>\n\nBulk change of target version from v070804 to v070805 using ./ticket-target-mover.\n<hr/>\n<em>2012-Dec-19 09:30:04 by johnkn:</em> <br/>\n\nBulk change of target version from v070807 to v070808 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-28 17:16:00 by johnkn:</em> <br/>\n\nBulk change of target version from v070808 to v070809 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2016-Feb-15 11:13:58 by wenger:</em> <br/>\n\nIncreased the priority of this because of condor-support 8644 from Raytheon.  (Note that the RUST ticket asks for these files to be deleted once they're created, but it more-or-less amounts to the same thing.  And I'm not sure that it does any good to create the files anyhow.)\n\n<p></p><hr/>\n<em>2016-May-27 15:22:19 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> Good change.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-31 11:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b6edfe610eeaba1d4ccaa8ffd7a650a7f3658d21\">[48447]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2720\" onclick=\"get_ticket_and_populate_wrapper('2720'); return false;\" title=\"condor_submit creating files with $$([])\">#2720</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5310\" onclick=\"get_ticket_and_populate_wrapper('5310'); return false;\" title=\"Subsystem-specific config params sometimes ignored\">#5310</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5565\" onclick=\"get_ticket_and_populate_wrapper('5565'); return false;\" title=\"submit or config self reference using $F() expansion results in hang\">#5565</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5656\" onclick=\"get_ticket_and_populate_wrapper('5656'); return false;\" title=\"history_helper doesn't work on Windows\">#5656</a></span>, and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5694\" onclick=\"get_ticket_and_populate_wrapper('5694'); return false;\" title=\"SUBMIT_ATTRS can't set JobLeaseDuration to an expression\">#5694</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-24 08:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/62bfb166139a2a72f9f8272f92f63b567dbfce6c\">[48404]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2720\" onclick=\"get_ticket_and_populate_wrapper('2720'); return false;\" title=\"condor_submit creating files with $$([])\">#2720</a></span>, condor_submit should not create output/error files that are $$ expansions ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-May-31 14:49", "status": "resolved", "created": "2011-Dec-15 20:28", "fixed_version": "2011-Dec-15 20:28", "broken_version": "v070100", "priority": "3", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "matt", "rust": "s8644", "customer_group": "users", "visibility": "public", "notify": "matt@cs.wisc.edu,tstclair@redhat.com, johnkn@cs.wisc.edu, wenger@cs.wisc.edu,Michael.V.Pelletier@raytheon.com", "due_date": ""}