{"id": 5704, "title": "Ticket #5704: Bosco file transfer broken by bad sinful string", "description": "<blockquote>\nFor Bosco, file transfers are done between the gridmanager the ft-gahp, tunneled through an ssh connection. When the gridmanager issues transfer commands to the ft-gahp, it rewrites the initial ip:port in its sinful string to point at the tunnel endpoint. But in 8.5, this part of the sinful is ignored, and the address(es) in the addrs field is used. Thus, the ft-gahp attempts to connect to the wrong address and fails.\n\n<p>The gridmanager needs to do a more intelligent rewrite of its sinful string, including both the initial ip:port and the addrs field.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Jun-03 06:54:03 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> I approve this change.\n\n<p></p><hr/>\n<em>2016-Jun-06 13:03:14 by tim:</em> <br/>\n\nShould backport to 8.4</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5710\" onclick=\"get_ticket_and_populate_wrapper('5710'); return false;\" title=\"Bosco file transfer broken by bad sinful string, part two\">#5710</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBosco file transfer broken by bad sinful string, part two</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-06 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/248b36544d9bbdf691973898bc868cdf8a175aa3\">[48501]</a></span>: Fix rewriting of gridmanager sinful for ft-gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5704\" onclick=\"get_ticket_and_populate_wrapper('5704'); return false;\" title=\"Bosco file transfer broken by bad sinful string\">#5704</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5710\" onclick=\"get_ticket_and_populate_wrapper('5710'); return false;\" title=\"Bosco file transfer broken by bad sinful string, part two\">#5710</a></span> In 8.5, the initial ip:port of a sinful string is ignored; only the addrs field is used for contacting the daemon. So we need to improve how the gridmanager rewrites its sinful string when sending it to the ft-gahp so as to use the ssh tunnel.\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-03 06:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f6b1cbe2f9dcb1e25bbc979db6b3b058f06afcf8\">[48486]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5704\" onclick=\"get_ticket_and_populate_wrapper('5704'); return false;\" title=\"Bosco file transfer broken by bad sinful string\">#5704</a></span>) Add version history item for Bosco file transfer bug fix  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-02 18:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3e356f263ae7402353186763f4b8f783a516f6f4\">[48478]</a></span>: Fix rewriting of gridmanager sinful for ft-gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5704\" onclick=\"get_ticket_and_populate_wrapper('5704'); return false;\" title=\"Bosco file transfer broken by bad sinful string\">#5704</a></span> In 8.5, the initial ip:port of a sinful string is ignored; only the addrs field is used for contacting the daemon. So we need to improve how the gridmanager rewrites its sinful string when sending it to the ft-gahp so as to use the ssh tunnel.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Jun-06 13:03", "status": "resolved", "created": "2016-Jun-02 15:47", "fixed_version": "2016-Jun-02 15:47", "broken_version": "v080500", "priority": "2", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dweitzel@cse.unl.edu", "due_date": ""}