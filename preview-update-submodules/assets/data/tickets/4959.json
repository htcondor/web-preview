{"id": 4959, "title": "Ticket #4959: ClassAds is/isnt operators not strict enough", "description": "<blockquote>\nAccording to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> specification, the meta-comparison operators <code>is</code> and <code>isnt</code> (<span class=\"quote\">=?=</span> and <span class=\"quote\">=!=</span> in old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> syntax) evaluate whether two values are exactly identical. They are stricter than <span class=\"quote\">==</span> and <span class=\"quote\">!=</span> on equality.\n\n<p>We've found two ways in which the implementation isn't strict enough:\n</p><ul>\n<li>There should be no type conversion. So <code>3 is 3.0</code> should evaluate to <code>False</code>. With the current code, it evaluates to <code>True</code>.\n</li><li>Two <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=AbsTime\" title=\"Abs Time\">AbsTime</a></span> values should match only if they represent the same moment in time and have the same timezone offset. In the current code, the timezone offsets are ignored. So the following expression should evaluate to <code>False</code>, but currently evaluates to <code>True</code>:\n<div class=\"code\">\n<pre class=\"code\">abstime(\"2015-03-03 12:13:15+0000\") =?= abstime(\"2015-03-03 13:13:15+0100\")</pre></div>\n</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-05 11:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eee7d72e246f0b3ad1ed9d75d3879f392e9f633f\">[44983]</a></span>: minor edit of 8.3.6 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4959\" onclick=\"get_ticket_and_populate_wrapper('4959'); return false;\" title=\"ClassAds is/isnt operators not strict enough\">#4959</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-04 14:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/93e61cfc2337de639eae63fcecadf79f373caaee\">[44970]</a></span>: Docs for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> meta-operator fixes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4959\" onclick=\"get_ticket_and_populate_wrapper('4959'); return false;\" title=\"ClassAds is/isnt operators not strict enough\">#4959</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-25 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e83e1b9f3ac33653eed02e763240b109c3189c15\">[43728]</a></span>: Make <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> meta operators stricter with times and numbers. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4959\" onclick=\"get_ticket_and_populate_wrapper('4959'); return false;\" title=\"ClassAds is/isnt operators not strict enough\">#4959</a></span> The meta operators 'is' and 'isnt' weren't strict enough in the following cases: * Different numeric types are never equal, so no type promotion should be performed. For example, 3 and 3.0 aren't equal. * Two absTime() value are different\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jun-04 14:53", "status": "resolved", "created": "2015-Mar-24 16:14", "fixed_version": "2015-Mar-24 16:14", "broken_version": "v080000", "priority": "4", "subsystem": "ClassAd", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}