{"id": 2344, "title": "Ticket #2344: Make NMI glue download and build cmake before building Condor", "description": "<blockquote>\nThe NMI build scripts which build Condor must download and build cmake 2.8.3\nand put it in the path of the about to be run build or test. This is because there really aren't prereqs anymore in the new batlab, so we need to bring these ourselves. The cmake tarball will be stored on parrot with the other externals. However cmake is itself not an external in terms of the condor build.</blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-08 11:33:06 by psilord:</em> <br/>\n\nStalled while I finish <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2337\" onclick=\"get_ticket_and_populate_wrapper('2337'); return false;\" title=\"Implement 64-bit support for file i/o in stduniv\">#2337</a></span>.\n\n<p></p><hr/>\n<em>2011-Aug-16 16:43:51 by psilord:</em> <br/>\n\nI wrote the perl script which returns either a path to a cmake which is of the right version, or downloads it from parrot and installs it into a local directory and returns that path instead. I need to polish it slightly for the varied machines upon which it'll be running, but that shouldn't take long.\n\n<p></p><hr/>\n<em>2011-Aug-16 16:47:43 by psilord:</em> <br/>\n\nMeh, it'll take a bit longer, I just found I forgot to implement something in it.\n\n<p></p><hr/>\n<em>2011-Aug-18 15:40:29 by psilord:</em> <br/>\n\nOk, I finished all the implementation, now I'm testing it.\n\n<p>In testing it, I found a race condition in that the nmi_tools.src module from git was being pulled in and stomping over the nmi_tools in the workspace. Since the nmi_tools directory exists everywhere, it doesn't need to be checked out anymore. I'm removing that feature from condor_nmi_submit in a different checking.\n\n</p><p></p><hr/>\n<em>2011-Aug-19 10:28:23 by psilord:</em> <br/>\n\nOk, it now passes it boundary condition tests. Time for checkin.\n\n<p></p><hr/>\n<em>2011-Aug-19 11:21:18 by psilord:</em> <br/>\n\nChecked into V7_6-branch and merged into master.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Aug-19 11:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/95377c9542e4ce6baf3fc84f0167c16465567427\">[26882]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2344\" onclick=\"get_ticket_and_populate_wrapper('2344'); return false;\" title=\"Make NMI glue download and build cmake before building Condor\">#2344</a></span> ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2344\" onclick=\"get_ticket_and_populate_wrapper('2344'); return false;\" title=\"Make NMI glue download and build cmake before building Condor\">#2344</a></span> Created a script, called 'install_cmake' which will either return, as the last line, a path (found through search) to a cmake which is 2.8.3 or newer. The script may also download, compile, and install cmake 2.8.3 from parrot.cs.wisc.edu (or wherever the externals\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Aug-19 11:21", "status": "resolved", "created": "2011-Aug-01 16:24", "fixed_version": "2011-Aug-01 16:24", "broken_version": "v070700", "priority": "2", "subsystem": "Packaging", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "psilord@cs.wisc.edu", "due_date": "20110819"}