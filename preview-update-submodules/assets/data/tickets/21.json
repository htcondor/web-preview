{"id": 21, "title": "Ticket #21: stduniv pgf90 stat() problem causes errant truncation of file", "description": "<blockquote>\nI have not yet tried to reproduce this in Condor, but here is the problem\ndescription and an example program which supposedly does it.\n\n<p>From the user in question:\n\n</p><p>\"I attach a program that will exhibit the behaviour when used with\ncondor_compiler pgf90.  If you create an input file sun.theinput with a\nset of numbers to sum, then when run with normal compilation it will\nhappily read the input file, but when run in the condor-linked version\nwill open the output file and truncate it.  It seems that the fortran\nwill stat a file before opening it and then open it based on that.  It\nseems that the stat doesn't find the file, so fortran thinks it doesn't\nexist so opens it as a new file, but the open truncates the file.  If\nyou specify status='old' then it will complain and stop because it can't\nsee the file.\"\n\n</p><p>He tried pgf90 versions 6.1.0 and 7.1, both exhibited the problem.\n\n</p><p>And here is the fortran program:\n\n</p><p></p><pre>       program summation\n       implicit none\n       integer :: sum, a\n</pre>\n\n<p></p><pre>       print*, \"This program performs summations. Enter 0 to stop.\"\n       open(unit=10, file=\"SumData.DAT\")\n       open(unit=11, file=\"sum.theinput\")\n       sum = 0\n</pre>\n\n<p></p><pre>       do\n        print*, \"Add:\"\n        read(11, *), a\n        if (a == 0) then\n         exit\n        else\n         sum = sum + a\n        end if\n        write(10,*) a\n       end do\n</pre>\n\n<p></p><pre>       print*, \"Summation =\", sum\n       write(10,*) \"Summation =\", sum\n       close(10)\n       close(11)\n       end</pre>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2011-Mar-30 12:02", "status": "new", "created": "2009-Jan-15 11:27", "fixed_version": "2009-Jan-15 11:27", "broken_version": "v070005", "priority": "3", "subsystem": "Std", "assigned_to": "", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}