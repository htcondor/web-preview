{"id": 2740, "title": "Ticket #2740: OpenSSL deprecated on Mac OS X", "description": "<blockquote>\nIt appears that Apple has deprecated OpenSSL in Mac OS X Lion.  Surprise!\n\n<p></p><ul>\n<li><a class=\"external\" href=\"http://opensource.apple.com/source/CommonCrypto/\">http://opensource.apple.com/source/CommonCrypto/</a> (digest algorithms such as MD5, SHA2, etc... we don't actually use MD5, hopefully?)\n</li><li><a class=\"external\" href=\"http://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/Introduction/Introduction.html\">http://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecTransformPG/Introduction/Introduction.html</a> (this implements SSL on OS X.  Possibly need to login with a Apple Dev account to read this.)</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Jan-04 06:48:04 by roy:</em> <br/>\n\nThere are some good comments from Apple in a WWDC 2011 presentation I just found. You have to login to their developer site to find it (instructions are at &lt;http://stackoverflow.com/questions/7406946/why-is-apple-depricating-openssl-in-macos-10-7-lion&gt;) or I can share the PDF with you.\n\n<p>An interesting subset from the presentation:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">We Are Deprecating OpenSSL Dylibs\nWhy?\n\u2022Not designed for upward compatible binary release\n\u2022 Lack of stable ABI means a dylib per OpenSSL release\n\u2022We need a FIPS 140 platform\n\nRemaining with OpenSSL\nWhy?\n\u2022 You are doing a Unix application\n\u2022 You use something that uses OpenSSL\n\u2022 It is the devil you know\n\nRemaining with OpenSSL\nWhat to do\n\u2022Get OpenSSL from MacPorts.org\n\u25a0 Most recent version, 1.0.0d is there\n\u25a0 Statically link the libraries\n\u25a0 Include anything else in your bundle\n\u2022 This is what the OpenSSL team recommends\n\u25a0 Static linking is the binary model\n\u25a0 It prevents dylib version skew\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Jan-10 11:19:02 by jfrey:</em> <br/>\n\nSome of the functionality we use in OpenSSL is available is available in the Mac-specific <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CommonCrypto\" title=\"Common Crypto\">CommonCrypto</a></span> library. Where it exists, we could switch over with minimal code changes. For some OpenSSL calls, I haven't found equivalents in other system libraries.\n\n<p></p><ul>\n<li><code>condor_utils/condor_base64.cpp</code>\n<ul>\n<li>base64 encode/decode\n</li><li>No replacement known, but easy to write\n</li></ul>\n</li><li><code>condor_utils/condor_dh.cpp</code>\n<ul>\n<li>diffie-hellman, hex encode/decode\n</li><li>diffie-hellman probably available in Security framework\n</li></ul>\n</li><li><code>condor_utils/condor_md.cpp</code>\n<ul>\n<li>md5 checksum\n</li><li>OpenSSL-compatible API available in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CommonCrypto\" title=\"Common Crypto\">CommonCrypto</a></span>\n</li></ul>\n</li><li><code>condor_io/condor_auth_passwd.cpp</code>\n<ul>\n<li>hmac, sha1\n</li><li>equivalent functions available in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CommonCrypto\" title=\"Common Crypto\">CommonCrypto</a></span>, minor changes to use\n</li></ul>\n</li><li><code>condor_io/condor_auth_ssl.cpp</code>\n<ul>\n<li>extensive use of OpenSSL, including network I/O and buffer management\n</li><li>likely significant work to redo without OpenSSL\n</li></ul>\n</li><li><code>condor_io/condor_crypt.cpp</code>\n<ul>\n<li>random number generation\n</li><li><code>condor_util_lib/get_random.c</code> available as backup\n</li></ul>\n</li><li><code>condor_io/condor_crypt_3des.cpp</code>\n<ul>\n<li>3DES encrypt/decrypt\n</li><li>equivalent functions available in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CommonCrypto\" title=\"Common Crypto\">CommonCrypto</a></span>\n</li></ul>\n</li><li><code>condor_io/condor_crypt_blowfish.cpp</code>\n<ul>\n<li>blowfish encrypt/decrypt\n</li><li>replacement probably available in Security framework\n</li><li>multiple implementations available on the web\n</li></ul>\n</li><li><code>condor_had/Utils.cpp</code>\n<ul>\n<li>md5 checksum\n</li><li>should use condor_md.cpp code instead\n</li></ul>\n</li></ul>\n\n<p></p><hr/>\n<em>2012-Jan-10 11:20:28 by jfrey:</em> <br/>\n\nGSI and VOMS also use OpenSSL. We should ping Globus and Jim Basney about what, if anything, they plan to do.\n\n<p></p><hr/>\n<em>2018-Nov-08 15:55:01 by tim:</em> <br/>\n\nFixed by ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6668\" onclick=\"get_ticket_and_populate_wrapper('6668'); return false;\" title=\"Use LibreSSL on Mac OS 10.13 High Sierra\">#6668</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2018-Nov-08 15:55", "status": "abandoned", "created": "2012-Jan-03 20:27", "fixed_version": "2012-Jan-03 20:27", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}