{"id": 1358, "title": "Ticket #1358: Make operations on invalid timers an EXCEPTion", "description": "<blockquote>\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TimerManager\" title=\"Timer Manager\">TimerManager</a></span> currently allows attempts to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CancelTimer\" title=\"Cancel Timer\">CancelTimer</a></span> or <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RemoveTimer\" title=\"Remove Timer\">RemoveTimer</a></span> an invalid timer id.  It will complain \"Timer %d not found\" to the log, but who really notices.  (See <a class=\"file\" href=\"rlog?f=src/condor_daemon_core.V6/timer_manager.cpp\">/src/condor_daemon_core.V6/timer_manager.cpp</a> )\n\n<p>Generally speaking, attempting to manipulate an invalid timer is a symptom of a more serious bug.  It's possible we take advantage of the ability to modify no-longer valid timers, but usually it's suspicious.  That it's just a minor warning makes it easier for bugs to hide.  <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1337\" onclick=\"get_ticket_and_populate_wrapper('1337'); return false;\" title=\"condor_kbdd 100% cpu usage\">#1337</a></span> is a serious bug in the kbdd that was hidden for several months, from 7.4.0 through 7.4.2 by this.\n\n</p><p>Proposed: Modify <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CancelTimer\" title=\"Cancel Timer\">CancelTimer</a></span> or <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RemoveTimer\" title=\"Remove Timer\">RemoveTimer</a></span> to EXCEPT on an invalid timer.  This would have caught <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1337\" onclick=\"get_ticket_and_populate_wrapper('1337'); return false;\" title=\"condor_kbdd 100% cpu usage\">#1337</a></span> almost immediately.  This will likely find other bugs that need to be fixed and it might find some places where we rely on this sketchy behavior, which will need to be changed.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:08:44 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-01 16:08", "status": "new", "created": "2010-Apr-16 10:40", "fixed_version": "2010-Apr-16 10:40", "broken_version": "v070000", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}