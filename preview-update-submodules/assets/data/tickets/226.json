{"id": 226, "title": "Ticket #226: Account charges only for number of cpus", "description": "<blockquote>\nIn 7.2 and 7.3, Condor looks at the Cpus attribute in the machine classad when deciding how much to charge the customer.  It would be useful to have it evaluate an arbitrary expression (ideally floating point, but not critical).\n\n<p>I know that Ian was working on a patch to do this some time in the past, but I haven't heard anything for quite a while. (( Note: this is <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=331\" onclick=\"get_ticket_and_populate_wrapper('331'); return false;\" title=\"Code review patch from Cycle Computing for resource weights.\">#331</a></span>, which is similar to this ticket but currently limited to accounting group quotas -Todd ))\n\n</p><p>If the expression depended on job attributes as well as machine attributes, this would be most flexible.  For example, it would allow a slot to play dual roles as a normal slot or a whole-machine slot, depending on the desires of the job.  However, this would likely complicate the spinning pie algorithm quite a bit and so may not be worth it.\n\n</p><p>I should also point out that the existing implementation that looks at \"Cpus\" does not take this into account during the spinning pie phase.  It only takes it into account when charging the user.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Feb-19 11:30:05 by gthain:</em> <br/>\n\nSeems like getting the spinning pie right is rather tricky in this case.\n\n<p></p><hr/>\n<em>2010-Jul-23 17:03:23 by danb:</em> <br/>\n\nI am resolving this ticket, since <code>SlotWeight</code> has been implemented and serves the purpose of what is proposed here.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2021-Oct-04 17:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/149784f263d10880a7fe0e662265bec4770cde8f\">[64581]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/706ddd65de84435930a39d31c069a1786018d1a3\">[64580]</a></span>, Merge pull request <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=226\" onclick=\"get_ticket_and_populate_wrapper('226'); return false;\" title=\"Account charges only for number of cpus\">#226</a></span> from bbockelm/V9_3-HTCONDOR-763 Use File::Temp to create temporary directories. HTCONDOR-763 Committer: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GitHub\" title=\"Git Hub\">GitHub</a></span>  (By <span class=\"wiki\"><a href=\"wiki?p=GregThain\" title=\"Greg Thain\">GregThain</a></span> )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jul-23 17:03", "status": "abandoned", "created": "2009-Feb-18 15:34", "fixed_version": "2009-Feb-18 15:34", "broken_version": "v070300", "priority": "4", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "dan@hep.wisc.edu,gthain@cs.wisc.edu,matt@cs.wisc.edu", "due_date": ""}