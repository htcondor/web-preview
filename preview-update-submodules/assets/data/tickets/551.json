{"id": 551, "title": "Ticket #551: RFE: for re-check for VM Universe capability after it is disabled", "description": "<blockquote>\nVM Universe capabilities are problematic to keep available in a pool.  There\nare two cases for why this is the case:\n\n<p>1. condor_startd fails to enable the capability on startup.  possibly because a startup order issue.\n\n</p><p>2. condor_startd disables the capability due to VM creation failures via\nVM_RECHECK_INTERVAL.\n\n</p><p>condor_startd must currently be restarted for VM Universe to be re-enabled.  A\nVM Universe recheck interval that called the virtualization subsystem's check\nscript and re-advertised VM Universe capabilities would alleviate this issue.\nThis check interval to be default-disabled such that systems not supporting VM\nUniverse features would only test once.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jun-29 05:50:13 by matt:</em> <br/>\n\nThis has now come up on condor-users:\n\n<p><a class=\"external\" href=\"https://lists.cs.wisc.edu/archive/condor-users/2009-June/msg00113.shtml\">https://lists.cs.wisc.edu/archive/condor-users/2009-June/msg00113.shtml</a>\n\n</p><p></p><hr/>\n<em>2009-Aug-03 16:19:40 by jfrey:</em> <br/>\n\nI've pushed a fix for this problem. One minor annoyance is that the slot ads aren't updated immediately when the VM support transitions from not working to working. The slot ads are updated at the next regular interval.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-03 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/01126ea7689806b604db2fbf7df5a9d6ffe84877\">[24897]</a></span>: Version history entry for gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=551\" onclick=\"get_ticket_and_populate_wrapper('551'); return false;\" title=\"RFE: for re-check for VM Universe capability after it is disabled\">#551</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-03 16:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/76691576580c4f0ea0663d70d9e00d7214c1a887\">[15224]</a></span>: Re-check VM universe capability in startd after it is disabled. gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=551\" onclick=\"get_ticket_and_populate_wrapper('551'); return false;\" title=\"RFE: for re-check for VM Universe capability after it is disabled\">#551</a></span> Now, whenever the startd's check for whether the VM universe works returns failure, the startd will periodically rerun the check until it succeeds or VM_TYPE is not defined in the config file. The latter case is an indication\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-31 16:15", "status": "resolved", "created": "2009-Jun-10 13:25", "fixed_version": "2009-Jun-10 13:25", "broken_version": "v070000", "priority": "3", "subsystem": "VM", "assigned_to": "jfrey", "derived_from": "#523", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "jfrey@cs.wisc.edu", "due_date": ""}