{"id": 2656, "title": "Ticket #2656: Add condor_q -grid", "description": "<blockquote>\nCondor_q -globus provides a customized view of gram jobs and their gram-specific attributes. An equivalent -grid option that works similarly for all grid universe jobs would be very useful.\n\n<p>The job attributes we want to display are ClusterId/ProcId, Owner, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridJobStatus\" title=\"Grid Job Status\">GridJobStatus</a></span>, and GridResource/GridJobId. All of this information can easily overflow 80 columns for some grid job types. The GridResource/GridJobId values can be abbreviated to fit better, but how to do so will vary by grid-type. We could start off with a default of print <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridJobId\" title=\"Grid Job Id\">GridJobId</a></span> if present, else print <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridResource\" title=\"Grid Resource\">GridResource</a></span>, truncating at 79/80 columns. Then we add special cases for the common grid-types that present a condensed version.\n\n</p><p>Here are sample values for some grid-types:\n\n</p><p></p><ul>\n<li>gt5\n<div class=\"code\">\n<pre class=\"code\">GridResource = \"gt5 stress2.chtc.wisc.edu/jobmanager-condor\"\nGridJobId = \"gt5 stress2.chtc.wisc.edu/jobmanager-condor https://stress2.chtc.wisc.edu:40420/16217818952655053191/8230609966348680834/\"\nGridJobStatus = \"ACTIVE\"\nGridJobStatus = \"PENDING\"\n</pre></div>\n\n\n<p></p></li><li>cream\n<div class=\"code\">\n<pre class=\"code\">GridResource = \"cream https://stress3.chtc.wisc.edu:8443/ce-cream/services/CREAM2 condor stress3.chtc.wisc.edu\"\nGridJobId = \"cream https://stress3.chtc.wisc.edu:8443/ce-cream/services/CREAM2 CREAM885512373\"\nGridJobStatus = \"IDLE\"\nGridJobStatus = \"RUNNING\"\nGridJobStatus = \"REALLY-RUNNING\"\nGridJobStatus = \"DONE-OK\"\nGridJobStatus = \"PENDING\"\n</pre></div>\n\n\n<p></p></li><li>nordugrid\n<div class=\"code\">\n<pre class=\"code\">GridResource = \"nordugrid ametisti.grid.helsinki.fi\"\nGridJobId = \"nordugrid ametisti.grid.helsinki.fi 2014713323503731835164308\"\nGridJobStatus = \"PREPARED\"\nGridJobStatus = \"SUBMITTING\"\nGridJobStatus = \"INLRMS: R\"\nGridJobStatus = \"INLRMS: Q\"\nGridJobStatus = \"EXECUTED\"\nGridJobStatus = \"FINISHED\"\n</pre></div>\n\n\n<p></p></li><li>condor\n<div class=\"code\">\n<pre class=\"code\">GridResource = \"condor submit-1.chtc.wisc.edu cm.chtc.wisc.edu\"\nGridJobId = \"condor submit-1.chtc.wisc.edu cm.chtc.wisc.edu 9.0\"\nGridJobStatus = \"IDLE\"\nGridJobStatus = \"RUNNING\"\n</pre></div>\n\n\n<p></p></li><li>pbs\n<div class=\"code\">\n<pre class=\"code\">GridResource = \"pbs e016.chtc.wisc.edu\"\nGridJobId = \"pbs pbs/20120321/36.e016.chtc.wisc.edu\"\nGridJobStatus = \"RUNNING\"\n</pre></div>\n</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Jun-05 17:16:03 by dweitzel:</em> <br/>\n\nFor PBS, can we have a <code><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridJobStatus\" title=\"Grid Job Status\">GridJobStatus</a></span> = \"IDLE\"</code> ?  I only see it when it's \"<code>RUNNING</code>\".\n\n<p></p><hr/>\n<em>2012-Jun-06 15:12:43 by tstclair:</em> <br/>\n\nWhy not do a constraint query, the reason I ask is your question opens another\n\n<p></p><div class=\"code\">\n<pre class=\"code\">question: \"Why not support condor_q -any_universe\"\nanswer: condor_q -constraint.\n</pre></div>\n\n\n<p>P.S. - There is also EC2 and deltacloud if you wish to support -grid\n\n</p><p>But it may be a matter of convenience too.\n\n</p><p></p><hr/>\n<em>2012-Jul-09 15:06:37 by dweitzel:</em> <br/>\n\nI would like PBS to be consistent with the other batch grid interfaces.\n\n<p></p><hr/>\n<em>2012-Dec-18 17:05:05 by tlmiller:</em> <br/>\n\nThere isn't a 'manager' for EC2, and most of the host names will be the same (e.g., ec2.amazonaws.com)  Instead, why don't we display 'ec2 &lt;vm name&gt;' in the 'resource-&gt;manager host' column, where &lt;vm name&gt; is ATTR_EC2_REMOTE_VM_NAME?\n\n<p></p><div class=\"verbatim\">\n<pre>GridResource = \"ec2 https://ec2.amazonaws.com/\"\nGridResource = \"ec2 https://ec2.us-east-1.amazonaws.com\"\nGridResource = \"ec2 https://ec2.ap-southeast-2.amazonaws.com\"\nGridResource = \"ec2 euca3://euca3.bro.example.domain\"\nGridResource = \"ec2 x509://fermilab.custom.hack\"\n</pre></div>\n\n\n<p></p><hr/>\n<em>2013-May-21 17:20:26 by johnkn:</em> <br/>\n\nwhile there is certainly more room for improvement in condor_q -grid output and options, the basic work is complete and no more improvements will happen in the 7.9 series, so I'm resolving this ticket -tj</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Dec-18 17:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/226b60ad9894783a1f260dbc234c0a97582bedd5\">[34431]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2656\" onclick=\"get_ticket_and_populate_wrapper('2656'); return false;\" title=\"Add condor_q -grid\">#2656</a></span>) Make output of -run and -grid less useless for EC2.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-27 11:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/50ccacfea8c068fb33e9417e08494cddc07260e6\">[32486]</a></span>: documented 7.9.0 feature: -autoformat option in condor_q and condor_status ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2941\" onclick=\"get_ticket_and_populate_wrapper('2941'); return false;\" title=\"condor_status should have -autoformat like condor_q does\">#2941</a></span> ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2656\" onclick=\"get_ticket_and_populate_wrapper('2656'); return false;\" title=\"Add condor_q -grid\">#2656</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-04 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d70caad08aa8060315939b00135d530eccca853d\">[31112]</a></span>: add support for condor_q -grid <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2656\" onclick=\"get_ticket_and_populate_wrapper('2656'); return false;\" title=\"Add condor_q -grid\">#2656</a></span>, this involves improvements to class-ad pretty printer so that it both custom and printf formatting can be used on a single column. the pretty printer code keeps track of column widths, and can print headings with width to match the column data. ===VersionHistory:Pending===\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-May-21 17:20", "status": "resolved", "created": "2011-Nov-22 16:46", "fixed_version": "2011-Nov-22 16:46", "broken_version": "v070600", "priority": "3", "subsystem": "Grid", "assigned_to": "johnkn", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dweitzel@cse.unl.edu", "due_date": ""}