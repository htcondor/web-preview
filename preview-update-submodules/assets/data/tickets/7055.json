{"id": 7055, "title": "Ticket #7055: overly large parallel jobs disrupt the SchedD", "description": "<blockquote>\nIf a user \"accidentally\" queues a parallel universe jobs with a large number of machines, the schedd suffers.  We should prevent that from happening.\n\n<p>I propose a knob along the lines of \"PARALLEL_UNIVERSE_MAX_SIZE\" and param-table default it to 1024.  Submit should fail if over the limit, but the admin can adjust it upward if needed.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-May-17 14:35:30 by gthain:</em> <br/>\n\nI've pushed code that just prevents attempting to schedule any parallel job that requests more cpus than exist in the pool.  No new knobs!\n\n<p></p><hr/>\n<em>2019-May-17 14:50:45 by zmiller:</em> <br/>\n\nEven better.  Down with knobs!\n\n<p>Plus then in approximately 12 years when a 2,222,226 node pool is as common as an 8,680 node pool is today, we'll be in good shape! :)\n\n</p><p></p><hr/>\n<em>2019-Jun-19 14:04:53 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Spoke with Greg about a possible off-by-one error when counting p-slots.  Greg will take another look to see if it's a problem.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-19 14:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/167decfb973e9a1f53ce1679b2ade45c734f94fe\">[57184]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7055\" onclick=\"get_ticket_and_populate_wrapper('7055'); return false;\" title=\"overly large parallel jobs disrupt the SchedD\">#7055</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-19 14:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9f91b940b35dc50dc1432159a955b531ebc80850\">[57183]</a></span>: Fixes as per code review <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7055\" onclick=\"get_ticket_and_populate_wrapper('7055'); return false;\" title=\"overly large parallel jobs disrupt the SchedD\">#7055</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-17 14:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f4e340fdd9c46fb4c20ef805c3329dd427625d82\">[56906]</a></span>: Don't even try to schedule parallel jobs requesting &gt; cpus than the pool <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7055\" onclick=\"get_ticket_and_populate_wrapper('7055'); return false;\" title=\"overly large parallel jobs disrupt the SchedD\">#7055</a></span> This prevents DOS'ing the schedd by requesting arbitrarily larged sized parallel jobs.  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Jun-19 14:49", "status": "resolved", "created": "2019-May-16 15:32", "fixed_version": "2019-May-16 15:32", "broken_version": "v080800", "priority": "2", "subsystem": "Parallel", "assigned_to": "gthain", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "users", "visibility": "public", "notify": "zmiller@cs.wisc.edu", "due_date": ""}