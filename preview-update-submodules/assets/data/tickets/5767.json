{"id": 5767, "title": "Ticket #5767: Automatically detect DaemonCore daemons.", "description": "<blockquote>\nWhen we check DC_DAEMON_LIST for completeness, but before we begin spawning daemons (and after we've finished reading configuration), we should param() each entry in DC_DAEMON_LIST to get the path to that [DC] daemon's binary.  We should then param() each entry in DAEMON_LIST, and if the paths to the binary match (after canonicalization), declare the DAEMON_LIST daemon object to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span>.\n\n<p>This will simplify configuration of multiple instances of DC daemons and prevent a class of annoying errors.  It will also permit the child ticket.\n\n</p><p>For example.  if you have the following configuration\n\n</p><p></p><pre>    SCHEDD2 = $(SCHEDD)\n    DAEMON_LIST = $(DAEMON_LIST) SCHEDD2\n</pre>\n\n<p>The Master will know that SCHEDD2 is a DC daemon because SCHEDD is in the DC_DAEMON_LIST and SCHEDD2 points to the same executable.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Aug-23 11:10:58 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> : looks good.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5768\" onclick=\"get_ticket_and_populate_wrapper('5768'); return false;\" title=\"DC daemons should automatically get -localname flag if appropriate.\">#5768</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDC daemons should automatically get -localname flag if appropriate.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5769\" onclick=\"get_ticket_and_populate_wrapper('5769'); return false;\" title=\"Fix HAD|REPLICATION configuration incompability.\">#5769</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix HAD|REPLICATION configuration incompability.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-23 13:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/55bfc32deee137ad30f7b25463b74a5644909195\">[49057]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5767\" onclick=\"get_ticket_and_populate_wrapper('5767'); return false;\" title=\"Automatically detect DaemonCore daemons.\">#5767</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5768\" onclick=\"get_ticket_and_populate_wrapper('5768'); return false;\" title=\"DC daemons should automatically get -localname flag if appropriate.\">#5768</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5849\" onclick=\"get_ticket_and_populate_wrapper('5849'); return false;\" title='Resolve log configuration madness for \"clone\" daemons.'>#5849</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5769\" onclick=\"get_ticket_and_populate_wrapper('5769'); return false;\" title=\"Fix HAD|REPLICATION configuration incompability.\">#5769</a></span>) Documentation.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-17 16:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2006ac50b35f21c479710048365b85ad90a360f0\">[49030]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5767\" onclick=\"get_ticket_and_populate_wrapper('5767'); return false;\" title=\"Automatically detect DaemonCore daemons.\">#5767</a></span>) Fix case-sensitivity bug, update comments.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-17 15:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b94b18f890d14dc8a6cc9e518e30e34154a8ccd0\">[49027]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5767\" onclick=\"get_ticket_and_populate_wrapper('5767'); return false;\" title=\"Automatically detect DaemonCore daemons.\">#5767</a></span>) Detect if an entry in the DAEMON_LIST shares a binary with an entry in the DC_DAEMON_LIST and declare it to be a DC daemon if so.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Aug-24 14:12", "status": "resolved", "created": "2016-Jun-30 14:48", "fixed_version": "2016-Jun-30 14:48", "broken_version": "", "priority": "3", "subsystem": "DaemonMaster", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}