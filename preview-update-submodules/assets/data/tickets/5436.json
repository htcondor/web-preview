{"id": 5436, "title": "Ticket #5436: starter reports current MemoryUsage, not peak", "description": "<blockquote>\nWhen the starter updates the shadow and startd with resource usage information about the running job, it reports the peak <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span>, but only the current <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ResidentSetSize\" title=\"Resident Set Size\">ResidentSetSize</a></span> (which goes into <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MemoryUsage\" title=\"Memory Usage\">MemoryUsage</a></span>).  We really need the peak <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ResidentSetSize\" title=\"Resident Set Size\">ResidentSetSize</a></span> for all kinds of policy reasons.</blockquote>", "remarks": "<blockquote>\n<em>2015-Dec-09 22:20:24 by bbockelm:</em> <br/>\n\nSaywhat?\n\n<p>How many site's monitoring is this going to break?  Why do we think this is going to be a non-disruptive change?\n\n</p><p>How difficult would it be to introduce <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ResidentSetSizePeak\" title=\"Resident Set Size Peak\">ResidentSetSizePeak</a></span> instead and use that for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MemoryUsage\" title=\"Memory Usage\">MemoryUsage</a></span>?\n\n</p><p></p><hr/>\n<em>2015-Dec-10 08:46:19 by gthain:</em> <br/>\n\nNote that <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span> has always been reported as peak values, and the shadow only updates the schedd for new peak values of RSS, so this makes RSS more consistent across the startd and the schedd.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-16 14:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b8ab26e55326b375ac1935c2f8fafd39925afa50\">[46600]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5436\" onclick=\"get_ticket_and_populate_wrapper('5436'); return false;\" title=\"starter reports current MemoryUsage, not peak\">#5436</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-10 08:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/be680d9a59cf7f44e2b6f3d12e95d918c16efe1f\">[46573]</a></span>: Fix warning <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5436\" onclick=\"get_ticket_and_populate_wrapper('5436'); return false;\" title=\"starter reports current MemoryUsage, not peak\">#5436</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-09 17:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/be8e3ae99b45d69d4d2af8e3213ce9fa3cdc27c4\">[46568]</a></span>: Make <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ResidentSize\" title=\"Resident Size\">ResidentSize</a></span> size attribute be peak, not current <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5436\" onclick=\"get_ticket_and_populate_wrapper('5436'); return false;\" title=\"starter reports current MemoryUsage, not peak\">#5436</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Dec-16 14:29", "status": "resolved", "created": "2015-Dec-09 17:01", "fixed_version": "2015-Dec-09 17:01", "broken_version": "v080500", "priority": "1", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": "20151210"}