{"id": 7800, "title": "Ticket #7800: condor_watch_q should be able to track DAGs", "description": "<blockquote>\n<code>condor_watch_q</code> does not correctly group jobs (by batch name) that are part of DAGS if those jobs are submitted after <code>condor_watch_q</code> begins running. If the job is submitted before it starts running, <code>condor_watch_q</code> will pick up their batch names and group them together in group-by-batch mode. Jobs submitted afterwards (if <code>condor_watch_q</code> finds them in an event log it is already reading) will just have the generic name given to jobs without batch names, and therefore will not be grouped properly.\n\n<p>This ticket corresponds to this external PR by Eric Lin: <a class=\"external\" href=\"https://github.com/JoshKarpel/condor_watch_q/pull/50\">https://github.com/JoshKarpel/condor_watch_q/pull/50</a> , which solves this problem by determining which jobs in the initial query are actual DAGMan scheduler universe jobs and constructing a mapping between those DAGs and the event log for their jobs. That mapping is then used to track which clusters belong to event logs used by DAGs and adjust their batch names appropriately.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Aug-19 08:26:30 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>The code and logic look sound to me, although I'm not familiar enough with the problem space to say that I have confidence that it works; I'll trust your testing.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-28 13:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6408ea700136f35dc0ebad9a66a56696f85077b1\">[61148]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7800\" onclick=\"get_ticket_and_populate_wrapper('7800'); return false;\" title=\"condor_watch_q should be able to track DAGs\">#7800</a></span>) version history  (By Josh Karpel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-18 11:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5aa6efeded1f15db82411705a455f593ff4d0e31\">[60476]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7800\" onclick=\"get_ticket_and_populate_wrapper('7800'); return false;\" title=\"condor_watch_q should be able to track DAGs\">#7800</a></span>) condor_watch_q can now correctly group (by batchname) DAGMan jobs that were submitted after it started running  (By Josh Karpel )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Aug-28 13:07", "status": "resolved", "created": "2020-Aug-17 13:02", "fixed_version": "2020-Aug-17 13:02", "broken_version": "v080908", "priority": "3", "subsystem": "Tools", "assigned_to": "karpel", "derived_from": "#7343", "creator": "karpel", "rust": "", "customer_group": "other", "visibility": "public", "notify": "karpel@wisc.edu", "due_date": ""}