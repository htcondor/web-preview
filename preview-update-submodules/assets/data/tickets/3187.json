{"id": 3187, "title": "Ticket #3187: unexplained claimid rejection by shadow or starter", "description": "<blockquote>\nThe LIGO cluster at UWM is seeing scores of job disconnections (separated by hours or days -- not all at once) with the following shadow/startd story indicating that one or the other is rejecting a valid/identical claimid.  There is no obvious evidence of network or system issues when it happens.  Can you shed any light on what might be going on?  I'm at a loss to explain it.\n\n<p></p><div class=\"verbatim\">\n<pre>root@nemo-slave0219:/var/log/condor# grep 2269678 *\nStartLog:07/26/12 18:49:00 slot1: Remote job ID is 2269678.0\nStartLog:07/26/12 18:49:00 ClaimId (&lt;192.168.3.229:52508&gt;#1341338255#58804#82fd17cc2148e87dbf2def16e03bd2c37ddb9ffb) and GlobalJobId ( pcdev1.phys.uwm.edu#2269678.0#1343346466 ) not found\n\n[pankow@pcdev1:log/condor]$ grep 2269678 ShadowLog.old\n07/26/12 18:49:00 Initializing a VANILLA shadow for job 2269678.0\n07/26/12 18:49:00 (2269678.0) (1657): Request to run on slot1@nemo-slave0219.nemo.phys.uwm.edu &lt;192.168.3.229:52508&gt; was ACCEPTED\n07/26/12 18:49:00 (2269678.0) (1657): Can no longer talk to condor_starter &lt;192.168.3.229:52508&gt;\n07/26/12 18:49:00 (2269678.0) (1657): Trying to reconnect to disconnected job\n07/26/12 18:49:00 (2269678.0) (1657): LastJobLeaseRenewal: 1343346540 Thu Jul 26 18:49:00 2012\n07/26/12 18:49:00 (2269678.0) (1657): JobLeaseDuration: 1200 seconds\n07/26/12 18:49:00 (2269678.0) (1657): JobLeaseDuration remaining: 1200\n07/26/12 18:49:00 (2269678.0) (1657): Attempting to locate disconnected starter\n07/26/12 18:49:00 (2269678.0) (1657): locateStarter(): ClaimId (&lt;192.168.3.229:52508&gt;#1341338255#58804#82fd17cc2148e87dbf2def16e03bd2c37ddb9ffb) and GlobalJobId ( pcdev1.phys.uwm.edu#2269678.0#1343346466 ) not found\n07/26/12 18:49:00 (2269678.0) (1657): Reconnect FAILED: Job not found at execution machine\n07/26/12 18:49:00 (2269678.0) (1657): **** condor_shadow (condor_SHADOW) pid 1657 EXITING WITH STATUS 107\n07/26/12 18:51:18 Initializing a VANILLA shadow for job 2269678.0\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Aug-13 16:38:08 by tannenba:</em> <br/>\n\nLikely related to recent network configuration changes involving <code>PRIVATE_NETWORK_ADDRESS</code> and <code>PRIVATE_NETWORK_NAME</code>, and the unfortunate fact that these config knobs are likely not honored properly w/ standard universe (e.g. the old starter/shadow).\n\n<p>Assigning to ToddM to investigate a workaround...\n\n</p><p></p><hr/>\n<em>2012-Aug-13 17:29:41 by tlmiller:</em> <br/>\n\nCould you send me the diffs in your Condor config files, and information about what, if anything, else you changed with respect to networking on these hosts?  Thanks.\n\n<p></p><hr/>\n<em>2012-Aug-14 13:33:59 by tlmiller:</em> <br/>\n\nI conferred with Jaime, and since our analyses agree, I'm going to suggest setting SHADOW.NETWORK_INTERFACE to the private IP.  That /should/ cause initial checkpoint to be served from the private IP address, as required.\n\n<p></p><hr/>\n<em>2015-Aug-14 13:36:04 by tlmiller:</em> <br/>\n\nAfter three years of silence, I'm declaring this ticket resolved. :)</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2015-Aug-14 13:36", "status": "defer", "created": "2012-Aug-09 14:40", "fixed_version": "2012-Aug-09 14:40", "broken_version": "v070604", "priority": "5", "subsystem": "Std", "assigned_to": "tlmiller", "derived_from": "", "creator": "pfc", "rust": "a23832", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu, pankow@gravity.phys.uwm.edu tannenba@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}