{"id": 2641, "title": "Ticket #2641: DiskUsage and request_disk relationship backward", "description": "<blockquote>\n<strong>misc/jobad.tex</strong>\n<div class=\"code\">\n<pre class=\"code\">%%% ClassAd attribute: DiskUsage\n\\index{ClassAd job attribute!DiskUsage}\n\\index{DiskUsage!job ClassAd attribute}\n\\item[\\AdAttr{DiskUsage}:] Amount of disk space (Kbytes) in the Condor\nexecute directory on the execute machine that this job has used.\nThe initial estimate may be specified in the job\nsubmit file using the \\SubmitCmd{request\\_disk} command.\nIf not initialized by the job's request,\n\\SubmitCmd{vm} universe jobs will default to an initial value of the disk\nimage size.\nIf not initialized by the job's request,\nnon-\\SubmitCmd{vm} universe jobs will default to an initial value of the\nsum of the job's executable and all input files.\n</pre></div>\n\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span> doesn't care at all about request_disk.  You can only set it with +DiskUsage, as in:\n<div class=\"code\">\n<pre class=\"code\"># This example is 1 megabyte\n+DiskUsage = 1024\n</pre></div>\n\n\n<p><strong>man-pages/submitcmds.tex</strong>\n</p><div class=\"code\">\n<pre class=\"code\">%%%%%%%%%%%%%%%%%%%\n%% request_disk\n%%%%%%%%%%%%%%%%%%%\n\\index{submit commands!request\\_disk}\n\\item[request\\_disk = $&lt;$quantity$&gt;$] For pools that enable\ndynamic \\Condor{startd} provisioning\n(see section~\\ref{sec:SMP-dynamicprovisioning}),\nthe amount of disk space in Kbytes requested for this job,\nsetting an initial value for the job ClassAd attribute \\Attr{DiskUsage}.\nIf not specified, the initial amount requested under dynamic \\Condor{startd}\nprovisioning will depend on the job universe.\nFor \\SubmitCmd{vm} universe jobs, it will be the size of the disk image.\nFor other universes,\nit will be the sum of sizes of the job's executable and all input files.\n</pre></div>\n\n\n<p>Seems to suggest that request_disk will set <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span>. This is backward.  If request_disk is not specified, it is set to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span>.  Not the value of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span>, it is set to the expression <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span>.  (It's identical to \"+RequestDisk=DiskUsage\" in a submit file.)  The details on how that size is calculated is correct for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DiskUsage\" title=\"Disk Usage\">DiskUsage</a></span>, but only indirectly here.\n\n</p><p><strong>misc/jobad.tex</strong>\n</p><div class=\"code\">\n<pre class=\"code\">%%% ClassAd attribute: RequestMemory\n\\index{ClassAd job attribute!RequestMemory}\n\\index{RequestMemory!job ClassAd attribute}\n\\item[\\AdAttr{RequestMemory}:]  The amount of memory space in Mbytes\nrequested for this job;\nresults in setting an initial value for the job ClassAd attribute\n\\Attr{ImageSize}.\nUtilized when dynamic \\Condor{startd} provisioning is enabled.\n</pre></div>\n\n\n<p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RequestMemory\" title=\"Request Memory\">RequestMemory</a></span> has no impact on <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span>.  However, if <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RequestMemory\" title=\"Request Memory\">RequestMemory</a></span> is not set by the user, it will be set to this expression:\n</p><div class=\"code\">\n<pre class=\"code\">RequestMemory = ceiling(ifThenElse(JobVMMemory =!= UNDEFINED, JobVMMemory, ImageSize/1024.0))\n</pre></div>\n\n\n<p><strong>man-pages/submitcmds.tex</strong>\n</p><div class=\"code\">\n<pre class=\"code\">%% request_memory\n%%%%%%%%%%%%%%%%%%%\n\\index{submit commands!request\\_memory}\n\\item[request\\_memory = $&lt;$quantity$&gt;$] For pools that enable\ndynamic \\Condor{startd} provisioning\n(see section~\\ref{sec:SMP-dynamicprovisioning}),\nthe amount of memory space in Mbytes requested for this job,\nsetting an initial value for the job ClassAd attribute \\Attr{ImageSize}.\nIf not specified, the initial amount requested under dynamic \\Condor{startd}\nprovisioning will depend on the job universe.\nFor \\SubmitCmd{vm} universe jobs that do not specify the request with\n\\SubmitCmd{vm\\_memory}, it will be 0.\nFor other universes,\nit will be the size of the job's executable.\n</pre></div>\n\n\n<p>Seems to suggest that request_memory will set <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span>.\n If request_memory is not specified, it is set to \"ceiling(ifThenElse(JobVMMemory <code>!</code> UNDEFINED, JobVMMemory, ImageSize/1024.0))\".  The details on how that size is calculated is correct for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ImageSize\" title=\"Image Size\">ImageSize</a></span>, but only indirectly here.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-22 12:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/20e8e9c9d8be065592df22b1d00d840df468b823\">[28395]</a></span>: correct definitions of job attributes and associated submit commands ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2641\" onclick=\"get_ticket_and_populate_wrapper('2641'); return false;\" title=\"DiskUsage and request_disk relationship backward\">#2641</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2011-Nov-22 12:42", "status": "resolved", "created": "2011-Nov-16 17:54", "fixed_version": "2011-Nov-16 17:54", "broken_version": "v070600", "priority": "4", "subsystem": "", "assigned_to": "smoler", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}