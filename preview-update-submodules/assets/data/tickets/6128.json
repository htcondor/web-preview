{"id": 6128, "title": "Ticket #6128: Job Router defaults sensitive to leading whitespace", "description": "<blockquote>\nThe Job Router will not route any jobs if the JOB_ROUTER_DEFAULTS config parameter has any leading whitespace. The param system usually strips leading whitespace, but it can appear if an undefined macro is used, like so:\n\n<p></p><div class=\"verbatim\">\n<pre>JOB_ROUTER_DEFAULTS = $(JOB_ROUTER_DEFAULTS) [ MaxJobs = 10000; ]\n</pre></div>\n\n\n<p>If JOB_ROUTER_DEFAULTS is unset before this, then the resulting value will start with a space. This trips up the feature added in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4433\" onclick=\"get_ticket_and_populate_wrapper('4433'); return false;\" title=\"Add syntax to allow users to append to configuration arrays\">#4433</a></span> that makes the square brackets in JOB_ROUTER_DEFAULTS optional. It ends up adding square brackets when a set is already present, resulting in a parse error from the new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> parser. The code for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4433\" onclick=\"get_ticket_and_populate_wrapper('4433'); return false;\" title=\"Add syntax to allow users to append to configuration arrays\">#4433</a></span> needs to skip leading whitespace when checking whether the param value starts with an open square bracket.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Feb-27 17:08:40 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> : change looks good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-28 10:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/62f7228c6b330f46ab0a0b37eeeb0d5770a13920\">[50215]</a></span>: Docs for JOB_ROUTER_DEFAULTS leading whitespace bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6128\" onclick=\"get_ticket_and_populate_wrapper('6128'); return false;\" title=\"Job Router defaults sensitive to leading whitespace\">#6128</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-03 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/84732734b511a6e3e7ac37602884b65f338adbbb\">[50106]</a></span>: Ignore whitespace when checking start of JOB_ROUTER_DEFAULTS. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6128\" onclick=\"get_ticket_and_populate_wrapper('6128'); return false;\" title=\"Job Router defaults sensitive to leading whitespace\">#6128</a></span> When checking whether the first character of JOB_ROUTER_DEFAULTS is an open bracket, skip any leading whitespace. With empty macro substitutions, config values can have leading whitespace.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Feb-28 10:01", "status": "resolved", "created": "2017-Feb-03 14:47", "fixed_version": "2017-Feb-03 14:47", "broken_version": "v080205", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "#4433", "creator": "jfrey", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "", "due_date": ""}