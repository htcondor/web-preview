{"id": 34, "title": "Ticket #34: bad error message: gethostbyname(SOME.MACHINE.NAME) failed, errno = 25", "description": "<blockquote>\n(This replaces <span class=\"drupalnode\"><a href=\"http://drupal-old.batlab.cs.wisc.edu/node/1557\">1557 (backup)</a> <a href=\"http://nmi.cs.wisc.edu/node/1557\">1557 (public)</a></span>.)\n\n<p>If your DNS or /etc/hosts is \"bad\" (for various definitions of \"bad\"), Condor will fail with errors that look something like: \"gethostbyname(SOME.MACHINE.NAME) failed, errno = 25\" (from my_hostname.C, line 187ish).  This is a deeply unhelpful error that provides absolutely no clue about what is wrong or how to fix it.  There are reports on Condor users that some modern Linux distributions default to creating a wonky /etc/hosts file, which makes this error all the more common.\n\n</p><p>This is a multi-part problem:\n\n</p><p></p><ul>\n<li>The EXCEPT message reports the errno, which is 25 (ioctl failure) and completely useless.  Given that the function that failed is Condor code, is errno ever likely to be valid?  The code called (get_full_hostname) should either try to <em>always</em> set errno, my_hostname should not print the errno.\n\n<p></p></li><li>The code that is actually failing is get_full_hostname (get_full_hostname.C).  It only logs at D_HOSTNAME.  Should it debug at D_ALWAYS for error cases, possibly helping debugging?\n\n<p></p></li><li>There are reports that some distributions are doing surprising things in their /etc/hosts files by default.  We should figure out what they're doing and either give useful error messages, some details in the manual, or ideally just go to war with the /etc/hosts we have.\n</li></ul>\n\n<p>User discussions about the problem:\n\n</p><p></p><ul>\n<li><a class=\"external\" href=\"https://www-auth.cs.wisc.edu/lists/condor-users/2008-May/msg00174.shtml\">https://www-auth.cs.wisc.edu/lists/condor-users/2008-May/msg00174.shtml</a>\n</li><li><a class=\"external\" href=\"https://lists.cs.wisc.edu/archive/condor-users/2007-May/msg00008.shtml\">https://lists.cs.wisc.edu/archive/condor-users/2007-May/msg00008.shtml</a>\n</li></ul>\n\n<p>We see regular rust about this.  It frequently doesn't get resolved. admin: 12587, 14025,  15179, 15498, 18092</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Jun-30 15:23:27 by psilord:</em> <br/>\n\ngethostbyname() actually set h_errno, not errno. The man page explains it and what to do about it in more detail.\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-01 14:49", "status": "new", "created": "2009-Jan-16 11:00", "fixed_version": "2009-Jan-16 11:00", "broken_version": "", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}