{"id": 7120, "title": "Ticket #7120: Reduce verbosity of the schedd", "description": "<blockquote>\nIn attempting to debug a recent schedd crash, we discovered that at D_FULLDEBUG level, the schedd's log was drowning in useless messages. We should remove the worst offenders.</blockquote>", "remarks": "<blockquote>\n<em>2019-Aug-01 11:55:06 by jfrey:</em> <br/>\n\nThis change tripped over a condition in the schedd where a match_rec can be in M_ACTIVE status without an associated shadow_rec (caused by removal of the assigned job before the shadow is spawned). This led to slots being left in Claimed/Idle indefinitely. I made a followup change that ensures the match_rec goes back to M_CLAIMED status when the shadow_rec is removed.\n\n<p>If an affected match_rec has already been used to run a job, then the startd will eventually kill the claim when CLAIM_WORKLIFE expires. But if nob jobs have been run, then the startd will let the claim continue indefinitely. Do we want to change it, so that a fresh claim is subject to CLAIM_WORKLIFE?</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-01 11:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/705705c39b2921f091b4ae3d2d8e5d1ad593e2aa\">[57538]</a></span>: match_rec w/o a shadow_rec should not be in M_ACTIVE status. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7120\" onclick=\"get_ticket_and_populate_wrapper('7120'); return false;\" title=\"Reduce verbosity of the schedd\">#7120</a></span> Otherwise, the new check of match_rec status in StartJobs() may miss a match that needs a job. And always set match_rec status via setStatus(). And update entered_current_status properly.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-20 14:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ff99a95bb7b4d4d8c32df857dde29abdd077fe5c\">[57203]</a></span>: Remove some useless log messages in the schedd. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7120\" onclick=\"get_ticket_and_populate_wrapper('7120'); return false;\" title=\"Reduce verbosity of the schedd\">#7120</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-05 15:55", "status": "resolved", "created": "2019-Jun-20 13:34", "fixed_version": "2019-Jun-20 13:34", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}