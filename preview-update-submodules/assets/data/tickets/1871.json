{"id": 1871, "title": "Ticket #1871: Try to limit stack size on Linux", "description": "<blockquote>\nOn some tests, the stack on Linux grew to 1.5GB.  Try to catch this by setting limits before executing the job.</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2295\" onclick=\"get_ticket_and_populate_wrapper('2295'); return false;\" title=\"default job stack size bloats vsize\">#2295</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ndefault job stack size bloats vsize</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jul-18 11:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d3a942329e6ff3fb7f8105e55bc9fb4a323e8590\">[26145]</a></span>: edit version history item about new submit cmd stack_size, as well as man page description, given change in default value ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span> ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2295\" onclick=\"get_ticket_and_populate_wrapper('2295'); return false;\" title=\"default job stack size bloats vsize\">#2295</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jul-13 14:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/efde5d0e5c1ea2ed393bf6a89854887c3447332d\">[22447]</a></span>: Setting default rlimit size of stack causes problems in CMS ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2295\" onclick=\"get_ticket_and_populate_wrapper('2295'); return false;\" title=\"default job stack size bloats vsize\">#2295</a></span> Set resource limit to RLIM_INFINITY, unless explicitly asked by the user. This basically restores the behavior prior to e4cce69, in that users will not notice a difference, unless they explicitly ask to set the stack size. See\u00a0[...]\n (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-09 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/471d2eacb3376a2de61028cfb6773d08e1cd4bf4\">[26116]</a></span>: complete documentation of gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span>: new submit command stack_size and corresponding job attribute <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StackSize\" title=\"Stack Size\">StackSize</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-03 09:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d0461f1c0612900e1bedb0808a6f5aa03636c775\">[26084]</a></span>: Documented addition of \"stack_size\" to job description file This is <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span>  (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-02 11:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e4cce6996764a5eaabb28106c44f901c23dc4bae\">[20867]</a></span>: Add a knob for rlimit-ting the stack size So far, this only works with non-standard universe, and only on Linux platform. Other platforms do not have the rlimit or it is hard coded. The ticket is <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span>  (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jan-21 15:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4872ccbc85af8c4a66aa4e76253336138f7242c2\">[20078]</a></span>: Revert \"Use stack size of 10MB on Linux\" This reverts commit 632d845b8cf59323ce080ceb027a6360665b786b. Come back and revisit this, making the limit larger and configurable I created Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span> to watch this (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-09 15:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/632d845b8cf59323ce080ceb027a6360665b786b\">[19353]</a></span>: Use stack size of 10MB on Linux Condor has been using a stack size of \"unlimited\" for a long long time. Changing it to 10 MB will hopefully fix some issues. The stack size on SunOS has always been 8 MB, as stated in the comments. I created Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1871\" onclick=\"get_ticket_and_populate_wrapper('1871'); return false;\" title=\"Try to limit stack size on Linux\">#1871</a></span> to watch this (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jan-29 15:23", "status": "resolved", "created": "2011-Jan-24 16:01", "fixed_version": "2011-Jan-24 16:01", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "nwp", "rust": "", "customer_group": "other", "visibility": "public", "notify": "gthain@cs.wisc.edu, tstclair@redhat.com", "due_date": "20110215"}