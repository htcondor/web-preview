{"id": 3755, "title": "Ticket #3755: Add GAHP command to detect EC2 server type", "description": "<blockquote>\nMost cloud services that speak EC2 don't implement the full EC2 protocol. In some cases, this affects how HTCondor needs to interact with the server. See <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3682\" onclick=\"get_ticket_and_populate_wrapper('3682'); return false;\" title=\"Reintroduce SSH keypair -style two-phase commit for OpenStack\">#3682</a></span> for the motivating reason for this ticket. If at all possible, we shouldn't require the user to tell us what cloud service type each resource is. HTCondor should try to determine that automatically.\n\n<p>Fortunately, the response to a simple EC2 query contains enough information to determine which cloud service type it comes from. We should add a new EC2 GAHP command that does this. The gridmanager can then modify its interactions with the server accordingly.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jul-22 10:55:06 by tlmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Looks good.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-09 17:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7bfea165769b1e655a45a145bc290776c08e6bf1\">[36830]</a></span>: Have gridmanager use new ec2 gahp command EC2_VM_SERVER_TYPE. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3755\" onclick=\"get_ticket_and_populate_wrapper('3755'); return false;\" title=\"Add GAHP command to detect EC2 server type\">#3755</a></span> Track the server type of each resource the gridmanager talks to, and save the server type in the ad of submitted jobs in the new attribute EC2ServerType.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-09 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/84bdc9a60341be237d7c3888b842870f00de4b93\">[36829]</a></span>: Add ec2 gahp command EC2_VM_SERVER_TYPE. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3755\" onclick=\"get_ticket_and_populate_wrapper('3755'); return false;\" title=\"Add GAHP command to detect EC2 server type\">#3755</a></span> This new gahp command issues a simple ec2 command and analyzes the response to determine which of several implementations the server is. The implementations detected are Amazon, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpenStack\" title=\"Open Stack\">OpenStack</a></span>, Nimbus, and Eucalyptus. If the response doesn't look like any of\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jul-22 10:55", "status": "resolved", "created": "2013-Jul-09 16:10", "fixed_version": "2013-Jul-09 16:10", "broken_version": "v080000", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#3682", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "tstclair@redhat.com", "due_date": ""}