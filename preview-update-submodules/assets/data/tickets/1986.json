{"id": 1986, "title": "Ticket #1986: procd_ctl and gidd_alloc include unnecessary deps", "description": "<blockquote>\nRight now, the client tools for procd link against ${CONDOR_TOOL_LIBS}.  This is a huge amount of extra code brought into something that should be simple.  Particularly, if built in proper mode, this brings in Globus, VOMS, SSL, KRB5, etc.\n\n<p>Patch is simple and included below.\n\n</p><p>As procd_ctl brings in a good number of large deps, the resulting binary still has a large amount of code (3.4MB for the procd_ctl client; 686KB for the procd itself).  Pete may want to review this: none of the Condor dependencies look \"essential\".</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-30 14:16:08 by psilord:</em> <br/>\n\nWith this patch, does the procd_ctl still compile?\n\n<p></p><hr/>\n<em>2011-Jul-07 20:18:33 by bbockelm:</em> <br/>\n\nHi Pete,\n\n<p>I believe it did at the time.  However, the idea is pretty simple - strip out any DC stuff.\n\n</p><p>Todd - I'd like to bump up the priority of this one.  In Fedora, we are planning on producing a condor-procd subpackage for folks (think glexec tracking plugin) that don't want the full thing, only this useful stand-alone subset.\n\n</p><p>Thanks,\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Apr-01 07:37:54 by bbockelm:</em> <br/>\n\nA fix was pushed for this.\n\n<p>As a part of the fix, the \"-A\" argument for procd_ctl is now mandatory (this was necessary to remove the dependency on the param subsystem).  I checked with the only user of procd_ctl I know of, the OSG, and this argument is already always passed.\n\n</p><p></p><hr/>\n<em>2013-Apr-01 08:42:27 by gthain:</em> <br/>\n\nLooks good to me, assuming there's no other users of the procd who need the config file.\n\n<p></p><hr/>\n<em>2013-Apr-01 08:50:14 by bbockelm:</em> <br/>\n\nTo be clear - the change was for dropping the param subsystem involves \"procd_ctl\", not \"procd\".  The userbase of procd_ctl has a much smaller surface area.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/295/condor_procd_build.patch\">condor_procd_build.patch</a>\n1506 bytes added by bbockelm on 2011-Mar-21 13:28:39 UTC.\n<br/>\nSlim down the linking of the procd clients to the minimum required for current functionality.\n\n<p>This patch fixes a valid compiler-generated warning.<br/>\n</p></li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-01 09:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/398adbfe2fc4fc20cb4f5f95d15bc7d839f89092\">[35294]</a></span>: Fix up documentation to match <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1986\" onclick=\"get_ticket_and_populate_wrapper('1986'); return false;\" title=\"procd_ctl and gidd_alloc include unnecessary deps\">#1986</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-01 07:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5e74d1d32d23b539e4aaaa9417610d61f8f9d6f7\">[35293]</a></span>: Remove usage of condor_utils in procd_ctl and unnecessary linking. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1986\" onclick=\"get_ticket_and_populate_wrapper('1986'); return false;\" title=\"procd_ctl and gidd_alloc include unnecessary deps\">#1986</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Apr-01 08:50", "status": "resolved", "created": "2011-Mar-21 08:26", "fixed_version": "2011-Mar-21 08:26", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "gthain", "derived_from": "", "creator": "bbockelm", "rust": "a25364", "customer_group": "osg", "visibility": "public", "notify": "bbockelm@cse.unl.edu,tannenba@cs.wisc.edu", "due_date": ""}