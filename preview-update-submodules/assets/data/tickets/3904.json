{"id": 3904, "title": "Ticket #3904: curl_plugin ignores HTTP error codes", "description": "<blockquote>\nFile transfer from an HTTP URL does not fail when the resource in question does not exist.  Instead, it scribbles the error message into the file and proceeds as normal.  This breaks VM universe in a hard-to-debug way (the VM boots up and hangs, unable to find a bootable disk).</blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-10 14:37:04 by tlmiller:</em> <br/>\n\nThe curl_plugin also didn't follow redirects, which is also broken.\n\n<p></p><hr/>\n<em>2013-Sep-19 15:30:49 by tlmiller:</em> <br/>\n\nReverted: the curl method for checking HTTP status codes also checks FTP status codes, and they're not the same.  Will update patch with code to detect the protocol and only check HTTP status codes for HTTP.\n<hr/>\n<em>2013-Oct-04 11:45:03 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: New code looks good</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-14 15:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c26390b3211986c05bf2b8f9763d1f547298af07\">[37841]</a></span>: edit 8.0.4 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3904\" onclick=\"get_ticket_and_populate_wrapper('3904'); return false;\" title=\"curl_plugin ignores HTTP error codes\">#3904</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-27 13:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a1274aacc1a5ece5cfa2a46a1f15f15d02ecf261\">[37727]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3904\" onclick=\"get_ticket_and_populate_wrapper('3904'); return false;\" title=\"curl_plugin ignores HTTP error codes\">#3904</a></span>) Handle redirected and missing http URLs sanely in the curl plug-in.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-19 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ccd0091734e523cba155bd092638df21364bf7a2\">[37681]</a></span>: Revert \"(<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3904\" onclick=\"get_ticket_and_populate_wrapper('3904'); return false;\" title=\"curl_plugin ignores HTTP error codes\">#3904</a></span>) Handle redirected and missing URLs sanely in the curl plug-in.\" This reverts commit 1093c756f48863db4f2d35170696e8d858cf62a7. Conflicts: src/condor_filetransfer_plugins/curl_plugin.c  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-11 11:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5766f91e74e4c528029939c0548a9f77d83de36b\">[37547]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3904\" onclick=\"get_ticket_and_populate_wrapper('3904'); return false;\" title=\"curl_plugin ignores HTTP error codes\">#3904</a></span>) Fix build on Fedora.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-10 17:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1093c756f48863db4f2d35170696e8d858cf62a7\">[37540]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3904\" onclick=\"get_ticket_and_populate_wrapper('3904'); return false;\" title=\"curl_plugin ignores HTTP error codes\">#3904</a></span>) Handle redirected and missing URLs sanely in the curl plug-in.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Oct-03 11:44", "status": "resolved", "created": "2013-Sep-10 13:40", "fixed_version": "2013-Sep-10 13:40", "broken_version": "v070902", "priority": "2", "subsystem": "FileTransfer", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, cat@cs.wisc.edu", "due_date": ""}