{"id": 1669, "title": "Ticket #1669: Improve dprintf information in std uni shadow for ckpt servers", "description": "<blockquote>\nWhen standard universe fails, it is really hard from the logs to determine what is going on.  This ticket lists confusing or incomplete dprintf messages:\n\n<p>in pseudo_ops.cpp:pseudo_get_file_stream,\n</p><div class=\"code\">\n<pre class=\"code\">               dprintf(D_ALWAYS, \"ckpt server restore failed, trying again\"\n                        \" in %d seconds\\n\", retry_wait);\n\n</pre></div>\n\n\n<p>and pseudo_ops.cpp:pseudo_put_file_stream\n</p><div class=\"code\">\n<pre class=\"code\">               dprintf(D_ALWAYS, \"store request to ckpt server failed, \"\n                        \"trying again in %d seconds\\n\", retry_wait);\n</pre></div>\n\n\n<p>and psuedo_ops.cpp:has_ckpt_file\n</p><div class=\"code\">\n<pre class=\"code\">               dprintf(D_ALWAYS, \"store request to ckpt server failed, \"\n                        \"trying again in %d seconds\\n\", retry_wait);\n\n</pre></div>\n\n\n<p>In all these cases, it would be very useful to see which checkpoint server it can't talk to.\n\n</p><p>Fix it for 7.4 series.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-21 12:47:00 by gthain:</em> <br/>\n\nHere are the most common errors in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ShadowLog\" title=\"Shadow Log\">ShadowLog</a></span> today.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">grep ERROR /var/log/condor/ShadowLog | grep '^09\\/21 ' | sed -e 's/^.*ERROR//' | sort | uniq -c | sort -n\n      3  \"Unable to talk to job: Connection reset by peer\n      6  \"Peer went away\" at line 656 in file shadow.cpp\n     25  \"failed to contact ckpt server\" at line 1844 in file pseudo_ops.cpp\n     70  \"Unable to talk to job: disconnected\n     85  \"ckpt server store failed\" at line 857 in file pseudo_ops.cpp\n     92  \"ckpt server restore failed\" at line 730 in file pseudo_ops.cpp\n</pre></div>\n\n\n<p></p><hr/>\n<em>2010-Sep-21 16:39:25 by psilord:</em> <br/>\n\nThanks for the info, I'll see what I can do I don't know if I can get it into 7.4.4, but definitely 7.4.5.\n\n<p></p><hr/>\n<em>2010-Sep-23 16:00:17 by psilord:</em> <br/>\n\nI didn't get all of the ones specified, like \"unable to ...\" but I got all of the ones related to checkpoint servers and a few others where it was easy to emit the correct debugging output.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-23 15:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1a90d6919362609bb91a05c5f54734dbff711128\">[19038]</a></span>: Improved many EXCEPT messages to now have much more output in them for ease of debugging. Specifically the ckpt store/restore messages were spruced up with ip addresses of the ckpt server in question. This should help facilitate much more rapid debugging of ckpt server problems. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1669\" onclick=\"get_ticket_and_populate_wrapper('1669'); return false;\" title=\"Improve dprintf information in std uni shadow for ckpt servers\">#1669</a></span>  (By Peter Keller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Oct-01 14:35", "status": "resolved", "created": "2010-Sep-21 10:07", "fixed_version": "2010-Sep-21 10:07", "broken_version": "v070400", "priority": "3", "subsystem": "Std", "assigned_to": "psilord", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu mick@cs.wisc.edu gthain@cs.wisc.edu khahn@cs.wisc.edu", "due_date": ""}