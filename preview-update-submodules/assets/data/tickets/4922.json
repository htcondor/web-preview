{"id": 4922, "title": "Ticket #4922: Disable event log locking by default", "description": "<blockquote>\nNow that writing to the various job event logs without locking is safe (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4908\" onclick=\"get_ticket_and_populate_wrapper('4908'); return false;\" title=\"EventLog lock contention\">#4908</a></span>), we should disable locking by default. This would affect ENABLE_USERLOG_LOCKING and EVENT_LOG_LOCKING. The lock for rotating the event log would remain in place.</blockquote>", "remarks": "<blockquote>\n<em>2015-May-21 09:29:54 by jfrey:</em> <br/>\n\nDisabling locking is causing us to lose events on Windows. So restore locking as the default on Windows.\n\n<p></p><hr/>\n<em>2015-Jun-23 13:15:30 by johnkn:</em> <br/>\n\nsee <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5115\" onclick=\"get_ticket_and_populate_wrapper('5115'); return false;\" title=\"Windows drops events when event log locking is disabled.\">#5115</a></span> for the fix that makes turning off event log locking on Windows safe.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-21 14:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c1e158e1f2ff8522db390023805ad79535832142\">[44879]</a></span>: correct 8.3.6 version history item and minor letter case change <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4922\" onclick=\"get_ticket_and_populate_wrapper('4922'); return false;\" title=\"Disable event log locking by default\">#4922</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-21 09:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c79974bddfb5ac8224d437cfcb2e4b123a20e632\">[44876]</a></span>: Restore locking of job event logs on Windows. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4922\" onclick=\"get_ticket_and_populate_wrapper('4922'); return false;\" title=\"Disable event log locking by default\">#4922</a></span> Without locking, we're seeing events missing in the event logs on Windows. Also add some event log parameters that were missing in the param table.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-29 16:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/caf5fef7db47572f63193549a9dde6e9b1846133\">[44759]</a></span>: Minor edit of 8.3.6 version history item. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4922\" onclick=\"get_ticket_and_populate_wrapper('4922'); return false;\" title=\"Disable event log locking by default\">#4922</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-27 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1fe20d58a3e5cb8efafa1fe09bb0b4d16c7c71d3\">[44730]</a></span>: Change default of job event log locking params to False. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4922\" onclick=\"get_ticket_and_populate_wrapper('4922'); return false;\" title=\"Disable event log locking by default\">#4922</a></span> Not locking the job event logs for writing is now a safe default, and will improve scalability in the schedd when these logs are in use.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Jun-23 13:15", "status": "resolved", "created": "2015-Mar-04 13:57", "fixed_version": "2015-Mar-04 13:57", "broken_version": "v080305", "priority": "2", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#4908", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}