{"id": 5601, "title": "Ticket #5601: Limiting proxies do not work with Bosco", "description": "<blockquote>\nBosco is unable to limit proxies due globus failing (likely because of missing CA Certs).  The OSG solved this a year ago by introducing a new variable to stop all limiting of proxies by the blahp.  Attached is a patch copied from OSG's repo that works on HTCondor's blahp.\n\n<p>The next question is whether we should patch the blahp configuration to turn off proxy limiting by default.  I vote yes, since the vast majority of our use cases do no require proxy limiting.\n\n</p><p>After applying this fix, Bosco will need to be updated, therefore:\n</p><ol>\n<li><a class=\"file\" href=\"rlog?f=src/condor_contrib/bosco/bosco_findplatform\">/src/condor_contrib/bosco/bosco_findplatform</a> will need to be updated with the new Bosco URL's\n</li><li>The FTP server needs the new updated Bosco tar balls.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2016-Apr-06 11:44:16 by tim:</em> <br/>\n\nTentatively marking this for 8.5.4. I still have to check if OSG will accept a development version for BOSCO. However, we do not want to change the behavior of the BLAHP in the stable release.\n\n<p></p><hr/>\n<em>2016-Apr-06 16:16:03 by jfrey:</em> <br/>\n\nWe could leave bosco_findplatform alone if we're willing to make the new BOSCO release version 1.2.4. I don't believe anything else has changed in the blahp or file transfer gahp that would break older BOSCO installations.\n\n<p></p><hr/>\n<em>2016-Apr-06 16:19:04 by dweitzel:</em> <br/>\n\nIncrementing the patch version sounds good to me.\n\n<p></p><hr/>\n<em>2016-Apr-18 15:09:08 by dweitzel:</em> <br/>\n\nI've downloaded and tested this new build.  It works great!\n\n<p>Testing instructions:\n\n</p><p></p><ol>\n<li>Install Bosco per normal RPM or whatever.\n</li><li>Modify <code>bosco_cluster</code> to <code>cp</code> the tar ball downloaded from the condor website into the temporary directory, rather than curl from the ftp site.\n</li><li>Run <code>bosco_cluster</code>.\n</li></ol>\n\n<p>This now works successfully with a htcondor-ce installation.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6051\" onclick=\"get_ticket_and_populate_wrapper('6051'); return false;\" title=\"Blahp can crash on proxy refresh\">#6051</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBlahp can crash on proxy refresh</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/933/nolimit-proxies.patch\">nolimit-proxies.patch</a>\n1700 bytes added by dweitzel on 2016-Apr-04 18:22:56 UTC.\n<br/>\nPatch for nolimit-proxies.patch\n<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-03 11:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/edf2215a9ccd0dbcbb0cad92dadac2232c3de8d6\">[48353]</a></span>: Update supported platforms in boscoinstaller <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-26 20:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/084aace890ce86eda6b52832fd2d81087829723e\">[48308]</a></span>: Docs for blahp option to disable generation of limited proxies. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span> Committer: Tim Theisen  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-26 19:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d2a90ab63a50468cf1a9604b7adb467a4789a0b1\">[48303]</a></span>: Disable limiting of proxies by default in the blahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span> Committer: Tim Theisen  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-26 19:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0f8d4c9cd11255d18311907e9d1b35b76134b78b\">[48298]</a></span>: Add option to disable limiting of proxies in the blahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span> If a job has an x509 proxy, the blahp will make a new limited proxy based on it. This may fail if GSI tools or CA certs are missing. Add an option to the blahp config file to disable this creation of a limited proxy, as many sites may not\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-25 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/49721ab8b08ec49abfd0b804e64ab32471fba547\">[48284]</a></span>: Docs for blahp option to disable generation of limited proxies. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-12 10:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e52c08d0b65249cc72bf252598842443ecc3503d\">[48198]</a></span>: Disable limiting of proxies by default in the blahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-06 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e714756e832b4130063c23eef312ce69455e9520\">[48176]</a></span>: Add option to disable limiting of proxies in the blahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5601\" onclick=\"get_ticket_and_populate_wrapper('5601'); return false;\" title=\"Limiting proxies do not work with Bosco\">#5601</a></span> If a job has an x509 proxy, the blahp will make a new limited proxy based on it. This may fail if GSI tools or CA certs are missing. Add an option to the blahp config file to disable this creation of a limited proxy, as many sites may not\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Apr-25 16:27", "status": "resolved", "created": "2016-Apr-04 13:21", "fixed_version": "2016-Apr-04 13:21", "broken_version": "", "priority": "2", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "dweitzel", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dweitzel@cse.unl.edu", "due_date": ""}