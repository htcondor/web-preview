{"id": 1440, "title": "Ticket #1440: ClassAd interval() function doesn't work as advertised", "description": "<blockquote>\nThe <span class=\"quote\">ClassAd</span> function interval() is used to take a number of seconds (as an integer) and returns a string representing the corresponding interval of time expressed in days, hours, minutes, and seconds, like so: <code>days+hours:minutes:seconds</code>. Any leading values of 0 are dropped, along with their punctuation. So <code>interval(67)</code> should evaluate to <code>\"1:07\"</code>. The descriptions of this function in old and new <span class=\"quote\">ClassAds</span> agree on this.\n\n<p>However, the function never drops leading 0s and the days field is padded out to a minimum of 3 characters with leading spaces. So <code>interval(67)</code> actually evaluates to <code>\"&lt;space&gt;&lt;space&gt;0+00:01:07\"</code>.\n\n</p><p>The code should probably be changed to match the documentation.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Jun-09 17:40:03 by jfrey:</em> <br/>\n\nThe docs are unclear as to when single-digit values in the string should be zero-padded. One of the examples is <code>\"17+1:02:03\"</code>, which has zero-padding for minutes and seconds, but not hours. I think this should be changed so that hours are also zero-padded when they aren't the leading number.\n\n<p></p><hr/>\n<em>2010-Jun-11 09:59:44 by jfrey:</em> <br/>\n\nPushed fix to master for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> 1.0.9.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-16 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/93c6793f09638be8dc3d84deeb9d2d5af2666557\">[18477]</a></span>: Fix test for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> function interval(). <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1440\" onclick=\"get_ticket_and_populate_wrapper('1440'); return false;\" title=\"ClassAd interval() function doesn't work as advertised\">#1440</a></span> The test expected the old, broken behavior. Also add a few more tests for interval().  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-11 10:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/13b7a8d55401128c0f6a5afc5bf5b41a41a33040\">[18453]</a></span>: Updated Old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> unit tests that use interval() to reflect changes made in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1440\" onclick=\"get_ticket_and_populate_wrapper('1440'); return false;\" title=\"ClassAd interval() function doesn't work as advertised\">#1440</a></span>. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=1239\" onclick=\"get_ticket_and_populate_wrapper('1239'); return false;\" title=\"Condor needs more condor_unit_tests\">#1239</a></span>  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-11 09:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/66c97d92785ed72137fb523202b3b02b263854f9\">[18452]</a></span>: Fix <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> function interval() to better match documentation. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1440\" onclick=\"get_ticket_and_populate_wrapper('1440'); return false;\" title=\"ClassAd interval() function doesn't work as advertised\">#1440</a></span> In breaking down a time interval into days, hours, minutes, and seconds, the interval() function always space-padded the days to three characters and never omitted leading zeros, both of which conflict with the documenation. These behaviors\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jun-11 10:00", "status": "resolved", "created": "2010-Jun-09 15:33", "fixed_version": "2010-Jun-09 15:33", "broken_version": "v070400", "priority": "4", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}