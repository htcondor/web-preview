{"id": 7704, "title": "Ticket #7704: Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPU", "description": "<blockquote>\nThe conditional was originally added before ConvertSMVer2Cores contained mappings for Volta and later GPUs (which have since been added). However, even if they hadn't been added, the conditional is probably unnecessary since ConvertSMVer2Cores will default to returning the values for the last known generation (which is probably better than omitting the property entirely from condor_gpu_discovery output).\n\n<p>Might be worth a separate discussion about how best to alert the user if they are using a newer GPU than that accounted for in ConvertSMVer2Cores?\n\n</p><p>If this could also be merged into the 8.8 branch too that would be great (we use the CoresPerCU attribute to calculate TFLOPS for each GPU, which is then used in the slot ranking)</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Jun-25 06:46:58 by tim:</em> <br/>\n\n<a class=\"external\" href=\"https://github.com/htcondor/htcondor/pull/117\">https://github.com/htcondor/htcondor/pull/117</a>\n\n<p></p><hr/>\n<em>2020-Jul-31 10:52:56 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> Looks good. Thank you for the contribution.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-31 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/80142e50eee3b5ab3419a5698a3ab88f55ee640b\">[60290]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7673\" onclick=\"get_ticket_and_populate_wrapper('7673'); return false;\" title=\"Add Ubuntu 20.04 to list of supported platforms\">#7673</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7704\" onclick=\"get_ticket_and_populate_wrapper('7704'); return false;\" title=\"Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPU\">#7704</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7711\" onclick=\"get_ticket_and_populate_wrapper('7711'); return false;\" title=\"Update condor_gpu_discovery for Ampere GPUs\">#7711</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7754\" onclick=\"get_ticket_and_populate_wrapper('7754'); return false;\" title=\"Backport flocking fixes from Development\">#7754</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-23 20:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ad134f19e9d8bdd21ba0d2aa057cfeaa7e9e9bd\">[59958]</a></span>: Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPUs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7704\" onclick=\"get_ticket_and_populate_wrapper('7704'); return false;\" title=\"Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPU\">#7704</a></span> Conditional was originally added before `ConvertSMVer2Cores` contained mappings for Volta and later GPUs (and which have since been added). However, even if they hadn't been added, the conditional is probably unnecessary since\u00a0[...]\n (By Peet Whittaker )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-03 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c9d6213e42844297b662ccaced88bc9967135e2f\">[59959]</a></span>: Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPUs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7704\" onclick=\"get_ticket_and_populate_wrapper('7704'); return false;\" title=\"Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPU\">#7704</a></span> Conditional was originally added before `ConvertSMVer2Cores` contained mappings for Volta and later GPUs (and which have since been added). However, even if they hadn't been added, the conditional is probably unnecessary since\u00a0[...]\n (By Peet Whittaker )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2020-Jul-31 10:53", "status": "resolved", "created": "2020-Jun-23 16:47", "fixed_version": "2020-Jun-23 16:47", "broken_version": "v080801", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}