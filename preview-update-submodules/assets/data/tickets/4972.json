{"id": 4972, "title": "Ticket #4972: Support non-periodic application-level checkpoints in vanilla universe", "description": "<blockquote>\nAs long as we're allowing the user to specify a particular termination condition (signal or exit code) to signal a successful checkpoint, why not transfer the sandbox whenever the application exits that way (if it asks)?  This would allow applications which checkpoint based on events (e.g., finished an iteration of the computation) to give themselves the best possible chance of preserving their work (because it would no longer depend on being evicted with a long-enough grace period).\n\n<p>Will need to implement throttling, for obvious reasons.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Aug-26 13:43:08 by tlmiller:</em> <br/>\n\nNote that we'd like to make this work without requiring ON_EXIT_OR_EVICT -- if the job is configured without periodic checkpoints, it likely can't take one on eviction, and its state may not be consistent at that time.  This may be best-implemented as part of <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=5238\" onclick=\"get_ticket_and_populate_wrapper('5238'); return false;\" title=\"Implement transfer_[checkpoint|intermediate]_files.\">#5238</a></span>.\n\n<p></p><hr/>\n<em>2015-Aug-27 16:38:30 by tlmiller:</em> <br/>\n\nIt looks like this should have worked without OR_EVICT the whole time, and now tests indicate that it isn't broken.\n\n<p>The thinking about throttling is, for now, that if a user wants to hurt themselves by checkpointing \"every five seconds\", let them.  Being able to detect that they're doing that -- and more generally, monitoring -- is more important.\n\n</p><p></p><hr/>\n<em>2019-Sep-18 14:40:07 by tlmiller:</em> <br/>\n\nMarking a three-year-old \"defer\" ticket abandoned.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-27 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c4bdfff41184e4a5d9e62eaa84f961e515182524\">[45750]</a></span>: (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4972\" onclick=\"get_ticket_and_populate_wrapper('4972'); return false;\" title=\"Support non-periodic application-level checkpoints in vanilla universe\">#4972</a></span>) Put jobs which fail when sent their checkpoint signal on hold.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-26 13:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e932cc573c0f5dffc424ce601481977898b017eb\">[45749]</a></span>: (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4972\" onclick=\"get_ticket_and_populate_wrapper('4972'); return false;\" title=\"Support non-periodic application-level checkpoints in vanilla universe\">#4972</a></span>) Build fix after merge.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-01 13:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/408839cc943ab23b411a3deb3d056ae7ec53be32\">[44488]</a></span>: (<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4972\" onclick=\"get_ticket_and_populate_wrapper('4972'); return false;\" title=\"Support non-periodic application-level checkpoints in vanilla universe\">#4972</a></span>) Prototype support for nonperiodic application-level checkpointing.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "experimental", "last_change": "2019-Sep-18 14:40", "status": "abandoned", "created": "2015-Apr-01 13:59", "fixed_version": "2015-Apr-01 13:59", "broken_version": "", "priority": "5", "subsystem": "DaemonsExecNode", "assigned_to": "tlmiller", "derived_from": "#4968", "creator": "tlmiller", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, downes@uwm.edu ,pcouvare@caltech.edu", "due_date": ""}