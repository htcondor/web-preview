{"id": 341, "title": "Ticket #341: Compile all the tests files in condor_tests for Windows", "description": "<blockquote>\nCompile all the tests files in condor_tests for use on a Windows test machine (i.e. NMI).\n\n<p>I would prefer that this be another Visual Studio Solution, but creating all those project may be more time consuming than simply writing a Makefile, or trying to get imake to compile on Windows.\n\n</p><p>Milestones:\n\n</p><p></p><ul>\n<li>Create a new Solution that contains all the projects relevant to Windows.\n<ul>\n<li>Ouput should go to <code>TestRelease</code> and <code>TestDebug</code>.\n</li><li>The top-level directory in the solution named after the set of tests it contains, for example <code>condor_tests</code> would contain <code>x_coredump</code>, etc.\n</li></ul>\n</li><li>Integrate the new Solution into the current build process.\n<ul>\n<li><code>condor_tests</code> depends on the Condor proper build for its libraries.\n</li></ul>\n</li><li>Push all the project executables into a user defined directory, so that, for instance, they can be called by NMI test suite.\n</li><li>Create an environmental variable pointing to the location of all the libs that the Condor compile creates.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2009-Jun-24 11:46:47 by ziliang:</em> <br/>\n\nAll the stuff that will compile and link without a rewrite do so.  Also talked with Pete and it looks like we should not drag in all the other libraries.  The libcondorapi should have everything we need.  Will modify the dependencies and see if we can get rid of all the linking warnings.\n\n<p></p><hr/>\n<em>2009-Jul-10 15:51:28 by ziliang:</em> <br/>\n\nIt seems that on Windows, condor_api.lib needs to include a few Windows specific things that it currently does not.  Will need to do that to get the thing to properly link.  I hope.\n\n<p></p><hr/>\n<em>2009-Jul-10 20:26:51 by burnett:</em> <br/>\n\nDo you know what kind of things it is missing?  Could you post a list of the link errors, or do you have a list of the missing parts already compiled?\n\n<p></p><hr/>\n<em>2009-Jul-13 21:20:56 by ziliang:</em> <br/>\n\nAfter further consultations with Pete, it became apparent that condor_api.lib never actually worked on Windows as it was missing multiple Windows dependencies.  All of those have been dealt with except for some stuff it pulls in from daemon.cpp, the daemon client code.  It looks to be authentication stuff and I'll need to consult either Todd or Ben on whether they are needed or whether I can stub them.\n\n<p></p><hr/>\n<em>2010-Aug-17 14:22:29 by ziliang:</em> <br/>\n\nWaiting on cmake branch.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Mar-30 15:13:05 by tstclair:</em> <br/>\n\nagain this is pretty much done now.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=351\" onclick=\"get_ticket_and_populate_wrapper('351'); return false;\" title=\"Build and run unit tests on Windows\">#351</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBuild and run unit tests on Windows</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-04 14:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4a28a1fe145694315b1906a6bf68cf0a9b26e61e\">[19334]</a></span>: Remove unneeded defines in x_killppid. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-04 14:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ab99c1ff3fbe1c0dd1f00bac299b7f2f6584831\">[19333]</a></span>: Move code block out of ifdef since it is shared in x_killppid. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-04 12:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/809905d83878670148b3bf861fd56c63e9991236\">[19332]</a></span>: Port x_killppid to Windows. Added additional files needed to condorapi library and link x_killppid to condorapi on Windows. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-03 15:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e8f5679c9c2e472d2542f3277de34bd618dff38\">[19326]</a></span>: Fix timing in sleep wrapper and have x_tightloop compile and work on Windows. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-01 14:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b2fa81c9beddf206bf71f687cb4a9d3e6f29ddd5\">[19281]</a></span>: Additional Windows compilation and linking fixes for libcondorapi users. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-01 14:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d578c174fe271b6753573c631595546f5485e64a\">[19280]</a></span>: Compilation and linking fixes for x_ files on condor_tests, modifying included headers and the like for Windows build. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-01 14:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/90d91604db038b71c0cc1a1641096a4d9f9f4846\">[19279]</a></span>: Add additional files needed by libcondorapi to build on Windows. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-01 11:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ca1550210ec84cacc413f4e371f0db7dcc741072\">[19278]</a></span>: Add additional stubs to libcondorapi to resolve linking issues on Windows. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jun-11 11:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7860df7da3176d337ba6a35fa78ef169da67dabc\">[14881]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>: Added some new environment variables to hol d the new include paths and fixed up the dependencies for some of the projects (including the externals).  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jun-04 16:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/744d9acc4401fcd70850006a79fee06a44175b55\">[14845]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>: Added further dependencies to the projects. They are still missing references to the externals, so they fail to link.  (By Ben Burnett )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jun-04 14:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cef62396fb2fe72d910a011f5a90c81b493d5c7e\">[14844]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=341\" onclick=\"get_ticket_and_populate_wrapper('341'); return false;\" title=\"Compile all the tests files in condor_tests for Windows\">#341</a></span>: msdev.bat now takes the word tests as a parameter and will launch the test solution rather than the Condor Proper one.  (By Ben Burnett )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-May-11 14:43", "status": "resolved", "created": "2009-Mar-23 10:13", "fixed_version": "2009-Mar-23 10:13", "broken_version": "v070000", "priority": "3", "subsystem": "Win32", "assigned_to": "ziliang", "derived_from": "", "creator": "burnett", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}