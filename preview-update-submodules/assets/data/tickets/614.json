{"id": 614, "title": "Ticket #614: Create a large-DAG test", "description": "<blockquote>\nWe really should have a large-DAG test as part of the test suite -- all of the current tests are small.  If possible, it would be great to have something like 100k nodes, probably each with a unique log file to really stress the log-file-reading code.</blockquote>", "remarks": "<blockquote>\n<em>2009-Jul-08 23:31:32 by psilord:</em> <br/>\n\nI happen to have some perl scripts that can create large dag files. However, the real problem comes in that can dagman and condor execute 100k jobs in 20 minutes or less? That's something like 12ms per job.\n\n<p>Hrm, I suppose we could just have dagman use a condor_submit which simply writes the needed events into whatever job log file it is told to use. It could even write a known output into an output file or some jazz so you could choose to use the real condor_submit or the fake one and the rest of the machinery to deal with the test works just fine.\n\n</p><p>2009-07-24 (wenger):  Okay, I've added job_dagman_large_dag -- but right now it only has 500 jobs, just based on how long it takes to run.  Because it's not that large, I'm not resolving the ticket yet.\n\n</p><p></p><hr/>\n<em>2009-Jul-24 16:11:21 by psilord:</em> <br/>\n\nI like your idea of a fake condor_submit which dagman can use...\n\n<p>2009-07-27 (wenger): okay, after talking with gthain today, the plan is to unrevert this test on the master, and convert it over to running with a dummy condor_submit.  This should make the test more deterministic, and also make it a lot faster, so we can run with a bigger DAG...\n\n</p><p></p><hr/>\n<em>2010-Apr-23 09:03:51 by wenger:</em> <br/>\n\nI now have a \"really large\" (100k node) test (job_dagman_really_large_dag.run).  This has to be run manually, as opposed to running during the normal nightly tests, because it takes too long.\n\n<p>Also, most of the nodes in both the \"regular nightly\" and \"really large\" test are now NOOP nodes...\n\n</p><p></p><hr/>\n<em>2010-Apr-23 09:04:25 by wenger:</em> <br/>\n\nOh, yeah -- we should do some investigating into why this isn't a lot faster than it actually is...\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-27 17:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a7e9789efcb8a81104723ea442dd4bf113a0d787\">[15230]</a></span>: Revert \"Revert \"Added large DAG test (job_dagman_large_dag) -- resolves gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=614\" onclick=\"get_ticket_and_populate_wrapper('614'); return false;\" title=\"Create a large-DAG test\">#614</a></span>.\"\" This reverts commit db75594cbbfd772b86f49ca40233504c02803eb6. Conflicts: src/condor_tests/Imakefile  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-25 12:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db75594cbbfd772b86f49ca40233504c02803eb6\">[15158]</a></span>: Revert \"Added large DAG test (job_dagman_large_dag) -- resolves gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=614\" onclick=\"get_ticket_and_populate_wrapper('614'); return false;\" title=\"Create a large-DAG test\">#614</a></span>.\" This reverts commit fa9e9a78d1e4aa6aa5cb20b52d60f6f2c2ee464b.  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-24 15:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fa9e9a78d1e4aa6aa5cb20b52d60f6f2c2ee464b\">[15156]</a></span>: Added large DAG test (job_dagman_large_dag) -- resolves gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=614\" onclick=\"get_ticket_and_populate_wrapper('614'); return false;\" title=\"Create a large-DAG test\">#614</a></span>.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Feb-01 14:51", "status": "defer", "created": "2009-Jul-07 09:54", "fixed_version": "2009-Jul-07 09:54", "broken_version": "v070301", "priority": "4", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, psilord@cs.wisc.edu, bt@cs.wisc.edu", "due_date": ""}