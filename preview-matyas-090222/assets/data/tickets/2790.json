{"id": 2790, "title": "Ticket #2790: allow schedd to claim multiple dynamic slots w/o negotiation cycle", "description": "<blockquote>\nImplement config knob CLAIM_PARTITIONABLE_LEFTOVERS\n\n<p>In the claiming protocol, when the schedd claims a partitionable slot, the startd can now send back the partitionable slot ad and claimid for the \"leftover\" resources. This allows the schedd to claim multiple dynamic slots without waiting for a negotiation cycle for each dyanmic slot claim.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jan-27 08:51:29 by matt:</em> <br/>\n\nCouple comments -\n<ol>\n<li>this can increase the number of failed claim activations as two entities (schedd &amp; negotiator) have the capability string\n</li><li>this will increase the startd publish rate into the collector\n</li></ol>\n\n<p></p><hr/>\n<em>2012-Feb-06 09:43:48 by tstclair:</em> <br/>\n\nConcurrency limits?\n\n<p></p><hr/>\n<em>2012-Feb-06 10:50:38 by tstclair:</em> <br/>\n\nIn testing concurrency limits are respected.\n\n<p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SchedLog\" title=\"Sched Log\">SchedLog</a></span>: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ConcurrencyLimits\" title=\"Concurrency Limits\">ConcurrencyLimits</a></span> match, can reuse claim log of note</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2808\" onclick=\"get_ticket_and_populate_wrapper('2808'); return false;\" title=\"Dedicated Scheduler doesn't work with fast dynamic slot partitioning\">#2808</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDedicated Scheduler doesn't work with fast dynamic slot partitioning</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2818\" onclick=\"get_ticket_and_populate_wrapper('2818'); return false;\" title=\"schedd dslot claiming does not respect +AccountingGroup\">#2818</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nschedd dslot claiming does not respect +AccountingGroup</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2936\" onclick=\"get_ticket_and_populate_wrapper('2936'); return false;\" title=\"CLAIM_PARTITIONABLE_LEFTOVERS=True segfaults\">#2936</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCLAIM_PARTITIONABLE_LEFTOVERS=True segfaults</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5577\" onclick=\"get_ticket_and_populate_wrapper('5577'); return false;\" title=\"RunningJobs and FlockedJobs in submitter ads are messed up\">#5577</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RunningJobs\" title=\"Running Jobs\">RunningJobs</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FlockedJobs\" title=\"Flocked Jobs\">FlockedJobs</a></span> in submitter ads are messed up</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-21 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/15837e2c677766c2fdc990266dc0334d17e7b471\">[30648]</a></span>: Edit, correct spelling, and add defn of knob CLAIM_PARTITIONABLE_LEFTOVERS; took the opportunity to improve some related index entries. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2790\" onclick=\"get_ticket_and_populate_wrapper('2790'); return false;\" title=\"allow schedd to claim multiple dynamic slots w/o negotiation cycle\">#2790</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-09 10:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4010ee4cb79de0080007265caaca27bc0b84ddbe\">[30547]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2790\" onclick=\"get_ticket_and_populate_wrapper('2790'); return false;\" title=\"allow schedd to claim multiple dynamic slots w/o negotiation cycle\">#2790</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-27 14:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a1bb9c7940bcc4fa821070373a46da421464157e\">[29998]</a></span>: This test expects claim_partitionable_leftovers=false behavior. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2790\" onclick=\"get_ticket_and_populate_wrapper('2790'); return false;\" title=\"allow schedd to claim multiple dynamic slots w/o negotiation cycle\">#2790</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-26 10:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e363aa827d5bc826afa80a5aa28561387f674af9\">[29602]</a></span>: Fix warnings <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2790\" onclick=\"get_ticket_and_populate_wrapper('2790'); return false;\" title=\"allow schedd to claim multiple dynamic slots w/o negotiation cycle\">#2790</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-26 09:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fe3211279d7e91c733e03a9e1f54d8afc008e258\">[29599]</a></span>: Implement CLAIM_PARTITIONABLE_LEFTOVERS. In the claiming protocol, when the schedd claims a partitionable slot, the startd can now send back the partitionable slot ad and claimid for the \"leftover\" resources. This allows the schedd to claim multiple dynamic slots without waiting for a negotiation cycle\u00a0[...]\n (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-May-30 12:33", "status": "resolved", "created": "2012-Jan-26 08:59", "fixed_version": "2012-Jan-26 08:59", "broken_version": "", "priority": "2", "subsystem": "Daemons", "assigned_to": "tannenba", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "tstclair@redhat.com matt@cs.wisc.edu", "due_date": ""}