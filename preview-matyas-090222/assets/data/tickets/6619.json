{"id": 6619, "title": "Ticket #6619: Add support for schedd query options in Python bindings", "description": "<blockquote>\nQueries sent to the schedd may specify various query options, but currently this functionality is not exposed in the Python bindings by the <code>htcondor.Schedd.query()</code> method. This ticket will add support for an <code>opts</code> parameter with the following possible enum values:\n\n<p></p><pre>   htcondor.QueryOpts.Default\n   htcondor.QueryOpts.DefaultMyJobsOnly\n   htcondor.QueryOpts.AutoCluster\n   htcondor.QueryOpts.GroupBy\n   htcondor.QueryOpts.SummaryOnly\n</pre>\n\n<p>In particular, the <a class=\"external\" href=\"http://glideinwms.fnal.gov\">glideinWMS project</a> would like to utilize the <code>GroupBy</code> functionality to (hopefully) significantly improve scalability when the front-end queries busy VO schedds containing a very large number of jobs.\n\n</p><p>A future child ticket will add these options to the <code>htcondor.Schedd.xquery()</code> method.</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-29 05:33:01 by bbockelm:</em> <br/>\n\nHi Todd,\n\n<p>Actually, I think we should strongly, strongly discourage use of the query method (or rewrite it as a small wrapper on top of xquery) given the additional load it places on the schedd.\n\n</p><p>Especially folks we collaborate closely with like gWMS should be able to migrate.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2018-May-10 14:48:02 by tannenba:</em> <br/>\n\nRe comment above about query() vs xquery() :  nowadays they both place the same load on the schedd, since query() now also uses the more efficient \"V3\" query protocol when talking to the schedd just like xquery().\n\n<p></p><hr/>\n<em>2018-Jun-26 11:34:44 by tannenba:</em> <br/>\n\nThis ticket looks like a dup of <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=5684\" onclick=\"get_ticket_and_populate_wrapper('5684'); return false;\" title=\"python bindings for condor_q v3 query can't do all v8.5 features\">#5684</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-01 07:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c96f0f19a836f1492df1fa687e8793811ab75aa4\">[54999]</a></span>: Improve version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6619\" onclick=\"get_ticket_and_populate_wrapper('6619'); return false;\" title=\"Add support for schedd query options in Python bindings\">#6619</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-May-10 16:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6895f438c0a5bf209081bd4f4f9fc147f94dc04e\">[54911]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6612\" onclick=\"get_ticket_and_populate_wrapper('6612'); return false;\" title=\"condor_submit fails on docker universe jobs without an executable line\">#6612</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6619\" onclick=\"get_ticket_and_populate_wrapper('6619'); return false;\" title=\"Add support for schedd query options in Python bindings\">#6619</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6648\" onclick=\"get_ticket_and_populate_wrapper('6648'); return false;\" title=\"Remove gsoap from HTCondor\">#6648</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-21 16:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3793524fa3ca81bf6742fcbfec8ccea7c43ac629\">[54553]</a></span>: Expose several schedd query options to python api query() method. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6619\" onclick=\"get_ticket_and_populate_wrapper('6619'); return false;\" title=\"Add support for schedd query options in Python bindings\">#6619</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-21 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/23b36c96de78846f94a9342c06b8ee8db2be6a42\">[54552]</a></span>: Improve error mesages for failed python query() of schedd. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6619\" onclick=\"get_ticket_and_populate_wrapper('6619'); return false;\" title=\"Add support for schedd query options in Python bindings\">#6619</a></span> Specifically, use a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> stack and return msg to the user.  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Jun-26 11:34", "status": "resolved", "created": "2018-Mar-21 16:49", "fixed_version": "2018-Mar-21 16:49", "broken_version": "", "priority": "2", "subsystem": "PythonBinding", "assigned_to": "tannenba", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "bbockelm@cse.unl.edu tannenba@cs.wisc.edu marcom@fnal.gov parag@fnal.gov", "due_date": ""}