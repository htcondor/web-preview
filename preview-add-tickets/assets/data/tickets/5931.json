{"id": 5931, "title": "Ticket #5931: Inefficient JobRouter updates", "description": "<blockquote>\nUpdates are pushed from the job router to HTCondor-CE schedd in the following manner:\n<div class=\"verbatim\">\n<pre>for each job:\n  connect to schedd\n  set effective owner\n  setattribute (with ACK)\n  disconnect\n</pre></div>\n\n\n<p>This results in a huge number of connects / disconnects.  Even worse - each 'connect' also causes a parse of the <code>.schedd_ad</code> and the job_router is also connecting via the condor_shared_port, adding more latency.\n\n</p><p>It should be possible to do this in bulk - hoist the schedd connection outside the <code>for</code> loop and reuse it for each job.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-29 13:04:09 by bbockelm:</em> <br/>\n\nOh - and obviously, it would be better to do the job updates in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NoAck\" title=\"No Ack\">NoAck</a></span> mode.  That's not the first-order cause of delay right now, however.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2016-Sep-29 14:56", "status": "new", "created": "2016-Sep-29 12:57", "fixed_version": "2016-Sep-29 12:57", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "bbockelm@cse.unl.edu iain.steers@cern.ch", "due_date": ""}