{"id": 1334, "title": "Ticket #1334: cream job lease renewal broken by batched status command", "description": "<blockquote>\nThe code enhancements to batch cream job status commands (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=939\" title=\"Issue single status command for all cream jobs\">#939</a></span>) accidentally caused cream job leases to not be renewed in most cases. The individual <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamJob\" title=\"Cream Job\">CreamJob</a></span> objects need to determine when the job lease will need to be renewed and arrange to be called back then.</blockquote>", "remarks": "<blockquote>\n<em>2010-Apr-06 14:10:20 by jfrey:</em> <br/>\n\nPushed a fix to master for 7.5.3.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-06 14:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=17793\">[17793]</a></span>: Fix job lease renewal for cream jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1334\" title=\"cream job lease renewal broken by batched status command\">#1334</a></span> The code enhancements to batch cream job status commands (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=939\" title=\"Issue single status command for all cream jobs\">#939</a></span>) accidentally caused cream job leases to not be renewed in most cases. Now, the individual <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamJob\" title=\"Cream Job\">CreamJob</a></span> objects determine when the job lease will need to be renewed and set the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=EvaluateState\" title=\"Evaluate State\">EvaluateState</a></span> timer to\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-06 14:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=17792\">[17792]</a></span>: CalculateJobLease() can now return when lease will need to be renewed. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1334\" title=\"cream job lease renewal broken by batched status command\">#1334</a></span> When CalculateJobLease() indicates that it's not yet time to renew the job lease, the caller can optionally ask when that time will be. If a renewal will never be required, the function returns INT_MAX.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Apr-06 14:10", "status": "resolved", "created": "2010-Apr-06 14:03", "fixed_version": "2010-Apr-06 14:03", "broken_version": "v070500", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}