{"id": 7085, "title": "Ticket #7085: Add uploads to Box multifile transfer plugin", "description": "<blockquote>\nMultifile transfer plugins can also accept a \"-upload\" argument to signal that files should be uploaded. We can and should support this for the Box transfer plugin.</blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-08 16:36:11 by jpatton:</em> <br/>\n\n<span class=\"chng\"><a href=\"chngview?cn=57348\">[57348]</a></span> added upload capability, though there is a bug/oversight currently in the filetransfer plugin framework where certain transfer statistics are <strong>required</strong> for uploads (e.g. <code>TransferUrl</code>) while they are optional for downloads. It doesn't make much sense to include the <code>TransferUrl</code> for plugins of this type, it's always going to be something like <a class=\"external\" href=\"https://upload.box.com/api/2.0/files/21487435/content\">https://upload.box.com/api/2.0/files/21487435/content</a>, and I'm not sure it's great to be leaving file id numbers (the 21487435 part of the URL above) around on disk.\n\n<p>As is, uploading using the box plugin gives the following hold message, even though the upload completes successfully. I have verified that jamming in a bogus <code>TransferUrl</code> into the output classad prevents the hold message/leads to successful completion (in HTCondor's eyes):\n\n</p><p></p><div class=\"verbatim\">\n<pre>Error from slot2@localhost: STARTER at xxx.xxx.xxx.xxx failed to send file(s) to &lt;xxx.xxx.xxx.xxx:9618&gt;: :\nFILETRANSFER:1:Multi-file plugin at /opt/file_transfer_plugins/box_plugin.py did not produce valid response;\nmissing TransferUrl; SHADOW failed to receive file(s) from &lt;xxx.xxx.xxx.xxx:1955&gt;\n</pre></div>\n\n\n<p></p><hr/>\n<em>2019-Jul-10 10:27:14 by jpatton:</em> <br/>\n\nFor now I'm using a generic <code>TransferUrl</code> (the upload endpoint without the file id) to avoid jobs going on hold.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-19 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57693\">[57693]</a></span>: Add box and gdrive transfer plugins to Windows install <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7085\" onclick=\"get_ticket_and_populate_wrapper('7085'); return false;\" title=\"Add uploads to Box multifile transfer plugin\">#7085</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7136\" onclick=\"get_ticket_and_populate_wrapper('7136'); return false;\" title=\"Add Google Drive multifile transfer plugin\">#7136</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-12 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57412\">[57412]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7085\" onclick=\"get_ticket_and_populate_wrapper('7085'); return false;\" title=\"Add uploads to Box multifile transfer plugin\">#7085</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-10 10:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57367\">[57367]</a></span>: Adding <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TransferUrl\" title=\"Transfer Url\">TransferUrl</a></span> to output stats for box_plugin.py <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7085\" onclick=\"get_ticket_and_populate_wrapper('7085'); return false;\" title=\"Add uploads to Box multifile transfer plugin\">#7085</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-10 09:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57366\">[57366]</a></span>: Small fix to box_plugin when dealing with paginated results <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7085\" onclick=\"get_ticket_and_populate_wrapper('7085'); return false;\" title=\"Add uploads to Box multifile transfer plugin\">#7085</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-08 16:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57348\">[57348]</a></span>: Added upload capability to box_plugin.py <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7085\" onclick=\"get_ticket_and_populate_wrapper('7085'); return false;\" title=\"Add uploads to Box multifile transfer plugin\">#7085</a></span>  (By Jason Patton )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Jul-12 14:39", "status": "resolved", "created": "2019-May-31 10:11", "fixed_version": "2019-May-31 10:11", "broken_version": "v080902", "priority": "2", "subsystem": "FileTransfer", "assigned_to": "jpatton", "derived_from": "#7007", "creator": "jpatton", "rust": "", "customer_group": "scitokens", "visibility": "public", "notify": "", "due_date": ""}