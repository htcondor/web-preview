{"id": 7847, "title": "Ticket #7847: DAGMan inline submit descriptions declared independent of jobs", "description": "<blockquote>\nIn <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7352\" onclick=\"get_ticket_and_populate_wrapper('7352'); return false;\" title=\"Add DAGMan inline submit descriptions\">#7352</a></span> we added the ability for DAGMan jobs to be described inline in a .dag file without requiring a separate submit file. As a result, you can now write an inline job description like in the following example:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">JOB MyJob {\n    executable = /bin/echo\n    arguments = Hello, world!\n    output = helloworld.out\n}\n</pre></div>\n\n\n<p>While this is a nice convenience for users, it isn't that helpful at the moment because different jobs cannot share the same submit description. We want to add a new <strong>condor_dagman</strong> command, <code>SUBMIT-DESCRIPTION</code>, that allows submit descriptions to be defined independently of jobs and referenced by name. For example:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">SUBMIT-DESCRIPTION MyInlineDescription {\n    executable = /bin/echo\n    arguments = Hello, world!\n    output = helloworld.out\n}\nJOB MyJob MyInlineDescription\n</pre></div>\n\n\n<p>As an implementation detail, we'll make a new data structure in <strong>condor_dagman</strong> (probably a std::map) that maps description names to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SubmitHash\" title=\"Submit Hash\">SubmitHash</a></span> objects. Description names must be unique. If a submit description is defined as part of a <code>JOB</code> command, it gets the name of the job. If defined independently as a <code>SUBMIT-DESCRIPTION</code>, the user is expected to provide a name. Any naming collision will cause <strong>condor_dagman</strong> to abort at parse time with an error in the log.\n\n</p><p>Another implementation challenge is parsing: does a <code>SUBMIT-DESCRIPTION</code> need to be defined before a <code>JOB</code> can reference it? On the first pass, we'll expect these to be defined in order. Later, we should look into how we could pre-parse these descriptions so that order doesn't matter.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Nov-09 15:19:17 by coatsworth:</em> <br/>\n\nContinued in Jira HTCONDOR-64: <a class=\"external\" href=\"https://opensciencegrid.atlassian.net/browse/HTCONDOR-64\">https://opensciencegrid.atlassian.net/browse/HTCONDOR-64</a></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Nov-18 15:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61690\">[61690]</a></span>: Added version history (<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7847\" onclick=\"get_ticket_and_populate_wrapper('7847'); return false;\" title=\"DAGMan inline submit descriptions declared independent of jobs\">#7847</a></span>) (HTCONDOR-64)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Nov-18 14:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61688\">[61688]</a></span>: Added documentation (<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7847\" onclick=\"get_ticket_and_populate_wrapper('7847'); return false;\" title=\"DAGMan inline submit descriptions declared independent of jobs\">#7847</a></span>) (HTCONDOR-64)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-25 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61375\">[61375]</a></span>: Basic implementation of independently-declared DAGMan submit descriptions (<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7847\" onclick=\"get_ticket_and_populate_wrapper('7847'); return false;\" title=\"DAGMan inline submit descriptions declared independent of jobs\">#7847</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Nov-18 10:24", "status": "abandoned", "created": "2020-Sep-08 13:43", "fixed_version": "2020-Sep-08 13:43", "broken_version": "v080908", "priority": "3", "subsystem": "Dag", "assigned_to": "coatsworth", "derived_from": "#7352", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}