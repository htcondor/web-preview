{"id": 3647, "title": "Ticket #3647: init.d script improvements for condor rpm", "description": "<blockquote>\nCurrently some users (notably Fermilab) customize their init.d script for HTCondor.  These customizations get blown away on upgrades because the script is not marked as a config file in the RPM.\n\n<p>One option was to mark the script as %config(noreplace), but this was turned down in favor of fixing the limitations of the init.d script and providing a proper place for customizations.\n\n</p><p>In particular, we would like to provide for the following:\n</p><ol>\n<li>add a ulimit statement to boost the number of allowed file descriptors\n</li><li>add a new command to the init script, service condor drain, which\nsends a condor_off -peaceful to the condor_master on the node\n</li><li>fix the /var/lock/subsys file so it is the correct  name.  Otherwise\nthe redhat shutdown script doesn't even attempt to shut down condor at\nsystem shutdown, which can lead to a virtual machine hang if you are running\ncondor in a VM.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2013-May-21 13:53:55 by edquist:</em> <br/>\n\nSee attached email from Steve Timm describing his usage scenario / need for these improvements.\n\n<p></p><hr/>\n<em>2013-May-21 14:05:53 by tannenba:</em> <br/>\n\nAbandoning this ticket, as it is 95% a dup of <span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=3450\" onclick=\"get_ticket_and_populate_wrapper('3450'); return false;\" title=\"problems with the RPM condor init script\">#3450</a></span>.  Please check if a ticket already exists for an issue before creating a new ticket -- if it helps, you can easily <a class=\"external\" href=\"https://htcondor-wiki.cs.wisc.edu/index.cgi/rptview?rn=4&amp;order_by=5&amp;order_dir=ASC&amp;Type=ALL&amp;Status=ALL&amp;Subsys=Packaging&amp;Group=ALL&amp;Visibility=ALL&amp;Created_By=ALL&amp;Assigned_To=ALL\">view all tickets related to packaging</a>.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/735/condor-init.d-improvements.txt\">condor-init.d-improvements.txt</a>\n3369 bytes added by edquist on 2013-May-21 18:53:08 UTC.\n<br/>\nEmail from Steve Timm describing his usage scenario.<br/>\n</li></ul>\n</blockquote>", "check_ins": "", "type": "todo", "last_change": "2013-May-21 15:58", "status": "abandoned", "created": "2013-May-21 13:51", "fixed_version": "2013-May-21 13:51", "broken_version": "", "priority": "4", "subsystem": "Packaging", "assigned_to": "edquist", "derived_from": "", "creator": "edquist", "rust": "", "customer_group": "other", "visibility": "public", "notify": "edquist@cs.wisc.edu", "due_date": ""}