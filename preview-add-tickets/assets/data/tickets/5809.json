{"id": 5809, "title": "Ticket #5809: peaceful shutdown command not behaving as messages indicate", "description": "<blockquote>\nThere is no evidence that this command actually sends any messages to the startd despite what it prints out. I've tried variations on this command including the FQDN and slot1@FQDN.\n\n<p></p><div class=\"verbatim\">\n<pre>root@condorcm:~# condor_off -peaceful execute1034\nSent \"Set-Peaceful-Shutdown\" command to startd execute1034.nemo.phys.uwm.edu\nCan't find address for schedd execute1034.nemo.phys.uwm.edu\nCan't find address for execute1034.nemo.phys.uwm.edu\n</pre></div>\n\n\n<p>So I RTFM'd and see that you recommend including -startd in the argument list. I tried that. It outwardly looks better\n\n</p><p></p><div class=\"verbatim\">\n<pre>root@condorcm:~# condor_off -peaceful -startd execute1034.nemo.phys.uwm.edu\nSent \"Set-Peaceful-Shutdown\" command to startd execute1034.nemo.phys.uwm.edu\nSent \"Kill-Daemon-Peacefully\" command to master execute1034.nemo.phys.uwm.edu\n</pre></div>\n\n\n<p>And the jobs go into the retiring state, which seems reasonable enough. But the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span> actually prints that it's doing a graceful shutdown.\n\n</p><p></p><div class=\"verbatim\">\n<pre>07/27/16 10:27:34 Got SIGTERM. Performing graceful shutdown.\n07/27/16 10:27:34 shutdown graceful\n</pre></div>\n\n\n<p>So I think the right command is doing the right thing but logging inaccurately. I think a command that should be right-enough is print half the right-message but doing nothing.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Jul-27 11:24:37 by wenger:</em> <br/>\n\nHmm -- seems like there are several problems here:\n<ul>\n<li>Without -startd, the right thing is not even happening.\n</li><li>The message is confusing/incorrect.\n</li></ul>\n\n<p>(BTW, condor_off -help says that -startd, etc., are deprecated.  So apparently, \"-daemon startd\" is preferred.)</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "todo", "last_change": "2016-Jul-27 11:24", "status": "defer", "created": "2016-Jul-27 10:36", "fixed_version": "2016-Jul-27 10:36", "broken_version": "v080505", "priority": "5", "subsystem": "", "assigned_to": "wenger", "derived_from": "", "creator": "tpdownes", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "wenger@cs.wisc.edu, gthain@cs.wisc.edu,downes@uwm.edu,pcouvare@caltech.edu", "due_date": ""}