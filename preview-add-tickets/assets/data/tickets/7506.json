{"id": 7506, "title": "Ticket #7506: Interactive job executable command different with submission file", "description": "<blockquote>\nThe code in src/condor_examples/interactive.sub now uses:\n<div class=\"code\">\n<pre class=\"code\">executable = /bin/sh\narguments = \"-c 'sleep 180 &amp;&amp; while test -d ${_CONDOR_SCRATCH_DIR}/.condor_ssh_to_job_1; do /bin/sleep 3; done'\"\n</pre></div>\n\nThis is used if the user does not specify an interactive submit file:\n<div class=\"code\">\n<pre class=\"code\">condor_submit -interactive\n</pre></div>\n\nThis fixes the issue that Singularity interactive jobs are killed after 180 seconds.\n\n<p>However, the code in src/condor_submit.V6/submit.cpp uses:\n</p><div class=\"code\">\n<pre class=\"code\">if ( !InteractiveSubmitFile ) {\n  extraLines.Append( \"executable=/bin/sleep\" );\n  extraLines.Append( \"transfer_executable=false\" );\n  extraLines.Append( \"arguments=180\" );\n}\n</pre></div>\n\nas was used in previous versions. This is used when the user supplies a custom file, for example:\n<div class=\"code\">\n<pre class=\"code\">condor_submit -interactive mysub.jdl\n</pre></div>\n\nand with Singularity interactive jobs causes them to be terminated after 180 seconds, so this code also needs to be adapted to be consistent.</blockquote>", "remarks": "<blockquote>\n<em>2020-Apr-27 08:09:49 by tim:</em> <br/>\n\n<strong>CODE REVIEW</strong>: looks good</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Feb-28 11:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59067\">[59067]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7506\" onclick=\"get_ticket_and_populate_wrapper('7506'); return false;\" title=\"Interactive job executable command different with submission file\">#7506</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Feb-28 11:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59066\">[59066]</a></span>: Fix interactive submit with a submit file to work with containers <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7506\" onclick=\"get_ticket_and_populate_wrapper('7506'); return false;\" title=\"Interactive job executable command different with submission file\">#7506</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2020-Apr-27 08:10", "status": "resolved", "created": "2020-Feb-16 13:34", "fixed_version": "2020-Feb-16 13:34", "broken_version": "v080803", "priority": "4", "subsystem": "", "assigned_to": "tim", "derived_from": "", "creator": "olifre", "rust": "", "customer_group": "other", "visibility": "public", "notify": "peter.wienemann@uni-bonn.de, freyermuth@physik.uni-bonn.de", "due_date": ""}