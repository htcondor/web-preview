{"id": 2986, "title": "Ticket #2986: Master not sleeping before relaunching the collector", "description": "<blockquote>\nIt might be related to <span class=\"ticket\"><a class=\"new\" href=\"tktview?tn=2985\" title=\"Detect linker errors on process startup\">#2985</a></span>, but I'm seeing the master restart the collector in a tight loop.\n\n<p>See below - the master logs it will wait 3600 seconds, but doesn't wait at all.\n\n</p><p></p><div class=\"verbatim\">\n<pre>\n05/10/12 18:28:35 The COLLECTOR (pid 18330) exited with status 127\n05/10/12 18:28:35 restarting /home/bbockelm/projects/condor/src/condor_collector.V6/condor_collector in 3600 seconds\n05/10/12 18:28:35 enter Daemons::UpdateCollector\n05/10/12 18:28:35 Trying to update collector &lt;129.93.229.195:9618&gt;\n05/10/12 18:28:35 Attempting to send update via UDP to collector rcf-bockelman.unl.edu &lt;129.93.229.195:9618&gt;\n05/10/12 18:28:35 exit Daemons::UpdateCollector\n05/10/12 18:28:35 attempt to connect to &lt;129.93.229.195:9618&gt; failed: Connection refused (connect errno = 111).\n05/10/12 18:28:35 ERROR: SECMAN:2004:Failed to create security session to &lt;129.93.229.195:9618&gt; with TCP.\n|SECMAN:2003:TCP connection to &lt;129.93.229.195:9618&gt; failed.\n05/10/12 18:28:35 Failed to start non-blocking update to &lt;129.93.229.195:9618&gt;.\n05/10/12 18:28:36 ::RealStart; COLLECTOR on_hold=0\n05/10/12 18:28:36 Looking for matching Collector on 'rcf-bockelman.unl.edu' ...\n05/10/12 18:28:36 Matching 'rcf-bockelman.unl.edu:9618'\n05/10/12 18:28:36 Host name matches collector &lt;129.93.229.195:9618&gt;.\n05/10/12 18:28:36 Finished looking for Collectors.\n05/10/12 18:28:36 Starting Collector on port 9618\n05/10/12 18:28:36 start recover timer (455)\n05/10/12 18:28:36 Started DaemonCore process \"/home/bbockelm/projects/condor/src/condor_collector.V6/condor_collector -f\", pid and pgroup = 18331\n05/10/12 18:28:36 enter Daemons::UpdateCollector\n05/10/12 18:28:36 Trying to update collector &lt;129.93.229.195:9618&gt;\n05/10/12 18:28:36 Attempting to send update via UDP to collector rcf-bockelman.unl.edu &lt;129.93.229.195:9618&gt;\n05/10/12 18:28:36 exit Daemons::UpdateCollector\n05/10/12 18:28:36 Waiting for /var/log/condor/.collector_address to appear.\n05/10/12 18:28:36 attempt to connect to &lt;129.93.229.195:9618&gt; failed: Connection refused (connect errno = 111).\n05/10/12 18:28:36 ERROR: SECMAN:2004:Failed to create security session to &lt;129.93.229.195:9618&gt; with TCP.\n|SECMAN:2003:TCP connection to &lt;129.93.229.195:9618&gt; failed.\n05/10/12 18:28:36 Failed to start non-blocking update to &lt;129.93.229.195:9618&gt;.\n05/10/12 18:28:36 DaemonCore: No more children processes to reap.\n05/10/12 18:28:36 The COLLECTOR (pid 18331) exited with status 127\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2012-May-11 08:17", "status": "new", "created": "2012-May-10 18:48", "fixed_version": "2012-May-10 18:48", "broken_version": "v070800", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu, tstclair@redhat.com", "due_date": ""}