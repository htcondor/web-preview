{"id": 5277, "title": "Ticket #5277: DAG nodes that are NOOPs cause assertion on retries", "description": "<blockquote>\nReported by Karan Vahi -- he has a NOOP node that gets retried (because the POST script fails).  He gets this error:\n\n<p></p><pre>  09/24/15 11:17:06 ERROR \"Assertion ERROR on (JobIsNoop( condorID ) == node-&gt;GetNoop())\" at line 3998 in file /Volumes/MacintoshHD2/condor/slot/dir_10281/userdir/src/condor_dagman/dag.cpp\n</pre>\n\n<p>(This is with version 8.2.3.)\n\n</p><p>With 8.5.1, I get a slightly different error:\n\n</p><p></p><pre>  09/24/15 15:52:32 ERROR \"Assertion ERROR on (JobIsNoop( condorID ) == node-&gt;GetNoop())\" at line 3905 in file /u/w/e/wenger/cb/git2/CONDOR_SRC/src/condor_dagman/dag.cpp\n</pre>\n\n<p>Anyhow, though, this should work and doesn't...</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Oct-01 11:02:27 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: The assert was simply removed.  I discussed with Kent why it was wrong and this change makes sense.\n\n<p></p><hr/>\n<em>2015-Oct-01 11:17:14 by wenger:</em> <br/>\n\nI'm going to change this back to the \"active\" status, because I still need to merge it.\n\n<p></p><hr/>\n<em>2015-Oct-02 14:14:51 by wenger:</em> <br/>\n\nThis has now been merged to 8.4 and master (8.5), so I'm going to resolve the ticket.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/905/gt5277.dif\">gt5277.dif</a>\n4624 bytes added by wenger on 2015-Sep-30 17:16:54 UTC.\n<br/>\nHere's a complete diff of what has been done on the branch.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-02 13:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45916\">[45916]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5277\" title=\"DAG nodes that are NOOPs cause assertion on retries\">#5277</a></span>: Clarified version history item slightly.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Sep-25 16:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45895\">[45895]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5277\" title=\"DAG nodes that are NOOPs cause assertion on retries\">#5277</a></span>: Added test of NOOP node with PRE script causing retry; test script checks for retries of new nodes.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Sep-25 14:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45894\">[45894]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5277\" title=\"DAG nodes that are NOOPs cause assertion on retries\">#5277</a></span>: Fixed the problem by just eliminating the assertion that was failing (I'm not sure why that was in there in the first place). Also added version history item.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Sep-25 12:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45893\">[45893]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5277\" title=\"DAG nodes that are NOOPs cause assertion on retries\">#5277</a></span>: Modified one of the DAG retry tests to catch this bug.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Oct-02 14:15", "status": "resolved", "created": "2015-Sep-24 16:08", "fixed_version": "2015-Sep-24 16:08", "broken_version": "v080203", "priority": "1", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, zmiller@cs.wisc.edu, vahi@isi.edu", "due_date": ""}