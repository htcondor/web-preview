{"id": 5681, "title": "Ticket #5681: DAGMan fails to detect that node jobs have left the queue", "description": "<blockquote>\nI just talked to Karan Vahi, and he reports that Pegasus has seen some cases where DAGMan has failed to recognize that node jobs have left the queue.\n\n<p>Interestingly, he says that in these cases there is no terminated event in the workflow log file, but condor_q reports the job as no longer being in the queue.  That means that there's clearly a problem outside of DAGMan itself.\n\n</p><p>However, Karan suggests that if we go too long without getting any events, DAGMan should directly query the schedd about jobs it still thinks are in the queue.  If the job is no longer in the queue, DAGMan would consider the job failed (and initiate a retry, if one is defined).\n\n</p><p>Hmm -- if we do this, we need to think about how it will interact with recovery mode.  Maybe DAGMan should write a fake terminated event to the workflow log if we declare one of these nodes failed.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2016-May-18 15:40", "status": "new", "created": "2016-May-18 15:40", "fixed_version": "2016-May-18 15:40", "broken_version": "", "priority": "3", "subsystem": "Dag", "assigned_to": "", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wi, zmiller@cs.wisc.edu, tannenba@cs.wisc.edu, vahi@isi.edu, rynge@isi.edu", "due_date": ""}