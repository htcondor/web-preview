{"id": 4418, "title": "Ticket #4418: -format \"%s\" incorrectly returns undefined for condor_q", "description": "<blockquote>\nfor HTCondor 8.1 and below, <code>condor_q -format '%s' FOO</code> would return nothing if FOO did not exist in the classad.\nHTCondor 8.2 apparently returns the string \"undefined\".\nThis is breaking some code that is parsing the output of condor_q and was counting on -format not to have the output change format.\n\n<p>Note that <code>condor_status -format \"%s\" FOO</code> correctly returns nothing.</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Jun-26 11:16:59 by johnkn:</em> <br/>\n\nThe bug was introduced as a side effect of the new non-blocking condor_q protocol. As a workaround, you can set\n\n<p></p><pre>  CONDOR_Q_USE_V3_PROTOCOL=false\n</pre>\n\n<p>to get the old behavior back.\n\n</p><p></p><hr/>\n<em>2014-Aug-04 15:29:33 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>These changes look good.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4420\" onclick=\"get_ticket_and_populate_wrapper('4420'); return false;\" title=\"async condor_q may not return results properly\">#4420</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nasync condor_q may not return results properly</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-17 10:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=40692\">[40692]</a></span>: edit of 8.2.2 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4418\" onclick=\"get_ticket_and_populate_wrapper('4418'); return false;\" title='-format \"%s\" incorrectly returns undefined for condor_q'>#4418</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-09 16:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=40582\">[40582]</a></span>: permit projection for async condor_q to be a string like all the other commands with projection <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4418\" onclick=\"get_ticket_and_populate_wrapper('4418'); return false;\" title='-format \"%s\" incorrectly returns undefined for condor_q'>#4418</a></span> ===VersionHistory:None=== not a user-visible change  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-07 15:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=40564\">[40564]</a></span>: quick fix to broken LaTeX within the manual <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4418\" onclick=\"get_ticket_and_populate_wrapper('4418'); return false;\" title='-format \"%s\" incorrectly returns undefined for condor_q'>#4418</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-07 11:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=40559\">[40559]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4418\" onclick=\"get_ticket_and_populate_wrapper('4418'); return false;\" title='-format \"%s\" incorrectly returns undefined for condor_q'>#4418</a></span>, condor_q -format \"%s\" prints \"undefined\" for non-existent attributes when it should print nothing. ===VersionHistory:Complete===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Aug-07 11:40", "status": "resolved", "created": "2014-Jun-25 10:21", "fixed_version": "2014-Jun-25 10:21", "broken_version": "v080200", "priority": "2", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "users", "visibility": "public", "notify": "burt@fnal.gov", "due_date": ""}