{"id": 2463, "title": "Ticket #2463: condor_q -dag incorrectly assigns node jobs", "description": "<blockquote>\nHere's some output from condor_q -dag on submit.chtc:\n\n<p></p><pre>  ...\n  4094706.0   bt              9/13 14:29   0+00:17:13 R  0   12.2 condor_dagman -f -\n  4094707.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094708.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094709.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094710.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094711.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094712.0    |-dataset_one  9/13 14:29   0+00:00:00 I  0   0.0  process.pl dataset\n  4094716.0    |-sim001       9/13 14:33   0+00:03:04 R  0   1.2  ffsm_sphr.exe ./ .\n  4094717.0    |-sim002       9/13 14:33   0+00:03:04 R  0   1.2  ffsm_sphr.exe ./ .\n  4094718.0    |-sim003       9/13 14:33   0+00:03:04 R  0   1.2  ffsm_sphr.exe ./ .\n  ...\n</pre>\n\n<p>The sim... nodes don't belong to bt's DAG (as confirmed by looking at the DAGManJobId values in their classads), but condor_q -dag incorrectly groups them under that DAG.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-19 09:34:55 by nwp:</em> <br/>\n\nDid this get fixed by <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span>?\n\n<p></p><hr/>\n<em>2011-Dec-19 10:37:11 by nwp:</em> <br/>\n\nI am looking at the submit host at chtc.  This case seems to happen if the <code>condor_dagman</code> process dies.  I do not believe my code for <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span> fixes this.\n\n<p></p><hr/>\n<em>2011-Dec-19 12:13:58 by nwp:</em> <br/>\n\nI submitted a new build to batlab, with a patch that will fix this, I believe.\n\n<p></p><hr/>\n<em>2011-Dec-19 22:27:59 by nwp:</em> <br/>\n\nI have verified that my patch to <code>condor_q</code> fixes this problem.  The new version of <code>condor_q</code> can be run on the CHTC submit node with the following commands:\n<div class=\"code\">\n<pre class=\"code\">export LD_LIBRARY_PATH=/lib64:/usr/lib64:/usr/lib64/condor:$LD_LIBRARY_PATH\n~nwp/condor_q -dag\n</pre></div>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-10 11:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=29043\">[29043]</a></span>: Reorder version history items to group DAGMan ones together; move a bug fix item mistakenly placed with the new features; edit version history items and correct spelling; update the condor_q man page to represent the new feature. ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span> ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2463\" onclick=\"get_ticket_and_populate_wrapper('2463'); return false;\" title=\"condor_q -dag incorrectly assigns node jobs\">#2463</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-19 22:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28862\">[28862]</a></span>: Document another formatting fix for condor_q -dag ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2463\" onclick=\"get_ticket_and_populate_wrapper('2463'); return false;\" title=\"condor_q -dag incorrectly assigns node jobs\">#2463</a></span> ===VersionHistory===  (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-19 20:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28860\">[28860]</a></span>: Try to take care of spacing properly when formatting a DAG Also, I believe this solves <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2463\" onclick=\"get_ticket_and_populate_wrapper('2463'); return false;\" title=\"condor_q -dag incorrectly assigns node jobs\">#2463</a></span> ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1281\" onclick=\"get_ticket_and_populate_wrapper('1281'); return false;\" title=\"condor_q -dag doesn't understand nested DAGs\">#1281</a></span>  (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-May-07 12:34", "status": "resolved", "created": "2011-Sep-13 14:49", "fixed_version": "2011-Sep-13 14:49", "broken_version": "v070701", "priority": "2", "subsystem": "Tools", "assigned_to": "nwp", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "wenger@cs.wisc.edu, bt@cs.wisc.edu", "due_date": ""}