{"id": 3640, "title": "Ticket #3640: support UW-style builds in the unified condor rpm", "description": "<blockquote>\nUsing the OSG condor spec as a baseline, add support for the UW-style build (as opposed to PROPER).  This includes standard universe.</blockquote>", "remarks": "<blockquote>\n<em>2013-May-22 10:55:16 by tstclair:</em> <br/>\n\nThis should just be a %variable to enable.\n\n<p></p><hr/>\n<em>2013-Jun-12 10:18:21 by edquist:</em> <br/>\n\nInitial attempts to enable UW_BUILD inside of mock/koji failed; there appear to be multiple issues; I think Brian B said the 32bit builds failed because there was not an appropriate glibc package for 32bit.  Brian mentioned Jaime would need to help to get past this one.  But there appear to be other errors in the 64bit builds also.  For reference, see the build logs for these failed attempts:\n\n<p></p><pre>  https://koji-hub.batlab.org/koji/taskinfo?taskID=65657\n  https://koji-hub.batlab.org/koji/taskinfo?taskID=66328\n</pre>\n\n<p>Relatedly, there is currently no combination of cmake flags that can be specified to build standard universe in a PROPER style build (ie, without downloading, building and packaging all the externals).  The FW team is planning to do some work on the cmake scripts to remove the requirement on all the externals for standard universe to build.\n\n</p><p></p><hr/>\n<em>2013-Jun-12 11:04:43 by bbockelm:</em> <br/>\n\nFirst link shows the 32-bit externals issue.\n\n<p>The second link is a RPM specfile issue (trying to move a file which doesn't exist), not related to the build.\n\n</p><p></p><hr/>\n<em>2013-Jun-18 11:12:51 by edquist:</em> <br/>\n\nI asked Jaime about the 32bit issue -- he said it was because they never ported the standard universe to 32bit rhel6.\n\n<p></p><hr/>\n<em>2013-Jul-16 11:01:13 by edquist:</em> <br/>\n\nWith the exception of 32bit rhel 6, UW builds are working now (can be enabled by defining %uw_build 1).\n\n<p>There was another dependency issue that was breaking the build when building with -j24 (which is the case for our rhel5 koji builds), which I addressed by adding a cmake dependency for std_local_ref on stub_gen (for senders/receivers), and that seems to do the trick.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2015-Aug-01 21:20", "status": "resolved", "created": "2013-May-20 20:16", "fixed_version": "2013-May-20 20:16", "broken_version": "", "priority": "4", "subsystem": "Packaging", "assigned_to": "edquist", "derived_from": "#3638", "creator": "edquist", "rust": "", "customer_group": "other", "visibility": "public", "notify": "edquist@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}