{"id": 7387, "title": "Ticket #7387: readthedocs doesn't allow index links to specific headings", "description": "<blockquote>\nI keep running into a regression of readthedocs docs vs. the old docs: I can't generate stable links to specific sections, only (every-changing) index variables.  E.g., I want to link to SYSTEM_JOB_MACHINE_ATTRS, but all I can do is:\n\n<p><a class=\"external\" href=\"https://htcondor.readthedocs.io/en/latest/admin-manual/configuration-macros.html#index-506\">https://htcondor.readthedocs.io/en/latest/admin-manual/configuration-macros.html#index-506</a></p></blockquote>", "remarks": "<blockquote>\n<em>2019-Nov-19 10:58:10 by gthain:</em> <br/>\n\nPFC would like permanent html anchors and to make them visible to the user.\n\n<p>Anchors aweigh, my friends!\n\n</p><p></p><hr/>\n<em>2019-Nov-26 12:26:57 by coatsworth:</em> <br/>\n\nLots of progress on this. It sounds like the main use case for this request is to link to configuration macros. So I've added a couple new custom directives to implement this. First, you can now use the following to define a macro:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">:macro-def:`MY_MACRO_NAME_DEFINITION`\n</pre></div>\n\n\n<p>This will generate an anchor link (ie. /admin-manual/configuration-macros.html#MY_MACRO_NAME_DEFINITION) which can later be linked to. It also automatically creates an index entry.\n\n</p><p>Once you've defined a macro, then anywhere else in the docs you can link directly to it using the following:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">:macro:`MY_MACRO_NAME_DEFINITION`\n</pre></div>\n\n\n<p>One catch for the time being is that macro definitions <strong>must</strong> appear on the Administrator's Manual &gt; Configuration Macros page. If it's important to allow macro definitions to appear elsewhere, we can figure that out next.\n\n</p><p>If you want to create anchor links to non-nacro text, you can do that using built-in Sphinx functionality. To set a generic anchor anywhere on a page, use the following syntax:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">:ref:`text I want to link to &lt;my-anchor-name&gt;`\n</pre></div>\n\n\n<p>And then that text will be linkable at <code>/my-page-url.html#my-anchor-name</code>\n\n</p><p>Let me know if this is enough to do what we need? I can always add more custom extensions, but I'd rather keep these to a minimum and what we have seems sufficient.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-26 16:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58560\">[58560]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7387\" title=\"readthedocs doesn't allow index links to specific headings\">#7387</a></span>) Fixup building manpages on RHEL6 (submit-3)  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-26 16:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58559\">[58559]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7387\" title=\"readthedocs doesn't allow index links to specific headings\">#7387</a></span>) Fix build of manpages on RHEL6  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-26 12:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58558\">[58558]</a></span>: Docs macro definitions now include automatic linkable index anchor (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7387\" title=\"readthedocs doesn't allow index links to specific headings\">#7387</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-22 07:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58537\">[58537]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7387\" title=\"readthedocs doesn't allow index links to specific headings\">#7387</a></span>) Update patches to build manuals with old sphinx  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-21 17:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58536\">[58536]</a></span>: Manual macros can now be linked directly to definitions (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7387\" title=\"readthedocs doesn't allow index links to specific headings\">#7387</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Dec-02 14:45", "status": "resolved", "created": "2019-Nov-18 14:37", "fixed_version": "2019-Nov-18 14:37", "broken_version": "", "priority": "3", "subsystem": "Unknown", "assigned_to": "coatsworth", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "peter.couvares@ligo.org", "due_date": ""}