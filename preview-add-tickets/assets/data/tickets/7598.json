{"id": 7598, "title": "Ticket #7598: condor_drain -off", "description": "<blockquote>\nThe defrag daemon was causing Stuart grief by cancelling drains (after they were complete) that Stuart had ordered.\n\n<p></p><ul>\n<li>We should implement <code>condor_drain -off</code>, which turns off a startd when draining completes (and maybe the complementary <code>condor_off -drain</code>).\n\n<p></p></li><li>We should also have the startd set an attribute in each draining slot which notes if the drain came from the <strong>condor_drain</strong> command-line tool or from the daemon.\n</li></ul>\n\n<p>Since we'll probably need to extend the protocol to handle the first point, we may as well put the plumbing in for the second point at the same time.  We can decide if the defrag daemon should ignore machines with the latter's attribute set by default later.\n\n</p><p>The <strong>-off</strong> flag <em>must</em> fail if issues to a startd which doesn't support it.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2020-Apr-14 11:11", "status": "new", "created": "2020-Apr-14 11:11", "fixed_version": "2020-Apr-14 11:11", "broken_version": "", "priority": "4", "subsystem": "DaemonsExecNode", "assigned_to": "", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, sba@caltech.edu", "due_date": ""}