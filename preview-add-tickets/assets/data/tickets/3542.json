{"id": 3542, "title": "Ticket #3542: zero length chirp putfile causes assert", "description": "<blockquote>\nPutfile of a zero length file causes assertion in starter\n<div class=\"verbatim\">\n<pre>03/15/13 13:25:02 Doing CONDOR_putfile\n03/15/13 13:25:02 ERROR \"Assertion ERROR on (sz &gt; 0)\" at line 87 in file /home/jrthomas/rpmbuild/BUILD/condor-7.9.1/src/condor_io/condor_rw.cpp\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2013-Mar-20 13:55:25 by jrt:</em> <br/>\n\nputfile.patch is obsolete. Interface won't let me delete it.\n\n<p></p><hr/>\n<em>2013-May-02 11:22:19 by jrt:</em> <br/>\n\n\n<p>repro:\n\n</p><p></p><div class=\"verbatim\">\n<pre>$touch putfile0\n\n$ cat chirp2.script\n#!/bin/sh\necho \"---put zerosize\"\n/usr/libexec/condor/condor_chirp put -perm 600 putfile0 /tmp/putfile0\n\n\n$cat jrtv2.job\nexecutable = chirp2.script\nuniverse = vanilla\nuserlog = av2.log\noutput = av2.out\nerror = av2.err\n+WantIOProxy = true\nqueue 1\n\n</pre></div>\n\n\n<p>job will run, then you see the assert, and then job is marked as idle, and repeat over and over with the starter showing the assert\n\n</p><p></p><hr/>\n<em>2013-May-02 15:27:49 by eje:</em> <br/>\n\nrepro/test checks out, thanks Jon\n\n<p></p><hr/>\n<em>2013-May-02 15:30:00 by eje:</em> <br/>\n\nI'm marking this 'pending' until I know what next version is going to be, so I can fill in proper fixed-in field, and update version-history.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/706/putfile2.patch\">putfile2.patch</a>\n3247 bytes added by jrt on 2013-Mar-20 18:54:18 UTC.\n<br/>\nfixed return code issue<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-21 16:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35799\">[35799]</a></span>: fixed version history item; there is no _chirp putfile, but there is put &lt;file&gt; ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3542\" title=\"zero length chirp putfile causes assert\">#3542</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-06 17:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35615\">[35615]</a></span>: ===VersionHistory=== <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3542\" title=\"zero length chirp putfile causes assert\">#3542</a></span>  (By Erik Erlandson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-02 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35589\">[35589]</a></span>: Allow condor_chirp putfile with empty file ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3542\" title=\"zero length chirp putfile causes assert\">#3542</a></span> Committer: Erik Erlandson  (By Jon Thomas )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-May-21 16:14", "status": "resolved", "created": "2013-Mar-15 13:13", "fixed_version": "2013-Mar-15 13:13", "broken_version": "v070901", "priority": "3", "subsystem": "Daemons", "assigned_to": "eje", "derived_from": "", "creator": "jrt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "jthomas@redhat.com, matt@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}