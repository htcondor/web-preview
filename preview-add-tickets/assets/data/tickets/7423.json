{"id": 7423, "title": "Ticket #7423: Filter private ads for startds the negotiator won't match", "description": "<blockquote>\nWhen using a collector tree for scalability and <code>NEGOTIATOR_CONSIDER_PREEMPTION</code> is <code>False</code>, the private startd ads for Claimed slots don't need to be forwarded to the top-level collector. The negotiator won't try to match these slots, so the information in those private ads is never used. Profiling shows that this gives us a small performance improvement in the top-level collector.\n\n<p>New config knob <code>COLLECTOR_FORWARD_CLAIMED_PRIVATE_ADS</code> will control this feature. Its default will be <code>$(NEGOTIATOR_CONSIDER_PREEMPTION)</code>.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2020-Apr-10 07:46:37 by tim:</em> <br/>\n\nBulk change of target version from v080906 to v080907 using ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-May-04 11:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59578\">[59578]</a></span>: Docs for collector performance improvements. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7440\" onclick=\"get_ticket_and_populate_wrapper('7440'); return false;\" title=\"Optimize collector performance\">#7440</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7423\" onclick=\"get_ticket_and_populate_wrapper('7423'); return false;\" title=\"Filter private ads for startds the negotiator won't match\">#7423</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-16 17:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58668\">[58668]</a></span>: Move param() of COLLECTOR_FORWARD_CLAIMED_PRIVATE_ADS to Config(). <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7423\" onclick=\"get_ticket_and_populate_wrapper('7423'); return false;\" title=\"Filter private ads for startds the negotiator won't match\">#7423</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-12 10:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58648\">[58648]</a></span>: Remove COLLECTOR_FORWARD_INTERVAL from param table. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7423\" onclick=\"get_ticket_and_populate_wrapper('7423'); return false;\" title=\"Filter private ads for startds the negotiator won't match\">#7423</a></span> The default value results in a parse error if CLASSAD_LIFETIME is undefined in the param table.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-11 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58639\">[58639]</a></span>: Add option to filter private ads of Claimed slots in collector tree. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7423\" onclick=\"get_ticket_and_populate_wrapper('7423'); return false;\" title=\"Filter private ads for startds the negotiator won't match\">#7423</a></span> When NEGOTIATOR_CONSIDER_PREEMPTION=False, these ads are unnecessary, and this reduces load on the top-level collector. Config knob COLLECTOR_FORWARD_CLAIMED_PRIVATE_ADS can be used to disable this feature (and forward all private\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-11 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58640\">[58640]</a></span>: Add collector forwarding knobs to param table. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7423\" onclick=\"get_ticket_and_populate_wrapper('7423'); return false;\" title=\"Filter private ads for startds the negotiator won't match\">#7423</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-May-04 11:34", "status": "resolved", "created": "2019-Dec-11 15:45", "fixed_version": "2019-Dec-11 15:45", "broken_version": "", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}