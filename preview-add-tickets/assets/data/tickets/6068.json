{"id": 6068, "title": "Ticket #6068: File Transfer Stats crash starter when disconnected", "description": "<blockquote>\nWhen the job exits, the starter always tries to do the output transfer, even when it's disconnected from the shadow. The transfer fails if it can't connect the shadow. The transfer stats are then sent over the dead syscall socket, which blows an ASSERT.\n\n<p>If the JICShadow object knows it's disconnected from the shadow, it shouldn't even try to do the transfer when requested. It should indicate a transient failure, so that the transfer will be retried if the shadow reconnects.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Jan-17 15:42:37 by gthain:</em> <br/>\n\n<strong>CODE REVIEW</strong>  Looks good</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-22 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49869\">[49869]</a></span>: Don't attempt file transfer when disconnected from shadow. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6068\" title=\"File Transfer Stats crash starter when disconnected\">#6068</a></span> Instead, the JICShadow object should return a transient failure, resulting in the transfer being retried after a reconnect. The transfer is doomed to failure in most cases and the attempt to send transfer stats over the dead syscall socket\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Jan-17 15:42", "status": "resolved", "created": "2016-Dec-22 10:47", "fixed_version": "2016-Dec-22 10:47", "broken_version": "v080508", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "#5917", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}