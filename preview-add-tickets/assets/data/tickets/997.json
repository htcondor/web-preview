{"id": 997, "title": "Ticket #997: get rid of collector's TCP socket cache", "description": "<blockquote>\nThe only purpose of the collector's socket cache is to restrict the number of registered sockets. <span class=\"quote\">DaemonCore</span> does a better job of that, because it takes into account the file descriptor table size and is aware of other sources of registered sockets such as CCB.\n\n<p>This means it would no longer be necessary to specially configure the collector to accept TCP updates, other than making sure MAX_FILE_DESCRIPTORS is big enough.</p></blockquote>", "remarks": "<blockquote>\nI pushed a patch that implements this in 7.5.0.\n\n<p>A proper authorization check is now done on the subsequent commands received on the TCP update socket.  Previously, it was assumed that all update commands had the same authorization policy, which is not necessarily the case.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 20:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16448\">[16448]</a></span>: Fixed bug in collector support for shared port. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=997\" title=\"get rid of collector's TCP socket cache\">#997</a></span> My addition of -sock to daemon-core arguments broke the c-gahp, which uses -s. Now -sock is not allowed to be abbreviated. Also fixed a problem handling collector addresses that use the default port.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 10:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25148\">[25148]</a></span>: Documented removal of COLLECTOR_SOCKET_CACHE_SIZE. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=997\" title=\"get rid of collector's TCP socket cache\">#997</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 10:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16440\">[16440]</a></span>: Got rid of TCP socket cache in collector. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=997\" title=\"get rid of collector's TCP socket cache\">#997</a></span> It's only purpose was to restrict the number of registered sockets. <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCore\" title=\"Daemon Core\">DaemonCore</a></span> does a better job of that, because it takes into account the file descriptor table size and is aware of other sources of registered sockets such as CCB.\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-31 08:04", "status": "resolved", "created": "2009-Nov-23 10:04", "fixed_version": "2009-Nov-23 10:04", "broken_version": "v070500", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}