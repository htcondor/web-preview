{"id": 7069, "title": "Ticket #7069: Write out pool password by default", "description": "<blockquote>\nWe'd like to reduce the friction to setup and use TOKEN auth.\n\n<p>One way to do that is to setup a master password (POOL password) by default and set a default location for the pool password.\n\n</p><p>Given that TOKEN auth relies on all daemons having identical master passwords - and at least the central manager needs a master password - we should only do this in the collector daemon.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Aug-02 13:41:20 by tannenba:</em> <br/>\n\nDocumentation currently states that a pool password will be written out if none exists <em>on Linux</em>.  But looking quick at the code, there seems to be nothing Linux specific about any of this, so maybe the documentation is incorrect?\n\n<p></p><hr/>\n<em>2019-Aug-05 10:32:11 by bbockelm:</em> <br/>\n\nI suspect all the code would work.\n\n<p>However, there is no default location provided in the param table for the password file for win32.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7634\" title=\"Always generate the POOL password on startup and reconfig\">#7634</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAlways generate the POOL password on startup and reconfig</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-02 10:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57559\">[57559]</a></span>: Document that a pool password may be auto-generated. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7069\" title=\"Write out pool password by default\">#7069</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-27 07:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56964\">[56964]</a></span>: Close files we open <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7069\" title=\"Write out pool password by default\">#7069</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-24 20:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56958\">[56958]</a></span>: Only attempt to write the password once per reconfig. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7069\" title=\"Write out pool password by default\">#7069</a></span> I'm a bit nervous about potentially checking for file existence once per auth session. Given this code will only be successfully executed once per cluster lifetime, it seems reasonable to only check for pool password existence once per reconfig.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-24 20:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56957\">[56957]</a></span>: Create pool password by default. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7069\" title=\"Write out pool password by default\">#7069</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-05 10:32", "status": "resolved", "created": "2019-May-23 11:35", "fixed_version": "2019-May-23 11:35", "broken_version": "", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "bbockelm", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelman@morgridge.org; tannenba@cs.wisc.edu", "due_date": ""}