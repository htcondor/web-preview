{"id": 3948, "title": "Ticket #3948: Event Log Rotation Test Work", "description": "<blockquote>\nCondor Log Rotation Testing\n\n<p>At this time 9/2013 the only real log rotation testing is\non the event log(age unknown). We want to make sure we log\nby size and by time. We want to assure that if we want one plus\n3 that we actually get a four file rotation.\n\n</p><p>We also want a test for the windows only infinate loop if\nwe have a log file xxxxxxxx.todd which shows up after the other logs.\n\n</p><p>We derived from tool a new tool condor_testwritelog to let us exercise\nthe log writing code path. It installs from condor_base into sbin.\n\n</p><p>Some useful param settings are these based on how the tool represents itself.\n\n</p><p></p><pre>  MAX_WRITELOG_LOG = 50000000\n  WRITELOG_LOG = $(log)/WriteLogLog</pre>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-26 15:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38899\">[38899]</a></span>: New multi-write log rotation test start <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-26 13:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38898\">[38898]</a></span>: Current morphing of the log rotation tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-20 16:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38781\">[38781]</a></span>: For multiple writers we need both a varied sleep and a unique pattern we can track for sequence varification <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-07 16:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38128\">[38128]</a></span>: This test is capable of stand alone use in a configured condor. Pains are take to restore the condor_config.local file even in cases where we stop with a possible error. As we set logging config knobs we reset to default ones we may have changed in the test before like the number of log files. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>\u00a0[...]\n (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-07 15:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38126\">[38126]</a></span>: This version can be run in batch_test with multiple condors and thus logs never go to same place or manually in a configured condor by simply passing any arg to it. The four tests are default logs by size, multiple logs by size, default logs by time and multiple files by time. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-06 12:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38103\">[38103]</a></span>: Updated test with time based checking and automatic log discovery and ordering. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-01 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38085\">[38085]</a></span>: Refined this program and added sleep options for testing sleep based log rotations <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-31 14:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38061\">[38061]</a></span>: Skeleton test for log rotation using condor_testwritelog <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-31 13:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38059\">[38059]</a></span>: Current stripped down tool for testing log rotations. In the process we switch from using ALL_DEBUG to DEFAULT_DEBUG to give condor_testwritelog a chance to be more empty initially in its log. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-30 10:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38021\">[38021]</a></span>: Adding a testing tool to exercise the log writing code to test log rotation items <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3948\" onclick=\"get_ticket_and_populate_wrapper('3948'); return false;\" title=\"Event Log Rotation Test Work\">#3948</a></span>  (By Bill Taylor )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-06 14:18", "status": "resolved", "created": "2013-Sep-25 16:37", "fixed_version": "2013-Sep-25 16:37", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3594", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}