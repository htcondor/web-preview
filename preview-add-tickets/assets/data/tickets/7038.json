{"id": 7038, "title": "Ticket #7038: Tool needed to examine SPOOL while job is idle.", "description": "<blockquote>\n[GregT reports that] LIGO requests a tool to help inspect the checkpoint of a vanilla universe job while it is idle.  UI/X questions abound.\n\n<p>See also <span class=\"ticket\"><a class=\"active\" href=\"tktview?tn=7003\" title=\"Improve UX when testing self-checkpointing\">#7003</a></span>, part 3.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-31 13:32:16 by pfc:</em> <br/>\n\nI upped the priority of this because it's a general usability issue for future vanilla-universe checkpointing users...\n\n<p></p><hr/>\n<em>2019-Sep-04 13:28:08 by tlmiller:</em> <br/>\n\nFirst pass pushed to a branch.  Needs a few fix-ups before being merged, even in its truncated form.  (Mostly making it work on Windows and quoting the directory arguments properly.)\n\n<p></p><hr/>\n<em>2019-Sep-04 14:07:53 by tlmiller:</em> <br/>\n\nOther potential extensions include:\n\n<p></p><ol>\n<li>checking in with the schedd to see if the job ID in question exists,\n</li><li>and a -quiet flag, in the unlikely event that this will be useful in scripts.\n</li></ol>\n\n<p></p><hr/>\n<em>2019-Sep-11 13:58:38 by tlmiller:</em> <br/>\n\nGet a private beta to James Clark for testing (after writing up what it is he needs to test).\n\n<p></p><hr/>\n<em>2019-Sep-12 16:10:09 by tlmiller:</em> <br/>\n\nThe tool is (currently) called <code>condor_evicted_files</code>.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">Usage: condor_evicted_files [COMMAND] (clusterID.procID)+\nDeal with evicted files.\n\nWith no COMMAND, assume DIR.  Otherwise:\n\tdir\tPrint the directory in which the files are stored.\n\tlist\tList the evicted files.\n\tget\tCopy the evicted files to a subdirectory named after the job ID.\n</pre></div>\n\n\n<p>The tool presently has a number of limitations:\n\n</p><p></p><ol>\n<li>It must be run the same machine as the job's schedd\n</li><li>The schedd must NOT have ALTERNATE_JOB_SPOOL set\n</li><li>You can't name the destination directory for the <code>get</code> command.\n</li></ol>\n\n<p>The tool also does not contact the schedd in question.  This is good for some things (reduces load on the schedd, makes it safer to test), but it does mean that the tool by itself can't tell the difference between an invalid job ID and job that never had any checkpointed (or otherwise spooled) files.\n\n</p><p>I'm also just guessing about what might of interest/convenience to the user, so if you've got thoughts, please do share.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-20 16:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57879\">[57879]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Mention the tool's limitations in the General Remarks section.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-20 16:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57878\">[57878]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Documentation, now in the right place.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-20 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57876\">[57876]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Documentation.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-05 13:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57773\">[57773]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Eliminate the obsolete Command::none enum value.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-04 20:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57769\">[57769]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Fixup RPM builds  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-04 17:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57765\">[57765]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Fix Windows build. Discover proper abstraction for spool directory naming. Still doesn't contact the schedd.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-04 14:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57761\">[57761]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) Windows 'get' implementation. Quotes the arguments properly. (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-04 13:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57759\">[57759]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7038\" title=\"Tool needed to examine SPOOL while job is idle.\">#7038</a></span>) First pass at condor_evicted_files, which either: (a) prints the name of the directory in which the evicted files reside, (b) lists the contents of that directory, or (c) copies that directory to a directory in CWD named &lt;clusterID&gt;.&lt;procID&gt;. This tool only works when local to the schedd with\u00a0[...]\n (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Sep-20 16:27", "status": "resolved", "created": "2019-May-08 14:10", "fixed_version": "2019-May-08 14:10", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "peter.couvares@ligo.org, tlmiller@cs.wisc.edu, tannenba@cs.wisc.edu, gthain@cs.wisc.edu", "due_date": ""}