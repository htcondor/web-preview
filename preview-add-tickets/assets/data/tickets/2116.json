{"id": 2116, "title": "Ticket #2116: ENABLE_USERLOG_LOCKING is ignored when writing log events", "description": "<blockquote>\nThe ENABLE_USERLOG_LOCKING parameter is ignored when writing log events, and locking is always performed. The problem is that class WriteUserLog's initialize() method first opens the log file (and sets up the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileLock\" title=\"File Lock\">FileLock</a></span> object to perform locking), then checks ENABLE_USERLOG_LOCKING to see if it should disable locking (it calls internalInitialize(), which calls Configure(), which does the check).\n\n<p>This can probably be fixed by calling internalInitialize() before openFile() in initialize(), but we need to check whether the reordering will introduce any new problems.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-08 12:01:45 by cweiss:</em> <br/>\n\nWorking on this one, need to do some more testing which ought to be done by end of today. Therefore changing due date one more time.\n\n<p></p><hr/>\n<em>2011-Aug-09 16:44:46 by jfrey:</em> <br/>\n\nThe change looks good to me.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Aug-12 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=26752\">[26752]</a></span>: Version history entry for fix described in <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=2116\" title=\"ENABLE_USERLOG_LOCKING is ignored when writing log events\">#2116</a></span>  (By Cathrin Weiss )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Aug-08 19:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=26670\">[26670]</a></span>: Put Configure() call before any file openings such that ENABLE_USERLOG_LOCKING will be acknowledged. This seems less invasive and error-prone than calling internalInitialize() sooner (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=2116\" title=\"ENABLE_USERLOG_LOCKING is ignored when writing log events\">#2116</a></span>).\u00a0[...]\n (By Cathrin Weiss )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Aug-09 16:47", "status": "resolved", "created": "2011-Apr-28 11:47", "fixed_version": "2011-Apr-28 11:47", "broken_version": "v070506", "priority": "2", "subsystem": "Libs", "assigned_to": "cweiss", "derived_from": "#2038", "creator": "jfrey", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "burt@fnal.gov", "due_date": "20110809"}