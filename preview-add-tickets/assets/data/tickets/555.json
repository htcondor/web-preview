{"id": 555, "title": "Ticket #555: strptime() failure in stduniv with gnu extensions", "description": "<blockquote>\nThe <strong>strptime()</strong> function in glibc apparently has some gnu extensions associated with its definition that cause it to fail when used in a condor_compile'd program.\n\n<p>See rust ticket for many details.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Sep-30 15:10:25 by psilord:</em> <br/>\n\nOk, I've p reproduced the error in this setup:\n\n<p></p><div class=\"verbatim\">\n<pre>Linux nmi-v001 &gt; uname -a\nLinux nmi-v001 2.6.9-55.EL.100hz #1 Tue Mar 31 20:07:07 CDT 2009 x86_64 x86_64 x86_64 GNU/Linux\nLinux nmi-v001 &gt; condor_version\n$CondorVersion: 7.1.4 Nov 10 2008 BuildID: 113473 $\n$CondorPlatform: X86_64-LINUX_RHEL3 $\n</pre></div>\n\n\n<p></p><hr/>\n<em>2009-Sep-30 15:41:19 by psilord:</em> <br/>\n\nOk, I figured it out.\n\n<p>The bug is that the %z format option, which is a GNU Extension to the POSIX interface to strptime in order to support strftime(), isn't implemented in the revision of glibc (2.3.2, actually 2.3.2.27.9.7) used in RHEL3. I looked at the glibc code itself, and %z isn't in the cases of the switch statement.\n\n</p><p>Since the RHEL3 full port of Condor uses that exact revision of glibc, any program condor_compiled on a RHEL3 port of Condor using strptime() and the %z format option is doomed to fail. I have in fact reproduced this problem outside of condor_compile all together, removing Condor from the equation (to be specific, on a real RHEL3 machine running the user's test case).\n\n</p><p>It appears in my testing that the RHEL5 full port of Condor doesn't suffer from this problem and the glibc on that machine implements %z.\n\n</p><p></p><hr/>\n<em>2009-Sep-30 15:45:58 by psilord:</em> <br/>\n\nMy advice, mentioned in the ticket, is to use the POSIX format specifiers instead of the GNU extensions and/or upgrade to the RHEL5 full port of Condor.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2010-Jan-31 08:36", "status": "defer", "created": "2009-Jun-11 14:23", "fixed_version": "2009-Jun-11 14:23", "broken_version": "v070200", "priority": "5", "subsystem": "Std", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "a19218", "customer_group": "ligo", "visibility": "public", "notify": "psilord@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}