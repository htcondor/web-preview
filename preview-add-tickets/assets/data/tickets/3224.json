{"id": 3224, "title": "Ticket #3224: Forward DNS lookup in /etc/hosts causes grief on some machines.", "description": "<blockquote>\n<div class=\"code\">\n<pre class=\"code\">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n</pre></div>\n\n\n<p>On some machines if you're using ipv4 for condor it fails a forward DNS lookup b/c for some reason it's hitting the ipv6 dns.?.?\n\n</p><p>temporary fix is to change it to\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">::1         localhost6 localhost6.localdomain6\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2012-Sep-19 16:15:53 by zmiller:</em> <br/>\n\nBulk change of target version from v070804 to v070805 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2012-Sep-25 14:47:30 by tstclair:</em> <br/>\n\nThis appears to be an issue when setting up personal condor env's.  We've never seen this in the wild on DNS based machines.\n\n<p></p><hr/>\n<em>2012-Oct-02 13:49:59 by tstclair:</em> <br/>\n\nMore details can be found here: <a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=860308\">https://bugzilla.redhat.com/show_bug.cgi?id=860308</a>\n\n<p>rooted from:\n<strong>4fcc1c83 src/condor_utils/ipv6_hostname.cpp (Zach Miller  2012-08-15</strong>\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">09/26/12 09:26:17 IPVERIFY: checking rhel-6-x86_64.virtualdomain against a97aa8c0\n09/26/12 09:26:17 IPVERIFY: matched a97aa8c0 to a97aa8c0\n09/26/12 09:26:17 IPVERIFY: ip found is 1\n09/26/12 09:26:17 IPVERIFY: checking rhel-6-x86_64 against a97aa8c0\n09/26/12 09:26:17 IPVERIFY: comparing 100007f to a97aa8c0\n09/26/12 09:26:17 IPVERIFY: ip found is 0\n09/26/12 09:26:17 WARNING: forward resolution of localhost4 doesn't match a97aa8c0!\nStack dump for process 9058 at timestamp 1348644377 (23 frames)\ncondor_collector(dprintf_dump_stack+0x63)[0x4e87b3]\ncondor_collector[0x527252]\n/lib64/libpthread.so.0(+0xf500)[0x7ffa9254f500]\n/lib64/libc.so.6(_IO_vfprintf+0x367e)[0x7ffa921f48de]\n/lib64/libc.so.6(__vsnprintf_chk+0xb0)[0x7ffa922ac2c0]\ncondor_collector(vprintf_length+0x3c)[0x50457c]\ncondor_collector(vsprintf_realloc+0x61)[0x5045f1]\ncondor_collector[0x4e9136]\ncondor_collector(_condor_dprintf_va+0x339)[0x4ea4f9]\ncondor_collector(dprintf+0x86)[0x518c56]\ncondor_collector(_Z18verify_name_has_ipPc7in_addr+0x29)[0x4a2f89]\ncondor_collector(_ZN8IpVerify6VerifyE12DCpermissionPK11sockaddr_inPKcP8MyStringS7_+0x4f4)[0x4a5484]\ncondor_collector(_ZN10DaemonCore6VerifyEPKc12DCpermissionPK11sockaddr_inS1_+0x85)[0x47b8a5]\ncondor_collector(_ZN10DaemonCore9HandleReqEP6StreamS1_+0xc21)[0x48a131]\ncondor_collector(_ZN10DaemonCore22HandleReqSocketHandlerEP6Stream+0x5b)[0x48cc6b]\ncondor_collector(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x6a4)[0x48d524]\ncondor_collector(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x1a)[0x48d5fa]\ncondor_collector(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x40)[0x524e50]\ncondor_collector(_ZN10DaemonCore17CallSocketHandlerERib+0x135)[0x483095]\ncondor_collector(_ZN10DaemonCore6DriverEv+0x2012)[0x487d62]\ncondor_collector(main+0x116b)[0x47660b]\n/lib64/libc.so.6(__libc_start_main+0xfd)[0x7ffa921cbcdd]\ncondor_collector[0x461879]\n\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Oct-03 11:37:35 by tstclair:</em> <br/>\n\nIn verifying, this actually only happens on 7.6 series post 'Forward DNS' mod, so I'm closing.\n\n<p></p><hr/>\n<em>2012-Oct-09 11:09:05 by adesmet:</em> <br/>\n\nClarifying, if only for myself: This bug exists in 7.6, but not in 7.8 (because the DNS code was overhauled and IPv6 support added).  As such, this ticket is closed.  Anyone having this problem has two options:\n\n<p></p><ol>\n<li>As noted in the original write up, change your /etc/hosts file to remove localhost and localhost.localdomain from the ::1 entry.  -or-\n</li><li>Upgrade to 7.8.x</li></ol>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2012-Oct-09 11:09", "status": "resolved", "created": "2012-Sep-10 15:19", "fixed_version": "2012-Sep-10 15:19", "broken_version": "v070605", "priority": "2", "subsystem": "Daemons", "assigned_to": "tstclair", "derived_from": "", "creator": "tstclair", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com, adesmet@cs.wisc.edu, zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}