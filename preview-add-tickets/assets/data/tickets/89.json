{"id": 89, "title": "Ticket #89: gsoap's wsdl2h produces bad import line for stlvector.h for Amazon EC2", "description": "<blockquote>\nIn building the amazon_gahp, we call gsoap&amp;#8217;s wsdl2h program to translate the EC2 wsdl into a proto-header file. We tell it to use C++ strings and vectors in the translation. In the resulting file, wsdl2h puts a line like this:\n\n<p>#import &amp;#8220;stlvector.h&amp;#8221;\n\n</p><p>However, the version of wsdl2h in the gsoap external puts the full path of stlvector.h in the directory tree in which gsoap was built. Since that directory tree no longer exists, the following build steps fail.\n\n</p><p>For now, we have a hack in src/condor_amazon/Imakefile that strips out the path from the import statement after the file is generated.\n\n</p><p>At some point, it would be nice to figure out what&amp;#8217;s wrong with our wsdl2h.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jan-24 21:50:12 by matt:</em> <br/>\n\nIf I remember correctly, this is the result of SOAPCPP2_IMPORTPATH or WSDL2_IMPORTPATH being set by the configure script. Using an old configure script in a new gsoap tarball is probably suspect at this point. It was originally done because one version (older than we have now) of gsoap was shipped with a dubious configure script.\n\n<p></p><hr/>\n<em>2009-Nov-04 13:50:09 by matt:</em> <br/>\n\nThis is no longer an issue, condor_amazon/Imakefile no longer uses wsdl2h. Instead, I wrote gsoap_ec2.h by hand. Resolving this ticket.\n\n<p></p><div class=\"verbatim\">\n<pre>commit 2908249147c03d7b2d31defa2695aaa49fc3e55b\nAuthor: Matthew Farrellee &lt;matt@redhat.com&gt;\nDate:   Sun Feb 8 09:37:44 2009 -0600\n\n    Rewrote amazon_gahp's gSOAP header to remove use of wsdl2h\n\n src/condor_amazon/Imakefile          |   12 +-\n src/condor_amazon/ec2_sim_impl.cpp   |   15 +-\n src/condor_amazon/ec2_sim_main.cpp   |    2 +-\n src/condor_amazon/gsoap_commands.cpp |   18 +-\n src/condor_amazon/gsoap_ec2.h        |  336 ++++++++++++++++++++++++++++++++++\n 5 files changed, 356 insertions(+), 27 deletions(-)\n</pre></div>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2009-Dec-26 19:59", "status": "resolved", "created": "2009-Jan-23 16:45", "fixed_version": "2009-Jan-23 16:45", "broken_version": "v070000", "priority": "5", "subsystem": "Daemons", "assigned_to": "matt", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu jfrey@cs.wisc.edu", "due_date": ""}