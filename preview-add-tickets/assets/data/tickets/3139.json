{"id": 3139, "title": "Ticket #3139: job description attribute in the job ClassAd", "description": "<blockquote>\nAdd a new attribute in the job Class Ad: the job description.<br/>\n\nIt is simply a field where a brief description of the job can be specified by the user in the submit file when they add the line:\n\n<p></p><pre>     description = the given description\n</pre>\n\n<p>When a job has that field set, <strong>condor_q</strong> must display the description instead of the executable name, as follows:\n\n</p><p></p><pre>     [santos-g@condor-student1] (290)$ ./condor_q\n</pre>\n\n<p></p><pre>     -- Submitter: condor-student1.cs.wisc.edu : &lt;128.105.175.42:51937&gt; : condor-student1.cs.wisc.edu\n      ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE DESCRIPTION\n     8319.0   santos-g        7/18 16:08   0+00:00:00 I  0   97.7 (the given description).\n</pre>\n\n<p>Also, Interactive jobs will generate a description automatically if one is not specified.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jul-18 16:17:17 by johnkn:</em> <br/>\n\nThe default descripion for Interative jobs should include the fully qualified domain name of the submitting machine. something like\n\n<p></p><pre>       (Interactive from condor-student3.cs.wisc.edu)\n</pre>\n\n<p>-tj\n\n</p><p></p><hr/>\n<em>2012-Jul-20 17:54:04 by santos-g:</em> <br/>\n\nWhen a given job has a description, it will print it instead of the command in the CMD column.\n\n<p>The given example shows the output (without the -wide option):\n\n</p><p></p><pre>   ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD\n  8932.0   santos-g        7/20 16:26   0+00:00:00 I  0   97.7 python python_job.\n  8933.0   santos-g        7/20 16:28   0+00:00:00 I  0   97.7 (Interactive from )\n  8936.0   santos-g        7/20 17:29   0+00:00:00 I  0   97.7 (hey this is a rea)\n</pre>\n\n<p>Job (#8932.0) has no description.\nJob (#8933.0) is interactive with no description, so a default description is given to it and shown there.\nJob (#8936.0) was given a description.\n\n</p><p>And below is the output with -wide:\n\n</p><p></p><pre>   ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD\n  8932.0   santos-g        7/20 16:26   0+00:00:00 I  0   97.7 python python_job.py 0\n  8933.0   santos-g        7/20 16:28   0+00:00:00 I  0   97.7 (Interactive from condor-student1.cs.wisc.edu)\n  8936.0   santos-g        7/20 17:29   0+00:00:00 I  0   97.7 (hey this is a really looong description!)\n</pre>\n\n<p></p><hr/>\n<em>2012-Oct-03 11:16:24 by tannenba:</em> <br/>\n\nThe description for interactive jobs need not contain the submitting machine; this is redundant and potentially incorrect info.  Condor already shows the submitting machine for any job, interactive or not.\n\n<p></p><hr/>\n<em>2012-Oct-03 11:35:02 by tannenba:</em> <br/>\n\nIs the description attribute honored in <code>condor_history</code> as well as <code>condor_q</code>? It should be.\n\n<p>Also, why do the identical commits show up twice in the related commits below? Wonky merging problems or?\n\n</p><p></p><hr/>\n<em>2012-Oct-03 13:00:02 by santos-g:</em> <br/>\n\nChanged the default description for an interactive job. Now it is simply \"Interactive job\".\n\n<p>No, <code>condor_history</code> does not show anything related to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobDescription\" title=\"Job Description\">JobDescription</a></span> attribute in the Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>.\n\n</p><p>Not even if -l is used to display the entire <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\"> ./condor_history -l |grep JobDescription </pre></div>\n\n\n<p>Note that </p><div class=\"code\">\n<pre class=\"code\"> ./condor_history -l |grep Cmd </pre></div>\n will display the Cmd value correctly.\n\n<p>I'll have to work on that too.\nNow, I noticed a bug in that tool:\n\n</p><p>If one issues a command and gives it a invalid parameter, it will print </p><div class=\"code\">\n<pre class=\"code\">  ID      OWNER            SUBMITTED     RUN_TIME ST   COMPLETED CMD\n\n</pre></div>\n and hang indefinitely. I ran into this behavior because I expected <code>condor_history</code> to have/accept a <code>-wide</code> parameter just like <code>condor_q</code> does.\n\n<p>So when I tackle this, I'll add a <code>-wide</code> parameter to it as well.\n\n</p><p></p><hr/>\n<em>2012-Oct-03 13:49:58 by tstclair:</em> <br/>\n\nI see no conflict between <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobDescription\" title=\"Job Description\">JobDescription</a></span> and Submission, and they could possibly be used in conjunction with one another.\n\n<p>imho I don't think it should overwrite the existing column, but possibly append a new one.\n</p><hr/>\n<em>2012-Oct-22 14:59:59 by zmiller:</em> <br/>\n\nBulk change of target version from v070901 to v070902 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-03 11:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33576\">[33576]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Fixed interactive jobs description. The default description for interactive jobs does not contain the submitting machine anymore. This was redundant and potentially incorrect info.\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-03 11:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33578\">[33578]</a></span>: Description for interactive jobs should not include submit machine. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span> This info is redundant; the submitting schedd is already known for any job.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-30 12:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33214\">[33214]</a></span>: document new job attribute and submit command, plus some details about how they change with interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span> ===GT=== <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-07 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33065\">[33065]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Fixed merge issue in condor_attributes.h I simply forgot to remove merge line indicator from the file. The line starting with a couple '&lt;' signs. Fixed it.  (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-07 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33062\">[33062]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobDescription\" title=\"Job Description\">JobDescription</a></span> attribute in job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> Added ATTR_JOB_DESCRIPTION both in the header file: condor_includes/condor_attributes.h as well as in the condor_utils/condor_attributes.h. Then, added the new submit file variable \"description\" in the condor_submit.V6/submit.cpp and added SetDescription()\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-07 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33063\">[33063]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Interactive jobs generate a description automatically Interactive jobs now generate a description automatically if no description is specified by the user. Added another conditional in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SetDescription\" title=\"Set Description\">SetDescription</a></span> so if no description was set by the user and the job is interactive, then a description in the\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-07 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33064\">[33064]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) condor_q displays description if one is defined When a given job has a description, it will print it instead of the command in the CMD column.\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jul-20 17:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32883\">[32883]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) condor_q displays description if one is defined When a given job has a description, it will print it instead of the command in the CMD column.\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jul-18 18:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32854\">[32854]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Interactive jobs generate a description automatically Interactive jobs now generate a description automatically if no description is specified by the user. Added another conditional in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SetDescription\" title=\"Set Description\">SetDescription</a></span> so if no description was set by the user and the job is interactive, then a description in the\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jul-18 16:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32852\">[32852]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>) Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobDescription\" title=\"Job Description\">JobDescription</a></span> attribute in job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> Added ATTR_JOB_DESCRIPTION both in the header file: condor_includes/condor_attributes.h as well as in the condor_utils/condor_attributes.h. Then, added the new submit file variable \"description\" in the condor_submit.V6/submit.cpp and added SetDescription()\u00a0[...]\n (By Guilherme Baptista )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Dec-11 16:39", "status": "active", "created": "2012-Jul-18 16:10", "fixed_version": "2012-Jul-18 16:10", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "santos-g", "derived_from": "#3088", "creator": "santos-g", "rust": "", "customer_group": "other", "visibility": "public", "notify": "santos-g@cs.wisc.edu, tannenba@cs.wisc.edu, johnkn@cs.wisc.edu, tstclair@redhat.com, pmackinn@redhat.com", "due_date": ""}