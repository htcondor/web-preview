{"id": 6609, "title": "Ticket #6609: race condition in startd can cause job to go on hold incorrectly", "description": "<blockquote>\nThe startd now writes a file to the job sandbox with an updated version of the machine ad, the update ad.  To do this atomically, it writes to .update.ad.tmp and renames it.  If the job exits at just the wrong time, the file transfer code will see the .update.ad.tmp file, but it will get renamed by the startd before the starter can transfer it back.  If this happens, the job goes on hold with \"no such file or directory\".</blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-15 16:58:57 by tim:</em> <br/>\n\n<strong>DOC REVIEW:</strong> No docs needed. Unreleased bug.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-15 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54521\">[54521]</a></span>: Fix race condition that would put jobs on hold complaining about .update.ad.tmp <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6609\" title=\"race condition in startd can cause job to go on hold incorrectly\">#6609</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Mar-15 16:58", "status": "resolved", "created": "2018-Mar-15 15:11", "fixed_version": "2018-Mar-15 15:11", "broken_version": "v080708", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "#6591", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}