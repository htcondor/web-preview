{"id": 2330, "title": "Ticket #2330: support pool defragmentation", "description": "<blockquote>\nStep 1: Add basic mechanisms for draining partitionable slots.\n\n<p>Step 2: Create a central daemon that implements a simple but useful pool defragmentation policy.\n\n</p><p>Milestones\n\n</p><p></p><ol>\n<li>[DONE] 2011-07-29 - Initial draft of plan with details of protocols, policies, and metrics.\n\n<p></p></li><li>[DONE] 2011-08-12 - Initial draft of development plan (i.e. steps needing to be done and a time estimate).\n\n<p></p></li><li>[DONE] 2011-08-26 Revision 2 of startd drain plan addressing issues in the remark below from tannenba aug-24-2011.\n\n<p></p></li><li>[DONE] 2011-09-09 Revision 3 of startd drain plan to match Miron's requirements\n\n<p></p></li><li>[DONE] 2011-09-20 Revision 4 of startd drain plan.  The upper bound on eviction time is now explicit.  Also, eviction of jobs is delayed in a coordinated way in order to reduce idle time.\n\n<p></p></li><li>[DONE] 2011-09-22 Make a development plan for startd draining.\n\n<p></p></li><li>[DONE] 2011-09-29 Add new draining commands to the startd and create a command-line tool that calls them.  The commands are no-ops for now.\n\n<p></p></li><li>[DONE] Make upper bound on time spent in <code>Preempting/Vacate</code> explicit.  See <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2536\" onclick=\"get_ticket_and_populate_wrapper('2536'); return false;\" title=\"make upper bound on time spent in Preempting/Vacate explicit\">#2536</a></span>.\n\n<p></p></li><li>[DONE] 2011-10-27 Implement transition to draining and cancellation of draining.  No new jobs accepted (i.e. START=False), but no eviction yet.\n\n<p></p></li><li>[DONE] 2011-10-31 Implement eviction.  The graceful draining case must coordinate eviction to reduce idle time.\n\n<p></p></li><li>[DONE] 2011-11-03 Implement Drained state.\n\n<p></p></li><li>[DONE] 2011-11-03 Add support for auto-resume after defragmentation.\n\n<p></p></li><li>[DONE] 2011-11-04 Add startd attributes that advertise draining badput and idle time and estimates of time to completion.\n\n<p></p></li><li>[DONE] 2011-11-07 Add an automated test of draining.\n\n<p></p></li><li>Draining mechanism is code complete.  Checked in for 7.7.5.\n\n<p></p></li><li>[DONE] 2011-11-09 Finish updating documentation.\n\n<p></p></li><li>[DONE] 2011-11-15 Finish implementing and documenting condor_defrag.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-24 12:18:35 by tannenba:</em> <br/>\n\nFor the record, here's what I think we concluded today in our chat on draining.\n\n<p>During draining, we still need most of the existing state machine, so it is awkward to introduce \"draining\" as an activity or a state.  Therefore, we propose to add a 3rd independent state variable that indicates whether the startd is draining or not.  It could be published as a boolean attributed named \"Draining\".\n\n</p><p>We talked about the semantics of the draining deadline.  In the existing document, this was proposed to be the time after which claims transition to the retiring activity (i.e. the normal process by which the startd closes a claim).  This means draining could take an arbitrary amount of time past the deadline, depending on the startd preemption policy.  Not good.\n\n</p><p>We agreed that it would be more useful for the draining deadline to be the time at which we will <em>finish</em> vacating jobs.  To accomplish this, the startd must advertise the earliest draining deadline that its policy will permit, and it will reject requests with shorter deadlines.  The earliest possible draining deadline depends on <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span>.  I propose that the startd advertise <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CurrentMaxJobRetirementTime\" title=\"Current Max Job Retirement Time\">CurrentMaxJobRetirementTime</a></span>, just like it advertises <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CurrentRank\" title=\"Current Rank\">CurrentRank</a></span>.  Once the startd has a draining deadline, it must modify its advertised <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span> expression so that it never promises more retirement time than what remains before the deadline.  This will prevent backfill jobs that require more retirement time from matching.\n\n</p><p>Currently, once <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span> expires, the Preempting state is entered.  How long preemption takes depends on WANT_VACATE and KILL.  Again, this could be an arbitrary amount of time, so this could conflict with the draining deadline.  The idea we talked about for addressing this was to change the semantics of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span>.  Instead of this being the time at which preemption begins, it should be the time at which hard-killing begins.\n\n</p><p></p><hr/>\n<em>2011-Aug-24 12:19:31 by danb:</em> <br/>\n\nI thought a bit more about this.  I am concerned, because the proposed change provides a way to promise the job a certain total runtime, but it does not provide a way to promise a certain amount of vacate time.  Perhaps we need both <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobVacateTime\" title=\"Max Job Vacate Time\">MaxJobVacateTime</a></span>.\n\n<p>With <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span>, the job can say that it wants less than what the machine is willing to offer (never mind about incentives for now).  The same could be true for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobVacateTime\" title=\"Max Job Vacate Time\">MaxJobVacateTime</a></span>: e.g. if the job's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SoftKillTime\" title=\"Soft Kill Time\">SoftKillTime</a></span> is less than the machine's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobVacateTime\" title=\"Max Job Vacate Time\">MaxJobVacateTime</a></span>.  (If we followed the same convention as <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span>, then instead of naming the job attribute <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SoftKillTime\" title=\"Soft Kill Time\">SoftKillTime</a></span>, it would be named the same as the machine attribute, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobVacateTime\" title=\"Max Job Vacate Time\">MaxJobVacateTime</a></span>.)\n\n</p><p>So under this proposal, I think we would get rid of WANT_VACATE and KILL.  The function of these would be taken over by <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobVacateTime\" title=\"Max Job Vacate Time\">MaxJobVacateTime</a></span>.  We may not need/want to change the semantics of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirement\" title=\"Max Job Retirement\">MaxJobRetirement</a></span> time after all.  Still need to think through some of the details.\n\n</p><p></p><hr/>\n<em>2011-Sep-02 11:06:47 by danb:</em> <br/>\n\nAfter further discussion, Todd and I were less comfortable with revamping the preempting state in order to be able to predict an upper bound on how long it will take.  We agreed to treat eviction time as negligible for now.  So the draining deadline is the time at which eviction begins.  In the future, this could be revisited.\n\n<p>I should also note that after our discussion, I realized that job suspension makes time of completion of <code>MaxJobRetirementTime</code> unknown in advance.  I therefore adopted the stance that there should be a \"graceful\" deadline semantic that automatically extends to meet <code>MaxJobRetirementTime</code> promises.  It seemed convenient to me for this behavior to apply both at the time of the request and later when/if job suspension takes place.  Stricter deadline semantics could be added, but I thought we should at least start with \"graceful\".\n\n</p><p></p><hr/>\n<em>2011-Sep-06 18:20:48 by danb:</em> <br/>\n\nTodd, Greg, and I (Dan) discussed the 2nd draft of the draining plan today.\n\n<p>We concluded that the proposed backfill toggle should be replaced with two things:\n\n</p><p></p><ol>\n<li>a toggle that says whether early termination of draining should be accepted or not (i.e. what to do when the slots all happen to be idle).  For the defragmentation daemon, we would expect early termination to be a good thing, whereas in the case of a coordinated pool-wide maintenance time, early termination might not be desired.\n\n<p></p></li><li>a capability to specify arbitrary <code>DrainingAttr</code> attributes in the draining request\n</li></ol>\n\n<p></p><hr/>\n<em>2011-Sep-12 10:31:11 by danb:</em> <br/>\n\nMiron wanted a different design.  A new version of the draining design doc has been attached that attempts to achieve this.\n\n<p></p><ul>\n<li>no backfill\n</li><li>only whole startd draining\n</li><li>always drain as soon as possible (but provide option to honor retirement time)\n</li><li>to deal with race conditions caused by stale information, have the startd block while the draining requester examines up-to-date information, rather than having the requester send a \"staleness tolerance expression\" in the request\n</li><li>provide an explicit boolean option to prevent suspension from extending retirement indefinitely\n</li></ul>\n\n<p>Ideas to consider for the future:\n\n</p><p></p><ul>\n<li>support draining subsets of the machine by having the client request how much it wants and leaving it up to the startd to choose the most effective way to satisfy the request\n</li><li>support trivial backfill jobs that are preempted as soon as needed to finish draining (i.e. as soon as retirement promises to non-backfill jobs have completed).  Never delay completion of draining because of backfill jobs.\n</li></ul>\n\n<p></p><hr/>\n<em>2011-Sep-12 14:48:28 by danb:</em> <br/>\n\nAnother discussion with Miron:\n\n<p></p><ul>\n<li>must have an upper bound on the eviction time that is known in advance\n</li><li>distinguish between checkpointable jobs and jobs that just wish to transfer back the sandbox; if a job is checkpointable, it should be evicted (and checkpointed) right away without waiting for retirement time\n<ul>\n<li>Q from Dan: is the existing facility of the job opting out of retirement time sufficient to satisfy this point?\n</li></ul>\n</li><li>information that applies to the whole machine should be published in a machine ad\n<ul>\n<li>the partitionable slot ad may be acceptable to satisfy this point</li></ul>\n</li></ul>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2536\" onclick=\"get_ticket_and_populate_wrapper('2536'); return false;\" title=\"make upper bound on time spent in Preempting/Vacate explicit\">#2536</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nmake upper bound on time spent in Preempting/Vacate explicit</td></tr>\n</tbody></table>", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/455/HTPC_7_7_Step_1_DesignDocument.docx\">HTPC_7_7_Step_1_DesignDocument.docx</a>\n139664 bytes added by danb on 2011-Sep-08 20:17:26 UTC.\n</li><li><a href=\"attach_get/466/DrainingDesignDoc.pdf\">DrainingDesignDoc.pdf</a>\n78771 bytes added by danb on 2011-Sep-22 20:08:43 UTC.\n<br/>\nThis replaces the plan put forward in HTPC_7_7_1_DesignDocument. The main difference is that there is no backfill and no \"delayed\" draining in the new plan.<br/>\n</li><li><a href=\"attach_get/494/DefragDaemonDesignDoc.docx\">DefragDaemonDesignDoc.docx</a>\n135826 bytes added by danb on 2011-Nov-15 23:56:14 UTC.\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-28 10:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28931\">[28931]</a></span>: last details for documenting condor_defrag, including some index entry changes ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-27 14:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28924\">[28924]</a></span>: A lot of minor edits and LaTeX changes to documentation about the new Drained state and the condor_defrag daemon (and associated <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attributes and configuration variables). ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-30 13:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28504\">[28504]</a></span>: Fixed typos in defrag documentation. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-21 16:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28379\">[28379]</a></span>: editing changes associated with new condor_defrag work ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-21 14:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28376\">[28376]</a></span>: Added missing defragad.tex <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-16 16:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28283\">[28283]</a></span>: Documented state and activity transitions relating to draining. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-16 14:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28279\">[28279]</a></span>: new diagram for machine activity/state transitions, given new Drained state ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 18:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28268\">[28268]</a></span>: Documented <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastDrainStartTime\" title=\"Last Drain Start Time\">LastDrainStartTime</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 18:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28269\">[28269]</a></span>: Documented effect of suspension during draining on completion estimate. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 18:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28267\">[28267]</a></span>: Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastDrainStartTime\" title=\"Last Drain Start Time\">LastDrainStartTime</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 18:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28266\">[28266]</a></span>: Documented state transitions related to the new Drained state. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 17:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28265\">[28265]</a></span>: Documented condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span> Added section to give high-level view and configuration examples. Added section describing attributes in the daemon ad.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-15 13:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28263\">[28263]</a></span>: Added daemon ad for condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span> Added some draining-related stats to this daemon ad.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-14 12:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28242\">[28242]</a></span>: Document updated condor_defrag defaults. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-14 12:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28241\">[28241]</a></span>: Filter out offline ads in condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-14 12:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28239\">[28239]</a></span>: forgot to commit .dia format version of diagram. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-14 11:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28238\">[28238]</a></span>: Redraw new states diagram for figure 3.3. Remove old, and useless versions of the diagram. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-11 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28228\">[28228]</a></span>: Documented condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-11 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28229\">[28229]</a></span>: Improved defaults and fixed a bug in condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-11 10:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28221\">[28221]</a></span>: Improve comments in defrag test code to make it easier to understand. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-11 09:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28220\">[28220]</a></span>: Fix defrag test for windows. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span> It is simpler to use multiple personal condors than to safely pack multiple startds into one personal condor.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-10 19:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28216\">[28216]</a></span>: Added condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-10 19:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28217\">[28217]</a></span>: Added test of condor_defrag. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-09 11:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28189\">[28189]</a></span>: Documented new draining-related machine ad attributes. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-09 10:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28188\">[28188]</a></span>: Improvement to condor_drain docs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-08 17:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28183\">[28183]</a></span>: Documented condor_drain. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span> ===VersionHistory:Complete===  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-08 12:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28168\">[28168]</a></span>: fix typo ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-08 10:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28164\">[28164]</a></span>: Added cmd_drain test to list of windows tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-07 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28162\">[28162]</a></span>: Added test of condor_drain. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-07 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28160\">[28160]</a></span>: Documented Drained state. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-07 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28161\">[28161]</a></span>: Added support for draining the startd. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-17 19:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27871\">[27871]</a></span>: Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MachineMaxVacateTime\" title=\"Machine Max Vacate Time\">MachineMaxVacateTime</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobMaxVacateTime\" title=\"Job Max Vacate Time\">JobMaxVacateTime</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WantGracefulRemoval\" title=\"Want Graceful Removal\">WantGracefulRemoval</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2536\" onclick=\"get_ticket_and_populate_wrapper('2536'); return false;\" title=\"make upper bound on time spent in Preempting/Vacate explicit\">#2536</a></span> (parent ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2330\" onclick=\"get_ticket_and_populate_wrapper('2330'); return false;\" title=\"support pool defragmentation\">#2330</a></span>) \u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Nov-21 16:12", "status": "resolved", "created": "2011-Jul-22 17:35", "fixed_version": "2011-Jul-22 17:35", "broken_version": "v070000", "priority": "2", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "dan@hep.wisc.edu,gthain@cs.wisc.edu,tannenba@cs.wisc.edu,tstclair@redhat.com,eje@cs.wisc.edu", "due_date": ""}