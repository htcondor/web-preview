{"id": 4855, "title": "Ticket #4855: windows failure of job-router and local universe developer series", "description": "<blockquote>\nOnly in the developer series with these configuration settings\n\n<p></p><div class=\"code\">\n<pre class=\"code\">JOB_ROUTER_DEFAULTS = \\\n  [ \\\n    requirements=target.WantJobRouter is True; \\\n    delete_WantJobRouter = true; \\\n    set_requirements = true; \\\n  ]\n\nJOB_ROUTER_ENTRIES = \\\n   [ TargetUniverse = 12; \\\n     name = \"Site 1\"; \\\n   ]\n\nDAEMON_LIST = MASTER, SCHEDD, JOB_ROUTER, COLLECTOR, NEGOTIATOR\n\nJOB_ROUTER_POLLING_PERIOD = 10\n</pre></div>\n\n\n<p>When submit a simple sleep job the schedd gets into a loop\nwith the following log entries\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">01/28/15 18:50:34 (pid:17224) Sent ad to central manager for condor-slot1@exec-11.batlab.or\ng\n01/28/15 18:50:34 (pid:17224) Sent ad to 1 collectors for condor-slot1@exec-11.batlab.org\n01/28/15 18:50:34 (pid:17224) Starting add_shadow_birthdate(2.0)\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:34 (pid:17224) Spawned local starter (pid 14320) for job 2.0\n01/28/15 18:50:36 (pid:17224) Local starter pid 14320 died with exception ACCESS_VIOLATION\n01/28/15 18:50:36 (pid:17224) Starting add_shadow_birthdate(2.0)\n01/28/15 18:50:36 (pid:17224) Spawned local starter (pid 27560) for job 2.0\n01/28/15 18:50:37 (pid:17224) Local starter pid 27560 died with exception ACCESS_VIOLATION\n01/28/15 18:50:37 (pid:17224) Starting add_shadow_birthdate(2.0)\n01/28/15 18:50:37 (pid:17224) Sock::bind failed: WSAError = 10048\n01/28/15 18:50:38 (pid:17224) Spawned local starter (pid 27868) for job 2.0\n01/28/15 18:50:39 (pid:17224) TransferQueueManager stats: active up=0/10 down=0/10; waiting up=0 down=0; wait time up=0s down=0s\n01/28/15 18:50:39 (pid:17224) TransferQueueManager upload 1m I/O load: 0 bytes/s  0.000 disk load  0.000 net load\n01/28/15 18:50:39 (pid:17224) TransferQueueManager download 1m I/O load: 0 bytes/s  0.000 disk load  0.000 net load\n01/28/15 18:50:39 (pid:17224) Sent ad to central manager for\nSite 1                         1/    100       0/     50     none\n</pre></div>\n\n\n<p>Until the test times out, the job-router is just spinning looking for work\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">JobRouter Note: adding new route '[ delete_WantJobRouter = true; requirements = target.WantJobRouter is true; TargetUniverse = 12; set_requirements = true; name = \"Site 1\" ]'\n01/28/15 18:49:56 JobRouter: Checking for candidate jobs. routing table is:\nRoute Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed\nSite 1                         0/    100       0/     50     none               0         0      0\n01/28/15 18:50:06 JobRouter: Checking for candidate jobs. routing table is:\nRoute Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed\nSite 1                         0/    100       0/     50     none               0         0      0\n01/28/15 18:50:17 JobRouter: Checking for candidate jobs. routing table is:\nRoute Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed\nSite 1                         1/    100       1/     50     none               1         0      0\n01/28/15 18:50:27 JobRouter: Checking for candidate jobs. routing table is:\nRoute Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed\nSite 1                         1/    100       0/     50     none               1         0      0\n01/28/15 18:50:37 JobRouter: Checking for candidate jobs. routing table is:\nRoute Name             Submitted/Max        Idle/Max     Throttle Recent: Started Succeeded Failed\nSite 1                         1/    100       0/     50     none               1         0      0\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2015-Jan-29 11:32", "status": "new", "created": "2015-Jan-29 11:32", "fixed_version": "2015-Jan-29 11:32", "broken_version": "v080304", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}