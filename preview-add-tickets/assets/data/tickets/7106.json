{"id": 7106, "title": "Ticket #7106: Small bugs in DAGMan fast submit", "description": "<blockquote>\nIn <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=6386\" onclick=\"get_ticket_and_populate_wrapper('6386'); return false;\" title=\"Add DAGMan knob for job submits to override submit cycle time limit\">#6386</a></span> we added the <code>DAGMAN_AGGRESSIVE_SUBMIT</code> configuration knob. When set to true, this allows a user to bypass the <code>DAGMAN_USER_LOG_SCAN_INTERVAL</code> time limit if they still have jobs ready to submit. There are two small bugs with this implementation:\n\n<p></p><ol>\n<li>In the param_info file there's a typo in the knob name.\n\n<p></p></li><li>DAGMan alternates between a submit cycle and a sleep cycle. The duration of the submit cycle is defined in <code>DAGMAN_USER_LOG_SCAN_INTERVAL</code>, however this knob also defines the duration of the sleep cycle. So it's impossible to change one without changing the other. We need a new knob called <code>DAGMAN_SLEEP_CYCLE_INTERVAL</code> that only sets the duration of the sleep cycle.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Jun-12 14:56:03 by coatsworth:</em> <br/>\n\nIt turns out that # 2 is more complicated than it looks. The main problem is that introducing a new knob would involve renaming the existing <code>DAGMAN_USER_LOG_SCAN_INTERVAL</code> for naming consistency. Moreover, a user can already prolong the duration of the submit cycle by enabling <code>DAGMAN_AGGRESSIVE_SUBMIT</code> and then tuning <code>DAGMAN_MAX_SUBMITS_PER_INTERVAL</code> accordingly. So I'm just going to leave this as-is.\n\n<p>This means the only bug fix on this ticket is a 1-character typo. I've pushed the fix, now I'm going to assign this to Todd Miller from whom I expect an extensive code review :)\n\n</p><p></p><hr/>\n<em>2019-Jun-12 15:27:59 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>I, and Merriam, and Webster, concur with your spelling.  That'll be $20, please.\n\n</p><p>... wait, you said ex_t_ensive.  Never mind. :)\n\n</p><p>Also, I have no idea if this needs documentation or not -- if the broken version is really 8.8.4 (it's currently in the ticket as 8.7.4) than it really doesn't (since no version with the bug has escaped).\n\n</p><p></p><hr/>\n<em>2019-Jun-13 11:27:13 by coatsworth:</em> <br/>\n\nExcellent, your cheque is in the mail :) As for the version numbers, you got these switched around, it was introduced in 8.7.4 but I don't think anyone actually ever used it. Doesn't seem worth documenting.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-12 13:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57146\">[57146]</a></span>: Fixed typo in param_info (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7106\" onclick=\"get_ticket_and_populate_wrapper('7106'); return false;\" title=\"Small bugs in DAGMan fast submit\">#7106</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Jun-13 11:27", "status": "resolved", "created": "2019-Jun-12 11:44", "fixed_version": "2019-Jun-12 11:44", "broken_version": "v080704", "priority": "2", "subsystem": "Dag", "assigned_to": "coatsworth", "derived_from": "#6386", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}