{"id": 187, "title": "Ticket #187: Analyze use of old classads in Condor", "description": "<blockquote>\nWe need to go through the code base and create what essentially amounts to a histogram of old classad methods in use.  For example, if old classads have 100 public methods, how many of those are actually being used in the code?  Do XXX number of methods represent 90% of all the call sites?\n\n<p>Once we have an understanding of old classads are used, we need to create a document. For each old classad method in use, working in order of most usage to least usage, we should map the old method to a corresponding new classad method(s).  In addition, for each mapping, we need to note any semantic differences between the old function and the new function.  For example, perhaps there is an <code>Insert()</code> method in old ads and an <code>Insert()</code> method in new ads - items to note re semantic differences could include:\n</p><ul>\n<li>semantic impact in the library; maybe the old <code>Insert()</code> is really an insert or replace, while the new <code>Insert()</code> will return an error if the attribute already exists.\n</li><li>memory management; who is responsible for allocating/freeing memory?\n</li><li>return values and error handling\n</li></ul>\n\n<p>Initially, Jaime will lead this effort and will have Varghese and Nick providing much of the manpower.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Feb-05 16:16:54 by jfrey:</em> <br/>\n\nToday, Varghese and I met briefly to talk about his first task (collecting data on frequency of method calls to old classads). He's starting to look at the code.\n\n<p>Tomorrow morning, we'll meet with Nick to further brainstorm how to collect the data and set up timeline of tasks.\n\n</p><p></p><hr/>\n<em>2009-Feb-06 14:11:12 by jfrey:</em> <br/>\n\nNick, Varghese and I met today. Varghese will try using <span class=\"quote\">Cscope</span> to collect the call site data for old <span class=\"quote\">ClassAds</span>. Nick will try <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CodeViz\" title=\"Code Viz\">CodeViz</a></span>. We'll meet again Monday morning to look at the results and plan further steps.\n\n<p></p><hr/>\n<em>2009-Feb-11 14:38:18 by jfrey:</em> <br/>\n\nNick and Varghese used separate methods to count the number of invocations of old classad methods in Condor. Their counts roughly agreed with each other. There is now a wiki page listing all of the methods and counts. We will go through and estimate the cost to convert call sites or emulate the functions.\n\n<p></p><hr/>\n<em>2009-Feb-12 12:57:15 by tannenba:</em> <br/>\n\nMuch data about old <span class=\"quote\">ClassAd</span> usage is being created <span class=\"wiki\"><a href=\"wiki?p=ClassAdConversion\" title=\"Class Ad Conversion\">here</a></span>.\n\n<p></p><hr/>\n<em>2009-Apr-05 21:33:59 by matt:</em> <br/>\n\nDid you see this?\n\n<p><a class=\"external\" href=\"http://condor-wiki.cs.wisc.edu/index.cgi/fileview?f=src/condor_classad.V6/deprecated.txt&amp;v=f634884c7df803c568a5c702e22f018e12b25b66\">http://condor-wiki.cs.wisc.edu/index.cgi/fileview?f=src/condor_classad.V6/deprecated.txt&amp;v=f634884c7df803c568a5c702e22f018e12b25b66</a>\n\n</p><p></p><hr/>\n<em>2009-Apr-06 16:48:27 by jfrey:</em> <br/>\n\nYes, I looked at that file after we started examining the old <span class=\"quote\">ClassAd</span> methods. While a useful starting-point, the file has fallen out-of-date as new methods were added and existing ones acquired new functionality.\n\n<p></p><hr/>\n<em>2009-Nov-17 11:37:45 by jfrey:</em> <br/>\n\nWe have a good understanding of how and where old <span class=\"quote\">ClassAds</span> are used and how to transition to new <span class=\"quote\">ClassAds</span>. I'm going to resolved this ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=230\" title=\"New ClassAd attribute names are case-sensitive\">#230</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nNew <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> attribute names are case-sensitive</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=619\" title=\"Write compatibility functions for conversion from old to new ClassAds\">#619</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nWrite compatibility functions for conversion from old to new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span></td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=835\" title=\"Make ExprTree handling in old ClassAds more like new ClassAds\">#835</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMake <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ExprTree\" title=\"Expr Tree\">ExprTree</a></span> handling in old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> more like new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span></td></tr>\n</tbody></table>", "attachments": "", "check_ins": "", "type": "todo", "last_change": "2010-Jan-31 13:16", "status": "resolved", "created": "2009-Feb-05 12:15", "fixed_version": "2009-Feb-05 12:15", "broken_version": "", "priority": "1", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#131", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}