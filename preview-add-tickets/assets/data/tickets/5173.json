{"id": 5173, "title": "Ticket #5173: Schedd doesn't kill process family of scheduler universe jobs", "description": "<blockquote>\nWhen the schedd reaps the process of a scheduler universe job, it should kill any child processes. Currently, it does not.\n\n<p>This was noticed by CMS because condor_dagman doesn't always kill any PRE or POST scripts it's running when it exits.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Aug-04 15:08:34 by wenger:</em> <br/>\n\nNote:  This should be documented in section 2.10.7 of the manual (Suspending a Running DAG).</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/883/kill_scheduler_univ.patch\">kill_scheduler_univ.patch</a>\n1532 bytes added by jfrey on 2015-Jul-24 21:23:39 UTC.\n<br/>\nPatch to have the schedd track the process families of scheduler universe jobs and kill them when the job exits.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-06 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49743\">[49743]</a></span>: DAGMan docs updated to say that PRE/POST scripts killed when DAG held. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5173\" onclick=\"get_ticket_and_populate_wrapper('5173'); return false;\" title=\"Schedd doesn't kill process family of scheduler universe jobs\">#5173</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-29 11:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45432\">[45432]</a></span>: move 8.2.9 version history item to show as bug fix (not new feature) <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5173\" onclick=\"get_ticket_and_populate_wrapper('5173'); return false;\" title=\"Schedd doesn't kill process family of scheduler universe jobs\">#5173</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-28 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45426\">[45426]</a></span>: Docs for schedd killing scheduler universe orphaned processes. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5173\" onclick=\"get_ticket_and_populate_wrapper('5173'); return false;\" title=\"Schedd doesn't kill process family of scheduler universe jobs\">#5173</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-28 15:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45425\">[45425]</a></span>: Schedd kills orphaned child processes of scheduler universe jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5173\" onclick=\"get_ticket_and_populate_wrapper('5173'); return false;\" title=\"Schedd doesn't kill process family of scheduler universe jobs\">#5173</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Dec-06 15:14", "status": "resolved", "created": "2015-Jul-24 11:34", "fixed_version": "2015-Jul-24 11:34", "broken_version": "v080200", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "zmiller", "derived_from": "#5162", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}