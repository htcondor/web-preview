{"id": 6933, "title": "Ticket #6933: Duplicate accounting entries for jobs submitted through the job router", "description": "<blockquote>\nFarrukh is still seeing duplicate accounting entries even after the fix in <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6856\" title=\"JobRouter sets the user attribute in the routed job\">#6856</a></span>:\n\n<p></p><div class=\"verbatim\">\n<pre>I have 15 single core jobs running, no jobs in the queue. Just plain output are under [1]. Long outputs are attached with the email.\n\nFarrukh\n\n[1]\n[root@htccolldev01 ~]# condor_userprio\nLast Priority Update:  1/22 13:49\nGroup                  Config     Use    Effective   Priority   Res   Total Usage  Time Since Requested\n  User Name             Quota   Surplus   Priority    Factor   In Use (wghted-hrs) Last Usage Resources\n--------------------- --------- ------- ------------ --------- ------ ------------ ---------- ----------\ngroup_admin                1.00 Regroup                   1.00     12       418.68      &lt;now&gt;         15\ngroup_admin                0.00 Regroup                   1.00      3        19.09      &lt;now&gt;         15\n  fkhan@fnal.gov                                0.54      1.00      3         5.64      &lt;now&gt;\n  fkhan@fnal.gov                                0.77      1.00     12        29.34      &lt;now&gt;\n--------------------- --------- ------- ------------ --------- ------ ------------ ---------- ----------\nNumber of users: 2              Regroup                            15        34.98    0+23:59\n\n\n[root@htccolldev01 ~]# condor_userprio -neg\nLast Priority Update:  1/22 13:49\nGroup                   Config     Use    Effective   Priority   Res   Total Usage  Time Since Requested\n  User Name              Quota   Surplus   Priority    Factor   In Use (wghted-hrs) Last Usage Resources\n---------------------- --------- ------- ------------ --------- ------ ------------ ---------- ----------\ngroup_admin                 1.00 Regroup                   1.00     12       418.68      &lt;now&gt;         15\n  fkhan@fnal.gov                                 0.77      1.00     12        29.34      &lt;now&gt;\n---------------------- --------- ------- ------------ --------- ------ ------------ ---------- ----------\nNumber of users: 1               Regroup                            12        29.34    0+23:59\n\n\n[root@htccolldev01 ~]# condor_userprio -usage\nLast Priority Update:  1/22 13:50\nGroup                  Res   Total Usage       Usage             Last\n  User Name           In Use (wghted-hrs)    Start Time       Usage Time\n--------------------- ------ ------------ ---------------- ----------------\ngroup_admin                3        19.11  4/24/2018 09:46  1/22/2019 13:50\n  fkhan@fnal.gov           3         5.65  4/24/2018 09:46  1/22/2019 13:50\n  fkhan@fnal.gov          12        29.41  9/19/2017 13:35  1/22/2019 13:50\ngroup_admin               12       418.74  8/24/2017 16:05  1/22/2019 13:50\n--------------------- ------ ------------ ---------------- ----------------\nNumber of users: 2        15        35.06                   1/21/2019 13:50\n\n\n[root@htccolldev01 ~]# condor_status -schedd\nName                Machine             RunningJobs   IdleJobs   HeldJobs\n\nhtccedev01.fnal.gov htccedev01.fnal.gov          15          0          0\nhtcjsdev01.fnal.gov htcjsdev01.fnal.gov           0          0          0\nhtcjsdev02.fnal.gov htcjsdev02.fnal.gov           0          0          0\nhtcjsdev03.fnal.gov htcjsdev03.fnal.gov           0          0          0\n\n                TotalRunningJobs      TotalIdleJobs      TotalHeldJobs\n\n\n         Total                15                  0                  0\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Feb-26 16:29:26 by jfrey:</em> <br/>\n\nBased on the long-form accounting ads that Farrukh provided via email, the duplicate accounting entries are coming from different negotiators. condor_userprio doesn't attempt to merge records from different negotiators, nor does it do a good job of notating the multiple sources. You can use the -name option to get records from only one negotiator.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "incident", "last_change": "2019-Apr-04 11:50", "status": "resolved", "created": "2019-Feb-26 15:36", "fixed_version": "2019-Feb-26 15:36", "broken_version": "", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "jfrey", "derived_from": "#6856", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu", "due_date": ""}