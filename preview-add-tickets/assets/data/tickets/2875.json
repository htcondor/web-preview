{"id": 2875, "title": "Ticket #2875: Jobs with new style arguments don't show args in condor_q", "description": "<blockquote>\nIf a job is using new style arguments, then the arguments won't appear under \"CMD\" in the output of condor_q.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">% cat submit-1\nexecutable=/bin/echo\nuniverse=vanilla\nhold=true\narguments=arguments bare 1 2 3\nqueue\n% condor_submit submit-1\nSubmitting job(s).\n1 job(s) submitted to cluster 58.\n% cat submit-2\nexecutable=/bin/echo\nuniverse=vanilla\nhold=true\narguments=\"arguments quoted 1 2 3\"\nqueue\n% condor_submit submit-2\nSubmitting job(s).\n1 job(s) submitted to cluster 59.\n% condor_q\n\n\n-- Submitter: puffin.cs.wisc.edu : &lt;128.105.185.14:36212&gt; : puffin.cs.wisc.edu\n ID      OWNER            SUBMITTED     RUN_TIME ST PRI SIZE CMD\n  58.0   adesmet         3/8  17:29   0+00:00:00 H  0   97.7 echo arguments bar\n  59.0   adesmet         3/8  17:29   0+00:00:00 H  0   97.7 echo\n\n2 jobs; 0 idle, 0 running, 2 held\n</pre></div>\n\n\n<p>In the above, it is expected that the \"CMD\" entry for both jobs would be identical.\n\n</p><p>The code that collects the information is in <a class=\"file\" href=\"rlog?f=src/condor_utils/condor_arglist.cpp\">/src/condor_utils/condor_arglist.cpp</a> in ArgList::GetArgsStringForDisplay.  That code's attempt to look up ATTR_JOB_ATTRIBUTE2 appears to always fail.  Hypothesis: the <span class=\"quote\">ClassAd</span> projection code that only sends requested attributes doesn't realize that ATTR_JOB_ATTRIBUTE2 is needed in addition to ATTR_JOB_ATTRIBUTE1.\n\n</p><p>Possible fixes:\n</p><ul>\n<li>Ensure that whenever ATTR_JOB_ATTRIBUTE1 is included in a projection, automatically include ATTR_JOB_ATTRIBUTE2. A bit special case.  You could do this on the schedd's side (very magical and non-obvious) or on the condor_q side.\n</li><li>Change condor_submit. to ensure that ATTR_JOB_ATTRIBUTE2 (\"Arguments\") is always present. See <span class=\"ticket\"><a class=\"new\" href=\"tktview?tn=2876\" title=\"Ensure Arguments is always in job ad, even if old Args is being used\">#2876</a></span>: Ensure Arguments is always in job ad, even if old Args is being used</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-21 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39207\">[39207]</a></span>: Docs for job arguments missing from condor_q bugfix. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=2875\" title=\"Jobs with new style arguments don't show args in condor_q\">#2875</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-21 14:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39203\">[39203]</a></span>: Jobs with new style arguments don't show args in condor_q. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=2875\" title=\"Jobs with new style arguments don't show args in condor_q\">#2875</a></span> condor_q should include both Args and Arguments in its base list of attributes for job ad projections.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Jan-27 13:45", "status": "resolved", "created": "2012-Mar-08 17:44", "fixed_version": "2012-Mar-08 17:44", "broken_version": "v070606", "priority": "4", "subsystem": "Tools", "assigned_to": "jfrey", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}