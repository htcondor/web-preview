{"id": 6889, "title": "Ticket #6889: Docker uni can read/write/execute scratch dir with selinux enabled", "description": "<blockquote>\nWhen SELinux is enabled, docker universe jobs get permission denied when reading, writing or executing into the scratch directory.  The scratch directory is labelled with condor_var_lib_t (Should it be labelled with a distinct condor_scratch_directory label?), and the contained processes are running as label condor_t.  audit2allow suggests:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">require {\n        type unconfined_t;\n        type condor_var_lib_t;\n        type container_runtime_tmp_t;\n        type container_t;\n        class file { execute execute_no_trans };\n        class dir { add_name create read relabelto write };\n}\n\n#============= container_t ==============\nallow container_t condor_var_lib_t:dir { read write };\nallow container_t container_runtime_tmp_t:dir { add_name create read write };\nallow container_t container_runtime_tmp_t:file { execute execute_no_trans };\n\n</pre></div>\n\n\n<p>But I suspect we'll need to add a couple of execute permissions in there as well.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2019-May-24 09:38", "status": "new", "created": "2019-Feb-01 10:32", "fixed_version": "2019-Feb-01 10:32", "broken_version": "v080800", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "tim", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}