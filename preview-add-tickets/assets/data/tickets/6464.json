{"id": 6464, "title": "Ticket #6464: Reduce frequency of DAGMan updates to the schedd", "description": "<blockquote>\nDAGMan currently updates the schedd every time its internal metrics change (number of jobs, number of submits, number of jobs completed, etc.) In a rapidly evolving DAG, this means an update will happen every submit cycle (5 seconds). This creates a lot of unneccessary work.\n\n<p>We should change this so DAGMan only updates the schedd at pre-specified time intervals. Create a knob called DAGMAN_UPDATE_SCHEDD_INTERVAL which stores an integer (number of seconds) and only send an update once per interval.\n\n</p><p>What's a good default value for this interval? 120 seconds?</p></blockquote>", "remarks": "<blockquote>\nImplemented with the DAGMAN_QUEUE_UPDATE_INTERVAL knob.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-28 16:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53071\">[53071]</a></span>: Added documentation + version history (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6464\" title=\"Reduce frequency of DAGMan updates to the schedd\">#6464</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Nov-01 10:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52745\">[52745]</a></span>: Updated DAGMAN_QUEUE_UPDATE_INTERVAL knob name (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6464\" title=\"Reduce frequency of DAGMan updates to the schedd\">#6464</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-27 13:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52693\">[52693]</a></span>: Fixed bug where stats not getting recorded on exit. Added default interval time. (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6464\" title=\"Reduce frequency of DAGMan updates to the schedd\">#6464</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-26 11:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52668\">[52668]</a></span>: Debugging job_dagman_classad test failure (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6464\" title=\"Reduce frequency of DAGMan updates to the schedd\">#6464</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-25 16:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52667\">[52667]</a></span>: Implemented interval-based schedd updates in DAGMan (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6464\" title=\"Reduce frequency of DAGMan updates to the schedd\">#6464</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Dec-06 11:04", "status": "resolved", "created": "2017-Oct-25 15:48", "fixed_version": "2017-Oct-25 15:48", "broken_version": "", "priority": "2", "subsystem": "Dag", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "coatsworth@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}