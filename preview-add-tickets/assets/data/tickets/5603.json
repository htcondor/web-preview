{"id": 5603, "title": "Ticket #5603: Set supplemental groups properly when using SOFT_UID_DOMAIN", "description": "<blockquote>\nAlways call setgroups() when switching to user privilege state, even when we have a UID/GID but no username. We may not have a user account name when the user account is set via set_user_ids() using a UID/GID pair. This mainly happens when SOFT_UID_DOMAIN=True (indicating that machines share a UID domain, but execute machines may not have comprehensive user account lists). Always calling setgroups() ensures we have a proper set of supplemental groups.</blockquote>", "remarks": "<blockquote>\n<em>2016-Apr-04 16:52:26 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Looks good. (Extra bonus for handling the error case dprintf correctly!)</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-04 16:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48169\">[48169]</a></span>: Version history for supplemental groups with SOFT_UID_DOMAIN. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5603\" title=\"Set supplemental groups properly when using SOFT_UID_DOMAIN\">#5603</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-04 16:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48168\">[48168]</a></span>: Always call setgroups() when switching to user priv state. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5603\" title=\"Set supplemental groups properly when using SOFT_UID_DOMAIN\">#5603</a></span> This ensures we always have a proper set of supplemental groups when acting as the user.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Apr-05 09:22", "status": "resolved", "created": "2016-Apr-04 15:58", "fixed_version": "2016-Apr-04 15:58", "broken_version": "v080000", "priority": "3", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#4437", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "zmiller@cs.wisc.edu", "due_date": ""}