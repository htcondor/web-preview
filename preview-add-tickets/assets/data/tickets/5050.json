{"id": 5050, "title": "Ticket #5050: Attributes set using chirp set_job_attr_delayed never go to shadow", "description": "<blockquote>\nThe new condor_chirp command set_job_attr_delayed is meant to allow relatively cheap setting of custom job attributes into the schedd by the job, by storing the changes and then sending them along with the normal job update.\n\n<p>But because of the way it was coded, the stored changes are cleared after the attributes are sent into the job hook but before the update ad is built to send to the schedd.\n\n</p><p>The chirped attributes <strong>might</strong> show up in the final update, depending on the timing of the chirp calls and the normal periodic job update.\n\n</p><p>Inspection of the code also indicates that there is a bug in the code meant to limit the number of unique attributes that may be chirped. Once an attempt has been made to hit that limit, NO update will ever be allowed after that time, even if it is to one of the attributes that was originally allowed.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-May-12 16:33:26 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>These changes look good.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-03 13:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44945\">[44945]</a></span>: repeat 8.2.9 version history item in the 8.3.6 version history <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5050\" onclick=\"get_ticket_and_populate_wrapper('5050'); return false;\" title=\"Attributes set using chirp set_job_attr_delayed never go to shadow\">#5050</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-12 13:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44831\">[44831]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5050\" onclick=\"get_ticket_and_populate_wrapper('5050'); return false;\" title=\"Attributes set using chirp set_job_attr_delayed never go to shadow\">#5050</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-12 13:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44828\">[44828]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5050\" onclick=\"get_ticket_and_populate_wrapper('5050'); return false;\" title=\"Attributes set using chirp set_job_attr_delayed never go to shadow\">#5050</a></span>, starter never sends chirp set_job_attr_delayed attributes to the shadow. ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jun-24 10:46", "status": "resolved", "created": "2015-May-11 16:05", "fixed_version": "2015-May-11 16:05", "broken_version": "v080200", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}