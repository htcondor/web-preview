{"id": 5298, "title": "Ticket #5298: File transfer timestamps broken", "description": "<blockquote>\nIn Condor 7.7, we added information in the job ad about file transfer times (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2783\" onclick=\"get_ticket_and_populate_wrapper('2783'); return false;\" title=\"Add attributes to JobAd to show time spent in file transfer\">#2783</a></span>). This includes the attribute <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobCurrentStartTransferOutputDate\" title=\"Job Current Start Transfer Output Date\">JobCurrentStartTransferOutputDate</a></span>, which records the timestamp when output transfer began. In 7.9, improvements to file transfer management broken this attribute (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3333\" onclick=\"get_ticket_and_populate_wrapper('3333'); return false;\" title=\"improve file transfer management\">#3333</a></span>), so that it no longer appears in the job ad.\n\n<p>The problem is that the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object records the start and end times of transfers in the Upload() and Download() methods. When a transfer is done in non-blocking mode, this happens in the child process, and the times are not sent back to the parent process.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Oct-19 14:14:20 by johnkn:</em> <br/>\n\nCODE_REVIEW: looks good.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/907/transfer_times.patch\">transfer_times.patch</a>\n1327 bytes added by jfrey on 2015-Oct-08 15:34:15 UTC.\n<br/>\nFix missing <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobCurrentStartTransferOutputDate\" title=\"Job Current Start Transfer Output Date\">JobCurrentStartTransferOutputDate</a></span> attribute in job ad. <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object now records transfer start and end times in non-blocking mode.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-12 14:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45964\">[45964]</a></span>: Version history for restoration of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobCurrentStartTransferOutputDate\" title=\"Job Current Start Transfer Output Date\">JobCurrentStartTransferOutputDate</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5298\" onclick=\"get_ticket_and_populate_wrapper('5298'); return false;\" title=\"File transfer timestamps broken\">#5298</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-12 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45963\">[45963]</a></span>: Fix <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> timestamps for non-blocking mode. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5298\" onclick=\"get_ticket_and_populate_wrapper('5298'); return false;\" title=\"File transfer timestamps broken\">#5298</a></span> Record timestamps for the start and end of transfers when in non-blocking mode. Previously, they were recorded only for blocking mode. One side-effect is that the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobCurrentStartTransferOutputDate\" title=\"Job Current Start Transfer Output Date\">JobCurrentStartTransferOutputDate</a></span> attribute is once more reported in the job ad.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Oct-19 14:15", "status": "resolved", "created": "2015-Oct-08 10:32", "fixed_version": "2015-Oct-08 10:32", "broken_version": "v070903", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "#2783", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}