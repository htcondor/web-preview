{"id": 5673, "title": "Ticket #5673: After a failed GSI authentication, FS doesn't work.", "description": "<blockquote>\nThere is a race condition in the non-blocking handshake code such that if a method that uses non-blocking reads (currently GSI, FS) fails, the next method in the list will also fail.\n\n<p>The reason is that we do not properly reset the do_authenticate flag on a continuance of authentication that results in failure and then moves to the next method.  As such, the server decides not to authenticate while the client does do the authentication, and the resulting out-of-syncness causes badness, typically in form of both sides reading at the same time.  The server then times out after 20 seconds and declares failure.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5674\" onclick=\"get_ticket_and_populate_wrapper('5674'); return false;\" title=\"After some burn-in, cherry pick the commit(s) from #5673\">#5674</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAfter some burn-in, cherry pick the commit(s) from <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5673\" onclick=\"get_ticket_and_populate_wrapper('5673'); return false;\" title=\"After a failed GSI authentication, FS doesn't work.\">#5673</a></span></td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-08 17:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48965\">[48965]</a></span>: Update state correctly after a failed authentication <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5673\" onclick=\"get_ticket_and_populate_wrapper('5673'); return false;\" title=\"After a failed GSI authentication, FS doesn't work.\">#5673</a></span> Committer: Tim Theisen  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-27 14:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48664\">[48664]</a></span>: Add version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5673\" onclick=\"get_ticket_and_populate_wrapper('5673'); return false;\" title=\"After a failed GSI authentication, FS doesn't work.\">#5673</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-13 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48381\">[48381]</a></span>: Update state correctly after a failed authentication <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5673\" onclick=\"get_ticket_and_populate_wrapper('5673'); return false;\" title=\"After a failed GSI authentication, FS doesn't work.\">#5673</a></span>  (By zmiller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Jun-27 14:23", "status": "resolved", "created": "2016-May-13 16:01", "fixed_version": "2016-May-13 16:01", "broken_version": "v080400", "priority": "1", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "zmiller@cs.wisc.edu", "due_date": "20160518"}