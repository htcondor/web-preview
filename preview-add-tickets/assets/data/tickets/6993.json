{"id": 6993, "title": "Ticket #6993: Request new function to add labels to GCE universe VM in the submit fi", "description": "<blockquote>\nFermilab uses the \"Labels\" function in our Google Cloud Engine\nvirtual machines to distinguish which server requested them and\non behalf of which VO.   To do this it is possible to append a\n\"labels\" section to the json file.\n\n<p>\"labels\": {\n  \"detype\": \"hepcsvc03\",\n  \"vo\": \"fermilab\"\n}\n\n</p><p>Since our json file is in a glideinwms factory, and some of these variables\nchange dynamically, we would like the option to add a label at submit time, independent of the rest of the json file.\n\n</p><p>A structure similar to the ec2_tag structure for the AWS EC2 type would\nbe very helpful and useful.   GCE labels work about the same as AWS tags do.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jun-20 13:53:21 by tlmiller:</em> <br/>\n\nFor now, the <code>cloud_label_</code> stuff assumes GCE; it is therefore parallel to but ignored by the EC2 gahp (and vice-versa) because of different requirements on the attribute names and values.  These are only currently checked in the GAHP, but they could be checked earlier if anyone ever ends up caring.\n\n<p>Needs documentation:\n</p><ul>\n<li>release note\n</li><li>job ad attributes\n</li><li>in condor_submit manpage\n</li></ul>\n\n<p></p><hr/>\n<em>2019-Aug-05 16:37:30 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>The code looks ok to me.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-25 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57493\">[57493]</a></span>: Docs for cloud_label_&lt;name&gt; submit paramaters. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6993\" onclick=\"get_ticket_and_populate_wrapper('6993'); return false;\" title=\"Request new function to add labels to GCE universe VM in the submit fi\">#6993</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-20 13:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57200\">[57200]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6993\" onclick=\"get_ticket_and_populate_wrapper('6993'); return false;\" title=\"Request new function to add labels to GCE universe VM in the submit fi\">#6993</a></span>) Add cloud_label_[*|names] to submit language.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-19 12:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57172\">[57172]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6993\" onclick=\"get_ticket_and_populate_wrapper('6993'); return false;\" title=\"Request new function to add labels to GCE universe VM in the submit fi\">#6993</a></span>) OK, this works with +syntax for submission.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-18 15:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57165\">[57165]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6993\" onclick=\"get_ticket_and_populate_wrapper('6993'); return false;\" title=\"Request new function to add labels to GCE universe VM in the submit fi\">#6993</a></span>) Add labels to gce_instance_insert in the GAHP and grid manager. Needs testing and submit commands.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-05 16:37", "status": "resolved", "created": "2019-Apr-12 10:48", "fixed_version": "2019-Apr-12 10:48", "broken_version": "", "priority": "2", "subsystem": "Annex", "assigned_to": "jfrey", "derived_from": "", "creator": "timm", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "timm@fnal.gov, zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}