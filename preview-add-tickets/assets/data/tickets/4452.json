{"id": 4452, "title": "Ticket #4452: Collector port not defined, will use default: 9618 localhost 127.0.0.1", "description": "<blockquote>\nIf the COLLECTOR_HOST is set to 127.0.0.1 or localhost, the master will log the message\n\n<p></p><div class=\"code\">\n<pre class=\"code\">Collector port not defined, will use default: 9618\n</pre></div>\n\n\n<p>in the context\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">Master restart (GRACEFUL) is watching /tmp/8.2-test/condor-8.2.1-x86_64_RedHat6-stripped/sbin/condor_master (mtime:1403893350)\nCollector port not defined, will use default: 9618\nStarted DaemonCore process \"/tmp/8.2-test/condor-8.2.1-x86_64_RedHat6-stripped/sbin/condor_collector\", pid and pgroup = 24178\nWaiting for /tmp/8.2-test/condor-8.2.1-x86_64_RedHat6-stripped/local.puffin/log/.collector_address to appear.\n</pre></div>\n\n\n<p>Oddly, the message does <em>not</em> appear if COLLECTOR_HOST is set to the machine's public IP address or hostname (128.105.14.138 and puffin.cs.wisc.edu).\n\n</p><p>Clearly one of the two code paths is wrong, although it's not clear which one it is.  Either the message should always be printed (when a port is not specified) or never.\n\n</p><p>Possibly related: <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=4451\" onclick=\"get_ticket_and_populate_wrapper('4451'); return false;\" title=\"compare null hostnames in same_host COLLECTOR_HOST 127.0.0.1\">#4451</a></span>: compare null hostnames in same_host COLLECTOR_HOST 127.0.0.1</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-09 15:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=41365\">[41365]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4452\" onclick=\"get_ticket_and_populate_wrapper('4452'); return false;\" title=\"Collector port not defined, will use default: 9618 localhost 127.0.0.1\">#4452</a></span>) When scanning COLLECTOR_HOST to determine which port to starter the collector on, the master now assumes that the first 'localhost' entry is its collector (as opposed to ignoring it).  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Nov-12 15:00", "status": "resolved", "created": "2014-Jul-08 16:58", "fixed_version": "2014-Jul-08 16:58", "broken_version": "v080201", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}