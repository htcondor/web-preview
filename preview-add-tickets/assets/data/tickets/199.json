{"id": 199, "title": "Ticket #199: Handle leak in Windows hard kill", "description": "<blockquote>\nThe following code, in process_control.WINDOWS.cpp, leaks a handle if the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TerminateProcess\" title=\"Terminate Process\">TerminateProcess</a></span> call fails:\n\n<p></p><div class=\"verbatim\">\n<pre>    HANDLE process = OpenProcess(PROCESS_TERMINATE, FALSE, pid);\n    if (process == NULL) {\n        dprintf(D_ALWAYS,\n                \"windows_hard_kill: OpenProcess error: %u\\n\",\n                GetLastError());\n        return false;\n    }\n    if (TerminateProcess(process, 0) == FALSE) {\n        dprintf(D_ALWAYS,\n                \"windows_hard_kill: TerminateProcess error: %u\\n\",\n                GetLastError());\n        return false;\n    }\n    CloseHandle(process);\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Feb-11 10:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=13904\">[13904]</a></span>: Fix handle leak when hard killing a process fails on Windows <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GitTrac\" title=\"Git Trac\">GitTrac</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=199\" title=\"Handle leak in Windows hard kill\">#199</a></span>  (By Greg Quinn )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:15", "status": "resolved", "created": "2009-Feb-09 15:23", "fixed_version": "2009-Feb-09 15:23", "broken_version": "", "priority": "2", "subsystem": "Win32", "assigned_to": "gquinn", "derived_from": "", "creator": "gquinn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}