{"id": 7289, "title": "Ticket #7289: Implement secure S3 transfers using pre-signed URLs", "description": "<blockquote>\nDownloading from a secure S3 bucket normally means dealing with a tuple of security tokens (two if permanent, three if temporary).  Rather than deal with distributing and managing those tokens, Brian Bockelman suggests that we instead transform 's3://' URLs into pre-signed 'https://' URLs in the shadow before we send the list during file-transfer.  Doing so for uploads would require an additional round-trip, but keeping the tokens on the submit machine seems like a big win for security.\n\n<p>The function <code>generate_presigned_url()</code> will be implemented in libcondorutils, and based off of the EC2 GAHP's\n<code>createV4Signature()</code>.  While the S3 and EC2 signing protocols are almost identical, the bigger difference deals with moving all of the signature metadata out of the HTTP headers and into the query parameters.  For this reason, <code>generate_presigned_url()</code> will share subroutines (which will be moved into libcondorutils) with\n<code>createV4Signature()</code>, the two functions will not call the same implementation with different flags.\n\n</p><p></p><div class=\"snip\">\n<pre class=\"sniplabel\">The shadow will recognize three types of s3:// URLs.</pre>\n<pre class=\"snip\"># This form is distinguished by having no '.' before the slash.\ns3://&lt;bucket&gt;/&lt;key&gt;\n# We check for this pattern so we can automatically extract the region, since AWS cares about it.\ns3://&lt;bucket&gt;.s3-&lt;region&gt;.amazonaws.com/&lt;key&gt;\n# All other S3 URLs, presumed to be for Ceph or Minio.\ns3://&lt;host&gt;/&lt;key&gt;\n</pre></div>\n\n\n<p>If the user needs to specify a region, they will be able to do so in the submit file.  This region applies to all 's3://' URLs that don't specify a region.  Likewise, the same key pair is used for all files, both downloaded and uploaded.  (It wouldn't be hard to allow the user to specify a key pair for each direction.  Specifying a key pair per file would be hard.)\n\n</p><p>The shadow will silently rewrite 's3://' URLs for download.  For upload, the starter issues a new command to the shadow, asking it to translate a list of URLs; the starter sends the list because support for output file globs means that shadow doesn't actually know them all.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Sep-26 20:29:55 by tlmiller:</em> <br/>\n\nNo, seriously, don't ship it.  The branch needs to tested to verify that I didn't accidentally break either the EC2 universe or condor_annex.\n\n<p>It also needs to be tested to make sure the code doesn't require OpenSSL at link time.  (It shouldn't need libssl at all, actually, but it can be arranged if necessary.)\n\n</p><p>It is also incomplete; see the long comment preceding <code>generate_presigned_url()</code>.  Short version: Amazon hates you and has already started breaking things, so we need to figure out how to specify endpoints or regions in <code>s3://</code> URLs (or maybe adopt a different schema from the start).\n\n</p><p></p><hr/>\n<em>2019-Sep-26 23:21:27 by bbockelm:</em> <br/>\n\nLooking at the Amazon docs, it seems they are doing:\n\n<p></p><ul>\n<li><a class=\"external\" href=\"http://bucket.s3-aws-region.amazonaws.com\">http://bucket.s3-aws-region.amazonaws.com</a> (replace \"aws-region\" with the region name.  example: bucket-s3.sa-east-1.amazonaws.com)\n</li><li><a class=\"external\" href=\"http://bucket.s3.amazonaws.com\">http://bucket.s3.amazonaws.com</a> (old buckets, defaults to US east).\n</li></ul>\n\n<p>Looks like old bucket names (and path-style names) default to the us east region.\n\n</p><p>So, you can unambiguously parse the region from the hostname.  Not entirely sure a new scheme is needed?\n\n</p><p>The real mystery is what the various S3-compatible APIs will do with region information.  Looking at the Ceph source code, I'm guessing it actually accepts any arbitrary string...\n\n</p><p></p><hr/>\n<em>2019-Sep-27 00:26:11 by tlmiller:</em> <br/>\n\n<em>So, you can unambiguously parse the region from the hostname. Not entirely sure a new scheme is needed?</em>\n\n<p>The <code>s3://</code> scheme defined by the 'aws' CLI is <code>s3://&lt;bucket&gt;/&lt;key&gt;</code>.  I suppose we could just ignore that entirely and say that replacing the 'https://' in 'https://&lt;bucket&gt;.s3-&lt;region&gt;.amazonaws.com/&lt;key&gt;' with 's3://' in the file transfer list(s) indicates that you want HTCondor to pre-sign the URL.\n\n</p><p></p><hr/>\n<em>2019-Sep-27 08:02:48 by bbockelm:</em> <br/>\n\nI think we should do both.\n\n<p>That is,\n\n</p><p></p><ul>\n<li><code>s3://&lt;bucket&gt;/&lt;key&gt;</code> causes the signing code to lookup the region name in the job class ad (defaulting to US east), sign appropriately, and generate the right HTTPS URL with the region name.  This shorthand will only apply when there are no <code>.</code> characters in the bucket name.\n</li><li><code>s3://&lt;bucket&gt;.s3-&lt;region&gt;.amazonaws.com/&lt;key&gt;</code> extracts the region name automatically - but only specifically for amazonaws.com.\n</li><li>All other URLs of the form <code>s3://...</code> will be assumed to be S3-like (Ceph, minio).  Translate the's3://' to a 'https://' prefix and look at the job class ad for the region name (defaulting to <code>us-east-1</code> if no attribute is set).\n</li></ul>\n\n<p></p><hr/>\n<em>2019-Sep-27 10:15:19 by bbockelm:</em> <br/>\n\nOk - with the latest commit, presigning works for both stage-in and stage-out.  Tested with a Minio instance -- waiting for S3 credentials to be fixed before testing there.\n\n<p></p><hr/>\n<em>2019-Sep-27 10:39:23 by tlmiller:</em> <br/>\n\nRegarding the comment at <code>condor_utils/file_transfer.cpp:2358</code> of <span class=\"chng\"><a href=\"chngview?cn=57936\">[57936]</a></span>, does '..' actually have a special meaning for S3?  I didn't think it did for the AWS implementation, although I can see that not being true for Ceph or others.\n\n<p>I'm not thrilled with the idea of special handling for magic URLs, but that really may be the least-awful way to manage it.  (At least, nothing better comes to mind.)\n\n</p><p></p><hr/>\n<em>2019-Sep-27 12:00:18 by bbockelm:</em> <br/>\n\nAfter some discussion:\n\n<p><code>..</code> is indeed supposed to be removed from the URL structure as part of the signing process.  While there is no specific meaning to those characters at AWS (but perhaps at other places), since they do have meaning in the signature, I would prefer to keep them blacklisted for now.\n\n</p><p>Better be on the safe side.  If it's an impediment, we can remove this safety check and implement RFC3689-style normalization.\n\n</p><p></p><hr/>\n<em>2019-Sep-27 14:31:02 by tlmiller:</em> <br/>\n\n<strong>Testing</strong>\n\n<p></p><ol>\n<li>Verify that the shadow doesn't have a load-time dependency on libssl. [done]\n</li><li>Verify that the translation code isn't run when spooling or submitting file remotely.  [done]\n</li><li>Verify that file globs work for uploading.  [done]\n</li><li>Verify that this didn't break the EC2 GAHP or condor_annex.  [done]\n</li></ol>\n\n<p><strong>Known Bugs</strong>\n\n</p><p></p><ol>\n<li><code>AWSRegion</code> does not have a corresponding submit key.  [done]\n</li><li>The \"EC2\" in 'EC2AccessKeyId' and 'EC2SecretAccessKey' is deceptive for this purpose, as is the lack of a 'File' suffix.  We should add an alias to fix this.  [done]\n</li><li>We should write the documentation after fixing these bugs.\n</li><li>We should encrypt the attribute-value pair we send presigned URLs in (in case the shadow-to-starter channel is not secure).  [done]\n</li><li>We do not do match-making on the basis of the starter's ability to ask for presigned output URLs.  (I believe the shadow presigns the input URLs without interacting with the starter.)  [done]\n</li></ol>\n\n<p><strong>Follow-Up Work</strong>\n\n</p><p></p><ol>\n<li>Should <code>condor_submit -remote</code> spool the credential files, or just fail?  Brian is thinking we should use the credmon/credd instead.\n</li><li>We can handle relative \"paths\" in the S3 URL if it ever turns out anyone needs it.\n</li></ol>\n\n<p></p><hr/>\n<em>2019-Sep-28 18:48:47 by tlmiller:</em> <br/>\n\nVerified that condor_annex and EC2 universe are (still) working.\n\n<p></p><hr/>\n<em>2019-Sep-30 04:27:47 by bbockelm:</em> <br/>\n\nHere's the encryption of URLs over the wire:\n\n<p><a class=\"external\" href=\"https://github.com/htcondor/htcondor/compare/master...bbockelm:V8_9-gt7289-encrypt?expand=1\">https://github.com/htcondor/htcondor/compare/master...bbockelm:V8_9-gt7289-encrypt?expand=1</a>\n\n</p><p>Please review and merge when you're happy.\n\n</p><p>This takes care of any cases where URLs are sent over the wire (uploads, downloads, and responses to signing requests).\n\n</p><p>Todd, can you grab the other two items for tweaks to <code>condor_submit</code>?\n\n</p><p></p><hr/>\n<em>2019-Sep-30 04:31:21 by bbockelm:</em> <br/>\n\nAlso @Todd - I'm seeing a build failure on Windows due to the signing code:\n\n<p><a class=\"external\" href=\"https://ci.appveyor.com/project/bbockelm/htcondor/builds/27759141\">https://ci.appveyor.com/project/bbockelm/htcondor/builds/27759141</a>\n\n</p><p>Might be an easy fix - or maybe we can ifdef out.  Can you take a look?\n\n</p><p></p><hr/>\n<em>2019-Sep-30 10:14:28 by tlmiller:</em> <br/>\n\naws_region, aws_secret_access_key_file, and aws_access_key_id_file now implemented.  Also fixed breakage in s3://&lt;bucket&gt;/&lt;key&gt; -style URLs.  (We now assume, as we originally did, that we can reference those via s3.amazonaws.com (using the us-east-1 region for signing purposes) because some of them <em>must</em> be, and users can't specify that the s3://&lt;bucket&gt;.s3-&lt;region&gt;.amazonaws.com/&lt;key&gt; style URLs.)\n\n<p></p><hr/>\n<em>2019-Sep-30 11:25:33 by tlmiller:</em> <br/>\n\nMerged presigned URLs encryption.\n\n<p></p><hr/>\n<em>2019-Sep-30 15:49:24 by tlmiller:</em> <br/>\n\nReverted the encryption merge, because it caused test failures.\n\n<p></p><hr/>\n<em>2019-Sep-30 20:29:50 by bbockelm:</em> <br/>\n\nFigured out the issue with the encryption failures - see\n\n<p><a class=\"external\" href=\"https://github.com/htcondor/htcondor/pull/77\">https://github.com/htcondor/htcondor/pull/77</a>\n\n</p><p>(will now go back to my test branch for running ctest inside Travis...)\n\n</p><p></p><hr/>\n<em>2019-Oct-01 14:40:09 by tlmiller:</em> <br/>\n\nRegarding Testing/3 and Future Work/2: HTCondor (still) doesn't have actual globbing (or regexes) for file upload.  However, <code>output_destination</code> is a thing.  So for testing uploads with files not known at submission time, we're doing the following:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">transfer_input_files = s3://bucket.s3-region.amazonaws.com/input\noutput_destination = s3://bucket.s3-region.amazonaws.com/prefix\n</pre></div>\n\n\n<p>and it seems to work OK.\n\n</p><p>In order to recursively transfer unknown directories, I tried the following:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">transfer_input_files = s3://bucket.s3-region.amazonaws.com/input\ntransfer_output_files = ./\noutput_destination = s3://bucket.s3-region.amazonaws.com/prefix\n</pre></div>\n\n\n<p>This failed, probably because the presigning code doesn't handle URL normalization.  The consensus is that this use case isn't worth worrying about for now.\n\n</p><p></p><hr/>\n<em>2019-Oct-01 14:43:25 by tlmiller:</em> <br/>\n\nAn issue with S3 downloads not failing when the URL specifies the wrong region has been fixed; see <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7292\" title=\"curl_plugin shout treat HTTP redirection without Location as failure\">#7292</a></span>.\n\n<p></p><hr/>\n<em>2019-Oct-08 17:36:01 by tlmiller:</em> <br/>\n\nShould get documentation reviewed; would still like to test remote submission before release (and just document the results).\n\n<p></p><hr/>\n<em>2019-Oct-10 13:42:50 by bbockelm:</em> <br/>\n\nTested this out on CHTC, now that I have a few S3 endpoints to beat up.\n\n<p>A few minor issues:\n\n</p><p></p><ol>\n<li>If you do a condor_submit without setting the access/secret key, it will accept the transfer and fail only at job startup with a mysterious \"FILETRANSFER:1:FILETRANSFER: plugin for type s3 not found!\"\n<ul>\n<li>Suggestion: if <code>s3</code> is used and <code>PRESIGN_S3_URLS</code> is set, then require an access / secret key at submit time.\n</li></ul>\n</li><li>The condor_submit alias doesn't seem to work:\n</li></ol>\n\n<p></p><div class=\"verbatim\">\n<pre>$ condor_submit s3_test.sub\nSubmitting job(s).\n1 job(s) submitted to cluster 10528414.\nWARNING: the line 'ec2_secret_access_key_id = ~/.mc/icecube_secret_key' was unused by condor_submit. Is it a typo?\nWARNING: the line 'ec2_access_key_id = ~/.mc/icecube_access_key' was unused by condor_submit. Is it a typo?\n</pre></div>\n\n\n<p>Seems like we should resolve both prior to final release.  ToddM, can you look into this?\n\n</p><p></p><hr/>\n<em>2019-Oct-10 16:25:14 by tlmiller:</em> <br/>\n\nAfter a brief discussion, I'll fix the issue with not checking for the key attributes at submit time.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"active\" href=\"tktview?tn=7516\" title=\"S3 file transfer needs accurate error messaging\">#7516</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nS3 file transfer needs accurate error messaging</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 14:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58141\">[58141]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Documentation and a release note. Committer: Tim Theisen  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-10 17:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58082\">[58082]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Check if the user specified S3 keys at submit time.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-08 17:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58058\">[58058]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Documentation and a release note.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-01 23:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58013\">[58013]</a></span>: Bugfix: Have both sides use same encryption setting. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span> When the last file transferred is encrypted - but encryption is otherwise disabled for a file transfer - then the upload side would send the final transfer ACK encrypted while the download side would expect the final ACK to be unencrypted. This\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-01 23:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58012\">[58012]</a></span>: Fix python unit tests when running under ctest. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-01 19:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58001\">[58001]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Remove special-case handling for S3 URLs from the submit utils. Instead, starters with the capability to handle the rewriting will advertise 's3' as a transfer method (if the 'https' method is available). This unbreaks remote submit to old schedds.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 20:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58010\">[58010]</a></span>: Fixup: set correct default mode. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 11:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57969\">[57969]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Fix the Windows builds (probably).  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 10:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57967\">[57967]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Made AWS*KeyFile aliases for EC2*Key for EC2 jobs.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 10:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57966\">[57966]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Fixed broken s3:://&lt;bucket&gt;/&lt;key&gt; -style URLs. Add aws_region, aws_[access_key_id|secret_access_key]_file submit commands.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 04:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57971\">[57971]</a></span>: Force encryption of URLs for file transfer. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span> Prevents the leak of sensitive URLs (such as S3 signed URLs) over the wire.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-30 04:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57970\">[57970]</a></span>: Enable per-attribute encryption controlled by caller. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span> Allows arbitrary additional attributes to be encrypted when putting the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> on the wire.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-27 14:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57944\">[57944]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Minor pre-merge tweaks.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-27 10:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57938\">[57938]</a></span>: Integrate pre-signing utility with file transfer object. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-27 10:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57937\">[57937]</a></span>: Make S3 pre-signing scheme more flexible. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span> Allow different endpoints to be specified as well as regions. These extensions have been tested to work with Minio.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-26 22:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57936\">[57936]</a></span>: Implement file transfer object logic for URL transformation. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-26 20:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57934\">[57934]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Works on my machine. Ship it!  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-26 20:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57933\">[57933]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7289\" title=\"Implement secure S3 transfers using pre-signed URLs\">#7289</a></span>) Create AWSv4-utils.[h,cpp] in util lib. Doesn't do any crypto, yet.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Oct-16 14:56", "status": "resolved", "created": "2019-Sep-26 15:57", "fixed_version": "2019-Sep-26 15:57", "broken_version": "", "priority": "2", "subsystem": "DaemonsSubmitNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, bbockelm@cse.unl.edu, jpatton@cs.wisc.edu", "due_date": ""}