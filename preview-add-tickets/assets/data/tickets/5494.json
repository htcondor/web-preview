{"id": 5494, "title": "Ticket #5494: Create a test for -batch-name", "description": "<blockquote>\nWe should have a test that makes sure the -batch-name functionality works.  (Ideally, we should implement <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5493\" onclick=\"get_ticket_and_populate_wrapper('5493'); return false;\" title=\"Propagate batch-name to all jobs in a workflow\">#5493</a></span>: Propagate batch-name to all jobs in a workflow, and then have the test verify that the -batch-name value gets all the way down to \"regular\" node jobs of a sub-DAG.)</blockquote>", "remarks": "<blockquote>\n<em>2016-Apr-07 14:11:16 by wenger:</em> <br/>\n\nOkay, this is also in progress on V8_5-gittrac_5493-branch, as part of <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5493\" onclick=\"get_ticket_and_populate_wrapper('5493'); return false;\" title=\"Propagate batch-name to all jobs in a workflow\">#5493</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5605\" onclick=\"get_ticket_and_populate_wrapper('5605'); return false;\" title=\"Have a default for -batch-name (at least for DAGs)\">#5605</a></span>.\n\n<p></p><hr/>\n<em>2016-Apr-07 15:44:00 by wenger:</em> <br/>\n\nNote:  First commit for this ticket doesn't show up because of how the comment was formatted.\n\n<p></p><hr/>\n<em>2016-Apr-08 14:40:42 by wenger:</em> <br/>\n\nLots of nice green on my test build -- so I'm going to change this ticket to the\n review state...\n\n<p></p><hr/>\n<em>2016-Apr-15 11:03:54 by wenger:</em> <br/>\n\nI've gone ahead and merged V8_5-gittrac_5493-branch to master.\n\n<p></p><hr/>\n<em>2016-Apr-22 15:57:21 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>:  All good.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/936/gt5493_dif\">gt5493_dif</a>\n15863 bytes added by wenger on 2016-Apr-07 20:55:02 UTC.\n<br/>\nHere's a diff of the whole branch.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-08 11:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48188\">[48188]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5494\" onclick=\"get_ticket_and_populate_wrapper('5494'); return false;\" title=\"Create a test for -batch-name\">#5494</a></span>: Forgot to add job_dagman_batch_name to Test_Requirements.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-07 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48184\">[48184]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5493\" onclick=\"get_ticket_and_populate_wrapper('5493'); return false;\" title=\"Propagate batch-name to all jobs in a workflow\">#5493</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5494\" onclick=\"get_ticket_and_populate_wrapper('5494'); return false;\" title=\"Create a test for -batch-name\">#5494</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5605\" onclick=\"get_ticket_and_populate_wrapper('5605'); return false;\" title=\"Have a default for -batch-name (at least for DAGs)\">#5605</a></span>: Oops -- deleting temporary code left in the test...  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-07 15:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48183\">[48183]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5493\" onclick=\"get_ticket_and_populate_wrapper('5493'); return false;\" title=\"Propagate batch-name to all jobs in a workflow\">#5493</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5494\" onclick=\"get_ticket_and_populate_wrapper('5494'); return false;\" title=\"Create a test for -batch-name\">#5494</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5605\" onclick=\"get_ticket_and_populate_wrapper('5605'); return false;\" title=\"Have a default for -batch-name (at least for DAGs)\">#5605</a></span>: Replaced instances of literal \"<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobBatchName\" title=\"Job Batch Name\">JobBatchName</a></span>\" string with the appropriate #defined constant for safety. Cleaned up temporary code, and added version history items.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-07 14:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48181\">[48181]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5493\" onclick=\"get_ticket_and_populate_wrapper('5493'); return false;\" title=\"Propagate batch-name to all jobs in a workflow\">#5493</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5494\" onclick=\"get_ticket_and_populate_wrapper('5494'); return false;\" title=\"Create a test for -batch-name\">#5494</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5605\" onclick=\"get_ticket_and_populate_wrapper('5605'); return false;\" title=\"Have a default for -batch-name (at least for DAGs)\">#5605</a></span>: DAGMan now defaults to setting a batch name of the top-level DAGMan's CondorID; batch name is now passed down to all jobs within a workflow (including sub-DAGs); created a test for this. (Note: still needs a little cleanup, and needs documentation.)  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Apr-22 16:06", "status": "resolved", "created": "2016-Jan-27 13:49", "fixed_version": "2016-Jan-27 13:49", "broken_version": "v080502", "priority": "3", "subsystem": "Tests", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}