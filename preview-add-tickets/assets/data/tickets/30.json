{"id": 30, "title": "Ticket #30: Add ability to get email notification on ticket creation", "description": "<blockquote>\nIt should be possible to get email when any new ticket is created, as an alternative to monitoring the timeline.\n\n<p>Seems this should be a User option, maybe a feature bitmask similar to the permissions mask is needed for this and the no-email portion of <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=28\" title=\"Add e-mail CC column to tickets\">#28</a></span>.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Feb-20 03:47:11 by tannenba:</em> <br/>\n\nUsing gittrac's <a class=\"external\" href=\"http://condor-wiki.cs.wisc.edu/index.cgi/setup_chng\">ticket change notification feature</a>, I think we can easily have gittrac send email to whomever is assigned the ticket and cc the list of email addresses in the notify field.\n\n<p>Maybe something like this would work:\n\n</p><p>echo 'An update was made to your ticket #%n by user %u. \\n\\n Title: %t\\n URL: <span class=\"quote\">http://condor-wiki.cs.wisc.edu/index.cgi/tktview?tn=%n\\n</span> Created By: %w\\n Assigned To: %a\\n Current Status: %s\\n\\nLove, your friendly Condor Wiki service\\n' | /bin/mail -s '[CondorWiki] %u updated ticket %n: %t' -c `echo '%c' | /usr/bin/tr -s ',[:blank:];' ','` %A\n\n</p><p>(all on one line)\n\n</p><p>The tr embedded in there is to convert spaces between addresses listed in ticket notify fields into commas.\n\n</p><p></p><hr/>\n<em>2009-Feb-20 03:59:15 by tannenba:</em> <br/>\n\nUgh.  Not getting new line characters cuz of quoting; changing to be\n\n<p>echo \"An update was made to your ticket #\"'%n'\" by user \"'%u'\". \\n\\n Title: \"'%t'\"\\n URL: <a class=\"external\" href=\"http://condor-wiki.cs.wisc.edu/index.cgi/tktview?tn=&quot;'%n'&quot;\\n\">http://condor-wiki.cs.wisc.edu/index.cgi/tktview?tn=\"'%n'\"\\n</a> Created By: \"'%w'\"\\n Assigned To: \"'%a'\"\\n Current Status: \"'%s'\"\\n\\nLove, your friendly Condor Wiki service\\n\" | /bin/mail -s '[CondorWiki] %u updated ticket %n: %t' -c `echo '%c' | /usr/bin/tr -s ',[:blank:];' ','` %A\n\n</p><p></p><hr/>\n<em>2009-Feb-20 04:06:52 by tannenba:</em> <br/>\n\nNope.  Lets try pre-appending shopt -s xpg_echo;\n\n<p></p><hr/>\n<em>2009-Feb-20 04:19:12 by tannenba:</em> <br/>\n\nWell, it seems to work... but perhaps someday it would be nice to change it so it does not send email to the person who made the change.  Maybe using the\n\n<p></p><pre>  [ 'foo' != 'fodso' ] &amp;&amp; ( echo \"Send email\" )\n</pre>\n\n<p>bash construct.\n\n</p><p></p><hr/>\n<em>2009-Feb-20 10:55:54 by matt:</em> <br/>\n\nLet's go with /scratch.2/matt/gittrac_tktchng.sh instead.\n\n<p>I'd install it in /scratch.2/gittrack but only tannenba can do that!\n\n</p><p></p><hr/>\n<em>2009-Feb-20 10:57:19 by matt:</em> <br/>\n\nThe remark processing is a little annoying. Might be better to have new value then old value instead of the other way around.\n\n<p></p><hr/>\n<em>2009-Feb-20 12:39:21 by matt:</em> <br/>\n\nThe remark/description processing is now a diff, and it doesn't email the assignee if they made the change - unless of course they're also in the Notify list.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "todo", "last_change": "2009-Dec-23 11:34", "status": "resolved", "created": "2009-Jan-16 09:15", "fixed_version": "2009-Jan-16 09:15", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "matt", "derived_from": "#3", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}