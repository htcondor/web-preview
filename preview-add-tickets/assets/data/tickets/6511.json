{"id": 6511, "title": "Ticket #6511: Collector exits with assertion on failure to send world ad", "description": "<blockquote>\nObserved on Windows 7 running HTCondor v8.7.7 -\n\n<p>The condor_collector failed an ASSERT and exited everytime it failed to send an ad to the 'world collector' at UW.  I had <code>NETWORK_INTERFACE=127.0.0.1</code> and <code>BIND_ALL_INTERFACES=False</code>, which apparently at least on Win32 with UDP resulted in failure to contact the world collector due to winsock error 10051 (network unreachable).  Not a big deal except that caused the collector to exit!  Log snippet below.\n\n</p><p></p><pre>   12/12/17 16:33:53 (pid:4916) Attempting to send update via UDP to collector cm0.cs.wisc.edu &lt;128.105.XX.XX:9618?alias=condor.cs.wisc.edu&gt;\n   12/12/17 16:33:53 (pid:4916) SafeSock::my_ip_str() failed to connect, errno = 10051\n   12/12/17 16:33:53 (pid:4916) ERROR \"Assertion ERROR on (ip_string)\" at line 457 in file C:\\home\\tannenba\\condor\\CONDOR_SRC_TWO\\src\\condor_utils\\condor_sockaddr.cpp</pre>\n</blockquote>", "remarks": "<blockquote>\n<em>2017-Dec-20 17:55:58 by tannenba:</em> <br/>\n\nNote, there is a dup ticket about this problem in <span class=\"ticket\"><a class=\"abandoned\" href=\"tktview?tn=6507\" title=\"Don't pass NULL to from_ip_string() in ConvertDefaultIpToSocketIP()...\">#6507</a></span>\n\n<p></p><hr/>\n<em>2017-Dec-20 18:02:27 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Looks good.  my_ip_str() caches the result, so this won't even be any slower.\n\n</p><p></p><hr/>\n<em>2018-Mar-09 11:16:21 by tim:</em> <br/>\n\n<strong>DOC REVIEW:</strong> Looks good.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-20 17:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53047\">[53047]</a></span>: Version history blurb for bug fix <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6511\" title=\"Collector exits with assertion on failure to send world ad\">#6511</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-20 17:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53046\">[53046]</a></span>: Prevent collector ASSERT on failure to send world ad. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6511\" title=\"Collector exits with assertion on failure to send world ad\">#6511</a></span>  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Mar-09 11:16", "status": "resolved", "created": "2017-Dec-13 18:04", "fixed_version": "2017-Dec-13 18:04", "broken_version": "v080600", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "tannenba", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}