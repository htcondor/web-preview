{"id": 1576, "title": "Ticket #1576: kbdd not getting arguments on Windows", "description": "<blockquote>\nThe wrapping of kbdd in an invisible Window currently results in arguments being passed it getting tossed since they aren't being relayed to dc_main.  Fix involves reading in the lpCmdLine and copying it into an array of character strings and then passing it onto the dc_main function.</blockquote>", "remarks": "<blockquote>\n<em>2010-Aug-12 13:29:42 by ziliang:</em> <br/>\n\nAn addendum: apparently passing in a directory with the \\ at the end of the path will cause Condor to choke up, at least in the7.4 series.\n\n<p></p><hr/>\n<em>2010-Sep-27 16:26:25 by ziliang:</em> <br/>\n\nThe latest patch doesn't free the initially provided list of arguments.  Adding that in wouldn't be hard, though do we need to bother in this case?</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1577\" onclick=\"get_ticket_and_populate_wrapper('1577'); return false;\" title=\"Directory path failing because of trailing slash\">#1577</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDirectory path failing because of trailing slash</td></tr>\n</tbody></table>", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/212/kbdd.patch\">kbdd.patch</a>\n1363 bytes added by ziliang on 2010-Aug-12 18:42:05 UTC.\n<br/>\nPatch to route arguments to dc_main.<br/>\n</li><li><a href=\"attach_get/226/argcargv.cpp\">argcargv.cpp</a>\n3696 bytes added by johnkn on 2010-Sep-27 17:18:09 UTC.\n<br/>\nkbdd.patch does not properly account for quoted arguments. \n\n<p>I've attached a bit of code from Matt Pietrek's LIBCTINY for windows (from MSDN magazine) showing how to parse a windows commmand line into argc/argv taking quotes into account.<br/>\n</p></li><li><a href=\"attach_get/227/kbdd.diff\">kbdd.diff</a>\n1612 bytes added by ziliang on 2010-Sep-27 21:24:52 UTC.\n<br/>\nUpdated patch that uses standard Windows functions to properly separate arguments with quotes in them.<br/>\n</li><li><a href=\"attach_get/228/kbdd.diff\">kbdd.diff</a>\n1790 bytes added by ziliang on 2010-Sep-27 22:06:02 UTC.\n<br/>\nIncorporated feedback from TJ, freed wide character buffer, and fixed really stupid oversight with char and char* in deciding size for allocation.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-28 18:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=19084\">[19084]</a></span>: pass command line arguments into dc_main (it was broken in Win32 kbdd) <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1576\" onclick=\"get_ticket_and_populate_wrapper('1576'); return false;\" title=\"kbdd not getting arguments on Windows\">#1576</a></span>  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Nov-19 07:06", "status": "resolved", "created": "2010-Aug-12 12:24", "fixed_version": "2010-Aug-12 12:24", "broken_version": "v070400", "priority": "3", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "", "creator": "ziliang", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu, tstclair@redhat.com", "due_date": "20100816"}