{"id": 7483, "title": "Ticket #7483: condor_q -dag <id> should display nested dags", "description": "<blockquote>\nCurrently, we can use the following command to display a condor_dagman job and the jobs nested under it:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">condor_q -nobatch -dag &lt;id&gt;\n</pre></div>\n\n\n<p>However this will only show the jobs running immediately under that particular id. If there are any subdags in the workflow, anything nested deeper than the first level will not appear.\n\n</p><p>It's important to note that it is currently possible to display nested dags by simply omitting the ID of the condor_dagman job:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_q -nobatch -dag\n</pre></div>\n\n\n<p>However this also produces a lot of output about other jobs that we don't care about.\n\n</p><p>We should change condor_q to show the full list of nested jobs when specifying the job ID. One way to do this is for condor_dagman to publish a new attribute in the job ad of the root dagman ID, so we can run a constraint about this. TJ also suggested an implementation involving the schedd. We should agree on an approach before moving forward with this.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-26 10:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=60552\">[60552]</a></span>: condor_q -dag &lt;id&gt; now uses <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobBatchId\" title=\"Job Batch Id\">JobBatchId</a></span> field for nested dags (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7483\" onclick=\"get_ticket_and_populate_wrapper('7483'); return false;\" title=\"condor_q -dag &lt;id&gt; should display nested dags\">#7483</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-10 11:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=60113\">[60113]</a></span>: Added version history (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7483\" onclick=\"get_ticket_and_populate_wrapper('7483'); return false;\" title=\"condor_q -dag &lt;id&gt; should display nested dags\">#7483</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-15 17:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59877\">[59877]</a></span>: condor_q -dag -nobatch &lt;dag-id&gt; now displays all nested subdags and jobs (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7483\" onclick=\"get_ticket_and_populate_wrapper('7483'); return false;\" title=\"condor_q -dag &lt;id&gt; should display nested dags\">#7483</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Jul-10 11:12", "status": "resolved", "created": "2020-Jan-21 16:19", "fixed_version": "2020-Jan-21 16:19", "broken_version": "", "priority": "3", "subsystem": "Tools", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}