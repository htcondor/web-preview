{"id": 6654, "title": "Ticket #6654: condor_master crashs when SSL is on FIPS mode", "description": "<blockquote>\nMichael Pelletier reports that their condor_mastser is core dumping when ssl is in FIPS mode.  He reports that the DoD is likely to require that mode in the near future.  he says\n\n<p>The following message appears in syslog:\n\n</p><p></p><pre>    Apr 17 15:16:23 engcloud-exec01 condor_master: md5_dgst.c(82): OpenSSL internal error, assertion failed: Digest MD5 forbidden in FIPS mode!</pre>\n</blockquote>", "remarks": "<blockquote>\nFIPS compliance doesn't allow MD5.  This ticket is to track the branch V8_6-FIPS-FIX-branch which will be a quick-fix for FIPS that IS NOT COMPATIBLE WITH OTHER VERSIONS OF HTCondor!\n\n<p>The plan on this branch is to simply replace md5 with sha256.  This changes the header size on CEDAR packets, but as long as this branch is used only with itself it should work.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Aug-23 10:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55333\">[55333]</a></span>: switch back to using md5 as a checksome for file transfer test until all platforms have perl support for the new SHA256 interface. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Aug-21 18:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55331\">[55331]</a></span>: switch back to using md5 as a checksome for file transfer test until all platforms have perl support for the new SHA256 interface. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Aug-21 14:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55323\">[55323]</a></span>: Fix minor typo in new SHA test <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Aug-21 12:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55322\">[55322]</a></span>: merge master into V8_6-FIPS-FIX-branch and fix conflicts <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-21 16:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55099\">[55099]</a></span>: No functionality changes. Just renames from MD5 to \"Hash\", \"SHA\", etc. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-21 13:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55095\">[55095]</a></span>: No real code changes, just clean up names and some user-visible text output. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-21 13:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55094\">[55094]</a></span>: MD5 now fully replaced by SHA256 in condor_tests (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-21 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55093\">[55093]</a></span>: Second pass on md5 &gt; sha256 in condor_tests (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-20 15:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55087\">[55087]</a></span>: First pass at clearing md5 from condor_tests (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-20 11:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55083\">[55083]</a></span>: Remove use of md5 in bosco scripts. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-20 11:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55084\">[55084]</a></span>: Use SHA256 instead of MD5 in making tree of job sandbox directories. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jun-19 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55081\">[55081]</a></span>: Switch from md5 to sha256 (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6654\" onclick=\"get_ticket_and_populate_wrapper('6654'); return false;\" title=\"condor_master crashs when SSL is on FIPS mode\">#6654</a></span>)  (By zmiller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Oct-22 13:13", "status": "resolved", "created": "2018-Apr-19 09:10", "fixed_version": "2018-Apr-19 09:10", "broken_version": "v080609", "priority": "2", "subsystem": "Daemons", "assigned_to": "zmiller", "derived_from": "", "creator": "johnkn", "rust": "s92642", "customer_group": "support", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}