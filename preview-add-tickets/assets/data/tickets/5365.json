{"id": 5365, "title": "Ticket #5365: HTCondor View: Move query logic back to HTML", "description": "<blockquote>\nMove the logic for setting up the query (and thus the links that toggle them) back into the HTML.  This will require getting a better API allowing specifying:\n\n<p></p><ul>\n<li>Query for graph. May be null to specify no graph.\n</li><li>Query for table. May be null to specify no table.\n</li><li>Query for graph when a table element is clicked on, with placeholders (Say '{1}' '{2}')\n</li><li>Which fields in the able should be dropped into the placeholders on row click. May be null to specify to ignore clicks.\n</li></ul>\n\n<p>Modify the default index.html to use this interface, with the selection of data source being handled there.  (Date range, maybe? Maybe just keep in the Javascript)\n\n</p><p>This does not include work to allow multiple graphs on a single page, which will require eliminating the remaining global assumptions. That work is Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5366\" title=\"HTCondor View: multiple charts in one page\">#5366</a></span>: HTCondor View: multiple charts in one page\n\n</p><p>Proposed API:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">// The tag with this id will have the graph/table put inside.\nvar id = 'my_div_id';\n\n// Afterquery arguments for this graph. If null/undefined/empty\n// string, there is no graph at all.\nvar graph_args = \"url=foo.json&amp;title=My Chart&amp;filter...chart=stacked\";\n\n// Afterquest arguments for this table. If null/undefined/empty\n// string, there is no graph at all.\nvar table_args = \"url=foo.json&amp;title=My Chart&amp;filter...\";\n\n// If null/undefined/empty string, selecting a row in the table\n// does nothing. If there is no table, this argument is ignored.\n// If there is no graph, this argument is ignored.\n// Otherwise, this is a list of fields in the table that can be\n// used to filter the graph.  When a row in the table is\n// selected, the graph arguments will have a\n// 'filter=FIELDNAME=SELECTEDVALUE' entry added to the front for\n// each element in the tuple.\nvar selection_tuple = ['Arch', 'OpSys'];\n\nnew HTCondorView(div_id, graph_args, table_args, selection_tuple);\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Nov-10 14:44:26 by adesmet:</em> <br/>\n\nBroken back into pieces. The linked panes with tabs became its own Javascript file, since it's a non-trivial amount of code.  Default page now has a 3-pie chart dashboard and a linked graph/table.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-09 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=47845\">[47845]</a></span>: Generate IDs on the fly. Allows multiple graphs on a single page. For <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5365\" title=\"HTCondor View: Move query logic back to HTML\">#5365</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5366\" title=\"HTCondor View: multiple charts in one page\">#5366</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-09 15:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=47844\">[47844]</a></span>: Moving graph HTML creation into own function. Work toward <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5365\" title=\"HTCondor View: Move query logic back to HTML\">#5365</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=5366\" title=\"HTCondor View: multiple charts in one page\">#5366</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Nov-10 14:44", "status": "resolved", "created": "2015-Nov-03 16:31", "fixed_version": "2015-Nov-03 16:31", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "adesmet", "derived_from": "#5351", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}