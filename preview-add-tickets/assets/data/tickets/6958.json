{"id": 6958, "title": "Ticket #6958: Param CHIRP_DELAYED_UPDATE_PREFIX is broken", "description": "<blockquote>\nContrary to its name and vague documentation, the config param CHIRP_DELAYED_UPDATE_PREFIX is a list of the full names of attributes that can be set via Chirp's set_job_attr_delayed command. A single asterisk, which can appear anywhere in each entry, can be used for wildcard matching. The default value was originally <code>Chirp*</code>.\n\n<p>In 8.6.10, the shadow was changed to treat the items in CHIRP_DELAYED_UPDATE_PREFIX as prefixes of attribute names with no wildcard option, and the default value was changed to <code>Chirp</code> (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6557\" title=\"RemoteResource::allowRemoteWriteAttributeAccess() problems\">#6557</a></span>). The code in the starter wasn't changed. Thus, <code>Chirp</code> is now the only attribute that can be set in the default configuration. To be useable, CHIRP_DELAYED_UPDATE_PREFIX must be set differently for the shadow and starter. The values for the starter need a trailing asterisk and the values for the shadow can't have one.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Apr-01 15:23:38 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>The code makes CHIRP_DELAYED_UPDATE_PREFIX into a list of attribute name prefixes.\n\n</p><p>This will break any configuration of CHIRP_DELAYED_UPDATE_PREFIX  from 8.6 or before, where a trailing asterisk was required. Do we want to handle those configurations, or require that admins change their config files?\n\n</p><p></p><hr/>\n<em>2019-Apr-09 15:55:11 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p></p><ul>\n<li>The new changes look good.\n\n<p></p></li><li>The standard plural of <code>prefix</code> appears to be <code>prefixes</code>, not <code>prefices</code>.\n</li></ul>\n\n<p></p><hr/>\n<em>2019-Apr-09 16:13:15 by tlmiller:</em> <br/>\n\n<ul>\n<li><em>The standard plural of =prefix= appears to be =prefixes=, not =prefices=.</em>\n</li></ul>\n\n<p>Huh!  So it is.  I must be using K&amp;R English, rather than English (17)89.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-09 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56548\">[56548]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>) Convert K&amp;R [Kings &amp; Royals] English to English [17]89.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-08 17:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56545\">[56545]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6557\" title=\"RemoteResource::allowRemoteWriteAttributeAccess() problems\">#6557</a></span>) Partially revert code changes and rewrite documentation for CHIRP_DELAYED_UPDATE_PREFIX.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-01 15:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56481\">[56481]</a></span>: Docs for chirp delayed attribute command failure bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-01 15:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56480\">[56480]</a></span>: Add comment clarifying how StringList::prefix() works. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Mar-20 13:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56397\">[56397]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>) Release note.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Mar-20 13:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56396\">[56396]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6958\" title=\"Param CHIRP_DELAYED_UPDATE_PREFIX is broken\">#6958</a></span>) Rename StringList::substring to prefix(), which is what it actually does. Add prefix_anycase(). Call prefix_anycase() instead of constains_anycase_wildcard() in starter to be consistent with shadow code and name of knob.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Apr-09 16:16", "status": "resolved", "created": "2019-Mar-15 12:59", "fixed_version": "2019-Mar-15 12:59", "broken_version": "v080610", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "tlmiller", "derived_from": "#6557", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}