{"id": 6251, "title": "Ticket #6251: condor_history occasionally shows RemoteHost and other attributes", "description": "<blockquote>\nLukas <a class=\"external\" href=\"https://lists.cs.wisc.edu/archive/htcondor-users/2017-May/msg00015.shtml\">reported on the htcondor-users email list</a> that condor_history occasionally shows the <code>RemoteHost</code> classad attribute for terminated jobs.\n\n<p>This is a minor bug, which can occur if a job happens to complete while the schedd is in the process of a graceful shutdown.\n\n</p><p>The issue is job attributes like <code>RemoteHost</code> are normally removed whenever the shadow associated with the job exits.  However, these attributes must be preserved to enable a new shadow to reconnect to the job in the event the schedd is restarted.  Thus in the situation where the shadow exits because the schedd is shutting down, the schedd <em>always</em> preserves these attributes --- even if the job is in a terminal state!\n\n</p><p>This ticket will submit a patch so the schedd will not bother to preserve these reconnect attributes in the event that the job is in a terminal state (Completed or Removed).</p></blockquote>", "remarks": "<blockquote>\n<em>2017-May-09 14:06:27 by tannenba:</em> <br/>\n\nAs this is just a bug fix, no doc changes beyond version history entry is required.\n\n<p>Assigned to GregT for code review.\n\n</p><p></p><hr/>\n<em>2017-May-18 12:00:39 by gthain:</em> <br/>\n\n<strong>CODE REVIEW</strong>  Looks good.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-May-09 14:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50627\">[50627]</a></span>: Version history entry for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6251\" onclick=\"get_ticket_and_populate_wrapper('6251'); return false;\" title=\"condor_history occasionally shows RemoteHost and other attributes\">#6251</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-May-09 13:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50626\">[50626]</a></span>: Fix bug where condor_history ad may contain <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RemoteHost\" title=\"Remote Host\">RemoteHost</a></span>. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6251\" onclick=\"get_ticket_and_populate_wrapper('6251'); return false;\" title=\"condor_history occasionally shows RemoteHost and other attributes\">#6251</a></span> Job attributes like <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RemoteHost\" title=\"Remote Host\">RemoteHost</a></span> are normally removed whenever the shadow associated with the job exits. However, these attributes must be preserved to enable a new shadow to reconnect to the job in the event the schedd is restarted. However,\u00a0[...]\n (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Jun-19 11:34", "status": "resolved", "created": "2017-May-08 12:04", "fixed_version": "2017-May-08 12:04", "broken_version": "v080209", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "tannenba", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "users", "visibility": "public", "notify": "Lukas.Koschmieder@iehk.rwth-aachen.de tannenba@cs.wisc.edu", "due_date": ""}