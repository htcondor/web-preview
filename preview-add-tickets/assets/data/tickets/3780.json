{"id": 3780, "title": "Ticket #3780: Python htcondor.Collector.query fails \"TypeError: No to_python", "description": "<blockquote>\nThe Python htcondor.Collector.query method fails when it is expected to return a list of results.\n\n<p>The following example is based on the example at <a class=\"external\" href=\"http://research.cs.wisc.edu/htcondor/manual/v8.0/6_8Python_Bindings.html#SECTION00782000000000000000\">http://research.cs.wisc.edu/htcondor/manual/v8.0/6_8Python_Bindings.html#SECTION00782000000000000000</a>\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">&gt;&gt;&gt; coll = htcondor.Collector(\"condor.cs.wisc.edu\")\n&gt;&gt;&gt; coll\n&lt;htcondor.Collector object at 0x7fd7175f5260&gt;\n&gt;&gt;&gt; results = coll.query(condor.AdTypes.Startd, \"true\", [\"Name\"])\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'condor' is not defined\n&gt;&gt;&gt; results = coll.query(htcondor.AdTypes.Startd, \"true\", [\"Name\"])\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: No to_python (by-value) converter found for C++ type: boost::shared_ptr&lt;ClassAdWrapper&gt;\n&gt;&gt;&gt; results = coll.query(htcondor.AdTypes.Startd)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: No to_python (by-value) converter found for C++ type: boost::shared_ptr&lt;ClassAdWrapper&gt;\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2013-Aug-08 12:53:34 by bbockelm:</em> <br/>\n\nFix in V8_1-gt3780 branch has been verified by Andrew Lahiff and Brian (using reproduction instructions on condor-users mail list).  Pushing to master.\n\n<p></p><hr/>\n<em>2013-Aug-21 11:18:39 by johnkn:</em> <br/>\n\nREVIEW: approved for stable.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-16 10:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37250\">[37250]</a></span>: edit 8.0.2 version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3780\" title='Python htcondor.Collector.query fails \"TypeError: No to_python'>#3780</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-15 11:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37233\">[37233]</a></span>: Add version history items for <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3847\" title=\"Freezer controller triggers kernel crash when freezing SIGSTOP'd proce\">#3847</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3780\" title='Python htcondor.Collector.query fails \"TypeError: No to_python'>#3780</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-08 16:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37137\">[37137]</a></span>: Changes from Brian Bockelman for <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3780\" title='Python htcondor.Collector.query fails \"TypeError: No to_python'>#3780</a></span> . Make pyclassad a shared library to make python bindings work. Also, change two messages command to STATUS level to avoid output to stderr.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-08 10:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37126\">[37126]</a></span>: Define Boost_PYTHON_LIBRARY for UW-style builds. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3780\" title='Python htcondor.Collector.query fails \"TypeError: No to_python'>#3780</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-04 19:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37092\">[37092]</a></span>: Make pyclassad a shared library again. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=3780\" title='Python htcondor.Collector.query fails \"TypeError: No to_python'>#3780</a></span> Fixes type converters in htcondor module. With a static pyclassad, the htcondor module and classad module thought their copy of \"<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAdWrapper\" title=\"Class Ad Wrapper\">ClassAdWrapper</a></span>\" was unique.  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Aug-21 13:41", "status": "resolved", "created": "2013-Jul-15 14:03", "fixed_version": "2013-Jul-15 14:03", "broken_version": "v080000", "priority": "4", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "adesmet", "rust": "a25777", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}