{"id": 7259, "title": "Ticket #7259: curl_plugin should not attempt partial retries when behind a proxy", "description": "<blockquote>\nWhen the curl_plugin performs an incomplete HTTP transfer (ie. bytes received do not match the Content-Length header) it tries downloading only the missing bytes on a subsequent attempt. It does this however using the HTTP Retry header, which is not typically not supported by proxy servers. Change this so we only attempt partial retries when not hitting a proxy.</blockquote>", "remarks": "<blockquote>\n<em>2019-Sep-16 12:56:49 by bbockelm:</em> <br/>\n\nWhat happens if you try a partial range retry through a proxy?  Is the response malformed?\n\n<p></p><hr/>\n<em>2019-Sep-18 13:27:02 by coatsworth:</em> <br/>\n\nWe found that when retrying a partial range request through a proxy, the request fails outright and the job goes on hold. This happens exceedingly rarely, but it's a simple fix and we really don't want jobs going on hold.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-24 11:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58257\">[58257]</a></span>: Added version history (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7259\" onclick=\"get_ticket_and_populate_wrapper('7259'); return false;\" title=\"curl_plugin should not attempt partial retries when behind a proxy\">#7259</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-13 13:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57831\">[57831]</a></span>: curl_plugin only attempts HTTP Range requests when not behind a proxy (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7259\" onclick=\"get_ticket_and_populate_wrapper('7259'); return false;\" title=\"curl_plugin should not attempt partial retries when behind a proxy\">#7259</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Oct-24 11:06", "status": "resolved", "created": "2019-Sep-13 13:13", "fixed_version": "2019-Sep-13 13:13", "broken_version": "v080702", "priority": "3", "subsystem": "FileTransfer", "assigned_to": "coatsworth", "derived_from": "#5886", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}