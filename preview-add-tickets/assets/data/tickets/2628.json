{"id": 2628, "title": "Ticket #2628: TCP_FORWARDING_HOST and reconfig leaves stale entries in Collector", "description": "<blockquote>\nHave a startd advertising itself with a private address,\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ condor_status -format \"%s, \" Name -format \"%s\\n\" MyAddress\nlocalhost.localdomain, &lt;10.72.55.105:9619&gt;\n</pre></div>\n\n\n<p>Change its TCP_FORWARDING_HOST and reconfig,\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ echo \"TCP_FORWARDING_HOST = 174.129.47.20\" &gt; /etc/condor/config.d/40TCP_FORWARDING_HOST.config\n$ condor_reconfig\n</pre></div>\n\n\n<p>The startd will re-advertise with the new IP,\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ condor_status -format \"%s, \" Name -format \"%s\\n\" MyAddress\nlocalhost.localdomain, &lt;10.72.55.105:9619&gt;\nlocalhost.localdomain, &lt;174.129.47.20:9619?noUDP&gt;\n</pre></div>\n\n\n<p>But the original advertisement is not cleaned up first. It will continue to be matched and fail, until it expires.\n\n</p><p>A restart of the startd will clear the old entry before adding the new.\n\n</p><p>A restart should not be necessary.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2011-Nov-09 22:15", "status": "new", "created": "2011-Nov-09 22:15", "fixed_version": "2011-Nov-09 22:15", "broken_version": "", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}