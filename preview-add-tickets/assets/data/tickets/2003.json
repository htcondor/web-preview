{"id": 2003, "title": "Ticket #2003: condor_ssh_to_job should work with VM universe", "description": "<blockquote>\nNot urgent, but I think it's a thought worth recording:\n\n<p>condor_ssh_to_job ought to work with the VM universe.  Currently, I can SSH into the slot running the job; however, I can't actually access the VM.  I would expect that \"condor_ssh_to_job &lt;ID&gt;\" would be equivalent to:\n\n</p><p></p><div class=\"verbatim\">\n<pre>condor_ssh_to_job 20122.0 virsh console bbockelm_unl.edu_20122_0\n</pre></div>\n\n\n<p>Unfortunately, the nodes TTY isn't appropriately setup for user bbockelm to access it.\n\n</p><p>If condor_ssh_to_job would work for VM universe, debugging VMs would be much simpler.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-29 07:48:01 by tstclair:</em> <br/>\n\nlibvirt already has back hooks to the machine provided it's been advertised.\n\n<p>See virtual machine manager - connect to remote system.\n\n</p><p></p><hr/>\n<em>2011-Mar-30 16:58:16 by bbockelm:</em> <br/>\n\nHi Tim - not sure if I follow you 100%.  It's pretty easy to determine the serial port assigned to the VM via libvirt, especially if you're root.\n\n<p>The part is how to grant the user privileges to talk to it (and only that port!).  Best I could figure is use a pipe through a process that is started with root privs.  Doesn't seem to be either elegant or simple though.\n\n</p><p></p><hr/>\n<em>2011-Mar-31 07:43:45 by tstclair:</em> <br/>\n\n<a class=\"external\" href=\"http://libvirt.org/remote.html\">http://libvirt.org/remote.html</a>\ne.g. qemu+ssh://user@system.com - opens a channel for VNC terminals to be displayed.  Provided user has access.\n\n<p>See also:\n<a class=\"external\" href=\"http://virt-manager.et.redhat.com/page/Main_Page\">http://virt-manager.et.redhat.com/page/Main_Page</a>\n\n</p><p></p><hr/>\n<em>2012-Apr-25 13:23:24 by tstclair:</em> <br/>\n\nYeah I stand by the qemu+ssh statement, it's a far easier model when working through libvirt &amp; has hooks into vnc redirection.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2012-Apr-25 13:23", "status": "abandoned", "created": "2011-Mar-28 21:01", "fixed_version": "2011-Mar-28 21:01", "broken_version": "v070506", "priority": "4", "subsystem": "", "assigned_to": "tstclair", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "users", "visibility": "public", "notify": "tstclair@redhat.com matt@cs.wisc.edu", "due_date": ""}