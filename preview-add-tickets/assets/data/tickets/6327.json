{"id": 6327, "title": "Ticket #6327: Build system should create bindings for both Python2 and Python3", "description": "<blockquote>\nCurrently our build setup (CMake files etc), thanks to <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4146\" onclick=\"get_ticket_and_populate_wrapper('4146'); return false;\" title=\"Python 3 support\">#4146</a></span>, will build the Python bindings against the default version of Python that is installed.  That means the bindings will be build against Python2 except for recent releases of Fedora, which have Python3 by default.\n\n<p>With this ticket we propose improving the build setup so that if the build machine has both python2 and python3 available, then two versions of the bindings will be produced, one for each.\n\n</p><p>Ideally this work needs to dove tail with our plans for PIP packaging.\n\n</p><p>This is something that both TimT and Carl will likely want to work on together, but first priority imho is resolving <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6326\" onclick=\"get_ticket_and_populate_wrapper('6326'); return false;\" title=\"Python bindings core dump when used with Python 3\">#6326</a></span>.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-08 16:11:11 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p> I don't see any problems with the cmake code, other than it's ugly. We should ensure we simplify this once we have cmake3 everything in 8.9.\n\n</p><p></p><hr/>\n<em>2019-Jul-08 17:53:55 by edquist:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>The <code><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BuildRequires\" title=\"Build Requires\">BuildRequires</a></span>: python36-devel</code> looks fine.\n\n</p><p>The new <code><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=BuildRequires\" title=\"Build Requires\">BuildRequires</a></span>: perl(Data::Dumper)</code> also looks fine, as well as the updated names for the other perl module deps.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6486\" onclick=\"get_ticket_and_populate_wrapper('6486'); return false;\" title=\"Merge python bindings pypi_staging target\">#6486</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMerge python bindings pypi_staging target</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7298\" onclick=\"get_ticket_and_populate_wrapper('7298'); return false;\" title=\"Python 3 bindings are never built if Python 2 is not found\">#7298</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nPython 3 bindings are never built if Python 2 is not found</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-10 12:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57369\">[57369]</a></span>: Use old Python build methods when building wheels <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-08 17:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57349\">[57349]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span> plus sort version history  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-06 17:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57339\">[57339]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Hack to get EL7 PROPER builds to work  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-06 12:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57338\">[57338]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Need perl Data::Dumper RPM build requirement for all  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-05 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57332\">[57332]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Fixup perl dependencies  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-03 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57313\">[57313]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Update build dependencies for python36-devel on rhel7  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-03 14:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57311\">[57311]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Update build dependencies for python36-devel on rhel7  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-02 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57288\">[57288]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Build for Python 3 on 64-bit RHEL7 and all Debian/Ubuntu  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-21 21:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55803\">[55803]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>) Rename condor-python RPM to python2-condor  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jul-14 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52333\">[52333]</a></span>: Minimal changes to get python3 compiling. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span> Intent is to make compiling (but not necessarily functional) binding with python3 in order to make progress with packaging.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jul-14 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52332\">[52332]</a></span>: Temporarily disable some reporting statistics for RHEL5 compilation. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jul-14 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52331\">[52331]</a></span>: Initial working version of pypi packaging. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6327\" onclick=\"get_ticket_and_populate_wrapper('6327'); return false;\" title=\"Build system should create bindings for both Python2 and Python3\">#6327</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Jul-09 06:15", "status": "resolved", "created": "2017-Jun-28 14:04", "fixed_version": "2017-Jun-28 14:04", "broken_version": "", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "tim", "derived_from": "#4146", "creator": "tannenba", "rust": "", "customer_group": "users", "visibility": "public", "notify": "bbockelm@cse.unl.edu tannenba@cs.wisc.edu tim@cs.wisc.edu johnkn@cs.wisc.edu lammel@fnal.gov", "due_date": ""}