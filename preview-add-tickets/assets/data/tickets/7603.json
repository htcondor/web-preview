{"id": 7603, "title": "Ticket #7603: Support builds and tests in Docker", "description": "<blockquote>\nBoth the build and test glue and the tests themselves need some tweaks to support running in CHTC Docker jobs.</blockquote>", "remarks": "<blockquote>\n<em>2020-Apr-17 20:24:13 by tlmiller:</em> <br/>\n\nThese are all internal changes to the Metronome glue, which we can be certain no one else uses.  There is therefore no needs for (further) review or (any other) documentation.\n\n<p>(There's also two changes to the tests, which are not (yet) public, either.)</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-17 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59408\">[59408]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) For now, just request the same resources for all platforms.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-17 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59407\">[59407]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Fix cmd_curl_plugin and job_ec2_basic to ignore HTTP_PROXY; it makes no sense in the latter's case anyway, and it breaks things in containers for both.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-17 13:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59406\">[59406]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Missed a case where we needed to use $platform_key instead of $platform_name to handle Docker platforms correctly; added abillity to submit tests for Docker platforms.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-17 13:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59405\">[59405]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Allow platforms to include docker:// URLs (URL basename is platform shortname). Add nmi-build:x86_64_Debian9 to SubmitInfo.pm for stupid technical reasons.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-16 11:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59369\">[59369]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) For now, just request the same resources for all platforms.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-16 11:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59368\">[59368]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Fix cmd_curl_plugin and job_ec2_basic to ignore HTTP_PROXY; it makes no sense in the latter's case anyway, and it breaks things in containers for both.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-16 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59367\">[59367]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Missed a case where we needed to use $platform_key instead of $platform_name to handle Docker platforms correctly; added abillity to submit tests for Docker platforms.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-16 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=59366\">[59366]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=7603\" title=\"Support builds and tests in Docker\">#7603</a></span>) Allow platforms to include docker:// URLs (URL basename is platform shortname). Add nmi-build:x86_64_Debian9 to SubmitInfo.pm for stupid technical reasons.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Apr-17 20:25", "status": "resolved", "created": "2020-Apr-16 11:26", "fixed_version": "2020-Apr-16 11:26", "broken_version": "", "priority": "2", "subsystem": "Packaging", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, tim@cs.wisc.edu", "due_date": ""}