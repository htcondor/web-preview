{"id": 5862, "title": "Ticket #5862: BOINC backfill broken unless ENCRYPT_EXECUTE_DIRECTORY is true", "description": "<blockquote>\nCAE reported that BOINC backfill was crashing after the upgraded from 8.2.x to 8.4.5  They sent a Win10 core file.\n\n<p></p><div class=\"verbatim\">\n<pre>//=====================================================\nPID: 6076\nException code: C0000005 ACCESS_VIOLATION\nFault address:  0022737B 01:0005637B C:\\condor\\bin\\condor_startd.exe\n\nRegisters:\nEAX:00000000\nEBX:01C730B0\nECX:8003003F\nEDX:00000000\nESI:00000000\nEDI:00C97EB0\nCS:EIP:0023:0022737B\nSS:ESP:002B:007BEFA0  EBP:007BF314\nDS:002B  ES:002B  FS:0053  GS:002B\nFlags:00010246\n\nCall stack:\nAddress   Frame\n0022737B  007BF314  Starter::execDCStarter (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\starter.cpp:925)\n00227216  007BF35C  Starter::execBOINCStarter (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\starter.cpp:776)\n002296FE  007BF368  Starter::spawn (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\starter.cpp:599)\n001DB84D  007BF404  BOINC_BackfillMgr::spawnClient (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\boinc_mgr.cpp:338)\n001DBAC6  007BF430  BOINC_BackfillMgr::start (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\boinc_mgr.cpp:276)\n00218FB5  007BF438  Resource::start_backfill (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\resource.cpp:2054)\n0021B0E1  007BF44C  ResState::eval (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\resstate.cpp:536)\n0020CFAB  007BF470  ResMgr::walk (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\resmgr.cpp:692)\n00208CCB  007BF47C  ResMgr::eval_all (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_startd.v6\\resmgr.cpp:1125)\n002F591D  007BF4AC  TimerManager::Timeout (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_daemon_core.v6\\timer_manager.cpp:438)\n002561F2  007BF9E8  DaemonCore::Driver (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_daemon_core.v6\\daemon_core.cpp:3440)\n002678D2  007BFA84  dc_main (c:\\condor\\execute\\dir_7188\\userdir\\src\\condor_daemon_core.v6\\daemon_core_main.cpp:2780)\n00374E00  007BFAC4  __tmainCRTStartup (f:\\dd\\vctools\\crt_bld\\self_x86\\crt\\src\\crtexe.c:536)\n754762C4  007BFAD8  BaseThreadInitThunk+24\n77530609  007BFB20  RtlSubscribeWnfStateChangeNotification+439\n775305D4  007BFB30  RtlSubscribeWnfStateChangeNotification+404\n\n//=====================================================\n</pre></div>\n\n\n<p>The problem appears to be that when running a BOINC backfill job, there is no claim, so an attempt to lookup <code>ENCRYPT_EXECUTE_DIRECTORY</code> in the claim ad is crashing.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-20 09:27:52 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>This change looks good.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-19 16:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49229\">[49229]</a></span>: Version History for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5862\" onclick=\"get_ticket_and_populate_wrapper('5862'); return false;\" title=\"BOINC backfill broken unless ENCRYPT_EXECUTE_DIRECTORY is true\">#5862</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5861\" onclick=\"get_ticket_and_populate_wrapper('5861'); return false;\" title=\"knobs with STARTD subsys prefix don't work correctly\">#5861</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5795\" onclick=\"get_ticket_and_populate_wrapper('5795'); return false;\" title=\"All htcondor tools have windows version info of condor_gpu_discovery\">#5795</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Aug-23 15:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49060\">[49060]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5862\" onclick=\"get_ticket_and_populate_wrapper('5862'); return false;\" title=\"BOINC backfill broken unless ENCRYPT_EXECUTE_DIRECTORY is true\">#5862</a></span> - BOINC backfill broken unless ENCRYPT_EXECUTE_DIRECTORY is true ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Sep-20 09:28", "status": "resolved", "created": "2016-Aug-23 14:38", "fixed_version": "2016-Aug-23 14:38", "broken_version": "v080405", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "jfrey", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}