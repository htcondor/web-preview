{"id": 1639, "title": "Ticket #1639: condor_store_cred fails to read passwords with certain characters", "description": "<blockquote>\nWhen a user attempts to enter a character using the alt+#### method on Windows using the condor_store_cred utility, no input is actually passed onto the program.  This is due to the read_from_keyboard function in store_cred.cpp inside the condor c++ util library using _getch().  This also fails when using a keyboard layout that has the specific character present, such as the British layout, which has the British pound character as the alternate to 3 and was the main reason it was noticed.  Another potential hiccup is the Japanese yen character, since Japanese keyboard layouts appear to allow a way to enter it faster than typing alt+0165.\n\n<p>The issue can be bypassed by passing in the password using the -p argument in condor_store_cred, but the issue with not being able to enter characters like pound still remains, especially for people with British keyboard layouts.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-02 12:42:19 by gthain:</em> <br/>\n\nnote that the -p option passes the password in cleartext, which is surely a problem for many users...\n\n<p></p><hr/>\n<em>2010-Sep-06 14:36:47 by ziliang:</em> <br/>\n\nModified the read_from_keyboard function on Windows to take input as unicode and then downconvert to ascii.  Granted we upconvert back to unicode to use the password, but this eliminates any potential issues with input getting mangled because we may be in the wrong code page.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/218/store_cred.diff\">store_cred.diff</a>\n2280 bytes added by ziliang on 2010-Sep-06 19:35:11 UTC.\n<br/>\nPatch for review.<br/>\n</li><li><a href=\"attach_get/219/store_cred.diff\">store_cred.diff</a>\n3246 bytes added by ziliang on 2010-Sep-07 21:25:19 UTC.\n<br/>\nSecond patch with modifications.<br/>\n</li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-08 12:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18946\">[18946]</a></span>: Reapply fix for keyboard input on Windows and also fix build on Unix by removing extraneous variable declaration. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1639\" title=\"condor_store_cred fails to read passwords with certain characters\">#1639</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-08 10:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18945\">[18945]</a></span>: Revert \"Fix password input for extended ASCII set on Windows. Reviewed by John Knoeller. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1639\" title=\"condor_store_cred fails to read passwords with certain characters\">#1639</a></span>\" This broke the Unix build. Let's fix and retry This reverts commit a1ec00f618cf0be869c66795901032ecb1bb1720.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-07 16:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18940\">[18940]</a></span>: Fix password input for extended ASCII set on Windows. Reviewed by John Knoeller. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1639\" title=\"condor_store_cred fails to read passwords with certain characters\">#1639</a></span>  (By Ziliang Guo )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Sep-13 16:34", "status": "resolved", "created": "2010-Sep-02 12:39", "fixed_version": "2010-Sep-02 12:39", "broken_version": "v070400", "priority": "4", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "ziliang", "rust": "s7948", "customer_group": "users", "visibility": "public", "notify": "tannenba@cs.wisc.edu, gthain@cs.wisc.edu", "due_date": "20100930"}