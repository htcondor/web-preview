{"id": 3724, "title": "Ticket #3724: Basic KILL Test", "description": "<blockquote>\n<strong class=\"three\">A basic KILL Test</strong>\n\n<p><strong>job_basic_kill.run</strong>\n\n</p><p>The job run by <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RunCheck\" title=\"Run Check\">RunCheck</a></span> in SimpleJob.pm is a small perl script which catches all possible signals. The SIGTERM has it's own handler to print out caught\nsigterm. The KILL is designed to happen relatively quickly after an attempted soft kill when condor_vacate_job is callled on the callback for execute seen. When the eviction happens from the hard kill, we check the output file for that message. Since there is no file transfers in the case of a hard kill, I enable the output to have the name \"catchallsignals.out\" and set stream_output to True.</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Jul-07 16:10:53 by bt:</em> <br/>\n\nBuf::write(): condor_write() failed\n07/01/14 16:05:30 (2.0) (23924): ERROR \"Assertion ERROR on (result)\" at line 790 in file /slots/04/dir_28129/userdir/src/condor_shadow.V6.1/NTreceivers.cpp\n\n<p>This test periodically fails with a shadow exception.\n\n</p><p>This race condition is written up in <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=4450\" onclick=\"get_ticket_and_populate_wrapper('4450'); return false;\" title=\"Race condition in shadow\">#4450</a></span></p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-06 13:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37502\">[37502]</a></span>: This test was based as a starting point on job_basic_kill and was still removing the output files being streamed from the kill job. Should this test be running at the same time as the kill test, the kill test would get totally confused and fail when the file its was waiting to have enough content went\u00a0[...]\n (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-05 15:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37483\">[37483]</a></span>: Test was too actively looking for the streaming test to have grown so we slowed down looks for a large enough streamed return on information about ignored signals. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3724\" onclick=\"get_ticket_and_populate_wrapper('3724'); return false;\" title=\"Basic KILL Test\">#3724</a></span>  (By Bill Taylor )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-06 11:15", "status": "resolved", "created": "2013-Jun-26 17:04", "fixed_version": "2013-Jun-26 17:04", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3654", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}