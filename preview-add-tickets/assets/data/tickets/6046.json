{"id": 6046, "title": "Ticket #6046: Fix build on Mac OS 10.12 Sierra", "description": "<blockquote>\nApple continues to discourage use of the OpenSSL libraries it provides. Starting with Xcode for macOS 10.12, the libraries are no longer in the default search path. Although the libraries are present in /usr/lib, the compiler doesn't look there when linking. Instead, it looks in /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/lib. The compiler does this by using the -syslibroot option when calling ld.\n\n<p>Adding -L/usr/lib to the compile line doesn't help. But making symlinks to the libraries in a different location and using -L with that directory does work.\n\n</p><p>CMake's find_library() gives us the full path to the OpenSSL libraries under /usr/lib. So our problem comes from externals that link to the libraries using -lssl -lcrypto.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Jan-25 10:40:18 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Looks good.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6653\" title=\"Fix build on Mac OS 10.13 High Sierra\">#6653</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix build on Mac OS 10.13 High Sierra</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-12 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49784\">[49784]</a></span>: Fix build on Mac OS 10.12 Sierra. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6046\" title=\"Fix build on Mac OS 10.12 Sierra\">#6046</a></span> In Xcode for Mac OS 10.12, the OpenSSL libraries are no longer in the standard link path, though they are still available at run time. We can use symlinks and a -L directive to convince the compiler to link against them anway.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Jan-25 13:32", "status": "resolved", "created": "2016-Dec-08 14:25", "fixed_version": "2016-Dec-08 14:25", "broken_version": "v080400", "priority": "3", "subsystem": "Port", "assigned_to": "jfrey", "derived_from": "#5786", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}