{"id": 4738, "title": "Ticket #4738: [EC2] Investigate EC2 GAHP memory usage", "description": "<blockquote>\nThe EC2 GAHP, even with an upgraded version of libcurl (one that doesn't leak memory) uses a <em>lot</em> of RAM (up to 1.2GB in Fermi's use case).  This doesn't seem, on the face of it, wholly reasonable; it doesn't (seem to) have much state to retain.  (Peak memory usage, I expect, would occur if each worker thread got its result from curl back almost simultaneously, and all results were large; but that still seems like it shouldn't be more than a few megabytes, at most.)\n\n<p>During the course of proving that the leak was in libcurl, I looked at a ~475MB EC GAHP.  The <em>/proc/maps</em> file showed huge chunks of memory (5x60MB) allocated to/by the process but unreadable by it (marked private but without the readable, writable, or executable bit set).  Identifying these may be a good place to start.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "todo", "last_change": "2016-May-26 14:31", "status": "new", "created": "2014-Nov-21 13:23", "fixed_version": "2014-Nov-21 13:23", "broken_version": "", "priority": "4", "subsystem": "Grid", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}