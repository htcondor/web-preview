{"id": 4253, "title": "Ticket #4253: DAGMan abort-dag-on test improvement", "description": "<blockquote>\nWe should improve one of the DAGMan abort-dag-on tests to make sure that the DAG abort removes running node jobs.</blockquote>", "remarks": "<blockquote>\n<em>2014-Mar-17 17:22:03 by wenger:</em> <br/>\n\nOkay, today's modification of the job_dagman_abort-B test hits this case.  (Note that the test currently fails, because DAGMan's notion of the status of the nodes doesn't get updated properly after they're removed from the queue.)\n\n<p>Also, for this test, at the end of the DAG, FinishedRunning(true), DoneSuccess(true), DoneFailed(true), and DoneCycle(true) all return false!  (Because the node counts still think node D is queued.)\n\n</p><p>One way to deal with this could be for DAGMan to wait around for the events resulting from removing all of the node jobs, before it exits.  I guess we could do this by removing all of the jobs and then going into halt mode or something like that...</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-08 14:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=40926\">[40926]</a></span>: New linux hyperthreading test(off) <span class=\"ticket\"><a class=\"new\" href=\"tktview?tn=4253\" title=\"DAGMan abort-dag-on test improvement\">#4253</a></span> and current collection of /proc/cpuinfo files.  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Mar-17 17:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39647\">[39647]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=4209\" title=\"DAG final node goofs up node status file\">#4209</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=4248\" title=\"Node status counts are incorrect after DAG abort\">#4248</a></span> / <span class=\"ticket\"><a class=\"new\" href=\"tktview?tn=4253\" title=\"DAGMan abort-dag-on test improvement\">#4253</a></span>: Changed job_dagman_abort-B to hit a slighly different variation -- the test now fails because DAGMan doesn't handle this corner case correctly.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Mar-17 17:22", "status": "new", "created": "2014-Mar-10 16:43", "fixed_version": "2014-Mar-10 16:43", "broken_version": "v080006", "priority": "3", "subsystem": "Dag", "assigned_to": "", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu", "due_date": ""}