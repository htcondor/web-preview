{"id": 4988, "title": "Ticket #4988: changes to defaults for close of 8.3 series", "description": "<blockquote>\nThis ticket is to track proposed changes to either HTCondor configuration defaults OR changes to Linux settings that would be good to do upon package installation.\n\n<p>Append your ideas to the appropriate list with your name by each item.\n\n</p><p><strong>HTCondor Config Changes</strong>\n\n</p><p></p><ol>\n<li><strong>done</strong> and <strong>doc done</strong> let's change NEGOTIATOR_INFORM_STARTD to false by default in v8.3.7.  All our big pools require it. (TJ)\n</li><li><strong>deferred</strong> shared port on by default in v8.5.0 (master), and turn on everywhere in CHTC when v8.3.7 is deployed. (TJ)\n</li><li><strong>deferred</strong> ENABLE_IPV6=true with v8.5.1 and turn on everywhere in CHTC when v8.5.0 is deployed. (TJ)\n</li><li>collector updates use TCP by default in v8.3.7 (but view_collector updates, like in a collector tree, still use UDP - we want everything going to top level collector over UDP. also we want world ads to be udp) (Jaime)\n</li><li><strong>done</strong> Set a default for RECEIVE_MSGS_DURATION for 250. [[ unless CMS testing gives evidence otherwise -  see <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4928\" onclick=\"get_ticket_and_populate_wrapper('4928'); return false;\" title=\"Schedd&lt;-&gt;negotiator protocol timeouts in CMS pool\">#4928</a></span> ]] (TJ) <strong>No notice of this  will go into the manual or version history, as this is a developer tuning knob, and is intentionally left out of the manual.</strong>\n</li><li>Go over every setting we did to make the global CMS pool scale as documented at <span class=\"wiki\"><a href=\"wiki?p=CmsScaleTestSetup\" title=\"Cms Scale Test Setup\">CmsScaleTestSetup</a></span> (Jaime)\n</li><li><strong>done</strong> <em>STARTER_DEBUG in param table has obsolete flag</em> (ToddT)\n</li><li><strong>done</strong> and <strong>doc done</strong> MAX_JOBS_PER_SUBMISSION default to to 20,000 (TJ)\n</li><li><strong>done</strong> and <strong>doc done</strong> MAX_JOBS_PER_OWNER default to 100,000 (TJ)\n</li><li><strong>8.3.8?</strong> FILE_TRANSFER_DISK_LOAD_THROTTLE, MAX_CONCURRENT_UPLOADS, MAX_CONCURRENT_DOWNLOADS (email Brian, Garhan, DanB for advice?) (ToddT)\n</li><li><strong>done</strong> and <strong>doc needs to be checked before it can be marked as done</strong> Up MAX_JOBS_RUNNING on windows from 200 to 2000, leave the Unix default alone. (TJ)\n</li><li><strong>done</strong> and <strong>doc done</strong> Default PRIVATE_NETWORK_NAME to $(FULL_HOSTNAME) - Right now there is no default, meaning even sending a child alive command from one process to another on the same machine will go via CCB (TJ)\n</li><li>Default ALLOW_PSLOT_PREEMPTION to True in startd and schedd and false in the negotiator for v8.3.7.  Consider for v8.5.0 also default to True in the negotiator iff consumption policies are disabled. Turn it to true in the negotiator in CHTC for v8.3.7. (jfrey)\n</li><li><strong>done</strong> Change default timeout for SEC_DEFAULT_AUTHENTICATION_TIMEOUT from infinite to some value (20 sec?). doc's say it's 20 seconds now.  (TJ)\n</li><li>Investigate stopping fsync of user event logs in v8.5.0. (Kent)\n</li><li><strong>done</strong> and <strong>doc done</strong> Set <code>JobLeaseDuration</code> from 20 min to 40 min (TJ)\n</li><li><strong>done</strong> and <strong>doc done</strong> Set WANT_VACATE = True (TJ)\n</li><li><strong>done</strong> Fix ALLOW_NEGOTIATOR_SCHEDD in the meta knobs (TJ)\n</li><li><strong>done</strong> and <strong>doc done</strong> Change SCHEDD_SEND_VACATE_VIA_TCP default to True (Jaime)\n</li></ol>\n\n<p><strong>Linux scalability config changes</strong>\n\n</p><p>Moved to <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5106\" onclick=\"get_ticket_and_populate_wrapper('5106'); return false;\" title=\"Linux scalability config changes\">#5106</a></span>.  (ToddM)</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Apr-15 17:06:29 by johnkn:</em> <br/>\n\n <strong>done</strong> <em>the WINDOWS_FIREWALL_FAILURE_RETRY stat is set to retry for 60 times, which is ridiculous, it should default 1 (or even 0) retries with a longer delay between retries.</em>\n\n<p></p><hr/>\n<em>2015-Jun-17 12:49:37 by bbockelm:</em> <br/>\n\nFor FILE_TRANSFER_DISK_LOAD_THROTTLE -\n\n<p>I would recommend a default of \"2 to 3\".  This is what CMS has seen as usable in production.\n\n</p><p></p><hr/>\n<em>2015-Jun-30 17:41:25 by tannenba:</em> <br/>\n\nFor each of the 19 items listed above in this ticket description, I'd like to see them prefixed with <strong>done</strong> once the owner of this ticket (TJ) confirms that each change has been pushed into git.  Right now this ticket is in docpending mode, but there is no way for me to easily verify that all 19 changes above were completed. Switching ticket back to state Active until confirmation has been made that we didn't miss any of the above....</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5103\" onclick=\"get_ticket_and_populate_wrapper('5103'); return false;\" title=\"USE_SHARED_PORT should be on by default in 8.5 series\">#5103</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nUSE_SHARED_PORT should be on by default in 8.5 series</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5104\" onclick=\"get_ticket_and_populate_wrapper('5104'); return false;\" title=\"ENABLE_IPV6=true should be the default in 8.5 series\">#5104</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nENABLE_IPV6=true should be the default in 8.5 series</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5106\" onclick=\"get_ticket_and_populate_wrapper('5106'); return false;\" title=\"Linux scalability config changes\">#5106</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nLinux scalability config changes</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5116\" onclick=\"get_ticket_and_populate_wrapper('5116'); return false;\" title=\"Modify collector update parameters\">#5116</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nModify collector update parameters</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5225\" onclick=\"get_ticket_and_populate_wrapper('5225'); return false;\" title=\"default SLOTS_CONNECTED_TO_KEYBOARD to all slots\">#5225</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ndefault SLOTS_CONNECTED_TO_KEYBOARD to all slots</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 13:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45239\">[45239]</a></span>: 8.3.7 knob default changes documentation: SCHEDD_SEND_VACATE_VIA_TCP <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 13:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45238\">[45238]</a></span>: 8.3.7 knob default changes documentation: WANT_VACATE <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 12:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45237\">[45237]</a></span>: 8.3.7 knob default changes documentation: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobLeaseDuration\" title=\"Job Lease Duration\">JobLeaseDuration</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 12:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45236\">[45236]</a></span>: 8.3.7 knob default changes documentation: PRIVATE_NETWORK_NAME <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-07 11:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45230\">[45230]</a></span>: 8.3.7 knob default changes documentation: MAX_JOBS_RUNNING <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-06 16:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45223\">[45223]</a></span>: correct ticket number in version history <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-06 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45222\">[45222]</a></span>: 8.3.7 knob default changes documentation: MAX_JOBS_PER_OWNER <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-06 16:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45221\">[45221]</a></span>: 8.3.7 knob default changes documentation: MAX_JOBS_PER_SUBMISSION <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-06 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45220\">[45220]</a></span>: 8.3.7 knob default changes documentation: NEGOTIATOR_INFORM_STARTD <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-01 11:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45188\">[45188]</a></span>: Change default value for <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobLeaseDuration\" title=\"Job Lease Duration\">JobLeaseDuration</a></span> from 20 min to 40 min. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-01 10:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45182\">[45182]</a></span>: Move all SCHEDD_ROUND_* deafults to the param table. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-25 14:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45167\">[45167]</a></span>: Change default for SCHEDD_SEND_VACATE_VIA_TCP to True. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-18 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45099\">[45099]</a></span>: Change default values for params for the end of the 8.3 series: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span> NEGOTIATOR_INFORM_STARTD=false (was true) SEC_DEFAULT_AUTHENTICATION_TIMEOUT=20 (was infinite, but doc says 20) PRIVATE_NETWORK_NAME=$(FULL_HOSTNAME) (was empty) RECEIVE_MSGS_DURATION=250 (was 0) LINUX MAX_JOBS_RUNNING=MIN({$(DETECTED_MEMORY),\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-08 14:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44998\">[44998]</a></span>: remove obsolete flag from default for STARTD_DEBUG. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span> ===VersionHistory:None===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-06 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44796\">[44796]</a></span>: Add version history item and documentation change related to WINDOWS_FIREWALL_FAILURE_RETRY <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-05 17:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44790\">[44790]</a></span>: change default WINDOWS_FIREWALL_FAILURE_RETRY to only try for 15 seconds instead of for 600 seconds <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4988\" onclick=\"get_ticket_and_populate_wrapper('4988'); return false;\" title=\"changes to defaults for close of 8.3 series\">#4988</a></span> also improve error reporting in windows firewall code.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Sep-22 10:25", "status": "resolved", "created": "2015-Apr-06 16:40", "fixed_version": "2015-Apr-06 16:40", "broken_version": "", "priority": "2", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu, tannenba@cs.wisc.edu", "due_date": ""}