{"id": 3592, "title": "Ticket #3592: Condor_hold/condor_release of DAGMan runs duplicate PRE/POST scripts", "description": "<blockquote>\nIf DAGMan is held while PRE or POST scripts are running, duplicate instances of the scripts are run when DAGMan is released.  (In other words, if DAGMan is released before the initial instance of a script finishes, you'll get two instances of the same script running at the same time, which seems like it has the potential to cause problems!)\n\n<p>Anyhow, I'm not sure how to deal with this -- we probably should kill the scripts when DAGMan is held, but I think DAGMan just gets killed, and I don't know whether we can do anything like catching the kill signal.\n\n</p><p>(Hmm -- maybe this is yet another reason to have the option to actually run PRE/POST scripts as HTCondor jobs -- see <span class=\"ticket\"><a class=\"new\" href=\"tktview?tn=1111\" title=\"Run DAGMan PRE and POST scripts as Condor jobs\">#1111</a></span>.)\n\n</p><p>I guess that until we have a fix, this could be another reason to encourage people to use the halt file option instead of condor_hold/condor_release...</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Apr-23 14:40:32 by nwp:</em> <br/>\n\nor record that we started the scripts in the userlog...  Don't know how we would find out whether they are still running we we start up in recovery.\n\n<p></p><hr/>\n<em>2013-Apr-23 14:47:21 by nwp:</em> <br/>\n\nOh, we have to rerun it again, since we need to know the return value of the script and the script reaper did not capture that information.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2014-May-11 21:05", "status": "new", "created": "2013-Apr-23 14:28", "fixed_version": "2013-Apr-23 14:28", "broken_version": "v070000", "priority": "3", "subsystem": "Dag", "assigned_to": "", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}