{"id": 3180, "title": "Ticket #3180: AMD NUM_CPUS appears broken", "description": "<blockquote>\n<div class=\"code\">\n<pre class=\"code\">[Ubuntu 12.04, condor 7.8.1]\n\nI am using some boxes with four AMD 6180 SE processors. Everything I can\nfind on the web describes these as \"12 core\" processors, which suggests I have 48 real cores available.\n\nI have configured condor with:\n\nCOUNT_HYPERTHREAD_CPUS = False\nSLOT_TYPE_1 = cpus=100%, ram=95%, swap=100%, disk=100%\nSLOT_TYPE_1_PARTITIONABLE = True\nNUM_SLOTS_TYPE_1 = 1\n\nand it tells me that there are only 24 cores (\"DetectedCPUs\" is 48, but \"TotalCPUs\" is 24). That is, Condor says there is hyperthreading.\n\nI think I'm not the first to come across this:\nhttps://www-auth.cs.wisc.edu/lists/condor-users/2011-August/msg00005.shtml\n\n/proc/cpuinfo shows core id 0..5 and 0..5 for the 12 cores on one physical\nprocessor, and\n_CONDOR_ALL_DEBUG=D_ALL condor_config_val -debug NUM_CPUS\nshows these are considered by condor to be the same core.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2012-Sep-11 11:06:53 by johnkn:</em> <br/>\n\nBulk change of target version from v070803 to v070804 using ./ticket-target-mover.\n<hr/>\n<em>2012-Sep-19 16:15:53 by zmiller:</em> <br/>\n\nBulk change of target version from v070804 to v070805 using ./ticket-target-mover.\n<hr/>\n<em>2012-Dec-19 09:30:47 by johnkn:</em> <br/>\n\nBulk change of target version from v070807 to v070808 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-28 17:16:00 by johnkn:</em> <br/>\n\nBulk change of target version from v070808 to v070809 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/618/cpuinfo.txt\">cpuinfo.txt</a>\n44382 bytes added by tstclair on 2012-Aug-08 15:47:55 UTC.\n</li></ul>\n</blockquote>", "check_ins": "", "type": "incident", "last_change": "2013-Mar-28 17:16", "status": "new", "created": "2012-Aug-07 08:59", "fixed_version": "2012-Aug-07 08:59", "broken_version": "v070801", "priority": "3", "subsystem": "Libs", "assigned_to": "", "derived_from": "", "creator": "tstclair", "rust": "", "customer_group": "users", "visibility": "public", "notify": "tstclair@redhat.com", "due_date": ""}