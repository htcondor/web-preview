{"id": 1948, "title": "Ticket #1948: StarterLog should indicate user changes more clearly", "description": "<blockquote>\nThe <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> is confusing and it leads it difficulty in debugging problems. It would not be hard to make it less confusing.\n\n<p>From RUST #21737, here is an extract from the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> which <strong>almost</strong> helps the user:\n\n</p><p></p><div class=\"verbatim\">\n<pre>03/01 10:52:23 Submitting machine is \"mansun\"\n03/01 10:52:23 setting the orig job name in starter\n03/01 10:52:23 setting the orig job iwd in starter\n03/01 10:52:23 ERROR: the submitting host claims to be in our UidDomain (wrc.xerox.com),\nyet its hostname (mansun) does not match.  If the above hostname is actually an IP address,\nCondor could not perform a reverse DNS lookup to convert the IP back into a name.  To solve\nthis problem, you can either correctly configure DNS to allow the reverse lookup, or you can\nenable TRUST_UID_DOMAIN in your condor configuration.\n03/01 10:52:23 Job 12.4 set to execute immediately\n</pre></div>\n\n\n<p>I think the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> should add messages about attempting to change the user. It could look something like this when successful:\n\n</p><p></p><div class=\"verbatim\">\n<pre>03/01 10:52:23 Submitting machine is \"mansun\"\n03/01 10:52:23 setting the orig job name in starter\n03/01 10:52:23 setting the orig job iwd in starter\n03/01 10:52:23 Attempting to change from user \"root\" to user \"roy\"\n03/01 10:52:23 Now running as user \"roy\"\n03/01 10:52:23 Job 12.4 set to execute immediately\n</pre></div>\n\n\n<p>And it could like this when it failed:\n\n</p><p></p><div class=\"verbatim\">\n<pre>03/01 10:52:23 Submitting machine is \"mansun\"\n03/01 10:52:23 setting the orig job name in starter\n03/01 10:52:23 setting the orig job iwd in starter\n03/01 10:52:23 Attempting to change from user \"root\" to user \"roy\"\n03/01 10:52:23 ERROR: Failed to change from user \"root\" to user \"roy\" because the submitting\nhost claims to be in our UidDomain (wrc.xerox.com), yet its hostname (mansun) does not match.\nIf the above hostname is actually an IP address, Condor could not perform a reverse DNS lookup\n to convert the IP back into a name.  To solve this problem, you can either correctly configure DNS\n to allow the reverse lookup, or you can enable TRUST_UID_DOMAIN in your condor configuration.\n03/01 10:52:23 Now running as user \"nobody\"\n03/01 10:52:23 Job 12.4 set to execute immediately\n</pre></div>\n\n\n<p>Note that in both cases, the new user is indicated, and in the failure case, the explanation for the failure mentions that the attempt to change users failed.\n\n</p><p>Of course, since you understand what is happening better, you might have an even better suggestion of how to change the message.\n\n</p><p>I hope that this change can go into Condor soon. It might be too late for 7.6.0, but I think it's a good change to consider for 7.6.1 because it will help us debug problems more quickly and solve RUST tickets more quickly.\n\n</p><p>Thanks!</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2013-Jan-29 12:54", "status": "new", "created": "2011-Mar-03 15:58", "fixed_version": "2011-Mar-03 15:58", "broken_version": "v070505", "priority": "3", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "roy", "rust": "a21737", "customer_group": "other", "visibility": "public", "notify": "roy@cs.wisc.edu", "due_date": ""}