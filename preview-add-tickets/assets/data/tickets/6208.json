{"id": 6208, "title": "Ticket #6208: Kernel tuning script should be daemon-specific (sensitive)", "description": "<blockquote>\nAs SpaceX noted in their ticket, many of the tuning script's changes don't need to be applied to the execute node(s).  We should change the kernel tuning script to only make the changes needed by each particular daemon that will actually be started.  This will probably be just the collector and the schedd, but some parts may be universal, or specific to other daemons.</blockquote>", "remarks": "<blockquote>\n<em>2017-Apr-20 15:08:59 by gthain:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>I'm a little concerned about this line:\n</p><div class=\"code\">\n<pre class=\"code\">sed -e's/,//'`\n</pre></div>\n\n\n<p>If DAEMON_LIST is just comma-separated, with no spaces, e.g. DAEMON_LIST = FOO,BAR,BAZ, I don't think we find the daemons we are looking for.  What if we run the sed once on the output of condor_config_val DAEMON_LIST, replace commas with spaces, globally?\n\n</p><p></p><hr/>\n<em>2017-Apr-20 15:51:32 by tlmiller:</em> <br/>\n\nGood catch.  While testing that fix, I noticed that basename barfs if passed the empty string; since the master hasn't finished starting up yet, we're not guaranteed yet that the names in DAEMON_LIST have corresponding paths.  Now we only check to see if a daemon name is a schedd if if the daemon has a path.  Also redirected stderr to /dev/null when asking condor_config_val for the path, in case it doesn't exist.\n\n<p></p><hr/>\n<em>2017-Apr-20 15:52:13 by gthain:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Looks good.  Let's ship it!</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Apr-21 13:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50543\">[50543]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6208\" title=\"Kernel tuning script should be daemon-specific (sensitive)\">#6208</a></span>) Version history item.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Apr-20 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50527\">[50527]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6208\" title=\"Kernel tuning script should be daemon-specific (sensitive)\">#6208</a></span>) Address code review concerns, eliminate some stderr text. Committer: Tim Theisen  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Apr-20 15:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50523\">[50523]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6208\" title=\"Kernel tuning script should be daemon-specific (sensitive)\">#6208</a></span>) Address code review concerns, eliminate some stderr text.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Apr-13 12:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50468\">[50468]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=6208\" title=\"Kernel tuning script should be daemon-specific (sensitive)\">#6208</a></span>) Implement changes as discussed 2017-04-12.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Apr-21 10:09", "status": "resolved", "created": "2017-Mar-29 13:21", "fixed_version": "2017-Mar-29 13:21", "broken_version": "", "priority": "2", "subsystem": "DaemonMaster", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "a31546", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}