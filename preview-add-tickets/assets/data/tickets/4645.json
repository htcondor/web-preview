{"id": 4645, "title": "Ticket #4645: Stats publication should be configurable using a whitelist", "description": "<blockquote>\nCurrently, the publication of statistics is controlled by configuring a verbosity level for the publication of each set of statistics.  The stats themselves have a verbosity level set by the programmer, the user can choose what verbosity level to publish by setting the <code>STATISTICS_TO_PUBLISH</code> configuration variable. If verbosity 2 is chosen for SCHEDD stats, then <strong>all</strong> stats of verbosity 2 or lower will be published. This is a huge amount and will flood the collector, so in practice only verbosity 0 or 1 is useful.\n\n<p>But some of the stats that we wish to track are set at verbosity 2.  So a way is needed to specify a list of stats that should always be published, regardless of the current publication verbosity.\n\n</p><p>A new configuration variable <code>STATISTICS_TO_PUBLISH_LIST</code> will contain a comma or space separated list of classad attributes, each statistic that matches at least one entry in that list will be have it's verbosity set to the current <code>STATISTICS_TO_PUBLISH</code> verbosity level.  Thus these will always publish.  Because some stats are published in sets (i.e. a count,total,min,max,avg &amp; std). Enabling one member of the set will enable all of them.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-22 14:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=42014\">[42014]</a></span>: correct spelling in 8.3.2 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4645\" onclick=\"get_ticket_and_populate_wrapper('4645'); return false;\" title=\"Stats publication should be configurable using a whitelist\">#4645</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-22 10:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=42002\">[42002]</a></span>: document STATISTICS_TO_PUBLISH_LIST, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4645\" onclick=\"get_ticket_and_populate_wrapper('4645'); return false;\" title=\"Stats publication should be configurable using a whitelist\">#4645</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-22 10:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=42001\">[42001]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4645\" onclick=\"get_ticket_and_populate_wrapper('4645'); return false;\" title=\"Stats publication should be configurable using a whitelist\">#4645</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4593\" onclick=\"get_ticket_and_populate_wrapper('4593'); return false;\" title=\"Use Miron probes for DC runtime statistics\">#4593</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4595\" onclick=\"get_ticket_and_populate_wrapper('4595'); return false;\" title=\"Add DC stats for fsync, DNS &amp; prio-rec array runtime\">#4595</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4660\" onclick=\"get_ticket_and_populate_wrapper('4660'); return false;\" title=\"Add sub-second accurate timestamps to dprintf logs\">#4660</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-24 13:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=41470\">[41470]</a></span>: add STATISTICS_TO_PUBLISH_LIST, a whitelist for controling statistics publication <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4645\" onclick=\"get_ticket_and_populate_wrapper('4645'); return false;\" title=\"Stats publication should be configurable using a whitelist\">#4645</a></span> ===VersionHistory:Pending=== Committer: Todd L Miller  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-10 10:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=41370\">[41370]</a></span>: add STATISTICS_TO_PUBLISH_LIST, a whitelist for controling statistics publication <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4645\" onclick=\"get_ticket_and_populate_wrapper('4645'); return false;\" title=\"Stats publication should be configurable using a whitelist\">#4645</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Dec-23 16:32", "status": "resolved", "created": "2014-Oct-10 10:31", "fixed_version": "2014-Oct-10 10:31", "broken_version": "v080000", "priority": "3", "subsystem": "Daemons", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "", "due_date": ""}