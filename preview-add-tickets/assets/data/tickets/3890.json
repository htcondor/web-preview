{"id": 3890, "title": "Ticket #3890: Have a test for \"Pegasus\" workflow recovery", "description": "<blockquote>\nPegasus sub-DAGs have submit files that aren't generated by condor_submit_dag, and as a result (as of now) they don't have information like -CsdVersion in the arguments.  This is currently goofing up recovery mode (see <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=3882\" onclick=\"get_ticket_and_populate_wrapper('3882'); return false;\" title=\"DAGMan recovery aborts after failing to recognize completed jobs\">#3882</a></span>).\n\n<p>We should have a test that ensures that a DAG with a Pegasus-generated submit file will work in recovery mode.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-12 19:28:37 by wenger:</em> <br/>\n\nI think I also want to make a cross-version recovery test.  To do that, I think will run a DAG with 7.8, and put the log files, the .condor.sub file and so on into git.  I'll have to modify the .condor.sub file a bit to get things to work...\n\n<p></p><hr/>\n<em>2013-Sep-13 16:17:00 by wenger:</em> <br/>\n\nThis is being done on V8_1-gittrac_3890-branch.\n\n<p></p><hr/>\n<em>2013-Sep-13 16:26:58 by wenger:</em> <br/>\n\nMy current thinking on this is that I want to have a .condor.sub template, and the .run file will replace \"condor_dagman\" in the template with the complete path from `which condor_dagman`, and then submit the modified submit file.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=3959\" onclick=\"get_ticket_and_populate_wrapper('3959'); return false;\" title=\"Implement Pegasus/DAGMan/Condor integration testing\">#3959</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nImplement Pegasus/DAGMan/Condor integration testing</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-07 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37792\">[37792]</a></span>: Gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=3890\" onclick=\"get_ticket_and_populate_wrapper('3890'); return false;\" title='Have a test for \"Pegasus\" workflow recovery'>#3890</a></span>: A little more cleanup of the test.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-04 16:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37781\">[37781]</a></span>: Gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=3890\" onclick=\"get_ticket_and_populate_wrapper('3890'); return false;\" title='Have a test for \"Pegasus\" workflow recovery'>#3890</a></span>: we now correctly stick the condor_dagman path into the .condor.sub file.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-13 18:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37609\">[37609]</a></span>: Gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=3890\" onclick=\"get_ticket_and_populate_wrapper('3890'); return false;\" title='Have a test for \"Pegasus\" workflow recovery'>#3890</a></span>: Test mostly works, but the .run script needs to modify the condor_dagman path in the DAGMan submit file.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Oct-07 17:43", "status": "defer", "created": "2013-Sep-03 17:51", "fixed_version": "2013-Sep-03 17:51", "broken_version": "v080100", "priority": "5", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "#3882", "creator": "wenger", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "wenger@cs.wisc.edu, pfcouvar@syr.edu,anderson@ligo.caltech.edu,pcouvare@caltech.edu", "due_date": ""}