{"id": 7465, "title": "Ticket #7465: Container jobs don't respect pre- and post- script exit codes", "description": "<blockquote>\nThe SWAMP would like Docker and Singulariy jobs to respect their pre- and post- script exit codes in the same way that VM jobs do.\n\n<p>After speaking with Tom Bricker on 2020-02-28, the problem (at least as he remembers it) was that the SWAMP had been using a hack to make it possible for their VM universe pre-script to prevent the job from running, that is, deleting the image.\n\n</p><p>The fix we added for them shortly later has always applied to all pre- and post- scripts, where you can specify Success[Pre|Post]ExitCode, and the job goes on hold if the pre- or post- script's exit code doesn't match.\n\n</p><p>Tom needed the job to be removed in those cases, but that was a simple extension of their existing periodic_remove expression.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Feb-28 17:36:50 by tlmiller:</em> <br/>\n\nTom will get back to us, maybe as early as next week, after trying to use the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SuccessPreExitCode\" title=\"Success Pre Exit Code\">SuccessPreExitCode</a></span> mechanism.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "incident", "last_change": "2020-Feb-28 17:36", "status": "resolved", "created": "2020-Jan-08 13:04", "fixed_version": "2020-Jan-08 13:04", "broken_version": "", "priority": "4", "subsystem": "DaemonsExecNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}