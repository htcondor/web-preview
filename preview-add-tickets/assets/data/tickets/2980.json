{"id": 2980, "title": "Ticket #2980: RFC: Unify SPLICE and SUBDAG EXTERNAL in DAGman", "description": "<blockquote>\nThis is from <span class=\"ticket\"><a class=\"stalled\" href=\"/tickets?ticket=2649\" onclick=\"get_ticket_and_populate_wrapper('2649'); return false;\" title=\"Have subdag external functionality w/o an actual extra DAGMan\">#2649</a></span>.  I want to solicit some commentary from more knowledgeable sources than I.\n\n<p>Could we just get rid of SUBDAG EXTERNAL and SPLICE, and just have SUBDAG?  Are people wedded to this notion of having an external DAGman?  Idea is to combine the best of both SPLICE and SUBDAG EXTERNAL:\n\n</p><p></p><ol>\n<li>Category throttles work across the whole DAGman job\n</li><li>When subdag completes, the DAGman contracts the subdag by releasing the memory associated with the nodes.\n</li><li>SUBDAGs can have FINAL nodes\n</li><li>SUBDAGs can ABORT, etc.\n</li><li>SUBDAGS can be lazily created\n</li><li>Instead of having many DAGmans to query, we guarantee that there is exactly one DAGman to query.  (This is for the oft stated request to have tools that can monitor DAGman status)\n</li></ol>\n\n<p>At least one issue comes up immediately:\n</p><ol>\n<li>Do people use a job_status file in a nested dag, without one for the \"nesting\" dag?</li></ol>\n</blockquote>", "remarks": "<blockquote>\nSee also <span class=\"ticket\"><a class=\"stalled\" href=\"/tickets?ticket=2166\" onclick=\"get_ticket_and_populate_wrapper('2166'); return false;\" title=\"Create a DAG validation tool\">#2166</a></span>.\n\n<p></p><hr/>\n<em>2017-May-16 12:40:48 by wenger:</em> <br/>\n\nAnother big thing:  sub-DAGs can have retries, and splices can't.\n\n<p></p><hr/>\n<em>2017-May-16 12:41:54 by wenger:</em> <br/>\n\nI don't think we should get rid of sub-DAGs entirely, because they can always have scaling benefits if used properly.  But I think we should, as much as possible, add features that are currently sub-DAG-only (PRE/POST scripts, retries, etc.) to splices.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2017-May-16 12:41", "status": "new", "created": "2012-May-09 15:57", "fixed_version": "2012-May-09 15:57", "broken_version": "v070700", "priority": "5", "subsystem": "Dag", "assigned_to": "PitS", "derived_from": "", "creator": "nwp", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu tannenba@cs.wisc.edu", "due_date": ""}