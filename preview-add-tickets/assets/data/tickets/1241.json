{"id": 1241, "title": "Ticket #1241: Cleanup stduniv to be linux only", "description": "<blockquote>\nRemove all detritus of non-linux oses from the build system of stduniv.\n\n<p>Also convert to build in cmake.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-28 08:26:25 by tannenba:</em> <br/>\n\nThe default in cmake is to build with -O2 (optimization), but in the dim recesses of my memory I recall we had problems in the past if the checkpoint library was built with -O2. If it is an easy thing to do, I suggest that optimization be disabled when building the checkpoint library (src/condor_ckpt).\n\n<p></p><hr/>\n<em>2010-Sep-28 08:39:25 by tstclair:</em> <br/>\n\nIt's an easy change.\n\n<p></p><hr/>\n<em>2010-Sep-28 10:19:55 by psilord:</em> <br/>\n\nYup. I can confirm that -O2 in the checkpointing or remote syscall library codes is a bad idea. Basically, the compiler inlines functions that we need to interpose with and hence become uninterposable.\n\n<p></p><hr/>\n<em>2010-Sep-28 12:15:51 by tstclair:</em> <br/>\n\nfix'd\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-28 12:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=19078\">[19078]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1248\" title=\"CMake staging\">#1248</a></span>: Update to re-enable voms and fix for duplicate lib detection Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Compile *std:u with optimizations disabled.  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-22 13:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=19014\">[19014]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Update glibc builds for deb5.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-16 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18996\">[18996]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span> + update build settings for std:u in prep for nmi Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1657\" title=\"Update condor's installer to use WiX\">#1657</a></span> + update manifest munding of krb5 .dll's  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 23:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18978\">[18978]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: condor_starter.std and condor_shadow.std only link sub-libs which are generated in condor_syscall  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 22:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18977\">[18977]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Various cleanup work from std:u cmake transition  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18972\">[18972]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: all std:universe major targets compile and link, onto install and testing  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-13 22:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18967\">[18967]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span> condor_starter.std now builds and is converted and all deps converted to C++  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-13 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18964\">[18964]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: ckpt &amp; syscall build cleanly for standard universe + minor update from last merge out.  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-10 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18961\">[18961]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Bug fixes when building std:u  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-10 10:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18960\">[18960]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: 1st pass refactor of standard universe in place.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-09 15:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18958\">[18958]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Updates for standard universe, symbol extraction and object injection.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-07 14:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18939\">[18939]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: bug fix cleanup from latest modifications.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-07 13:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18938\">[18938]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: continued std:universe addition and cruft removal.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-31 13:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18937\">[18937]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=1241\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Initial cruft removal for std:u transform to cmake.  (By Timothy St. Clair )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Nov-19 16:22", "status": "resolved", "created": "2010-Feb-23 13:36", "fixed_version": "2010-Feb-23 13:36", "broken_version": "v070500", "priority": "3", "subsystem": "Std", "assigned_to": "tstclair", "derived_from": "#779", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu, tstclair@redhat.com, matt@cs.wisc.edu", "due_date": ""}