{"id": 6437, "title": "Ticket #6437: Fix JSON and XML output of condor_history", "description": "<blockquote>\nWhen condor_history reads from multiple history files, it prints extra header/footer text for the JSON and XML formats for each file. The resulting output is invalid JSON/XML.\n\n<p>Here's some sample JSON output with ads read from two history files:\n</p><div class=\"code\">\n<pre class=\"code\">% condor_history -limit 4 -attributes clusterid,procid -json -limit 4\n[\n{\n  \"procid\": 0,\n  \"clusterid\": 968\n}\n,\n{\n  \"procid\": 0,\n  \"clusterid\": 967\n}\n,\n{\n  \"procid\": 0,\n  \"clusterid\": 966\n}\n]\n[\n,\n{\n  \"procid\": 0,\n  \"clusterid\": 965\n}\n]\n</pre></div>\n\n\n<p>Also, the -attributes argument is ignored when -forwards is used.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Oct-18 10:14:12 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> change looks good.  I noticed a minor inconsistency.  use_json is ignored when printing if longformat is false, but it is NOT ignored when printing the json header and footer when longformat is false.  I believe this is moot since the -json argument sets both longformat and use_json.\n\n<p></p><hr/>\n<em>2017-Oct-25 10:25:56 by tim:</em> <br/>\n\n<strong>Doc Review:</strong> OK</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-18 13:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52605\">[52605]</a></span>: Docs for condor_history XML/JSON bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6437\" onclick=\"get_ticket_and_populate_wrapper('6437'); return false;\" title=\"Fix JSON and XML output of condor_history\">#6437</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-10 10:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52531\">[52531]</a></span>: Fix JSON and XML output of condor_history. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6437\" onclick=\"get_ticket_and_populate_wrapper('6437'); return false;\" title=\"Fix JSON and XML output of condor_history\">#6437</a></span> When reading multiple history files, condor_history was printing extra header/footer text for the JSON and XML formats. The resulting output was invalid JSON/XML.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-10 10:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52532\">[52532]</a></span>: Make -attributes and -forwards work together in condor_history. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6437\" onclick=\"get_ticket_and_populate_wrapper('6437'); return false;\" title=\"Fix JSON and XML output of condor_history\">#6437</a></span> When reading a history file in forwards mode, apply the projection when printing each ad, the same as when in backwards mode.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Oct-25 10:25", "status": "resolved", "created": "2017-Oct-09 16:31", "fixed_version": "2017-Oct-09 16:31", "broken_version": "", "priority": "3", "subsystem": "Tools", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "users", "visibility": "public", "notify": "", "due_date": ""}