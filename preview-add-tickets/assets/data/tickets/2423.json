{"id": 2423, "title": "Ticket #2423: FileTransfer shouldn't back-date file modification times", "description": "<blockquote>\nWhen the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object is receiving files in the schedd or starter, it back-dates the modification times by 3 minutes. This doesn't appear to be necessary and can be confusing.\n\n<p>This happens in FileTransfer::DoDownload(). Comments in the method say that it used to issue an fsync after writing each file to ensure that its modification time is older than when file transfer completes. This is to prevent unmodified input files from being transferred as output. But on some OS's, when using fsync, writes can still be delayed and the file modification time set to some time after the write and fsync. So the method manually sets the modification time to 180 seconds in the past.\n\n</p><p>This back-dating is not needed in the starter, where we transfer as output any file whose size or modfication time changes during job execution. In the schedd, I don't see how back-dating solves the supposed problem. No matter what you set the modification time to, a delayed write would just set it to the undesired future time afterwards.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-26 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32478\">[32478]</a></span>: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> shouldn't back-date file modification times. <span class=\"ticket\"><a class=\"resolved\" href=\"tktview?tn=2423\" title=\"FileTransfer shouldn't back-date file modification times\">#2423</a></span> When the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object is receiving files in the schedd or starter, it back-dates the modification times by 3 minutes. This doesn't appear to be necessary and can be confusing. The back-dating has been removed. ===VersionHistory:Complete===\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Jun-26 11:30", "status": "resolved", "created": "2011-Aug-25 15:26", "fixed_version": "2011-Aug-25 15:26", "broken_version": "v070600", "priority": "4", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#2406", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}