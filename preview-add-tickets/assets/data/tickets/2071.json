{"id": 2071, "title": "Ticket #2071: Cross stduniv tests aren't flexible enough", "description": "<blockquote>\nIn a cross test scenario, it turns out that the stduniv tests are condor_compiled on the native host and submitted on the target host. It should really that each stduniv test should have available two executables, one condor_compiled on the native platform, and on condor_compiled on the target platform, and both used for a test.\n\n<p>Having it the way it does now minimizes the usefulness of cross tests of standard universe for compatibility testing.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Apr-25 16:48:24 by psilord:</em> <br/>\n\nMeh, doing exploratory hacking.\n\n<p></p><hr/>\n<em>2011-Apr-26 14:47:49 by psilord:</em> <br/>\n\nThis ticket is going to take a while to solve because I have to wait for 1.5+ hours for a build when run through NMI. I'm also stalling it so I can finish a different task.\n\n<p></p><hr/>\n<em>2011-May-10 10:43:35 by psilord:</em> <br/>\n\nMeat is back on the menu!\n\n<p></p><hr/>\n<em>2011-May-18 14:56:50 by psilord:</em> <br/>\n\nI've been hacking on this to try and remake the condor_tests directory on the execute machine, but it is proving difficult for strange reasons that are time consuming to debug.\n\n<p></p><hr/>\n<em>2011-May-18 15:32:16 by psilord:</em> <br/>\n\nOk, here is what I've found.\n\n<p>cmake embeds absolute paths into the generated Makefiles. So, when a build of Condor happens on Machine A in some condor execute directory Ad, Ad is spread all through the Makefile.\n\n</p><p>Then, when running the test job of the build from A Machine B, I simply try to make clean and remake the condor_tests directory in the test glue's remote_pre. However, this fails terribly trying to chdir/whatever to Ad, which doesn't exist.\n\n</p><p>To regenerate the Makefiles, we need to run cmake, to run cmake, we need as input basically the whole source release from Machine A. I don't think that is\navailable.\n\n</p><p></p><hr/>\n<em>2011-May-18 16:12:28 by psilord:</em> <br/>\n\nI'm going to declare this activity a rathole and skip this step in the RHEL 6 porting.\n\n<p>This means that we have to hand test to see if the RHEL 5's stduniv will condor_compile on a rhel 6 machine the stduniv test suite.\n\n</p><p></p><hr/>\n<em>2012-Feb-09 22:56:59 by pfc:</em> <br/>\n\nThis may have originated as the indirect result of a LIGO ticket (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1998\" onclick=\"get_ticket_and_populate_wrapper('1998'); return false;\" title=\"Perform RHEL 6 full port of Condor\">#1998</a></span>), but it's not something LIGO is asking for, so I'm removing us as the customer group.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2164\" onclick=\"get_ticket_and_populate_wrapper('2164'); return false;\" title=\"--test-class in condor_nmi_submit should be extended\">#2164</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\n--test-class in condor_nmi_submit should be extended</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2012-Feb-09 22:57", "status": "new", "created": "2011-Apr-19 14:10", "fixed_version": "2011-Apr-19 14:10", "broken_version": "v070504", "priority": "5", "subsystem": "Tests", "assigned_to": "", "derived_from": "#1998", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu tstclair@redhat.com", "due_date": ""}