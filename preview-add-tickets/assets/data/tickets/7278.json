{"id": 7278, "title": "Ticket #7278: Missing pieces for submit dag from python", "description": "<blockquote>\nSome small but important pieces missing from <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span> which added a way to submit a dag file from python :\n\n<p></p><ol>\n<li>htcondor.Submit.from_dag() only accepts positional arguments; we want all our bindings to support named arguments.  The boost definition should include a boost::python::args statement...\n\n<p></p></li><li>The from_dag() method does not appear in the v8.9.3 <span class=\"wiki\"><a href=\"wiki?p=ReadTheDocs\" title=\"Read The Docs\">ReadTheDocs</a></span> Manual.  Why not?  Isn't this part of the manual now auto-generated from pydoc?  So how did it get omitted?</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Sep-23 09:49:12 by karpel:</em> <br/>\n\nOn 2: The manual still only reads what you tell it to read, so new methods are not automatically included in the manual. I have added a commit (on branch <code>V8_9-gt7278-branch</code>) which adds the necessary directive in the RST. I have also added a section to the manual wiki page at <a class=\"external\" href=\"https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=ReadTheDocs\">https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=ReadTheDocs</a> on how to document Python objects. But, we should make sure this information is actually disseminated to people touching the Python bindings.\n\n<p>On 1: I'll confer with Mark and make sure the arguments are named correctly and have sensible defaults where appropriate. Will also give it a real docstring. Change will happen on the same branch.\n\n</p><p></p><hr/>\n<em>2019-Sep-25 15:52:11 by coatsworth:</em> <br/>\n\nI've added a small change so the opts argument is now optional, whether or not using the named arguments.\n\n<p>As for what to name these arguments, I think that \"filename\" and \"options\" make the most sense, any thoughts?\n\n</p><p></p><hr/>\n<em>2019-Sep-25 16:09:33 by karpel:</em> <br/>\n\nI'm a little worried about the default argument being mutable in your commit. I'm not sure how Boost handles this. Do you every modify the contents of the options dictionary? If so, this could be picked up later invocations of the function in the same session.\n\n<p>re: argument naming, yep, that sounds fine to me.\n\n</p><p></p><hr/>\n<em>2019-Sep-25 16:43:30 by coatsworth:</em> <br/>\n\nWhere/how did you see this was mutable? And no, the contents of the options dict never changes. I just iterate over it and add whatever options I see into the condor_dagman data structures.\n\n<p></p><hr/>\n<em>2019-Sep-25 16:53:41 by karpel:</em> <br/>\n\nIt's just the standard Python behavior for a signature that looks like that. No idea what Boost does in this situation. <a class=\"external\" href=\"https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments\">https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments</a>\n\n<p></p><hr/>\n<em>2019-Sep-26 14:10:18 by coatsworth:</em> <br/>\n\nThis is the standard syntax we use for named arguments throughout the bindings, and in this case there really isn't any danger anyway. I'm going to merge this branch into master so that we can ship it with 8.9.4. If we decide later this is a bug, we can fix it post code freeze.\n\n<p></p><hr/>\n<em>2019-Sep-26 14:45:07 by karpel:</em> <br/>\n\nSounds good to me.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-22 13:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58228\">[58228]</a></span>: Fixed version history syntax (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-02 10:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=58008\">[58008]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>  (By <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JoshKarpel\" title=\"Josh Karpel\">JoshKarpel</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-26 14:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57928\">[57928]</a></span>: Better named argument names in Submit.from_dag (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-25 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57921\">[57921]</a></span>: Submit.from_dag opt argument now optional (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-23 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57892\">[57892]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>) flesh out docstring for Submit.from_dag and name arguments  (By <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JoshKarpel\" title=\"Josh Karpel\">JoshKarpel</a></span> )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-23 09:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57886\">[57886]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span>) add Submit.from_dag to the bindings docs  (By <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JoshKarpel\" title=\"Josh Karpel\">JoshKarpel</a></span> )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Oct-02 10:19", "status": "resolved", "created": "2019-Sep-22 18:07", "fixed_version": "2019-Sep-22 18:07", "broken_version": "v080903", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "karpel", "derived_from": "#6275", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "coatsworth@cs.wisc.edu tannenba@cs.wisc.edu tim@cs.wisc.edu karpel@wisc.edu", "due_date": ""}