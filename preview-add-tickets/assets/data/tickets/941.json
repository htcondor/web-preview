{"id": 941, "title": "Ticket #941: Don't notify all cream jobs on proxy renewal in gridmanager", "description": "<blockquote>\nWhen the gridmanager notices that a proxy has been refreshed, it triggers the doEvaluateState() timer for all related cream jobs. Since the <span class=\"quote\">CreamResource</span> object handles the forwarding of the renewed proxy, the individual job objects rarely care about the renewal.\n\n<p>The callback to the cream job object should do a quick check whether the job cares about the renewal and trigger a doEvaluateState() only if it does care.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Nov-12 16:49:47 by jfrey:</em> <br/>\n\nPushed fix to V7_5-cream_hardening-branch.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-13 11:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16317\">[16317]</a></span>: Fix bug where cream jobs not signaled when proxy first delegated. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=941\" onclick=\"get_ticket_and_populate_wrapper('941'); return false;\" title=\"Don't notify all cream jobs on proxy renewal in gridmanager\">#941</a></span> In attempting to minimize the situations where cream jobs are signaled for proxy-related events, I accidently prevented signalling them when the proxy is first delegated. Thus, the jobs could end up waiting forever before submitting.\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-12 16:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16314\">[16314]</a></span>: Avoiding signaling all cream jobs on proxy renewal. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=941\" onclick=\"get_ticket_and_populate_wrapper('941'); return false;\" title=\"Don't notify all cream jobs on proxy renewal in gridmanager\">#941</a></span> When the gridmanager notices a renewed proxy on disk, only trigger the EvaluateState() timer of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamJob\" title=\"Cream Job\">CreamJob</a></span> objects that might care.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-31 13:41", "status": "resolved", "created": "2009-Nov-12 15:48", "fixed_version": "2009-Nov-12 15:48", "broken_version": "v070500", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#897", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}