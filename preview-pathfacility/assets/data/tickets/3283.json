{"id": 3283, "title": "Ticket #3283: glexec job not put on hold when proxy expires", "description": "<blockquote>\nIf a proxy expires before the shadow ever pushes a new copy to the starter, the logic that is supposed to put the job on hold before expiration never happens.  The problem is that the logic is invoked in the proxy update code path, not the initial proxy upload code path.</blockquote>", "remarks": "<blockquote>\n<em>2012-Oct-22 16:42:18 by danb:</em> <br/>\n\nThe attached patch fixes the problem of the expiration timer not getting set until the first proxy refresh.  It also fixes the case where the proxy expires in less than PROXY_EXPIRING_EVICTION_TIME seconds.  The timer was getting set to a very long time in the future in this case due to int --&gt; unsigned casting.\n<hr/>\n<em>2012-Oct-25 17:52:16 by johnkn:</em> <br/>\n\nBulk change of target version from v070806 to v070807 using ./ticket-target-mover.\n<hr/>\n<em>2012-Oct-26 10:33:16 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong> Dan and I discussed the proposed changes before they were made -- this looks good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Dec-05 16:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/81e8a052b42b9cd5a2b8797fc78a5245097289bd\">[34295]</a></span>: minor formatting change to version history item. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3283\" onclick=\"get_ticket_and_populate_wrapper('3283'); return false;\" title=\"glexec job not put on hold when proxy expires\">#3283</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Dec-05 15:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cf02fb110df45ff102c0ca1e64597423f78a4cfd\">[34284]</a></span>: minor formatting change to version history item. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3283\" onclick=\"get_ticket_and_populate_wrapper('3283'); return false;\" title=\"glexec job not put on hold when proxy expires\">#3283</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-22 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/61609010a7c44e1769c6ca9e2465e3fac31e3145\">[33738]</a></span>: Fix putting glexec jobs on hold when initial proxy expires. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3283\" onclick=\"get_ticket_and_populate_wrapper('3283'); return false;\" title=\"glexec job not put on hold when proxy expires\">#3283</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Oct-26 10:33", "status": "resolved", "created": "2012-Oct-19 14:57", "fixed_version": "2012-Oct-19 14:57", "broken_version": "v070800", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "#235", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "isfiligoi@ucsd.edu,dan@hep.wisc.edu,zmiller@cs.wisc.edu", "due_date": ""}