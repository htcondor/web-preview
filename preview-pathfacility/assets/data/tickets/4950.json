{"id": 4950, "title": "Ticket #4950: Consumption policy should disable claim partitionable leftovers", "description": "<blockquote>\nConsumption policies (enabled by CONSUMPTION_POLICY) allow the negotiator to make multiple matches to a single partitionable slot. Claim Partitionable Leftovers (enabled by CLAIM_PARTITIONABLE_LEFTOVERS) allows the schedd to make multiple claim requests to a single partitionable slot. If both are enabled for the same partitionable slot, then the negotiator and schedd will conflict in their attempts to efficiently match the slot to multiple jobs.\nThis will waste time, as the slower party to attempt to claim the slot will fail, and will need to search for another match.\n\n<p>To avoid this problem, if a slot has Consumption Policies enabled, the startd should not give a claim for the partitionable leftovers to a claiming schedd (essentially disabling CLAIM_PARTITIONABLE_LEFTOVERS for that slot).</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Apr-07 14:18:22 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Patch looks good, other than it would be nice if documentation went beyond just the version history entry.  Specifically, would be good if the documentation for <code>CLAIM_PARTITIONABLE_LEFTOVERS</code> knob explained that value of that knob is ignored if consumption policies are used.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-23 16:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a2f3b9c6b20e1bd80171eee5c91410c8a7bbb196\">[43682]</a></span>: minor edit to 8.2.8 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4950\" onclick=\"get_ticket_and_populate_wrapper('4950'); return false;\" title=\"Consumption policy should disable claim partitionable leftovers\">#4950</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-20 11:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ec69f4087533db61215b169698114c1242ad6b7\">[43638]</a></span>: Docs for CONSUMPTION_POLICY/CLAIM_PARTITIONABLE_LEFTOVERS conflict. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4950\" onclick=\"get_ticket_and_populate_wrapper('4950'); return false;\" title=\"Consumption policy should disable claim partitionable leftovers\">#4950</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-20 11:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e6b2435113fed3be6d9eda1f41ffece9622b6c2b\">[43636]</a></span>: Make CONSUMPTION_POLICY disable CLAIM_PARTITIONABLE_LEFTOVERS. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4950\" onclick=\"get_ticket_and_populate_wrapper('4950'); return false;\" title=\"Consumption policy should disable claim partitionable leftovers\">#4950</a></span> These are conflicting ways to efficiently match a partitionable slot to multiple jobs. If a slot has CONSUMPTION_POLICY enabled, then a claiming schedd will not be given a claim with the leftovers.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Apr-07 14:18", "status": "resolved", "created": "2015-Mar-20 10:58", "fixed_version": "2015-Mar-20 10:58", "broken_version": "v080200", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "tannenba", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}