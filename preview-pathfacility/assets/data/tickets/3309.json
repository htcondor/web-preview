{"id": 3309, "title": "Ticket #3309: STARTER_RLIMIT_AS overflows at 4GB on 32bit", "description": "<blockquote>\n(reproduced w/o modification from <a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=874535\">https://bugzilla.redhat.com/show_bug.cgi?id=874535</a>)\n\n<p></p><div class=\"verbatim\">\n<pre> Bert DeKnuydt 2012-11-08 06:52:58 EST\n\nDescription of problem:\n\nOn a 32-bit machine, setting STARTER_RLIMIT_AS to x effectively\nsets it to (x % 4096), i.e. 4097 sets 1.\n\nSo setting STARTER_RLIMIT_AS = $(DETECTED_MEMORY) e.g. does not\nwhat you expect.\n\nVersion-Release number of selected component (if applicable):\n\ncondor-7.9.1-0.1.fc17.2.i686\n\nHow reproducible:\n\nAlways\n\n\nSteps to Reproduce:\n1. On a 32-bit system, set STARTER_RLIMIT_AS to 4097\n2. Run any job\n3.\n\nActual results:\n\nJob will crash, as it actually only gets on 1 meg of address space,\nand not 4GB.\n\nExpected results:\n\nOn 32-bit, the real maximum is 4GB, so whatever sets ulimit -v before\nthe real jobs is exec()-ed, should set it to min(STARTER_RLIMIT_AS, 4GB).\n\nAdditional info:\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Dec-04 17:25:59 by johnkn:</em> <br/>\n\nfrom my reading of the code. it appears that the expresible limit on 32 bit is 2GB - 1MB.  I wonder if we should just not use a limit if the value exceeds that amount.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-03 10:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/838915f2125b797c8601f158021c570564d7ad83\">[34516]</a></span>: enhance defn of STARTER_RLIMIT_AS as well as 7.9.3 version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3309\" onclick=\"get_ticket_and_populate_wrapper('3309'); return false;\" title=\"STARTER_RLIMIT_AS overflows at 4GB on 32bit\">#3309</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Dec-05 10:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/458fdd4dcdfa9b1bc4f740ce145527642cfae7c5\">[34276]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3309\" onclick=\"get_ticket_and_populate_wrapper('3309'); return false;\" title=\"STARTER_RLIMIT_AS overflows at 4GB on 32bit\">#3309</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Dec-05 09:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/29da46b79c821297ea2844c90326536f711695f7\">[34274]</a></span>: on 32 bit *nix platforms, treat rlimit requests &gt; 2GB as no limit. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3309\" onclick=\"get_ticket_and_populate_wrapper('3309'); return false;\" title=\"STARTER_RLIMIT_AS overflows at 4GB on 32bit\">#3309</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Dec-05 12:22", "status": "resolved", "created": "2012-Nov-08 07:11", "fixed_version": "2012-Nov-08 07:11", "broken_version": "v070900", "priority": "4", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}