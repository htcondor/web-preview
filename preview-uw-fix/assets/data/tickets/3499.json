{"id": 3499, "title": "Ticket #3499: per job 'Name' mounting", "description": "<blockquote>\nThis ticket is meant to capture in detail the per-job FUSE mounting.</blockquote>", "remarks": "<blockquote>\n<em>2013-Mar-14 12:31:57 by tstclair:</em> <br/>\n\nFollowing the same semantics as NAMED_CHROOT as it's pretty much the same use case.\n\n<p>Tracking changes in: master-gt3499-fuse\n\n</p><p></p><hr/>\n<em>2013-Apr-09 17:42:44 by bbockelm:</em> <br/>\n\nHi Tim,\n\n<p>What was the idea behind cleaning up the mount?  Doesn't the kernel do this automatically?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Dec-18 15:12:00 by tannenba:</em> <br/>\n\nEven though code appears in v8.0.0, am I changing the target release on ticket to v8.1.4.  By v8.1.4, we should either revert the commits or address the fact that there is no documentation, no version history, no design document, no code review, no notes on how testing was (or even should be) done, and no answers to thoughtful questions in ticket remarks (like why are umounts are being performed in the code -vs- just letting the kernel do it).  I am not against the idea in general of what this ticket is trying to do, but it seems like the develop and release process broke down here.\n\n<p>Do we know if anyone is using this or relies upon it? I.e. is there downstream documentation on the new knobs such that downstream users are potentially using the functionality?\n\n</p><p></p><hr/>\n<em>2013-Dec-20 08:44:31 by tstclair:</em> <br/>\n\nIt was intended to allow auto-fuse-mounting per job.  It would be a highly useful feature for other folks, similar to his chirp mods.\n\n<p>You may wish to consult BrianB about it.  Presently I'm tasked on other things.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-30 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8462cd3eba3a59e90a899d0ee125b3b44b4ea81b\">[39277]</a></span>: Revert \"Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> Initial addition of per job fuse mounting.\" This reverts commit 4b6649489fbe26d1a7791538dbb989429609df09.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-30 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a299061cca9bd9e36b2da06601474101b9a81c25\">[39276]</a></span>: Revert \"Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> - 1st class status for named mount points.\" This reverts commit edb87c74b0431a0f8e9d42e041a9bba890157d31. Conflicts: src/condor_submit.V6/submit.cpp  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-30 16:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/29cbfa8cd997f0d72f674eaa5ef9c26beba79855\">[39275]</a></span>: Revert \"Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> Update for cleanup, which should work fine on el, but there\" This reverts commit 5e65379413d47f26148abf9f147e4c6acad38e4d. Conflicts: src/condor_starter.V6.1/vanilla_proc.cpp  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-19 16:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5e65379413d47f26148abf9f147e4c6acad38e4d\">[35211]</a></span>: Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> Update for cleanup, which should work fine on el, but there appears to be an issue when using per job mount namespaces. Only the process itself or death can unmount, not even root can unmount because it is not visible because the namespace is created only for the process spawned from the\u00a0[...]\n (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-18 11:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/edb87c74b0431a0f8e9d42e041a9bba890157d31\">[35186]</a></span>: Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> - 1st class status for named mount points.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-14 12:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4b6649489fbe26d1a7791538dbb989429609df09\">[35157]</a></span>: Ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span> Initial addition of per job fuse mounting .  (By Timothy St. Clair )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Feb-27 15:33", "status": "defer", "created": "2013-Feb-18 16:46", "fixed_version": "2013-Feb-18 16:46", "broken_version": "v070900", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "#3465", "creator": "tstclair", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com, matt@cs.wisc.edu, bbockelm@cse.unl.edu tannenba@cs.wisc.edu, gthain@cs.wisc.edu, tim@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": "20130610"}