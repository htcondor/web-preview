{"id": 7059, "title": "Ticket #7059: memory leak in condor_annex", "description": "<blockquote>\nCoverity found a memory leak in <code>annex/annex-create.cpp</code> that's going to take a fair bit of coding to fix: the s3gahp can't be deleted in the function (or class) in which it's allocated, since the <code>UploadFile</code> functor needs it.  Luckily, we've already solved this problem for the other gahp pointers, so we have a good map to follow.</blockquote>", "remarks": "<blockquote>\n<em>2019-May-23 17:12:35 by tlmiller:</em> <br/>\n\nThis patch is somewhat larger than <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6994\" onclick=\"get_ticket_and_populate_wrapper('6994'); return false;\" title=\"Fix memory leak in condor_annex\">#6994</a></span>, but otherwise identical, so it also seems like it shouldn't need a release note.  If we think the patch is too big for stable, then maybe it should get a release note in devel.\n\n<p></p><hr/>\n<em>2019-May-23 17:14:32 by tlmiller:</em> <br/>\n\nAssigned to TJ on the basis of having done the review for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6994\" onclick=\"get_ticket_and_populate_wrapper('6994'); return false;\" title=\"Fix memory leak in condor_annex\">#6994</a></span>.\n\n<p></p><hr/>\n<em>2019-Jun-13 17:19:22 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> changes look good.\n\n<p></p><hr/>\n<em>2019-Jun-19 14:46:35 by tlmiller:</em> <br/>\n\nNo release note necessary for fixing a memory leak in a command-line tool.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-21 13:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6ab4f3b9e1451d4c0e223e09e416340de1f27cb2\">[56948]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7059\" onclick=\"get_ticket_and_populate_wrapper('7059'); return false;\" title=\"memory leak in condor_annex\">#7059</a></span>) Add the s3gahp to the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ReplyAndClean\" title=\"Reply And Clean\">ReplyAndClean</a></span> functor in order to fix a memory leak.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Jun-19 14:46", "status": "resolved", "created": "2019-May-21 10:24", "fixed_version": "2019-May-21 10:24", "broken_version": "", "priority": "3", "subsystem": "Annex", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, gthain@cs.wisc.edu", "due_date": ""}