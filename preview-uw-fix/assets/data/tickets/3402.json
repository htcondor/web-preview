{"id": 3402, "title": "Ticket #3402: file transfer race condition in parallel universe", "description": "<blockquote>\nWhen using parallel universe, it is possible for the job to be marked as finished without transferring the output from some nodes in the job.  There is a race between node 0 reporting its exit status and output being transferred from all the other nodes.\n\n<p>When file transfer in the shadow uses blocking mode, the race is between initiation of transfer and processing the exit status of node 0.  When non-blocking file transfer is used in the shadow (as in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3333\" onclick=\"get_ticket_and_populate_wrapper('3333'); return false;\" title=\"improve file transfer management\">#3333</a></span>), the race is between completion of file transfer and processing the exit status of node 0.  In both cases, some nodes may not get a chance to transfer any files at all.  In the non-blocking case, the transfers for some nodes may be halted midway.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Dec-28 15:02:43 by danb:</em> <br/>\n\nThe race condition goes away if the attribute <code>ParallelShutdownPolicy</code> is set to \"WAIT_FOR_ALL\".  The default is \"WAIT_FOR_NODE0\".  Therefore, I think the race condition is actually expected behavior.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2012-Dec-28 15:03", "status": "abandoned", "created": "2012-Dec-28 10:51", "fixed_version": "2012-Dec-28 10:51", "broken_version": "v070600", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu,gthain@cs.wisc.edu", "due_date": ""}