{"id": 318, "title": "Ticket #318: CCB submit machine can crash a v7.2 collector", "description": "<blockquote>\nIf you enable CCB in Condor v7.3.x submit host and point it at a v7.2.1 Collector, you will crash the collector. Zach (zmiller) watched this happen with his own eyes, it is trivial to reproduce.\n\n<p>We do not need to provide backwards or forwards compatibility w/ CCB, however it seems like we should at least patch the v7.2 collector to not crash in this instance -  after all,\n</p><ol>\n<li>it is essentially a denial of service attack.\n</li><li>it could happen fairly commonly \"by accident\" due to flocking.\n</li></ol>\n\n<p>Seems like the patch to the v7.2.x collector could be very simple....</p></blockquote>", "remarks": "<blockquote>\nI was not able to reproduce a collector crash, but it was easy to produce a negotiator crash.  I have fixed the problem for V7.2 by making the collector reject ads with CCB info in the sinful string.  Just for safety from bad input data, I have also fixed the buffer overflow problem in the 7.2 negotiator.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Apr-03 18:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/645aa28f5d94fba0ea6970374383bb72c010f30c\">[14403]</a></span>: In Condor 7.2, reject ads from daemons using CCB. This is necessary to avoid strange behavior (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=318\" onclick=\"get_ticket_and_populate_wrapper('318'); return false;\" title=\"CCB submit machine can crash a v7.2 collector\">#318</a></span>). Ads from condor 7.3+ using PRIVATE_NETWORK_NAME will also be rejected, because that also stuffs extra info into the sinful string.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Apr-03 18:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8a9980f5843eec348cfba7209d66e6e5e064e467\">[14401]</a></span>: In Condor 7.2, reject ads from daemons using CCB. This is necessary to avoid strange behavior (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=318\" onclick=\"get_ticket_and_populate_wrapper('318'); return false;\" title=\"CCB submit machine can crash a v7.2 collector\">#318</a></span>). Ads from condor 7.3+ using PRIVATE_NETWORK_NAME will also be rejected, because that also stuffs extra info into the sinful string.  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:40", "status": "resolved", "created": "2009-Mar-11 14:21", "fixed_version": "2009-Mar-11 14:21", "broken_version": "v070201", "priority": "2", "subsystem": "Daemons", "assigned_to": "danb", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "zmiller@cs.wisc.edu,matt@cs.wisc.edu,burnett@cs.wisc.edu", "due_date": ""}