{"id": 1632, "title": "Ticket #1632: vmware snapshot randomly fails", "description": "<blockquote>\nI observed an apparently random sample (~1/3) of my vmware jobs going on hold with the following reason:\n\n<p></p><div class=\"verbatim\">\n<pre>HoldReason = \"Error from slot2@c165.chtc.wisc.edu:  register(/var/execute/slot2/dir_8311/vmwZsbPe_condor.vmx) = 1/(ERROR) Can't create snapshot for vm(/var/execute/slot2/dir_8311/vmwZsbPe_condor.vmx)\"\nHoldReasonCode = 6\n</pre></div>\n\n\n<p>I am able to reproduce occasional failures creating snapshots of the vmware image by running the vmgahp by hand using the following command:\n\n</p><p></p><div class=\"verbatim\">\n<pre>sudo /usr/bin/perl /usr/sbin/condor_vm_vmware.pl snapshot /tmp/dan/GLOW1.vmx\n</pre></div>\n\n\n<p>When it fails, the gahp exits with status 1 and spits out the following error message:\n\n</p><p></p><div class=\"verbatim\">\n<pre>(ERROR) Can't create snapshot for vm(/tmp/dan/GLOW1/GLOW1.vmx)\n</pre></div>\n\n\n<p>In 20 runs of the above command, I observed 4 such failures.\n\n</p><p></p><div class=\"verbatim\">\n<pre>$ condor_version\n$CondorVersion: 7.4.2 Mar 29 2010 BuildID: 227044 $\n$CondorPlatform: X86_64-LINUX_RHEL5 $\n\n$ sudo rpm -q --whatprovides `which vmware`\nVMware-server-1.0.7-108231.i386\n\n$ uname -a\nLinux c165.chtc.wisc.edu 2.6.18-128.1.1.el5 #1 SMP Tue Feb 10 11:36:29 EST 2009 x86_64 x86_64 x86_64 GNU/Linux\n\n$ cat /etc/issue\nScientific Linux SL release 5.3 (Boron)\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Sep-01 10:37", "status": "new", "created": "2010-Sep-01 10:37", "fixed_version": "2010-Sep-01 10:37", "broken_version": "v070402", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu,jfrey@cs.wisc.edu", "due_date": ""}