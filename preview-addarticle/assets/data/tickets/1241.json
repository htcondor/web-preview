{"id": 1241, "title": "Ticket #1241: Cleanup stduniv to be linux only", "description": "<blockquote>\nRemove all detritus of non-linux oses from the build system of stduniv.\n\n<p>Also convert to build in cmake.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-28 08:26:25 by tannenba:</em> <br/>\n\nThe default in cmake is to build with -O2 (optimization), but in the dim recesses of my memory I recall we had problems in the past if the checkpoint library was built with -O2. If it is an easy thing to do, I suggest that optimization be disabled when building the checkpoint library (src/condor_ckpt).\n\n<p></p><hr/>\n<em>2010-Sep-28 08:39:25 by tstclair:</em> <br/>\n\nIt's an easy change.\n\n<p></p><hr/>\n<em>2010-Sep-28 10:19:55 by psilord:</em> <br/>\n\nYup. I can confirm that -O2 in the checkpointing or remote syscall library codes is a bad idea. Basically, the compiler inlines functions that we need to interpose with and hence become uninterposable.\n\n<p></p><hr/>\n<em>2010-Sep-28 12:15:51 by tstclair:</em> <br/>\n\nfix'd\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-28 12:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7d5f3ec673f1aad9c09e734f38acad26a8269009\">[19078]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1248\" onclick=\"get_ticket_and_populate_wrapper('1248'); return false;\" title=\"CMake staging\">#1248</a></span>: Update to re-enable voms and fix for duplicate lib detection Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Compile *std:u with optimizations disabled.  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-22 13:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/af6b458f0e996f9da9859055d5c49c2db232761a\">[19014]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Update glibc builds for deb5.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-16 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/563ed16f7a9fd52181ad57a88f88aab18bddacb2\">[18996]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span> + update build settings for std:u in prep for nmi Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1657\" onclick=\"get_ticket_and_populate_wrapper('1657'); return false;\" title=\"Update condor's installer to use WiX\">#1657</a></span> + update manifest munding of krb5 .dll's  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 23:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/634b9abb50d9ebc9ad89d0ddf2c57e50475dd919\">[18978]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: condor_starter.std and condor_shadow.std only link sub-libs which are generated in condor_syscall  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 22:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f10fb46f346866ce9521d82169a88dabd2c19481\">[18977]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Various cleanup work from std:u cmake transition  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/97cd126c43cdb5cca40ff0d0f280af90b5e74c28\">[18972]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: all std:universe major targets compile and link, onto install and testing  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-13 22:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1dcbe2ab9355d9f91079b8d820ba4350e1b8a2e8\">[18967]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span> condor_starter.std now builds and is converted and all deps converted to C++  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-13 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c49b05f9a8052756b43db08172ec9a46d1fdcfff\">[18964]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: ckpt &amp; syscall build cleanly for standard universe + minor update from last merge out.  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-10 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a1036bdc706e6347f44595d91891d4233cf44fd3\">[18961]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Bug fixes when building std:u  (By Timothy Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-10 10:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e7f77bdaebf5b6fc5a533b978f36a61941f8fb3e\">[18960]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: 1st pass refactor of standard universe in place.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-09 15:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/477e40caf59e15a1322a99c3773f5871cfa4f370\">[18958]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Updates for standard universe, symbol extraction and object injection.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-07 14:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9dee58ec4210a85170090f89c5bc9a853de7af45\">[18939]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: bug fix cleanup from latest modifications.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-07 13:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cfe8615b59541fae25c2333b39d8cffdbe3a6b0c\">[18938]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: continued std:universe addition and cruft removal.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-31 13:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fe14d6f3983c3acefb86c8ee95b47a4a1974cff4\">[18937]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1241\" onclick=\"get_ticket_and_populate_wrapper('1241'); return false;\" title=\"Cleanup stduniv to be linux only\">#1241</a></span>: Initial cruft removal for std:u transform to cmake.  (By Timothy St. Clair )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Nov-19 16:22", "status": "resolved", "created": "2010-Feb-23 13:36", "fixed_version": "2010-Feb-23 13:36", "broken_version": "v070500", "priority": "3", "subsystem": "Std", "assigned_to": "tstclair", "derived_from": "#779", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu, tstclair@redhat.com, matt@cs.wisc.edu", "due_date": ""}