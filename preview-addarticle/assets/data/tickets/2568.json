{"id": 2568, "title": "Ticket #2568: Grid universe job submitted via soap fail", "description": "<blockquote>\nGrid universe jobs submitted via SOAP that make use of the spool directory fail when attempting to write to the spool directory. This usually results in jobs becoming held. The problem is that the job's spool directory is never chown'd to the job owner. The gridmanager and its children access files as the job owner, so any attempts to write in the spool directory will fail.\n\n<p>For non-soap submission, the spool directory for grid universe jobs is chown'd when spooling of input files completes. This code-path isn't hit when using soap.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-16 13:27:25 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Patch looks fine, but would like to see a pithy comment added above the code block explaining why it was added (aka to set spool directory permissions correctly).\n\n</p><p></p><hr/>\n<em>2011-Dec-16 14:09:10 by jfrey:</em> <br/>\n\nI've added the comment requested in the code review.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/482/soap_grid.patch\">soap_grid.patch</a>\n730 bytes added by jfrey on 2011-Oct-21 18:36:28 UTC.\n<br/>\nPatch to properly chown spool directory for grid jobs submitted via SOAP.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-16 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/592a0fe083e9df9c1f0ba7595ceca66e4556998a\">[28833]</a></span>: Add comment for new code in soap submission of grid jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2568\" onclick=\"get_ticket_and_populate_wrapper('2568'); return false;\" title=\"Grid universe job submitted via soap fail\">#2568</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-12 17:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c0fe67ba87e820411c771be6d107240daccc4f6\">[28731]</a></span>: Fix submission of grid jobs via soap. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2568\" onclick=\"get_ticket_and_populate_wrapper('2568'); return false;\" title=\"Grid universe job submitted via soap fail\">#2568</a></span> When a grid universe job is submitted via soap, it's spool directory isn't chowned to the job owner. The gridmanager and its children access job files as the job owner, so any attempts to write in the spool directory fail.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Dec-16 14:09", "status": "resolved", "created": "2011-Oct-21 13:33", "fixed_version": "2011-Oct-21 13:33", "broken_version": "v070600", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "a22618", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}