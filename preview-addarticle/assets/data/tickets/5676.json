{"id": 5676, "title": "Ticket #5676: Condor week demo for job factory for 8.5 series", "description": "<blockquote>\nSchedd needs demo quality code to show the job factory for HTCondor Week 2016.\n\n<p>This code will be committed to the V8_5-job_factory branch.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-May-15 16:29:53 by johnkn:</em> <br/>\n\nwith <span class=\"chng\"><a href=\"/404.html\">[43882]</a></span> the job factory works for jobs that only need <code>ClusterId</code>, <code>ProcId</code>, <code>Cluster</code>, <code>Process</code>, <code>Row</code> and <code>Step</code> to instantate jobs correctly.\n\n<p>The following submit file works on TJ's machine, changes to paths will be needed to make it work on other machines.  submit using the following command:\n</p><div class=\"term\">\n<pre class=\"term\">condor_submit factory_sleep.sub -queue 6\n</pre></div>\n\n\n<p>The initial Queue command determines how many jobs will be keep instantiated in the schedd.\n\n</p><p></p><div class=\"snip\">\n<pre class=\"sniplabel\">factory_sleep.sub </pre>\n<pre class=\"snip\"># a sleep job for windows\nexecutable=c:\\tools\\sleepw.exe\ntransfer_executable=false\nSLEEP_SEC = 10 + $(ROW) * 2 + $(Step)\narguments = $INT(SLEEP_SEC)s /q\nlog=sleep.log\n#out=sleep.out\n#error=sleep.err\n#should_transfer_files=no\n#when_to_transfer_output=NEVER\n#Requirements = TARGET.FileSystemDomain == \"crane.cs.wisc.edu\"\n# +FileSystemDomain=\"crane.cs.wisc.edu\"\n\n# Factory attributes\nMY.JobFactoryNumProcs = 60\nMY.JobFactorStepSize = 6;\nMY.JobFactorySubmitFile = \"d:\\scratch\\condor\\alt\\test\\jobs\\factory\\factory_sleep.sub\"\n</pre></div>\n\n\n<p></p><hr/>\n<em>2016-May-16 22:35:26 by johnkn:</em> <br/>\n\ncommit <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/367bc628591aa4502602a0880444d4cea1db154e\">[48385]</a></span> adds $(SUBMIT_FILE) to the config hashtable. and also a hack that puts experimental job factory attributes into the job if max_materialise is set and &gt; 0</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-16 15:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/367bc628591aa4502602a0880444d4cea1db154e\">[48385]</a></span>: hacked up version of condor_submit for use with factory demo <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=5676\" onclick=\"get_ticket_and_populate_wrapper('5676'); return false;\" title=\"Condor week demo for job factory for 8.5 series\">#5676</a></span> this condor submit will create a factory submit when it sees the max_materialize statement in the submit file.  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-May-15 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a125ac5d5eafc50bc535de3db401852a3a20f7c3\">[48382]</a></span>: Initial commit of demo quality code for the schedd job factory. <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=5676\" onclick=\"get_ticket_and_populate_wrapper('5676'); return false;\" title=\"Condor week demo for job factory for 8.5 series\">#5676</a></span>  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "experimental", "last_change": "2016-Aug-23 15:11", "status": "new", "created": "2016-May-15 16:22", "fixed_version": "2016-May-15 16:22", "broken_version": "", "priority": "2", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}