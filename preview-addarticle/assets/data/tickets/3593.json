{"id": 3593, "title": "Ticket #3593: Make cluster name optional in Bosco submit files", "description": "<blockquote>\nFor Bosco installations with jobs going to a single cluster, we'd like to make the cluster name in the grid_resource submit attribute optional. We can do this without any changes to the HTCondor C/C++ source code. Making any more of the grid_resource line optional would take more work.\n\n<p>Here are the change that need to be made:\n</p><ul>\n<li>In condor_configure, when doing a Bosco installation, set BATCH_GAHP=$(REMOTE_GAHP) in the local config file.\n\n<p></p></li><li>In remote_gahp, if the cluster name argument is missing, pull it from the Bosco cluster configuration, either by call bosco_cluster -l or by reading the cluster file directly.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2013-May-01 17:28:35 by marco:</em> <br/>\n\nI did the changes in remote_ghap.\n\n<p>Jaime will add the line to the condor_config for BOSCO.\n\n</p><p>A missed part is how to tell HTCondor which queue (LRM) is used in the remote cluster. This is needed by the submission code. Jaime will check if there is a way to do this without the user adding it to the submit file.\n\n</p><p></p><hr/>\n<em>2013-May-01 17:45:08 by marco:</em> <br/>\n\nHave a different idea:\nlet the user specify vanilla jobs\nHave it add +WantDirectBosco = True\nHave Bosco to write job routing rules when adding clusters.\nUse job routing to rewrite the classad and submit the job to the cluster.\n\n<p>What do you think? I'll try elaborate more overnight.\n\n</p><p></p><hr/>\n<em>2013-May-02 10:56:55 by dweitzel:</em> <br/>\n\nI'm not sure I understand what the submit file will end up looking like.  Marco, can you give a example submit file, as you would like to see it.\n\n<p></p><hr/>\n<em>2013-May-02 12:16:25 by marco:</em> <br/>\n\nAfter talking with Jaime this morning we decided for a different solution that require no changes to remote_gahp.\nbosco_cluster will write instead a file with submit attributes that are added to the submit file.\nPatch done and sent to Jaime\n\n<p></p><hr/>\n<em>2013-May-02 13:19:16 by dweitzel:</em> <br/>\n\nWhat does the submit file look like?\n\n<p></p><hr/>\n<em>2013-May-07 16:23:50 by jfrey:</em> <br/>\n\nSee <a class=\"external\" href=\"https://jira.opensciencegrid.org/browse/CAMPUS-95\">https://jira.opensciencegrid.org/browse/CAMPUS-95</a> for more details</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/722/0001-list-of-changes.patch\">0001-list-of-changes.patch</a>\n10883 bytes added by marco on 2013-May-02 17:16:51 UTC.\n<br/>\nPatch with organic combined changes for OSG Jira [CAMPUS-94], [CAMPUS-95], [CAMPUS-96]<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-07 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7d2cff0f23405f709749e157a4834a443f7992e4\">[35635]</a></span>: Make cluster name optional in BOSCO tools and submit files. <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3593\" onclick=\"get_ticket_and_populate_wrapper('3593'); return false;\" title=\"Make cluster name optional in Bosco submit files\">#3593</a></span> Where there is just one cluster registered with BOSCO, the cluster name no longer needs to be given on the command line of bosco_cluster commands, and grid_resource doesn't need to be given in the submit file. The submit file part is achieved\u00a0[...]\n (By Marco Mambelli )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-May-07 16:23", "status": "new", "created": "2013-Apr-23 14:32", "fixed_version": "2013-Apr-23 14:32", "broken_version": "v070904", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dweitzel@cse.unl.edu", "due_date": ""}