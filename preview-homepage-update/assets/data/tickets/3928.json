{"id": 3928, "title": "Ticket #3928: Improve readability of ClassAd reals in Condor", "description": "<blockquote>\nIn 8.1.1, we made Condor print floating-point values in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> the same way they're printed in native new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> syntax, using printf format string <code>%1.15E</code> (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3363\" onclick=\"get_ticket_and_populate_wrapper('3363'); return false;\" title=\"Preserve 64-bit ClassAd values between processes\">#3363</a></span>). This preserves the full precision of doubles when unparsed into text representations. But this format is much harder for humans to read. A compromise is to use format <code>%.16G</code>. It keeps the same precision, while using scientific notation only for especially large or small values.\n\n<p>This representation is only used if old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> syntax is requested in <code>ClassAdUnParser</code>. Native new <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> syntax will still use <code>%1.15E</code>, as described in the specification.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-17 16:53:00 by johnkn:</em> <br/>\n\nCODE_REVIEW: change looks good to me. -tj</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5682\" onclick=\"get_ticket_and_populate_wrapper('5682'); return false;\" title=\"Some real values printed incorrectly in ClassAds\">#5682</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSome real values printed incorrectly in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span></td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/803/classad_reals.patch\">classad_reals.patch</a>\n806 bytes added by jfrey on 2013-Sep-17 21:15:01 UTC.\n<br/>\nPatch to print reals using %G for old <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> syntax.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-26 10:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8cb5941127f32ffabc1593c532f4542901908ce3\">[37723]</a></span>: minor edit of 8.1.2 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3928\" onclick=\"get_ticket_and_populate_wrapper('3928'); return false;\" title=\"Improve readability of ClassAd reals in Condor\">#3928</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-19 16:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b9b9609e249dc3640998dbe541269ed7aa33ba9e\">[37689]</a></span>: Print reals in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> in a more human-readable format. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3928\" onclick=\"get_ticket_and_populate_wrapper('3928'); return false;\" title=\"Improve readability of ClassAd reals in Condor\">#3928</a></span> <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>' standard way of printing floating point values, always using scientific notation, makes it harder for humans to read. We can make values easier to read with maintaining full precision by using the %G printf format instead of %E.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Sep-27 10:04", "status": "resolved", "created": "2013-Sep-17 16:11", "fixed_version": "2013-Sep-17 16:11", "broken_version": "v080101", "priority": "3", "subsystem": "ClassAd", "assigned_to": "jfrey", "derived_from": "#3363", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}