{"id": 772, "title": "Ticket #772: proxy refresh notification ineffcient in gridmanager", "description": "<blockquote>\nWhen the gridmanager notices that an x509 proxy file has been refreshed, it triggers the state evaluation timer for all Job objects that are using that file. In stress testing with BNL using 65,000 jobs, triggering the timers takes up to 8 minutes. Calling of the daemon-core handlers takes even longer. And in the vast majority of cases, the job objects decide they don't need to do anything.\n\n<p>The proxy management code should be changed to use a callback function rather than a daemon-core timer to notify jobs of proxy changes. The callback function can quickly examine a couple variables and determine if the job's full state evaluation function needs to be invoked.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Oct-08 13:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/79b6499b961bfe640ad5907d0ecbd0cb20ed7c29\">[15954]</a></span>: Switch <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ProxyManager\" title=\"Proxy Manager\">ProxyManager</a></span> from timers to callback functions. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=772\" onclick=\"get_ticket_and_populate_wrapper('772'); return false;\" title=\"proxy refresh notification ineffcient in gridmanager\">#772</a></span> This includes an optimization in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GlobusJob\" title=\"Globus Job\">GlobusJob</a></span> and GT4Job to not reset the doEvaluateState timer if the refreshed proxy is of no interest to the job currently.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:41", "status": "resolved", "created": "2009-Sep-23 14:40", "fixed_version": "2009-Sep-23 14:40", "broken_version": "v070400", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#760", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "", "due_date": ""}