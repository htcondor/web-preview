<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-add-twitter/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-add-twitter/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-add-twitter/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-add-twitter/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-add-twitter/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-add-twitter/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-add-twitter/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Lark Sample Jobs</title>

    <script src="/web-preview/preview-add-twitter/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-add-twitter/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-add-twitter/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-add-twitter/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-add-twitter/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-add-twitter/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-add-twitter/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-add-twitter/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-add-twitter/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-add-twitter/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-add-twitter/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Lark Sample Jobs</h1>
<div id="content">
 <span class="section">
  <h2>
   Running Sample Lark Jobs
  </h2>
 </span>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Installing Lark
 </h3>
 <p>
  Download and install the latest Lark RPM from the Nebraska Koji.  The current build (as of the time of writing) is here:
 </p>
 <p>
  <a class="external" href="http://koji.hep.caltech.edu/koji/buildinfo?buildID=935">
   http://koji.hep.caltech.edu/koji/buildinfo?buildID=935
  </a>
 </p>
 <p>
  We'll be doing periodic code releases.  Otherwise, you can checkout and build the source code.  If the Lark branch and your installed version are close enough (in terms of code changes), you can get away with a normal PROPER build plus the following configurations:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>STARTER.PLUGINS = /home/cse496/bbockelm/projects/condor-build/src/condor_contrib/lark/lark-plugin.so
STARTER = /home/cse496/bbockelm/projects/condor-build/src/condor_starter.V6.1/condor_starter
SHADOW = /home/cse496/bbockelm/projects/condor-build/src/condor_shadow.V6.1/condor_shadow
</pre>
 </div>
 <p>
  You'll also need to use the Lark version of libcondor_utils:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>ln -sf ~/projects/condor-build/src/condor_utils/libcondor_utils_7_9_5.so /usr/lib64/libcondor_utils_7_9_5.so
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Configuring Lark in NAT mode
 </h3>
 <p>
  The minimum to configure lark, besides setting
  <code>
   STARTER.PLUGINS
  </code>
  , is to enable the network accounting:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>LARK_NETWORK_ACCOUNTING = true
</pre>
 </div>
 <p>
  This will result in a NAT configuration.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Running jobs in NAT mode
 </h3>
 <p>
  With a NAT configuration, a simple job is to look at the network configuration:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>[bbockelm@hcc-briantest lark]$ condor_run ifconfig
i_slot1   Link encap:Ethernet  HWaddr 0E:B5:9F:A2:E5:E4
          inet addr:192.168.181.2  Bcast:0.0.0.0  Mask:255.255.255.0
          inet6 addr: fe80::cb5:9fff:fea2:e5e4/64 Scope:Link
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:1 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:104 (104.0 b)  TX bytes:104 (104.0 b)
</pre>
 </div>
 <p>
  If you can execute
  <code>
   ifconfig
  </code>
  at the same time the job is running, the output will look like this:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>[bbockelm@hcc-briantest lark]$ ifconfig
e_slot1   Link encap:Ethernet  HWaddr 42:62:8D:A1:CC:E2
          inet addr:192.168.181.1  Bcast:0.0.0.0  Mask:255.255.255.255
          inet6 addr: fe80::4062:8dff:fea1:cce2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:26 errors:0 dropped:0 overruns:0 frame:0
          TX packets:26 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2636 (2.5 KiB)  TX bytes:2896 (2.8 KiB)
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Configuring Lark in Bridge Mode
 </h3>
 <p>
  You need additional attributes in the machine ad to get Lark to change to bridge mode:
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>STARTD_ATTRS = LarkNetworkType, LarkAddressType, LarkBridgeDevice
LarkNetworkType = "bridge"
LarkBridgeDevice = "eth0"
LarkAddressType = href="/web-preview/preview-add-twitter/wiki-archive/pages/dhcp" </pre>
 </div>
 <p>
  In particular, you will need to adjust
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-add-twitter/wiki-archive/pages/LarkBridgeDevice" title="Lark Bridge Device">
    LarkBridgeDevice
   </a>
  </span>
  from "eth0" to match the desired ethernet device on your host.
 </p>
 <p>
  The network available on "eth0" must have a DHCP server willing to provide IP addresses to unregistered ethernet devices.
 </p>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
