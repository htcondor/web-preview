{"id": 2255, "title": "Ticket #2255: The DAGMan strict flag should apply to multiple vars definitions", "description": "<blockquote>\nI think Nathan was implementing the fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2090\" onclick=\"get_ticket_and_populate_wrapper('2090'); return false;\" title=\"Warn if VARS values are overwritten\">#2090</a></span> at the same time that I was implementing the strictness flag, so the strictness flag didn't get included with the multiple vars definition warning.</blockquote>", "remarks": "<blockquote>\n<em>2011-Jun-20 11:14:50 by nwp:</em> <br/>\n\nWhat is an appropriate DAG_STRICT warning here?\n\n<p></p><hr/>\n<em>2011-Jun-20 11:24:43 by nwp:</em> <br/>\n\nWhy does the following one-liner not fix this?\n\n<p></p><div class=\"code\">\n<pre class=\"code\">diff --git a/src/condor_dagman/parse.cpp b/src/condor_dagman/parse.cpp\nindex 0f593ad..b83c920 100644\n--- a/src/condor_dagman/parse.cpp\n+++ b/src/condor_dagman/parse.cpp\n@@ -1229,6 +1229,7 @@ static bool parse_vars(Dag *dag, const char *filename, int lineNumber) {\n                                        \"(Discovered at file \\\"%s\\\", line %d)\\n\",\n                                        varName.Value(),job-&gt;GetJobName(),filename,\n                                        lineNumber);\n+                               check_warning_strictness( DAG_STRICT_2 );\n                        }\n                }\n                debug_printf(DEBUG_DEBUG_1, \"Argument added, Name=\\\"%s\\\"\\tValue=\\\"%s\\\"\\n\", varName.Value(), varValue.Value());\n</pre></div>\n\n\n<p></p><hr/>\n<em>2011-Jun-20 12:06:52 by wenger:</em> <br/>\n\nHmm, that looks okay to me.  Are you saying you tried it and DAGMan doesn't exit when it should?\n\n<p></p><hr/>\n<em>2011-Jun-20 12:32:31 by nwp:</em> <br/>\n\nNah. Mostly I was thinking that this looked like a trivial fix and wondering whether you were thinking of something more complicated.\n\n<p></p><hr/>\n<em>2011-Jun-20 12:42:56 by nwp:</em> <br/>\n\nI tested it in my personal condor, and it works as expected.  So I will push this patch and resolve the ticket.\n\n<p></p><hr/>\n<em>2011-Jun-21 13:41:21 by nwp:</em> <br/>\n\nV7.7.0 is not really broken here, as <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2090\" onclick=\"get_ticket_and_populate_wrapper('2090'); return false;\" title=\"Warn if VARS values are overwritten\">#2090</a></span> did not make it into V7.7.0</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-20 12:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b73fb441e2441b3ea68e08f26c7da110a1ba2bad\">[22232]</a></span>: Strict flag applies to multiple VAR definitions ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2255\" onclick=\"get_ticket_and_populate_wrapper('2255'); return false;\" title=\"The DAGMan strict flag should apply to multiple vars definitions\">#2255</a></span> ===VersionHistory=== When <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2090\" onclick=\"get_ticket_and_populate_wrapper('2090'); return false;\" title=\"Warn if VARS values are overwritten\">#2090</a></span> was written, there was no strict flag. Now the strict flag is used to terminate DAGman if a variable is defined multiple times.  (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Jun-21 13:41", "status": "resolved", "created": "2011-Jun-20 10:56", "fixed_version": "2011-Jun-20 10:56", "broken_version": "v070700", "priority": "3", "subsystem": "Dag", "assigned_to": "nwp", "derived_from": "#2090", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu", "due_date": ""}