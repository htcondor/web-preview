<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>
HTCONDOR-2020-0004
</title>
<link type="text/css" rel="stylesheet" href="/assets/css/vulnerabilities.css">
</head>
<body>

    <span class='leftlogo'><a href="https://research.cs.wisc.edu/htcondor/"><img width="150" alt="U of Wisconsin logo" src="uw_logo_h_4c.gif" class="noborder" height="54"></a></span>

<h1>
    HTCONDOR-2020-0004
</h1>
<hr>
<table width='100%' summary='whole page'>
<tr>
    <td width='25%'><p class='h'>Summary:</p></td>
    <td class='sv'><p class='v'>&nbsp;</p></td>
</tr>
<tr>
    <td colspan='2' class='sv'><p>
        On Windows, the condor_shadow will send a user's password to anyone who can present credentials that authenticate them as the condor service.
<p>	As a result of this, if you have a mixed pool consisting of Windows submit machines and Linux execute hosts, the Linux condor_starter will write the user's Windows password into a file on the execute machine (which requires root access to read).
        <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-18823">CVE-2019-18823</a>
    </p></td>
</tr>
<tr><td colspan='2'>
<br><table class='sumtable' width='100%' summary='short values'>
<tr>
<th width='20%'>Component</th>
<th width='20%'>Vulnerable Versions</th>
<th width='20%'>Platform</th>
<th width='20%'>Availability</th>
<th width='20%'>Fix Available</th>
</tr>
<tr>
<td class='sv'>condor_shadow</td>
<td class='sv'>All before 8.8.8 (stable) and 8.9.6 (devel)</td>
<td class='sv'>Windows</td>
<td class='sv'>not known to be publicly exploited</td>
<td class='sv'>8.8.8, 8.9.6</td>
</tr>
<tr>
<th width='20%'>Status</th>
<th width='20%'>Access Required</th>
<th width='20%'>Host Type Required</th>
<th width='20%'>Effort Required</th>
<th width='20%'>Impact/Consequences</th>
</tr>
<tr>
<td class='sv'>Verified</td>
<td class='sv'>can authenticate to the condor_shadow as the condor service</td>
<td class='sv'>any host</td>
<td class='sv'>high</td>
<td class='sv'>high</td>
</tr>
<tr>
<th width='20%'>Fixed Date</th>
<th width='20%'>Credit</th>
</tr>
<tr>
<td class='sv'>2020-03-01</td>
<td class='sv'>TJ Knoeller</td>
</tr>
</table>
</td></tr>
<tr>
    <td width='25%'><p class='h'>Access Required:</p></td>
	<td class='sv'><p class='v'>
	</p></td>
</tr>
<tr>
    <td colspan='2' class='sv'><p>
        If an attacker were able to gain access to the credentials used to authenticate the condor daemons, and has network access to a submit machine, they could use those credentials to query the condor_shadow running a job on a Windows machine to obtain a user's password (if the user has stored their password using condor_store_cred).
    </p></td>
</tr>
<tr>
    <td width='25%'><p class='h'>Effort Required:</p></td>
    <td class='sv'><p class='v'>high</p></td>
</tr>
<tr>
    <td colspan='2' class='sv'><p>
        A thorough understanding of the HTCondor code and the ability to write custom tools is required to exploit this vulnerability, plus the need to have access to the condor daemon's credentials.
    </p></td>
</tr>
<tr>
    <td width='25%'><p class='h'>Impact/Consequences:</p></td>
    <td class='sv'><p class='v'>high</p></td>
</tr>
<tr>
    <td colspan='2' class='sv'><p>
	Users' passwords can be obtained by someone with access to the condor credentials.
<p>	This also means that in a mixed Windows/Linux pool, the Linux condor_starter (which has condor credentials) can fetch the user's password from a Windows submit machine and then writes the unencrypted password to a file.  However, this file is only readable by root and is deleted when the job completes.
</p></td>
</tr>
<tr>
    <td width='25%'><p class='h'>Workaround:</p></td>
</tr>
<tr>
    <td colspan='2' class='sv'><p>
        None
    </p></td>
</tr>

<tr>
    <td width='25%'><p class='h'>Full Details:</p></td>
    <td class='sv'>
	Embargoed until future notice.
    </td>
</tr>

</table>

</body>
</html>

