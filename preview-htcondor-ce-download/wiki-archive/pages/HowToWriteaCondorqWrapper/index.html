<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-htcondor-ce-download/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>How To Writea Condorq Wrapper</title>

    <script src="/web-preview/preview-htcondor-ce-download/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-htcondor-ce-download/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-htcondor-ce-download/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-htcondor-ce-download/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-htcondor-ce-download/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-htcondor-ce-download/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-htcondor-ce-download/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>How To Writea Condorq Wrapper</h1>
<div id="content">
 You may want to write a condor_q wrapper to display information specific to your installation.  With condor_q's -format option, this is usually straightforward.  Each call to -format allows you to write one piece of information.  That information can be simple attributes from the job's
 <span class="wiki">
  <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAd" title="Class Ad">
   ClassAd
  </a>
 </span>
 , or it can be full
 <span class="wiki">
  <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAd" title="Class Ad">
   ClassAd
  </a>
 </span>
 expressions.
 <p>
  Note that all of this applies to condor_status as well.
 </p>
 <p>
  Here is a a command that almost replicates the output of "condor_q".  It does not print the "-- Submitter:" line at the start, nor does it print the summary at the bottom.  Furthermore, condor_q truncates the Cmd name to just the executable itself, excluding the directory portion of the path.  If
  <span class="ticket">
   <a class="new" href="../../tickets/?ticket=1368" title="New ClassAd function: regex_replace">
    #1368
   </a>
  </span>
  is implemented, extracting just the executable will be relatively straightforward.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_q \
	-format '%4d.' ClusterId \
	-format '%-3d ' ProcId \
	-format '%-14s ' Owner \
	-format '%-11s ' 'formatTime(QDate,"%m/%d %H:%M")' \
	-format '%3d+' 'int(RemoteUserCpu/(60*60*24))' \
	-format '%02d:' 'int((RemoteUserCpu-(int(RemoteUserCpu/(60*60*24))*60*60*24))/(60*60))' \
	-format '%02d:' 'int((RemoteUserCpu-(int(RemoteUserCpu/(60*60))*60*60))/(60))' \
	-format '%02d ' 'int(RemoteUserCpu-(int(RemoteUserCpu/60)*60))' \
	-format '%-2s ' 'ifThenElse(JobStatus==0,"U",ifThenElse(JobStatus==1,"I",ifThenElse(TransferringInput=?=True,"&lt;",ifThenElse(TransferringOutput=?=True,"&gt;",ifThenElse(JobStatus==2,"R",ifThenElse(JobStatus==3,"X",ifThenElse(JobStatus==4,"C",ifThenElse(JobStatus==5,"H",ifThenElse(JobStatus==6,"E",string(JobStatus))))))))))' \
	-format '%-3d ' JobPrio \
	-format '%-4.1f ' ImageSize/1024.0 \
	-format '%-18.18s' 'strcat(Cmd," ",Arguments)' \
	-format '\n' Owner
</pre>
 </div>
 <p>
  (The RUN_TIME formatting is complicated because 7.4.x and earlier
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAds" title="Class Ads">
    ClassAds
   </a>
  </span>
  lack the modulus (%) operator.  7.5.2 and later will likely include this operator along with "New
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAds" title="Class Ads">
    ClassAds
   </a>
  </span>
  ", allowing for simpler expressions.  The ST formatting might be simplified if
  <span class="ticket">
   <a class="new" href="../../tickets/?ticket=1369" title="New ClassAd function: switch">
    #1369
   </a>
  </span>
  or something similar is implemented, but that is uncertain.)
 </p>
 <p>
  Now, for example, lets say that a healthy chunk of your jobs are all
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/MatLab" title="Mat Lab">
    MatLab
   </a>
  </span>
  jobs, and all have a Cmd of /path/to/matlab.  You'd like to see the script file being passed in for these jobs instead of the path to matlab.  That's relatively simple, just check the Cmd's path and change what you print. The -format line in question would be:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">	-format '%-18.18s' 'ifThenElse(Cmd == "/path/to/matlab", Args, strcat(Cmd," ",Args))'
</pre>
 </div>
 <p>
  yielding a full command of:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_q \
	-format '%4d.' ClusterId \
	-format '%-3d ' ProcId \
	-format '%-14s ' Owner \
	-format '%-11s ' 'formatTime(QDate,"%m/%d %H:%M")' \
	-format '%3d+' 'int(RemoteUserCpu/(60*60*24))' \
	-format '%02d:' 'int((RemoteUserCpu-(int(RemoteUserCpu/(60*60*24))*60*60*24))/(60*60))' \
	-format '%02d:' 'int((RemoteUserCpu-(int(RemoteUserCpu/(60*60))*60*60))/(60))' \
	-format '%02d ' 'int(RemoteUserCpu-(int(RemoteUserCpu/60)*60))' \
	-format '%-2s ' 'ifThenElse(JobStatus==0,"U",ifThenElse(JobStatus==1,"I",ifThenElse(TransferringInput=?=True,"&lt;",ifThenElse(TransferringOutput=?=True,"&gt;",ifThenElse(JobStatus==2,"R",ifThenElse(JobStatus==3,"X",ifThenElse(JobStatus==4,"C",ifThenElse(JobStatus==5,"H",ifThenElse(JobStatus==6,"E",string(JobStatus))))))))))' \
	-format '%-3d ' JobPrio \
	-format '%-4.1f ' ImageSize/1024.0 \
	-format '%-18.18s' 'ifThenElse(Cmd == "/path/to/matlab", Args, strcat(Cmd," ",Args))'
	-format '\n' Owner
</pre>
 </div>
 <p>
  Please be aware the above examples assume using a typical Unix/Linux command shell. If you are entering the above examples on Windows at a Windows Command Prompt (aka
  <code>
   cmd.exe
  </code>
  ), they will not work because the quoting rules for Windows cmd.exe are different than typically found on Unix/Linux.  In general, to make the above examples work on Windows, you will want to replace instances of single quotations with a double quotation, and then escape the pre-existing double quotations by preceding them with a backslash. For example, the following command that works at a Unix shell prompt
 </p>
 <div class="code">
  <pre class="code">condor_q -format '%s\n' 'formatTime(QDate,"%m/%d %H:%M")' \
</pre>
 </div>
 will need to changed as follows to work at Windows cmd.exe prompt:
 <div class="code">
  <pre class="code">condor_q -format "%s\n" "formatTime(QDate,\"%m/%d %H:%M\")"
</pre>
 </div>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
