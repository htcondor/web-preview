<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-htcondor-ce-download/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-htcondor-ce-download/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Vary Arguments By Proc Id</title>

    <script src="/web-preview/preview-htcondor-ce-download/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-htcondor-ce-download/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-htcondor-ce-download/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-htcondor-ce-download/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-htcondor-ce-download/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-htcondor-ce-download/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-htcondor-ce-download/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-htcondor-ce-download/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Vary Arguments By Proc Id</h1>
<div id="content">
 You might want to submit a job repeatedly, varying the arguments for each run.  The core technique is to queue multiple jobs in a single submit file, using submit macros and
 <span class="wiki">
  <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAd" title="Class Ad">
   ClassAd
  </a>
 </span>
 expressions to calculate the argument.
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Monotonically increasing count
 </h2>
 <p>
  You can use $(Process) in your submit file to get a monotonically increasing count.  This is also useful if you need an arbitrary unique identifier.  For example, to submit 10 jobs, where the first job will get the argument "0", the second job "1", and so on, you could use:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments  = $(Process)
queue 10
</pre>
 </div>
 <p>
  As of HTCondor 8.3.5 you can do simple math in the submit file using $INT() or $REAL().  The technique is to use a temporary variable to declare the mathematical expressions, and then refer to the temporary variable using the $INT() or $REAL() macro expansion to evaluate and print the result.  The $INT() and $REAL() expansions take an optional argument to control the formatting of the result.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
tmp1 = $(Process) + 1
tmp2 = $(Process) * 2.0
arguments = $INT(tmp1) $REAL(tmp2,%.3f)
queue 10
</pre>
 </div>
 <p>
  Prior to 8.3.5 you can do math by using the deferred expansion of
$$([]), in which case you'll use $(ProcId) instead of $(Process).  For example, this passes two arguments, the first starts a 1 and increases by 1 for each job, the second starts at 0 and increases by 2 for each job:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments  = $$([ProcId+1]) $$([ProcId*2])
queue 10
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Selection from a list
 </h2>
 In versions of HTCondor starting with 8.3.5, you can use the Process variable to select an item from a list using the $CHOICE() macro.
 <p>
  In this example, there will be 6 jobs submitted, the first will have arguments=Alan, the second will have arguments=Betty, etc.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments = $CHOICE(Process, Alan, Betty, Claire, Dan, Eva, Frank)
queue 6
</pre>
 </div>
 <p>
  The list can also be a submit variable like this. This example produces the same resulting jobs as the above example.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments = $CHOICE(Process, Names)
Names = Alan, Betty, Claire, John, Harry, Sally
queue 6
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Random selection
 </h2>
 <p>
  If you want each job to have a randomly assigned argument, you can use $RANDOM_CHOICE.  The random selection is not guaranteed to be cryptographically strong, nor necessarily suitable for scientific use.
 </p>
 <p>
  In this example, HTCondor assigns each job two random choices; an integer from 1 to 3, and a random name:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments  = $RANDOM_CHOICE(1,2,3) $RANDOM_CHOICE(Alan, Betty, Claire)
queue 10
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Permute a list (pre 8.3.5 method)
 </h2>
 <p>
  Prior to 8.3.5 If you want to permute some other element, you can use $$([ ]) to evalute arbitrary
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-htcondor-ce-download/wiki-archive/pages/ClassAd" title="Class Ad">
    ClassAd
   </a>
  </span>
  expressions.  This is particularly useful combined with lists.  If you wanted to permute the 3 names, you could do this:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments  = $$([names[ProcId])
+names     = {"Alan", "Betty", "Claire"}
queue 3
</pre>
 </div>
 <p>
  Note that if you try to index into a non-existant list element, HTCondor will be unable to determine the final argument string and the job will be put on hold.  If you want to loop over the list, you can use modulus arthimatic and the list of the list:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable = myprogram.exe
arguments  = $$([names[ProcId%size(names)]])
+names     = {"Alan", "Betty", "Claire"}
queue 50
</pre>
 </div>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
