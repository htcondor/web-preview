{"id": 5374, "title": "Ticket #5374: condor_history fails on a fresh installation", "description": "<blockquote>\n<div class=\"verbatim\">\n<pre># uname -a\nLinux host-172-8-0-58 2.6.32-504.el6.x86_64 #1 SMP Wed Oct 15 04:27:16 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n\n# condor_version\n$CondorVersion: 8.2.10 Oct 27 2015 $\n$CondorPlatform: X86_64-CentOS_6.7 $\n\n\n# rpm -qa | grep condor\ncondor-classads-8.2.10-1.1.osg32.el6.x86_64\ncondor-procd-8.2.10-1.1.osg32.el6.x86_64\ncondor-python-8.2.10-1.1.osg32.el6.x86_64\ncondor-8.2.10-1.1.osg32.el6.x86_64\n\n\n# condor_history\n ID     OWNER          SUBMITTED   RUN_TIME     ST COMPLETED   CMD\nError opening history file /var/lib/condor/spool/history: No such file or directory\n\n# echo $?\n1\n\n\n\n# python\nPython 2.6.6 (r266:84292, Jan 22 2014, 09:42:36)\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-4)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import htcondor\n&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; t = int(datetime.datetime.now().strftime('%s')) -3600\n&gt;&gt;&gt; condor_constraint_expr = \"JobStartDate &gt; %s\" %t\n&gt;&gt;&gt; schedd = htcondor.Schedd()\n&gt;&gt;&gt; jobs = schedd.history(condor_constraint_expr, ['RemoteWallClockTime'], 0)\n&gt;&gt;&gt; for job in jobs: print job\n...\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nRuntimeError: Error opening history file\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Nov-10 16:37:04 by johnkn:</em> <br/>\n\nThis is not a bug, it has always worked that way.  marking as enhancement.\n\n<p></p><hr/>\n<em>2015-Nov-12 15:27:29 by tim:</em> <br/>\n\nGreg Thain reviewed this code.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-11 13:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db94ba87c2683accd9bc063dc552ef1044c6a86e\">[46251]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5374\" onclick=\"get_ticket_and_populate_wrapper('5374'); return false;\" title=\"condor_history fails on a fresh installation\">#5374</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-10 16:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/274d995918588eb94e28a50d50b574536049c6df\">[46244]</a></span>: change condor_history so it doesn't report an error if there is no history file. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5374\" onclick=\"get_ticket_and_populate_wrapper('5374'); return false;\" title=\"condor_history fails on a fresh installation\">#5374</a></span> this changes the contract of the findHistoryFiles function so that it can return an empty list. ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Nov-18 12:01", "status": "resolved", "created": "2015-Nov-05 14:11", "fixed_version": "2015-Nov-05 14:11", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "jcaballero", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "jcaballero@bnl.gov", "due_date": ""}