{"id": 4145, "title": "Ticket #4145: concurrency limit off-by-one when use with partitionable slots", "description": "<blockquote>\nIf using a processing node with dynamic provisioning enabled, the number\nof jobs that will be permitted to run is one less than the specified limit.\nWhen using the condor_status command to query the <code>ConcurrencyLimits</code> attribute of the partitionable and dynamic slots on a machine with currently running jobs, it is apparent that both kind of slots have this attribute set, despite\nthe fact that the partitionable slot by definition is not running.\n\n<p>This problem does not occur in 8.0.0 or in the 7.8.x series. In those cases, the partitionable slot does not have the <code>ConcurrencyLimits</code> attribute set when running jobs.</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Jan-13 16:26:19 by eje:</em> <br/>\n\npickaxe suggests possible side-effect of fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3815\" onclick=\"get_ticket_and_populate_wrapper('3815'); return false;\" title=\"Projection introduced in #3366 breaks concurrency limits\">#3815</a></span>, have to drill down on it\n\n<p></p><hr/>\n<em>2014-Jan-22 11:51:02 by adesmet:</em> <br/>\n\nSee also: Ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4121\" onclick=\"get_ticket_and_populate_wrapper('4121'); return false;\" title=\"Concurrency limits and partitionable slots lead to overclaiming limits\">#4121</a></span>: Concurrency limits and partitionable slots lead to overclaiming limits\n\n<p></p><hr/>\n<em>2014-Jan-27 13:42:23 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>This change looks fine.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-16 11:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/289a965b6ecc438362de9b16610f4d3017e06da3\">[39174]</a></span>: edit 8.0.6 version history item and correct the git ticket number <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4145\" onclick=\"get_ticket_and_populate_wrapper('4145'); return false;\" title=\"concurrency limit off-by-one when use with partitionable slots\">#4145</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-16 10:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1c0132643d4d711ace46401a68f357f823cbfd45\">[39169]</a></span>: Turn on concurrency limit tests <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4145\" onclick=\"get_ticket_and_populate_wrapper('4145'); return false;\" title=\"concurrency limit off-by-one when use with partitionable slots\">#4145</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-16 10:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/11d7a6b1bb680f986cbb2f1be2540e66bbb8affe\">[39167]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4145\" onclick=\"get_ticket_and_populate_wrapper('4145'); return false;\" title=\"concurrency limit off-by-one when use with partitionable slots\">#4145</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-16 10:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ac36ab35bb7dfe50db46a790228d84462bd616ea\">[39166]</a></span>: Don't propogate <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ConcurrencyLimits\" title=\"Concurrency Limits\">ConcurrencyLimits</a></span> to partitionable slot <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4145\" onclick=\"get_ticket_and_populate_wrapper('4145'); return false;\" title=\"concurrency limit off-by-one when use with partitionable slots\">#4145</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Jan-27 13:43", "status": "resolved", "created": "2014-Jan-02 10:10", "fixed_version": "2014-Jan-02 10:10", "broken_version": "v080001", "priority": "3", "subsystem": "DaemonsCM", "assigned_to": "gthain", "derived_from": "", "creator": "johnkn", "rust": "a25835", "customer_group": "other", "visibility": "public", "notify": "eje@cs.wisc.edu", "due_date": ""}