{"id": 7188, "title": "Ticket #7188: Bad warning about line endings", "description": "<blockquote>\n<div class=\"snip\">\n<pre class=\"sniplabel\">Episode 1</pre>\n<pre class=\"snip\">When your job\u2019s executable has Windows line endings, (rather than\nholding with \u201cexec format error\u201d as in the past,) HTCondor now tells you to\nsubmit some other way ... which doesn\u2019t fix the line endings and results in\nan even more confusing error message.\n</pre></div>\n\n\n<p>To be specific, the message from condor_submit.V6/submit.cpp line 1431 is \"Executable file %s is a script with CRLF (DOS/Win) line endings\", followed by \"Run with -allow-crlf-script if this is really what you want\", if that flag wasn't set.  The former is fine, but the latter is almost never what anybody actually wants.\n\n</p><p>We should therefore not mention it.  Instead, based on the CHTC's <a class=\"external\" href=\"http://chtc.cs.wisc.edu/dos-unix.shtml\">page</a>, change the message\nto read \"... line endings.  This generally doesn't work, and you\nshould probably run dos2unix &lt;executable&gt; -- or a similar tool -- before\nyou resubmit.\"\n\n</p><p>Although <code>dos2unix</code> is not installed everywhere, just using <code>tr</code> involves a complicated construction to do an in-place replacement.  (We could certainly print the whole construction out, but I'm not sure about how user-friendly that is.)  The in-place replacement for <code>perl</code> is pretty simple, but Perl is becoming less common.  For now, we'll just go with dos2unix.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Oct-08 12:56:18 by tlmiller:</em> <br/>\n\nOn further thought, I don't think this needs documentation.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-20 19:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/96186d3a6b98cab3579e1fc7c1145001e20f0edc\">[57572]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7188\" onclick=\"get_ticket_and_populate_wrapper('7188'); return false;\" title=\"Bad warning about line endings\">#7188</a></span>) On the theory that it's almost never the right thing to do, don't even tell the user about -allow-crlf-script. (It's in the man page if they need it.) Instead, suggest running 'dos2unix'.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Oct-08 14:44", "status": "resolved", "created": "2019-Aug-06 12:02", "fixed_version": "2019-Aug-06 12:02", "broken_version": "", "priority": "2", "subsystem": "Tools", "assigned_to": "tlmiller", "derived_from": "#7158", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}