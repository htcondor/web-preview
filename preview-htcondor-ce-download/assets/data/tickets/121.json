{"id": 121, "title": "Ticket #121: startd should advertise number of child processes a job has", "description": "<blockquote>\nThe startd tracks the child processes anyway, so including the total number of processes a given job has in the machine ad would be helpful. The information could give admins a useful view of how users use the pool. It could also be used in policy expressions, say to kill rogue jobs that occasionally go haywire and accidentally forkbomb the machine.\n\n<p>(Imported from <span class=\"drupalnode\"><a href=\"http://drupal-old.batlab.cs.wisc.edu/node/1707\">1707 (backup)</a> <a href=\"http://nmi.cs.wisc.edu/node/1707\">1707 (public)</a></span>)</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Jul-01 11:07:47 by psilord:</em> <br/>\n\nThis should go into master.\n\n<p></p><hr/>\n<em>2010-Jul-09 11:38:40 by slauson:</em> <br/>\n\nI found ATTR_NUM_PIDS in condor_starter.V6.1/os_proc.cpp which seems to track the number of child processes a job has. However, it is not being properly propagated in the startd.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1736\" onclick=\"get_ticket_and_populate_wrapper('1736'); return false;\" title=\"startd segfault receiving job classad update\">#1736</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nstartd segfault receiving job classad update</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Oct-18 14:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0dbdaa1bc6319a6cde6ad0c358e0673af43e915b\">[19183]</a></span>: Fix crash on job lease expiration in the startd. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=121\" onclick=\"get_ticket_and_populate_wrapper('121'); return false;\" title=\"startd should advertise number of child processes a job has\">#121</a></span> The code propagating <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumPids\" title=\"Num Pids\">NumPids</a></span> from the starter needs to check whether c_claim is NULL. When the claim lease expires, c_claim is deleted. Then, a final job udpate from the starter may arrive after it kills the job.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-19 13:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b65994605f18f9af4cdc3f71bcc02f14bef3c1cc\">[25640]</a></span>: defn of job attribute <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumPids\" title=\"Num Pids\">NumPids</a></span> is in list of job attributes; gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=121\" onclick=\"get_ticket_and_populate_wrapper('121'); return false;\" title=\"startd should advertise number of child processes a job has\">#121</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-11 12:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9b7e6b4ac53ae1012f6594e3788973fb4b3cd7a6\">[25613]</a></span>: Added documentation for gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=121\" onclick=\"get_ticket_and_populate_wrapper('121'); return false;\" title=\"startd should advertise number of child processes a job has\">#121</a></span>.  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-11 12:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a0c926ee7f4152c6e0386c83657bb798ef0091cf\">[18771]</a></span>: Startd advertises the number of child processes a job has with ATTR_NUM_PIDS. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=121\" onclick=\"get_ticket_and_populate_wrapper('121'); return false;\" title=\"startd should advertise number of child processes a job has\">#121</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Aug-11 12:26", "status": "resolved", "created": "2009-Jan-26 11:43", "fixed_version": "2009-Jan-26 11:43", "broken_version": "v070500", "priority": "4", "subsystem": "", "assigned_to": "slauson", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "slauson@cs.wisc.edu psilord@cs.wisc.edu matt@cs.wisc.edu", "due_date": ""}