{"id": 6719, "title": "Ticket #6719: Submitting multiple clusters broken in condor_submit", "description": "<blockquote>\nFor arcane reasons, all jobs within a cluster must have the same executable. If the executable attribute changes in a submit description file, condor_submit will start a new cluster of job ads. Thus, one invocation of condor_submit can result in multiple clusters of new jobs.\n\n<p>Starting with v8.7.9, this doesn't work correctly. For each cluster of jobs after the first, no attributes are set in the cluster ad (they all go into <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ProcId\" title=\"Proc Id\">ProcId</a></span> 0's ad) and the <code>ClusterId</code> attribute isn't set at all. The submission usually succeeds, but the schedd ends up getting confused.\n\n</p><p>Also starting with v8.7.9, if there is a schedd job transform, the condor_submit may fail and end up reporting an error similar to\n\n</p><p></p><pre>   ERROR: Failed to commit job submission into the queue.\n   ERROR: Failed to apply a required job transform.</pre>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Jun-19 15:33:16 by tannenba:</em> <br/>\n\nPatch is in in v8.8.4+ and in v8.9.1+\n\n<p>It initially appeared in v8.9.1 and then was cherry-picked to v8.8.4.\n\n</p><p></p><hr/>\n<em>2019-Jul-03 10:19:00 by tim:</em> <br/>\n\nNeed to transplant version history</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7036\" onclick=\"get_ticket_and_populate_wrapper('7036'); return false;\" title=\"Cannot queue multiple times on a single transaction\">#7036</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCannot queue multiple times on a single transaction</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-08 10:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ed35cafc15a280b0dfa1bd60562dc3a8b5429d39\">[57343]</a></span>: Transplant version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7084\" onclick=\"get_ticket_and_populate_wrapper('7084'); return false;\" title=\"Add htcondor-ec2 deb to stable\">#7084</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6719\" onclick=\"get_ticket_and_populate_wrapper('6719'); return false;\" title=\"Submitting multiple clusters broken in condor_submit\">#6719</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-19 15:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eee56e791878c77a51f8f2484b478538e70650f7\">[57188]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6719\" onclick=\"get_ticket_and_populate_wrapper('6719'); return false;\" title=\"Submitting multiple clusters broken in condor_submit\">#6719</a></span>, submit that generates multiple clusters from a single submit does not send 2nd and subsequent clusters to the schedd correctly.  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Apr-08 16:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9a1375d3f84dd9fa8b6637cc1ad71445dddfe16f\">[56524]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6719\" onclick=\"get_ticket_and_populate_wrapper('6719'); return false;\" title=\"Submitting multiple clusters broken in condor_submit\">#6719</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jan-28 11:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2898d04bb521741e5a8a4b20f62cf896f928677d\">[56088]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6719\" onclick=\"get_ticket_and_populate_wrapper('6719'); return false;\" title=\"Submitting multiple clusters broken in condor_submit\">#6719</a></span>, submit that generates multiple clusters from a single submit does not send 2nd and subsequent clusters to the schedd correctly.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Jul-08 13:00", "status": "resolved", "created": "2018-Jul-26 13:45", "fixed_version": "2018-Jul-26 13:45", "broken_version": "v080709", "priority": "3", "subsystem": "Tools", "assigned_to": "tim", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "jfrey@cs.wisc.edu,johnkn@cs.wisc.edu", "due_date": ""}