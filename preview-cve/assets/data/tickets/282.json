{"id": 282, "title": "Ticket #282: Record unsuccessful match attempts to a machine in the machine ad", "description": "<blockquote>\nWe should record a count of unsuccessful match attempts to an offline machine in the machine ad itself, the time it first occurred and the last time it occurred.  Presumably this information could be used in future (negotiator) policies to make intelligent (or \"better\" informed) decisions to bring machines back online.  The count of unsuccessful matches would be reset once a match on the machine succeeds (timers can be cleared, or left alone or ...).\n\n<p>This is just one way to give the negotiator a hint as to when to wake a machine.</p></blockquote>", "remarks": "<blockquote>\nI made the negotiator update <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastMatchTime\" title=\"Last Match Time\">LastMatchTime</a></span> in offline startd ads.  This is pushed to the collector, which merges it in.\n\n<p>Still to be done: make NEGOTIATOR_POST_JOB_RANK put offline ads at the end of the sort list.\n\n</p><p>Note that offline ads currently have their requirements set to False.  I didn't change that behavior in this patch, but obviously that will need to be changed at some point.\n\n</p><p></p><hr/>\n<em>2009-Jul-31 22:10:17 by burnett:</em> <br/>\n\n&gt; Still to be done: make NEGOTIATOR_POST_JOB_RANK put offline ads at the end of the sort list.\n\n<p>Is there a reason that offline machines should be less likely to be matched?  I know there are reasons to worry about latency, but I don't think hard-coding the fact that offline machine come last is necessarily the best approach (unless this was all going in the configuration file).\n\n</p><p>That said, if it does come down to some hard-coded sorting logic, I think the number of times the machine has been matched for jobs (plus some temporal information) should play a part in its ranking.\n\n</p><p></p><hr/>\n<em>2009-Aug-18 12:31:27 by danb:</em> <br/>\n\nNEGOTIATOR_POST_JOB_RANK has been updated in condor_config.generic.  Also, the start expression is no longer forced to False when machines go offline.  I am resolving this ticket.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-18 10:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1db84759baebf7dd28ca0214cf0a2d77a0a0ee35\">[15385]</a></span>: Made the example NEGOTIATOR_POST_JOB_RANK prefer online machines. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=282\" onclick=\"get_ticket_and_populate_wrapper('282'); return false;\" title=\"Record unsuccessful match attempts to a machine in the machine ad\">#282</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-16 18:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6bb46bec4ef8abdb491a2f23d39facb9046a00a8\">[15110]</a></span>: Update <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastMatchTime\" title=\"Last Match Time\">LastMatchTime</a></span> for offline startd ads. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=282\" onclick=\"get_ticket_and_populate_wrapper('282'); return false;\" title=\"Record unsuccessful match attempts to a machine in the machine ad\">#282</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-31 13:40", "status": "resolved", "created": "2009-Feb-26 15:42", "fixed_version": "2009-Feb-26 15:42", "broken_version": "v070301", "priority": "2", "subsystem": "Daemons", "assigned_to": "danb", "derived_from": "", "creator": "burnett", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu, burnett@cs.wisc.edu, danb@cs.wisc.edu, nleroy@cs.wisc.edu,danb@cs.wisc.edu", "due_date": ""}