{"id": 1934, "title": "Ticket #1934: Job ClassAd should persist the x509 email", "description": "<blockquote>\nCurrently, the job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> records the x509 subject but not the email.  It would be useful if we did add this in; it's very useful when tracking down users based on the jobs in queue.</blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-01 17:43:20 by danb:</em> <br/>\n\nHi Brian, thanks for the patch!\n\n<p></p><ul>\n<li>Why is the following included in globus_utils.h?  Can you just include it in globus_utils.cpp instead?\n</li></ul>\n\n<p></p><div class=\"verbatim\">\n<pre>+\n+// Note: this is from OpenSSL, but should be present if Globus is.\n+// Only used if HAVE_EXT_GLOBUS.\n+#     include \"openssl/x509v3.h\"\n</pre></div>\n\n\n<p></p><ul>\n<li>What do you think about having x509_proxy_email() return a string that can be freed with free() rather than X509_NAME_free()?  Also, even if we do keep it the way it is, I see one path where the return value is allocated with strdup() and one where it is allocated with BUF_strdup().  Is that a problem?\n</li></ul>\n\n<p>---\n<em>2011-Mar-03 12:06:20 by danb:</em> <br/>\n\n\n</p><p>Patch 2 looks good to me.  I have committed it and documented it.\n\n</p><p>Thanks again, Brian!</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2334\" onclick=\"get_ticket_and_populate_wrapper('2334'); return false;\" title=\"Infinite loop in condor_submit\">#2334</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nInfinite loop in condor_submit</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2655\" onclick=\"get_ticket_and_populate_wrapper('2655'); return false;\" title=\"Bugs in gridmanager's handling of x509 email attribute\">#2655</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBugs in gridmanager's handling of x509 email attribute</td></tr>\n</tbody></table>", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/278/condor_x509_email.patch\">condor_x509_email.patch</a>\n10505 bytes added by bbockelm on 2011-Feb-28 23:16:39 UTC.\n<br/>\nThe attached patch should implement this for Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>.  This <strong>does not</strong> add the email for grid resource Ads.<br/>\n</li><li><a href=\"attach_get/280/condor_x509_email_v2.patch\">condor_x509_email_v2.patch</a>\n10838 bytes added by bbockelm on 2011-Mar-02 00:22:23 UTC.\n<br/>\nVersion 2 of the patch addressing Dan's comments:\n\n<p></p><ul>\n<li>Moved the header include into the .cpp\n</li><li>Made another copy of the string; the return values of the function only needs free, not an OpenSSL-specific free.\n</li></ul>\n\n<p>Tested using condor_submit.\n\n</p><p>MD5 (/Users/brian/tmp/condor_x509_email_v2.patch) = 66fca55347b897704c95ab7750aa9046\n<br/>\n</p></li></ul>\n</blockquote>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-03 12:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/648a3d1f03cf2d8d538ec14a6f55c7ff5a5505ed\">[26086]</a></span>: Documented X509UserProxyEmail. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1934\" onclick=\"get_ticket_and_populate_wrapper('1934'); return false;\" title=\"Job ClassAd should persist the x509 email\">#1934</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-03 11:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/24b3e022436237fb6ea94b9f50864487921f95cf\">[20901]</a></span>: Publish the email address from user's x509 credential. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1934\" onclick=\"get_ticket_and_populate_wrapper('1934'); return false;\" title=\"Job ClassAd should persist the x509 email\">#1934</a></span> Committer: Dan Bradley  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Mar-04 10:21", "status": "resolved", "created": "2011-Feb-28 17:11", "fixed_version": "2011-Feb-28 17:11", "broken_version": "v070700", "priority": "4", "subsystem": "Grid", "assigned_to": "bbockelm", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dan@hep.wisc.edu", "due_date": ""}