{"id": 403, "title": "Ticket #403: Condor should set oom_adj so OOM killer will prefer killing  jobs", "description": "<blockquote>\nRecently, the lab has been complaining that large condor jobs trigger the OOM killer on Linux, which makes a bad choice in killing processes.  On dedicated cluster machines, it seems like a running condor job is almost always the best thing for the OOM killer to strike. They are generally restartable, and probably the cause of the problem.\n\n<p>Newer versions of linux have a knob, /proc/self/oom_adj, which influences how likely the oom_killer is to choose this particular process.  I propose that we add a condor knob to enable the starter to set this for it's job:\n\n</p><p>Comments?\n\n</p><p><a class=\"external\" href=\"http://www.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1.1/html/Realtime_Tuning_Guide/sect-Realtime_Tuning_Guide-General_System_Tuning-Swapping_and_Out_Of_Memory_Tips.html\">http://www.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1.1/html/Realtime_Tuning_Guide/sect-Realtime_Tuning_Guide-General_System_Tuning-Swapping_and_Out_Of_Memory_Tips.html</a></p></blockquote>", "remarks": "<blockquote>\n<em>2012-Aug-05 21:53:12 by bbockelm:</em> <br/>\n\nPatch fixing this issue has been posted to <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2992\" onclick=\"get_ticket_and_populate_wrapper('2992'); return false;\" title=\"Have Condor manage OOM\">#2992</a></span>.\n\n<p></p><hr/>\n<em>2013-Jan-23 09:41:26 by gthain:</em> <br/>\n\nThis is now a dup of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2992\" onclick=\"get_ticket_and_populate_wrapper('2992'); return false;\" title=\"Have Condor manage OOM\">#2992</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2013-Jan-23 09:41", "status": "resolved", "created": "2009-Apr-22 08:53", "fixed_version": "2009-Apr-22 08:53", "broken_version": "", "priority": "4", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}