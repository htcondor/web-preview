{"id": 1764, "title": "Ticket #1764: File transfer issue with dual-homed schedd", "description": "<blockquote>\nI'm submitting Metronome jobs from a BaTLab schedd to a CHTC machine that joined the BaTLab pool.  Using Condor 7.4.0, file transfer worked fine.  After the upgrade to Condor 7.5.4, jobs fail on the file transfer step.  It appears that the schedd's private IP is now used instead of the public IP.  Errors in StarterLog.slot1 look like:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">11/09/10 11:52:17 SLOT1_USER set, so running job as sl1-user\n11/09/10 11:52:47 attempt to connect to &lt;192.168.0.105:53138&gt; failed: timed out after 30 seconds.\n11/09/10 11:52:47 FileTransfer: Unable to connect to server &lt;192.168.0.105:53138&gt;\n11/09/10 11:52:47 ERROR \"Could not initiate file transfer\" at line 1854 in file jic_shadow.cpp\n11/09/10 11:52:47 ShutdownFast all jobs.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2010-Nov-10 16:10:30 by danb:</em> <br/>\n\nI talked with Becky and we figured out that this problem was caused by two recent changes in behavior in Condor, both of which are basically bug fixes (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1329\" onclick=\"get_ticket_and_populate_wrapper('1329'); return false;\" title=\"private network settings ignored in file transfer\">#1329</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=457\" onclick=\"get_ticket_and_populate_wrapper('457'); return false;\" title=\"NETWORK_INTERFACE should trump IP rewriting\">#457</a></span>).  The NMI submit machines were setting NETWORK_INTERFACE to the private interface, but the old buggy behavior of condor \"worked\" in this situation, whereas the new fixed behavior did not.  By changing the configuration to set NETWORK_INTERFACE to the public IP, the problem was solved.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2010-Nov-19 07:17", "status": "resolved", "created": "2010-Nov-09 11:58", "fixed_version": "2010-Nov-09 11:58", "broken_version": "v070504", "priority": "2", "subsystem": "Unknown", "assigned_to": "danb", "derived_from": "", "creator": "bgietzel", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "bgietzel@cs.wisc.edu", "due_date": ""}