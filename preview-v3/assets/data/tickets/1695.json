{"id": 1695, "title": "Ticket #1695: Improve reaction to misbehaving gahps on startup", "description": "<blockquote>\nWhen the gridmanager starts up a new gahp server, if the gahp doesn't print the expect version banner or react properly to the COMMANDS command, the startup code returns failure, but leaves the gahp running and leaves the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GahpServer\" title=\"Gahp Server\">GahpServer</a></span> object in a partially-initialized state. In particular, m_commands_supported is left as NULL, which can result in a crash if higher-level code tries to issue any commands to the gahp.</blockquote>", "remarks": "<blockquote>\n<em>2010-Nov-15 15:27:38 by jfrey:</em> <br/>\n\nPushed fix to master for 7.5.5.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jan-21 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/96f5ba33ee29f5da3d69edc61017498dacf25df9\">[25869]</a></span>: Add some version history entries. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1695\" onclick=\"get_ticket_and_populate_wrapper('1695'); return false;\" title=\"Improve reaction to misbehaving gahps on startup\">#1695</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1761\" onclick=\"get_ticket_and_populate_wrapper('1761'); return false;\" title=\"Local job slow to exit can kill schedd\">#1761</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1747\" onclick=\"get_ticket_and_populate_wrapper('1747'); return false;\" title=\"Improve hold reasons for cream jobs\">#1747</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1641\" onclick=\"get_ticket_and_populate_wrapper('1641'); return false;\" title=\"Add new job status TRANSFERRING_OUTPUT\">#1641</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1650\" onclick=\"get_ticket_and_populate_wrapper('1650'); return false;\" title=\"Submitting multiple VMWare jobs with single submit doesn't work\">#1650</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-15 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/06b478f6cdb4e0d94c3a21dc7e4e1b02972d7362\">[19406]</a></span>: Prevent gridmanager crash if gahp misbehaves on startup. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1695\" onclick=\"get_ticket_and_populate_wrapper('1695'); return false;\" title=\"Improve reaction to misbehaving gahps on startup\">#1695</a></span> If a gahp server doesn't print a proper version banner or respond to the COMMANDS command, the gridmanager's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GahpServer\" title=\"Gahp Server\">GahpServer</a></span> object is left in a partially-initialized state. In particular, m_commands_supported is left as NULL, which can result\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Nov-15 15:27", "status": "resolved", "created": "2010-Oct-06 13:38", "fixed_version": "2010-Oct-06 13:38", "broken_version": "v070400", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}