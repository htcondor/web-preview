{"id": 285, "title": "Ticket #285: Node category inside splice causes DAGMan core dump", "description": "<blockquote>\nLIGO reported problems with DAGMan sometimes core dumping on splices.  It turns out that the problem is if you have node categories inside the splice.  When the splice nodes are \"pulled up\", the new nodes point to the old category object, which is freed when the splice DAG is freed.</blockquote>", "remarks": "<blockquote>\nFixed for 7.2.2/7.3.1.  The problem was that, when splice nodes were \"lifted\", they still pointed to category info in the splice DAG, which was then freed...</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-06 15:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5bd69e3d5928ae04fe1b2172b31a0182ed80657d\">[24658]</a></span>: Fixed gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=285\" onclick=\"get_ticket_and_populate_wrapper('285'); return false;\" title=\"Node category inside splice causes DAGMan core dump\">#285</a></span> (node category inside splice causes DAGMan core dump); activated the test that checks for this problem, and added to the test to make it \"harder\".  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-06 15:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/53a8da5741b1feb765f9ef6599c23c53af84876d\">[14159]</a></span>: Fixed gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=285\" onclick=\"get_ticket_and_populate_wrapper('285'); return false;\" title=\"Node category inside splice causes DAGMan core dump\">#285</a></span> (node category inside splice causes DAGMan core dump); activated the test that checks for this problem, and added to the test to make it \"harder\".  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-05 14:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fd47abeefde7215957be82489e3f3cabaa92dd7b\">[24651]</a></span>: Added the condor_dagman and condor_submit_dag -DumpRescue command- line flag (dumps rescue DAG immediately and exits); added the new test job_dagman_splice-cat.run using this flag that checks for gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=285\" onclick=\"get_ticket_and_populate_wrapper('285'); return false;\" title=\"Node category inside splice causes DAGMan core dump\">#285</a></span> (node category inside splice causes DAGMan core dump). (Note that the test is currently commented\u00a0[...]\n (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Mar-05 14:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/735be36156aa441bc06a873e0d93080718d7c5da\">[14145]</a></span>: Added the condor_dagman and condor_submit_dag -DumpRescue command- line flag (dumps rescue DAG immediately and exits); added the new test job_dagman_splice-cat.run using this flag that checks for gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=285\" onclick=\"get_ticket_and_populate_wrapper('285'); return false;\" title=\"Node category inside splice causes DAGMan core dump\">#285</a></span> (node category inside splice causes DAGMan core dump). (Note that the test is currently commented\u00a0[...]\n (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:40", "status": "defer", "created": "2009-Feb-27 10:02", "fixed_version": "2009-Feb-27 10:02", "broken_version": "v070201", "priority": "5", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "a18817", "customer_group": "ligo", "visibility": "public", "notify": "pcouvare@caltech.edu", "due_date": ""}