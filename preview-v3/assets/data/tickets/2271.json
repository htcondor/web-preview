{"id": 2271, "title": "Ticket #2271: CREAM user mapping incorrect in gridmanager", "description": "<blockquote>\nThe key used for creating <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamResource\" title=\"Cream Resource\">CreamResource</a></span> objects in the gridmanager should match how a CREAM server maps users. Each CREAM user has a separate namespace for lease ids and delegated proxies. The server considers two credentials as the same user if the X509 subject and first VOMS attribute match. Additional VOMS attributes are ignored.\n\n<p>Currently, the gridmanager creates a separate <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamResource\" title=\"Cream Resource\">CreamResource</a></span> object if the X509 subject or any VOMS attribute is different.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-22 14:24:02 by jfrey:</em> <br/>\n\nWaiting for Rod Walker to test fix.\n\n<p></p><hr/>\n<em>2011-Oct-17 12:57:01 by jfrey:</em> <br/>\n\nI've tested the patch myself, made some minor fixes, and committed to V7_6-branch.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/446/cream_proxy.patch\">cream_proxy.patch</a>\n6899 bytes added by jfrey on 2011-Aug-18 16:25:21 UTC.\n<br/>\nThis patch creates a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamResource\" title=\"Cream Resource\">CreamResource</a></span> object per unique proxy &lt;DN, first voms role&gt; pair. This will cause the leases to be shared on the same basis.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-22 16:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ebc3f31d7d8edb64b15219b474828d6782a22e04\">[28407]</a></span>: Remove dead code and extra debugging statements used for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2271\" onclick=\"get_ticket_and_populate_wrapper('2271'); return false;\" title=\"CREAM user mapping incorrect in gridmanager\">#2271</a></span>.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-18 10:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1158d9e09e17d61b773da1e6b6ee37ceb72faf05\">[27877]</a></span>: Minor edit of 7.6.4 version history item. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2271\" onclick=\"get_ticket_and_populate_wrapper('2271'); return false;\" title=\"CREAM user mapping incorrect in gridmanager\">#2271</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-14 14:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7a36dcfd883f20819dfc9b8e0922f7044363d86f\">[27840]</a></span>: Document cream user mapping bugfix <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2271\" onclick=\"get_ticket_and_populate_wrapper('2271'); return false;\" title=\"CREAM user mapping incorrect in gridmanager\">#2271</a></span> ===VersionHistory:Complete===  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-14 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0ec46897f1bff1fcb777416ee0a45b54b863b0e6\">[27839]</a></span>: Fix CREAM user mapping in gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2271\" onclick=\"get_ticket_and_populate_wrapper('2271'); return false;\" title=\"CREAM user mapping incorrect in gridmanager\">#2271</a></span> A CREAM server authorizes and maps clients based on the X509 subject name and first VOMS attribute. Additional VOMS attributes in the X509 proxy are ignored. We should create <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreamResource\" title=\"Cream Resource\">CreamResource</a></span> objects in the gridmanager with the same criteria.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Oct-17 12:57", "status": "resolved", "created": "2011-Jun-27 11:39", "fixed_version": "2011-Jun-27 11:39", "broken_version": "v070500", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "", "due_date": ""}