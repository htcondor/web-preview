{"id": 5526, "title": "Ticket #5526: condor_off -peaceful kills jobs", "description": "<blockquote>\nAs <a class=\"external\" href=\"http://is.gd/4wd8oQ\">reported on the htcondor-users mailing list</a>, sending a `condor_off -peaceful` results in immediate death of the job, instead of waiting for the job to finish.\n\n<p>Sample <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MasterLog\" title=\"Master Log\">MasterLog</a></span> snippet:\n</p><div class=\"code\">\n<pre class=\"code\">02/09/16 22:34:06 Received TCP command 484 (DAEMONS_OFF_PEACEFUL) from unauthenticated@unmapped &lt;10.252.68.173:37356&gt;, access level ADMINISTRATOR\n02/09/16 22:34:06 Calling HandleReq &lt;admin_command_handler&gt; (0) for command 484 (DAEMONS_OFF_PEACEFUL) from unauthenticated@unmapped &lt;10.252.68.173:37356&gt;\n02/09/16 22:34:06 Sent SIGTERM to STARTD (pid 2897)\n02/09/16 22:34:06 Return from HandleReq &lt;admin_command_handler&gt; (handler: 0.000s, sec: 0.002s, payload: 0.000s)</pre></div>\n\n\n<p>Sample <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartLog\" title=\"Start Log\">StartLog</a></span> snippet:\n</p><div class=\"code\">\n<pre class=\"code\">02/09/16 22:34:06 Received TCP command 60016 (DC_SET_PEACEFUL_SHUTDOWN) from unauthenticated@unmapped &lt;10.252.68.173:53025&gt;, access level ADMINISTRATOR\n02/09/16 22:34:06 Calling HandleReq &lt;handle_set_peaceful_shutdown()&gt; (0) for command 60016 (DC_SET_PEACEFUL_SHUTDOWN) from unauthenticated@unmapped &lt;10.252.68.173:53025&gt;\n02/09/16 22:34:06 Return from HandleReq &lt;handle_set_peaceful_shutdown()&gt; (handler: 0.000s, sec: 0.003s, payload: 0.000s)\n02/09/16 22:34:06 Return from Handler &lt;DaemonCommandProtocol::WaitForSocketData&gt; 0.0031s\n02/09/16 22:34:06 Got SIGTERM. Performing graceful shutdown.\n02/09/16 22:34:06 shutdown graceful</pre></div>\n\n\n<p>Steven Timm noted:\n</p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n   My experience is that it will work if you leave off the\n-daemon startd\n\n(at least in 8.0.x and 8.2.x).\nPlus you have to be on the host itself.. if you do the command from the\ncentral manager, i.e.\n\ncondor_off -peaceful &lt;hostname&gt;\n\nit doesn't work either. </td></tr></tbody></table></div>\n\n\n<p>But that doesn't match the behavior Di saw.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2020-Oct-12 10:00", "status": "new", "created": "2016-Feb-24 12:17", "fixed_version": "2016-Feb-24 12:17", "broken_version": "v080402", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "johnkn", "derived_from": "", "creator": "bcotton", "rust": "", "customer_group": "users", "visibility": "public", "notify": "ben.cotton@cyclecomputing.com, dqing@triumf.ca, tannenba@cs.wisc.edu", "due_date": ""}