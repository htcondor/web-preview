{"id": 751, "title": "Ticket #751: Expected run time for DeferralTime jobs should be user visible", "description": "<blockquote>\n(Based on a report by Scot Kronenfeld for the VDT.)\n\n<p>I can't tell when my job is going to run next.  I could probably muck around in the log file to figure out when it last exited, and then add my deferral time to that - possible, but obviously not very use friendly.  In my case above, I use a random expression in my deferral time, so I really couldn't figure it out precisely either.\n\n</p><p>It would be really nice to have a command line utility (whether it's added to condor_q or something else) that told me when my job will run next.  This could be useful even for 'cron' style jobs (as opposed to 'deferral' style jobs), because the cron jobs could be held for some reason (or because I'm lazy, and I don't want to open up submission files and parse cron expressions)\n\n</p><p></p><hr/>\nProposed behavior by Alan De Smet:\n\n<p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DeferralTime\" title=\"Deferral Time\">DeferralTime</a></span> can be a calculated expression.  The expression is calculated once and cached.  This result isn't in the class ad, at least not the one shown to condor_q.  It should be, perhaps as <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DeferralTimeCalculated\" title=\"Deferral Time Calculated\">DeferralTimeCalculated</a></span>.  Once present, users can now use \"condor_q -format '%d' <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DeferralTimeCalculated\" title=\"Deferral Time Calculated\">DeferralTimeCalculated</a></span>\" to get the answer.  For the answer in more human terms, you can use \"condor_q -format '%s' 'formatTime(DeferralTimeCalculated)'\".\n\n</p><p>We might optionally consider a \"condor_q -deferred\" option that will generate a specialized report (like -run and -hold) listing the expected start times for deferred jobs.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p>Greg,\nThis is a related issue to ticket <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2692\" onclick=\"get_ticket_and_populate_wrapper('2692'); return false;\" title=\"Add -cron argument for condor_q\">#2692</a></span>.  For deferral \"cron style\" jobs you can specify an expression telling Condor when to run the job next.  Unfortunately, there is no way to tell when the job will execute next.\n\n</p><p>You can grab various pieces of information from the full job ad, but if the expression contained a random statement like this one there is no way to determine what the random portion evaluated to:\n\n</p><p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DeferralTime\" title=\"Deferral Time\">DeferralTime</a></span> = (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CurrentTime\" title=\"Current Time\">CurrentTime</a></span> + 300 + random(30))</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Dec-05 16:35", "status": "new", "created": "2009-Sep-22 11:41", "fixed_version": "2009-Sep-22 11:41", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}