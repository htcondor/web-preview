{"id": 3827, "title": "Ticket #3827: Scalability problems when condor_qedit'ing many jobs", "description": "<blockquote>\nLIGO is reporting that the schedd completely hangs for 5+ minutes when doing a condor_qedit on many running jobs.\n\n<p>On a schedd running 2,000 jobs, the command\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_qedit -const 'jobstatus==1' FooTest False\n</pre></div>\n\n\n<p>Will cause the schedd to completely hang in D state for at least 3 minutes.  Seems like it is writing the user log entries for the updated attributes.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Aug-07 14:29:46 by pfc:</em> <br/>\n\nAnother instance of what I think is the same fundamental issue, this time at UWM:\n\n<p></p><div class=\"verbatim\">\n<pre>On 08/07/2013 05:33 PM, Adam Mercer wrote:\n\nHi\n\nWith Tom away this week we're all trying to fill in with support issue\nat UWM, this morning one of the head nodes (pcdev1) is very slow due\nto a user running a lot of jobs that are waiting for io. I've\nidentified the user that is running these jobs and am trying to put\ntheir jobs on hold. When I try this I receive the following:\n\nroot@pcdev1:~# condor_hold xiaoge.wang\n\nCouldn't find/hold all of user xiaoge.wang's job(s).\n</pre></div>\n\n\n<p></p><hr/>\n<em>2013-Aug-26 12:21:10 by pfc:</em> <br/>\n\nCan this be made optional?  There are definitely instances where we might want qedits to be logged.  (In fact, anytime it's not needed for scalability I'd prefer to leave them logged, since classad changes can be important for understanding the life of a job after the fact.\n\n<p></p><hr/>\n<em>2013-Aug-26 16:48:34 by tim:</em> <br/>\n\n<strong>CODE REVIEW</strong> I took a look at the changes and they look good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-18 16:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5296bb4a79b75529d92f0f10aaf5901d1e643383\">[37652]</a></span>: event number 033 no longer written to job event log by condor_qedit, so a bit more doc needs to be changed ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3827\" onclick=\"get_ticket_and_populate_wrapper('3827'); return false;\" title=\"Scalability problems when condor_qedit'ing many jobs\">#3827</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-26 10:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3e7ba617d6bf5c0d5abc840851b195f69ebd8014\">[37341]</a></span>: Document <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3827\" onclick=\"get_ticket_and_populate_wrapper('3827'); return false;\" title=\"Scalability problems when condor_qedit'ing many jobs\">#3827</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-26 10:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/560cdbea37c4f8c61814c23fb190296f1d3f2c0f\">[37338]</a></span>: Change condor_qedit not to write to the job log <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3827\" onclick=\"get_ticket_and_populate_wrapper('3827'); return false;\" title=\"Scalability problems when condor_qedit'ing many jobs\">#3827</a></span> This greatly improves performance when qedit'ing many jobs.  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-04 11:52", "status": "defer", "created": "2013-Jul-30 17:05", "fixed_version": "2013-Jul-30 17:05", "broken_version": "v080000", "priority": "5", "subsystem": "", "assigned_to": "tannenba", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu,pcouvare@caltech.edu", "due_date": ""}