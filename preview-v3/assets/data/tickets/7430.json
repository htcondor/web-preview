{"id": 7430, "title": "Ticket #7430: Update condor.spec file to be able to build on Amazon Linux 2", "description": "<blockquote>\nAmazon Linux is similar to RHEL 7. We should be able to adjust to be able to build for this platform.</blockquote>", "remarks": "<blockquote>\n<em>2019-Dec-12 11:58:53 by tim:</em> <br/>\n\nAmazon Linux 2 has python 3.7 by default. Unfortunately, boost 1.69 from EPEL was built against python 3.6. So, no python 3 bindings for Amazon Linux 2. (They can probably Pip install them if needed.)\n<hr/>\n<em>2020-Apr-10 07:43:03 by tim:</em> <br/>\n\nBulk change of target version from v080808 to v080809 using ticket-target-mover.\n\n<p></p><hr/>\n<em>2020-Aug-04 11:20:33 by matyas:</em> <br/>\n\nCan you use the Python macros instead of %if blocks?  That should be more future proof.  For example, replace\n\n<p></p><pre> \t%if ! 0%{?amzn}\n \tmv %{buildroot}/usr/lib64/python3.6/site-packages/py3classad.so %{buildroot}/usr/lib64/python3.6/site-packages/classad.so\n \tmv %{buildroot}/usr/lib64/python3.6/site-packages/py3htcondor.so %{buildroot}/usr/lib64/python3.6/site-packages/htcondor.so\n \t%else\n \tmv %{buildroot}/usr/lib64/python3.7/site-packages/py3classad.so %{buildroot}/usr/lib64/python3.7/site-packages/classad.so\n \tmv %{buildroot}/usr/lib64/python3.7/site-packages/py3htcondor.so %{buildroot}/usr/lib64/python3.7/site-packages/htcondor.so\n \t%endif\n</pre>\n\n<p>with\n\n</p><p></p><pre> \tmv %{buildroot}%{python3_sitearch}/py3classad.so %{buildroot}%{python3_sitearch}/classad.so\n \tmv %{buildroot}%{python3_sitearch}/py3htcondor.so %{buildroot}%{python3_sitearch}/htcondor.so\n</pre>\n\n<p></p><hr/>\n<em>2020-Aug-04 11:28:45 by tim:</em> <br/>\n\nGreat idea, I'll address in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7681\" onclick=\"get_ticket_and_populate_wrapper('7681'); return false;\" title=\"Use externals from EPEL for RPMs\">#7681</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-04 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1e6baa0ebc31424f29d0a72fc7cfb26cb178e1d4\">[60342]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>) Really build native packages for Amazon Linux  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-04 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db73fa452c48fddf05b6732949892f9c1d11f517\">[60340]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>) Build native packages for Amazon Linux  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-31 10:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/80142e50eee3b5ab3419a5698a3ab88f55ee640b\">[60290]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7673\" onclick=\"get_ticket_and_populate_wrapper('7673'); return false;\" title=\"Add Ubuntu 20.04 to list of supported platforms\">#7673</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7704\" onclick=\"get_ticket_and_populate_wrapper('7704'); return false;\" title=\"Ensure condor_gpu_discovery reports CoresPerCU for Volta and later GPU\">#7704</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7711\" onclick=\"get_ticket_and_populate_wrapper('7711'); return false;\" title=\"Update condor_gpu_discovery for Ampere GPUs\">#7711</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7754\" onclick=\"get_ticket_and_populate_wrapper('7754'); return false;\" title=\"Backport flocking fixes from Development\">#7754</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jun-19 09:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c807c1beac2cc23063a4ec59cf98b18c68c8091a\">[59921]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>) Get Python3 work on Amazon Linux 2  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-May-30 07:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6bf6aa890980b75f14a2f7d4719eb441ac14659a\">[59738]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>) Add Amazon Linux 2 BaTLab Dockerfile  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-May-29 22:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d78914d0c0cf8e1aecdb6c3532d7023cc6b6a66f\">[59736]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7430\" onclick=\"get_ticket_and_populate_wrapper('7430'); return false;\" title=\"Update condor.spec file to be able to build on Amazon Linux 2\">#7430</a></span>) Add Amazon Linux 2 support  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Aug-07 16:47", "status": "resolved", "created": "2019-Dec-12 11:56", "fixed_version": "2019-Dec-12 11:56", "broken_version": "", "priority": "2", "subsystem": "Packaging", "assigned_to": "matyas", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}