{"id": 5591, "title": "Ticket #5591: condor_ssh_to_job failure", "description": "<blockquote>\nFrom: Juan Barayoga (LIGO)\n\n<p>One of our users bought to our attention that condor_ssh_to_job isn't working out of the box after our upgrade to 8.4.4.  The error looks like:\n\n</p><p>condor_ssh_to_job 80587561.0\nslot1@node540.cluster.ldas.cit: /usr/lib64/condor/condor_ssh_to_job_sshd_config_template does not exist!\n\n</p><p>This looks like a packaging bug.\n\n</p><p>On 8.2, condor_ssh_to_job_sshd_config_template is in /usr/lib64/condor.\n\n</p><p>On 8.4.4, this file is in /etc/condor.\n\n</p><p>Looks like /etc/condor is the right place for this file due to the nature of it's content.  For now, I'm setting the SSH_TO_JOB_SSHD_CONFIG_TEMPLATE knob to look for the file in /etc/condor.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-16 10:13:11 by tim:</em> <br/>\n\nFor now, I'll modify the default global configuration file (the minimal change). In the future (the 8.7 series) I'll want to make the default match up to wherever this file should go (undecided at this point).\n\n<p></p><hr/>\n<em>2016-Sep-26 11:49:39 by edquist:</em> <br/>\n\n<strong>code review</strong>\n\n<p>Looks like that should work.\n\n</p><p>---\n\n</p><p>A few thoughts, perhaps for later:\n\n</p><p>- the <code>SSH_TO_JOB_SSHD_CONFIG_TEMPLATE</code> parameter is used in just one place, in <code>src/condor_starter.V6.1/baseStarter.cpp</code>; the thing that jumps out is that if the value is unset it defaults to look for it in the <code>LIB</code> dir.  So, if we want to keep the config file in <code>ETC</code>, changing this default lookup location (in <code>baseStarter.cpp</code>) to <code>ETC</code> is another way to fix it.  (That would avoid adding a line to the config file.)\n\n</p><p>- a default could also be added to <code>param_info.in</code>\n\n</p><p>- one arguably \"correct\" way to do it is keep the read-only \"template\" under <code>/usr</code> (in the <code>LIB</code> location), and if an admin wants to edit it, that editable copy would live under <code>ETC</code>.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-28 15:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/70cd6b8ff3771b9da17c9f54c814cbd5397f5abc\">[49327]</a></span>: Lift <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5591\" onclick=\"get_ticket_and_populate_wrapper('5591'); return false;\" title=\"condor_ssh_to_job failure\">#5591</a></span> 's version history into correct release  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-26 10:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8e534dd1c33b852ce0d22e6f468ae7305b444666\">[49293]</a></span>: Version history for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5591\" onclick=\"get_ticket_and_populate_wrapper('5591'); return false;\" title=\"condor_ssh_to_job failure\">#5591</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-15 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/722bdab7f7334d1c06742b261d52ad7de9c84607\">[49210]</a></span>: (<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5591\" onclick=\"get_ticket_and_populate_wrapper('5591'); return false;\" title=\"condor_ssh_to_job failure\">#5591</a></span>) Set ssh_to_job_config_template location in RPM packaged builds  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Sep-26 13:16", "status": "defer", "created": "2016-Mar-30 16:33", "fixed_version": "2016-Mar-30 16:33", "broken_version": "v080400", "priority": "5", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "s8642, s8721", "customer_group": "ligo", "visibility": "public", "notify": "edquist@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}