{"id": 7165, "title": "Ticket #7165: ToE tags break condor_submit -i", "description": "<blockquote>\ncondor_submit -i now exits immediately after the ToE tag merge.</blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-25 14:06:05 by tlmiller:</em> <br/>\n\nIsolated the problem to\n\n<p></p><div class=\"code\">\n<pre class=\"code\">Starter-&gt;publishUpdateAd( &amp; updateAd );\n</pre></div>\n\n\n<p>in <code>OsProc::JobReaper()</code>, which makes no sense.  Investigation continues.\n\n</p><p></p><hr/>\n<em>2019-Jul-25 16:42:44 by tlmiller:</em> <br/>\n\n<code>publishUpdateAd()</code> walks the proc list that the base starter's reaper is walking to determine if any of its procs know about the process that just died.\n\n<p>I elected to remove the land-mine rather than code carefully around it, but the code is ugly because (our) List&lt;&gt; doesn't allow for assignment or copy-construction.  Since List&lt;&gt; doesn't appear to own the pointers it carries around, I don't understand why this was done, so I may ask for a code review.\n\n</p><p>Testing in run ID 476405.\n\n</p><p></p><hr/>\n<em>2019-Jul-26 11:04:37 by tlmiller:</em> <br/>\n\nCherry-picked off the <code>V8_9-gt7165-branch</code> into V8_9_3, from whence it should be merged to master.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-26 11:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/36ed8927c1bc26c7d790d3395c0e6e7cf70dbc34\">[57502]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7165\" onclick=\"get_ticket_and_populate_wrapper('7165'); return false;\" title=\"ToE tags break condor_submit -i\">#7165</a></span>) Iterate over a copy of the proc list in the reaper (because we don't like external iterators?) rather than require that all reapers ensure that their call tree doesn't walk the proc list.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-25 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ef9c7073d054025f516843c0d6e93de7921e936a\">[57495]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7165\" onclick=\"get_ticket_and_populate_wrapper('7165'); return false;\" title=\"ToE tags break condor_submit -i\">#7165</a></span>) Iterate over a copy of the proc list in the reaper (because we don't like external iterators?) rather than require that all reapers ensure that their call tree doesn't walk the proc list.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Aug-01 10:24", "status": "resolved", "created": "2019-Jul-24 20:26", "fixed_version": "2019-Jul-24 20:26", "broken_version": "v080903", "priority": "1", "subsystem": "", "assigned_to": "tlmiller", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}