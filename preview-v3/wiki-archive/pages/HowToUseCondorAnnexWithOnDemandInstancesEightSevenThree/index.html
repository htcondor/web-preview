<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-v3/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-v3/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-v3/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-v3/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-v3/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-v3/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-v3/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>How To Use Condor Annex With On Demand Instances Eight Seven Three</title>

    <script src="/web-preview/preview-v3/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-v3/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-v3/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-v3/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-v3/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-v3/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="https://htcondor.readthedocs.io/en/latest/version-history/index.html">Release Notes&#11023;</a></li>
        
    </ul>
</li>
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="https://htcondor.com/htcondor-ce/v5/releases/#htcondor-ce-5-version-history">Release Notes&#11023;</a></li>
        
    </ul>
</li>
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/downloads/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/license">License</a></li>
        
    </ul>
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor/documentation">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor-ce/documentation">HTCondor-CE</a></li>
        
    </ul>
</li>
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-users">Users&#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-world">World&#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-devel">Developers&#11023;</a></li>
        
    </ul>
</li>
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="mailto:htcondor-admin@cs.wisc.edu">Support Email&#11023;</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/uw-support/">Internal Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/htcondor-support#external-support/">Outside Support</a></li>
        
    </ul>
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1579/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-v3/past_condor_weeks.html">Content Archives</a></li>
        
            <li><a class="dropdown-item" href="https://youtube.com/playlist?list=PLO7gMRGDPNulf_yK_9Ue6yARxJh0gQXQI">Youtube Playlist</a></li>
        
    </ul>
</li>
            
                

<li class="dropdown">
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
    </ul>
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item ">
    
        <a class="nav-link" href="/web-preview/preview-v3/about.html">About</a>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-v3/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-v3/assets/images/HTCondor_red_blk.svg"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link" href="/web-preview/preview-v3/about.html">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                





                

                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/news/New_HTCondor_Version_Scheme/">New HTCondor Version Scheme</a></h3>
                            <div>
                                <span class="text-muted">September 22, 2021</span>
                            </div>
                            <hr/>
                            <a href="new">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-v3/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                
                
                

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>HTCondor</th></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor/overview/">Overview</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor/download/">Download</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor/documentation/">Documentation</a></td></tr>
            
                <tr><td><a href="https://htcondor.readthedocs.io/en/latest/version-history/index.html">Release Notes&#11023;</a></td></tr>
            
        </table>
    </div>

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>HTCondor-CE</th></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor-ce/overview/">Overview</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor-ce/download/">Download</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor-ce/documentation/">Documentation</a></td></tr>
            
                <tr><td><a href="https://htcondor.com/htcondor-ce/v5/releases/#htcondor-ce-5-version-history">Release Notes&#11023;</a></td></tr>
            
        </table>
    </div>

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>General</th></tr>
            
                <tr><td><a href="/web-preview/preview-v3/manual/">Documentation</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/downloads/">Download</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/security/">Security</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/license">License</a></td></tr>
            
        </table>
    </div>


            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>Documentation</th></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor/documentation">HTCondor</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor-ce/documentation">HTCondor-CE</a></td></tr>
            
        </table>
    </div>

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>Email Lists</th></tr>
            
                <tr><td><a href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-users">Users&#11023;</a></td></tr>
            
                <tr><td><a href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-world">World&#11023;</a></td></tr>
            
                <tr><td><a href="https://lists.cs.wisc.edu/mailman/listinfo/htcondor-devel">Developers&#11023;</a></td></tr>
            
        </table>
    </div>

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>Support</th></tr>
            
                <tr><td><a href="mailto:htcondor-admin@cs.wisc.edu">Support Email&#11023;</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/uw-support/">Internal Contract Support</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/htcondor-support#external-support/">Outside Support</a></td></tr>
            
        </table>
    </div>


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                






                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <img src="/web-preview/preview-v3/assets/images/banq-mw.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/user-stories/2021-11-30-banq/">Centuries of newspapers are now easily searchable thanks to HTCSS</a></h5>
                            <hr/>
                            <a href="user-stories">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-v3/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All User Stories
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                
                
                

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>HTCondor Week</th></tr>
            
                <tr><td><a href="https://agenda.hep.wisc.edu/event/1579/">Most Recent</a></td></tr>
            
                <tr><td><a href="/web-preview/preview-v3/past_condor_weeks.html">Content Archives</a></td></tr>
            
                <tr><td><a href="https://youtube.com/playlist?list=PLO7gMRGDPNulf_yK_9Ue6yARxJh0gQXQI">Youtube Playlist</a></td></tr>
            
        </table>
    </div>

    <div class="col-auto mx-4 my-2">
        <table>
            <tr><th>CHTC</th></tr>
            
                <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
            
                <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
            
        </table>
    </div>


            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="container-xxl py-4">
    <h1>How To Use Condor Annex With On Demand Instances Eight Seven Three</h1>
<div id="content">
 <em>
  [If you're using v8.7.2 or earlier, see the
  <span class="wiki">
   <a href="/web-preview/preview-v3/wiki-archive/pages/HowToUseCondorAnnexWithOnDemandInstancesEightSevenTwo" title="How To Use Condor Annex With On Demand Instances Eight Seven Two">
    v8.7.2 instructions
   </a>
  </span>
  .  These instructions are for v8.7.3.  If you're using v8.7.4, see the
  <span class="wiki">
   <a href="/web-preview/preview-v3/wiki-archive/pages/HowToUseCondorAnnexWithOnDemandInstancesEightSevenFour" title="How To Use Condor Annex With On Demand Instances Eight Seven Four">
    v8.7.4 instructions
   </a>
  </span>
  .]
 </em>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Using HTCondor Annex for the First Time
 </h2>
 <p>
  We assume you already have an AWS account, as well as a log-in account on a Linux machine with a public IP address and an administrator who's willing to open a port for you.  If so, you can follow the instructions for
  <span class="wiki">
   <a href="/web-preview/preview-v3/wiki-archive/pages/UsingCondorAnnexForTheFirstTimeEightSevenThree" title="Using Condor Annex For The First Time Eight Seven Three">
    using HTCondor Annex for the first time
   </a>
  </span>
  .
 </p>
 <p>
  If you're not sure if you've configured
  <code>
   condor_annex
  </code>
  before, you may enter the following to check.
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ . ~/condor-8.7.3/condor.sh
$ condor_annex -check-setup
Checking for configuration bucket... OK.
Checking for Lambda functions... OK.
Checking for instance profile... OK.
Checking for security group... OK.
Your setup looks OK.
</pre>
 </div>
 <p>
  If you see anything else, follow the instructions above.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  What You'll Need to Know
 </h2>
 <p>
  To create a HTCondor annex with on-demand instances, you'll need to know two things:
 </p>
 <p>
 </p>
 <ol>
  <li>
   A name for it.  "
   <span class="wiki">
    <a class="missing" href="/web-preview/preview-v3/wiki-archive/pages/MyFirstAnnex" title="My First Annex">
     MyFirstAnnex
    </a>
   </span>
   " is a fine name for your first annex.
  </li>
  <li>
   How many instances you want.  For your first annex, when you're checking to make sure things work, you may only want one instance.
  </li>
 </ol>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Start an Annex
 </h2>
 <p>
  Entering the following will start an annex named "
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-v3/wiki-archive/pages/MyFirstAnnex" title="My First Annex">
    MyFirstAnnex
   </a>
  </span>
  " with one instance.
  <code>
   condor_annex
  </code>
  will print out what it's going to do, and then ask you if that's OK.  You must type 'yes' (and hit enter) at the prompt to start an annex; if you do not,
  <code>
   condor_annex
  </code>
  will print out instructions about how to change whatever you may not like about what it said it was going to do, and then exit.
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_annex -count 1 -annex-name MyFirstAnnex
Will request 1 m4.large on-demand instance for 0.83 hours.  Each instance will terminate after being idle for 0.25 hours.
Is that OK?  (Type 'yes' or 'no'): yes
Starting annex...
Annex started.  Its identity with the cloud provider is
'TestAnnex0_f2923fd1-3cad-47f3-8e19-fff9988ddacf'.  It will take about three minutes for the new machines to join the pool.
</pre>
 </div>
 <p>
  You won't need to know the annex's identity with the cloud provider unless something goes long.
 </p>
 <p>
  Before starting the annex,
  <code>
   condor_annex
  </code>
  will check to make sure that the instances will be able to contact your pool.  Contact your machine's administrator if
  <code>
   condor_annex
  </code>
  reports a problem with this step.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  instance types
 </h3>
 <p>
  Each
  <a class="external" href="https://aws.amazon.com/ec2/instance-types/">
   instance type
  </a>
  provides a different number (and/or type) of CPU cores, amount of RAM, local storage, and the like.  If you're not sure, we recommend starting with 'm4.large', which has 2 CPU cores and 8 GiB of RAM.  As noted in the example output above, you can specify an instance type with the
  <code>
   -aws-on-demand-instance-type
  </code>
  flag.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  leases
 </h3>
 <p>
  By default,
  <code>
   condor_annex
  </code>
  arranges for your annex's instances to be terminated after
  <code>
   0.83
  </code>
  hours (50 minutes) have passed.  Once it's in place, this lease doesn't depend on your machine, but it's only checked every five minutes, so give your deadlines a lot of cushion to make you don't get charged for an extra hour.  The lease is intended to help you conserve money by preventing the annex instances from accidentally running forever.  As noted in the example output above, you can specify a lease duration (in decimal hours) with the
  <code>
   -duration
  </code>
  flag.
 </p>
 <p>
  If you need to adjust the lease for a particular annex, you may do so by specifying an annex name and a duration, but not a count.  When you do so, the new duration is set starting at the current time.  For example, if you'd like "
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-v3/wiki-archive/pages/MyFirstAnnex" title="My First Annex">
    MyFirstAnnex
   </a>
  </span>
  " to expire eight hours from now:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_annex -annex-name MyFirstAnnex -duration 8
Lease updated.
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  idle time
 </h3>
 <p>
  By default,
  <code>
   condor_annex
  </code>
  will configure your annex's instances to terminate themselves after being idle for
  <code>
   0.25
  </code>
  hours (fifteen minutes).  This is intended to help you conserve money in case of problems or an extended shortage of work.  As noted in the example output above, you can specify a max idle time (in decimal hours) with the
  <code>
   -idle
  </code>
  flag.
  <code>
   condor_annex
  </code>
  considers an instance idle if it's
  <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/v8.6/3_7Policy_Configuration.html#37887">
   unclaimed
  </a>
  , so it won't get tricked by jobs with long quiescent periods.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  multiple annexes
 </h3>
 <p>
  You may have up to fifty (or fewer, depending what else you're doing with your AWS account) differently-named annexes running at the same time.  Running
  <code>
   condor_annex
  </code>
  again with the same annex name before stopping that annex will both add instances to it and change its duration.  Only instances which start up after an invocation of
  <code>
   condor_annex
  </code>
  will respect that invocation's max idle time.  That may include instances still starting up from your previous (first) invocation of
  <code>
   condor_annex
  </code>
  , so be sure your instances have all joined the pool before running
  <code>
   condor_annex
  </code>
  again with the same annex name if you're changing the max idle time.  Each invocation of
  <code>
   condor_annex
  </code>
  requests a fixed number of instances of a given type; you may specify either or both with each invocation, but neither will change either about the previous request.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Monitor your Annex
 </h2>
 <p>
  You can find out if that instance has successfully joined the pool in the following way.
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_status -annex MyFirstAnnex
slot1@ip-172-31-48-84.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767
slot2@ip-172-31-48-84.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767

              Total Owner Claimed Unclaimed Matched Preempting Backfill  Drain
 X86_64/LINUX     2     0       0         2       0          0        0      0
        Total     2     0       0         2       0          0        0      0
</pre>
 </div>
 <p>
  This example shows that the annex instance you requested has joined your pool.  (The default annex image configures one static slot for each CPU it finds on start-up.)
 </p>
 <p>
  You can also get a report about the instances which have not joined your pool:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_annex -annex MyFirstAnnex -status
STATE          COUNT
pending            1
TOTAL              1

Instances not in the pool, grouped by state:
pending i-06928b26786dc7e6e
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Multiple Annexes
 </h3>
 <p>
  The following command reports on all annex instance which have joined the pool, regardless of which annex they're from:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_status -annex
slot1@ip-172-31-48-84.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767
slot2@ip-172-31-48-84.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767
slot1@ip-111-48-85-13.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767
slot2@ip-111-48-85-13.ec2.internal  LINUX     X86_64 Unclaimed Idle 0.640 3767

              Total Owner Claimed Unclaimed Matched Preempting Backfill  Drain
 X86_64/LINUX     4     0       0         4       0          0        0      0
        Total     4     0       0         4       0          0        0      0
</pre>
 </div>
 <p>
  The following command reports about instance which have not joined the pool,
regardless of which annex they're from:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_annex -status
NAME                        TOTAL running
NamelessTestA                   2       2
NamelessTestB                   3       3
NamelessTestC                   1       1

NAME                        STATUS  INSTANCES...
NamelessTestA               running i-075af9ccb40efb162 i-0bc5e90066ed62dd8
NamelessTestB               running i-02e69e85197f249c2 i-0385f59f482ae6a2e i-06191feb755963edd
NamelessTestC               running i-09da89d40cde1f212
</pre>
 </div>
 <p>
  The ellipsis in the last column (
  <code>
   INSTANCES...
  </code>
  ) is to indicate that it's a very wide column and may wrap (as it will for NamelessTestB on an 80-column terminal), not that it has been truncated.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Run a Job
 </h2>
 <p>
  Starting in v8.7.1, the default behaviour for an annex instance is to run only jobs submitted by the user who ran the
  <code>
   condor_annex
  </code>
  command.  If you'd like to allow other users to run jobs, list them (separated by commas; be sure to include yourself) as arguments to the
  <code>
   -owner
  </code>
  flag when you start the instance.  If you're creating an annex for general use, use the
  <code>
   -no-owner
  </code>
  flag to run jobs from anyone.
 </p>
 <p>
  Also starting in v8.7.1, the default behaviour for an annex instance is to run only jobs which have the
  <code>
   MayUseAWS
  </code>
  attribute set (to true).  To submit a job with
  <code>
   MayUseAWS
  </code>
  set to true, add
  <code>
   +MayUseAWS = TRUE
  </code>
  to the submit file somewhere before the
  <code>
   queue
  </code>
  command.  To allow an existing job to run in the annex, use
  <code>
   condor_q_edit
  </code>
  .  For instance, if you'd like cluster 1234 to run on AWS:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_qedit 1234 "MayUseAWS = TRUE"
Set attribute "MayUseAWS" for 21 matching jobs.
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Stop an Annex
 </h2>
 <p>
  The following command shuts HTCondor off on each instance in the annex; if you're using the default annex image, doing so causes each instance to shut itself down.
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_off -annex MyFirstAnnex
Sent "Kill-Daemon" command for "master" to master ip-172-31-48-84.ec2.internal
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Multiple Annexes
 </h3>
 <p>
  The following command turns off all annex instances in your pool, regardless of which annex they're from:
 </p>
 <p>
 </p>
 <div class="term">
  <pre class="term">$ condor_off -annex
Sent "Kill-Daemon" command for "master" to master ip-172-31-48-84.ec2.internal
Sent "Kill-Daemon" command for "master" to master ip-111-48-85-13.ec2.internal
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Advanced Usage
 </h2>
 <p>
  The information is this section is for advanced users and may not apply (or make sense) to everyone.  Additional information about advanced usage is available in the
  <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/v8.7/6_Cloud_Computing.html">
   the manual
  </a>
  .
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Configure the Annex
 </h3>
 <p>
  You can customize the configuration of your annex.  If you pass the full path to a directory (for example,
  <code>
   /home/annex/config.d
  </code>
  ) to
  <code>
   condor_annex
  </code>
  using the
  <code>
   -config-dir
  </code>
  option, condor_annex will copy the files in that directory to the HTCondor config directory on each annex instance.  This does
  <em>
   not
  </em>
  replace the customization that
  <code>
   condor_annex
  </code>
  is already doing to configure security and tell the annex instances which pool to join; those changes will be laid down on top of (a temporary copy of) the directory you specified before being transferred to the instances.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Spot Fleet
 </h3>
 <p>
  <code>
   condor_annex
  </code>
  can make use of AWS' Spot Fleet to help reduce the cost of your instances.  Consult
  <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/v8.7/6_2HTCondor_Annex.html">
   the manual
  </a>
  for more information.  Note that v8.7.3's implementation of
  <code>
   condor_annex -status
  </code>
  is buggy and will not properly return information about Spot Fleet -based annexes.
 </p>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-4 d-none d-lg-flex">
                <img class="my-auto" height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-v3/assets/images/HTCondor_red_blk.svg" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-v3/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-v3/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/security/">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/license">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-v3/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="mailto:htcondor-admin@cs.wisc.edu">Support Email</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/uw-support/">Contract Support</a></td></tr>
                            <tr><td><a href="/web-preview/preview-v3/htcondor-support#external-support/">Outside Support</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row py-4">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
        <div class="row pb-4">
            <div class="col text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, click <a href="http://www.phoenixsoftware.com">here</a>.
                </span>
            </div>

        </div>
    </div>
</footer>



</body>
</html>
