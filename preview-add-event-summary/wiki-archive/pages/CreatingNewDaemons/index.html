<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-add-event-summary/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-add-event-summary/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-add-event-summary/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-add-event-summary/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-add-event-summary/assets/images/favicons/safari-pinned-tab.svg" color="#d31145">
    <link rel="shortcut icon" href="/web-preview/preview-add-event-summary/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-add-event-summary/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script src="/web-preview/preview-add-event-summary/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-add-event-summary/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-add-event-summary/assets/js/bootstrap.js" type="text/javascript"></script>

    

    

        <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-add-event-summary/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-add-event-summary/assets/css/cvstrac.10.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-add-event-summary/assets/css/cvstrac.tj.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-add-event-summary/assets/css/diff2html.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-add-event-summary/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-add-event-summary/assets/images/HTCondor_red_blk_classic.png" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/release-highlights/">Release Highlights</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/release-plan/">Release Schedule</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-ce/release-highlights/">Release Highlights</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/new.html">News</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/downloads/">Download</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor/documentation/">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-ce/documentation/">HTCondor-CE</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/uw-support/">HTCSS Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/mail-lists/#user">Community Mailing List</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/htcondor-support/#external-support-options">External Support Organizations</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/mail-lists/#user">Users</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/mail-lists/#world">World</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/mail-lists/#developer">Developers</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/past_condor_weeks.html">Workshop Archives</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item" href="/web-preview/preview-add-event-summary/featured-users.html" >
        Featured Users
    </a>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="about-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
        <ul class="dropdown-menu" aria-labelledby="about-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCSS
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/description.html">What is HTCSS?</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-add-event-summary/logos/">Logos</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-add-event-summary/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-add-event-summary/assets/images/HTCondor_red_blk_classic.png"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="about-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                









                

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/release-highlights/">Release Highlights</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/release-plan/">Release Schedule</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor-CE</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/release-highlights/">Release Highlights</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>General</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/new.html">News</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/security/">Security</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/manual/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/downloads/">Download</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/web-preview/preview-add-event-summary/news/2022-06-10-HTCondor-European-Workshop-2022/">HTCondor European Workshop Dates Released</a></h3>
                            <div>
                                <span class="text-muted">June 10, 2022</span>
                            </div>
                            <hr/>
                            <a href="/web-preview/preview-add-event-summary/new.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-add-event-summary/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Documentation</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/documentation/">HTCondor</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/documentation/">HTCondor-CE</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Support</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/uw-support/">HTCSS Contract Support</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/mail-lists/#user">Community Mailing List</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-support/#external-support-options">External Support Organizations</a></td></tr>
                
            </table>
        </div>
    


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                






                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Email Lists</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/mail-lists/#user">Users</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/mail-lists/#world">World</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/mail-lists/#developer">Developers</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor Week</th></tr>
                
                    <tr><td><a href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/past_condor_weeks.html">Workshop Archives</a></td></tr>
                
            </table>
        </div>
    

    


                <div class="d-none d-md-block col-lg-4 my-2">
                    <a href="/web-preview/preview-add-event-summary/featured-users.html"><b>Featured Users</b></a>
                    
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-add-event-summary/featured-users/2022-06-01-PATh-Facility.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Introducing the PATh Facility: A Unique Distributed High Throughput Computing Resource
            </h6>
            <div>
                <span class="text-muted text-decoration-none">June  1, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-add-event-summary/featured-users/2022-06-01-Johri.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                The role of HTC in advancing population genetics research
            </h6>
            <div>
                <span class="text-muted text-decoration-none">June  1, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-add-event-summary/featured-users/2022-06-01-HTCondorWeek-Photos.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                A Long-Awaited Reunion: HTCondor Week 2022 in Photos
            </h6>
            <div>
                <span class="text-muted text-decoration-none">June  1, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-add-event-summary/featured-users/2022-05-12-EHT.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                High-throughput computing as an enabler of black hole science
            </h6>
            <div>
                <span class="text-muted text-decoration-none">May 12, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                </div>
                <div class="d-none d-xl-block col-xl-4 my-2">
                    <div class="card h-100">
                        <img src="https://raw.githubusercontent.com/CHTC/Articles/main/images/Spectrometer.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-add-event-summary/featured-users/2022-04-25-Natzke.html">Learning and adapting with OSG: Investigating the strong nuclear force</a></h5>
                            <hr/>
                            <a href="/web-preview/preview-add-event-summary/featured-users.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-add-event-summary/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Featured Users
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="about-desktop-drawer" class="drawer row justify-content-center" hidden>



                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCSS</th></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/description.html">What is HTCSS?</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-add-event-summary/logos/">Logos</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>CHTC</th></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-add-event-summary/description.html">What is HTCSS?</a></h5>
                            <hr class="mb-2">
                            <div>
                                HTCondor Software Suite (HTCSS) provides an array of services for automating
                                and managing batch workloads and computing resources.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="bg-light mb-4">
    <hr class="m-0">
    <div class="container-xxl py-2">
        <span class="fs-3">Creating New Daemons</span>
    </div>
    <hr class="m-0">
</div>
<div class="container-xxl pb-4">
    <div id="content">
 <span class="section">
  <h2>
   Creating a New Daemon
  </h2>
 </span>
 <p>
 </p>
 <div class="code">
  <pre class="code">From: Erik Paulson
Subject: how to write a new HTCondor daemon
</pre>
 </div>
 <p>
  [This sort of happened by accident, and it's not yet complete. Please give me
feedback, I hope that it can someday be the start of getting started with the
HTCondor codebase document. Also, it's nearly 3AM and I've decided that I dont
want to proof-read the thing]
 </p>
 <p>
  So you want to write a new HTCondor daemon. Well, it happens, and it occurred
to me that we should have some documentation on how you do that. And when
I say documentation, I don't mean some doc++ in the daemon core headers, but a
nice narrative that stops and explains what's going on with things from time
to time. This started out as note to Ben on how I wanted him to get started
on stuff, but it may as well go to everyone.
 </p>
 <p>
  Well, let's pretend that your new daemon is going to be called the
condor_ca_server. We want our daemon to run on Windows and UNIX, and we want
it to be able to use strong authentication and encryption over the network.
 </p>
 <p>
  The first stop in writing a new daemon in HTCondor is the directory
condor_dcskel. This is the bare minimum that you need to have in a Daemon-core
based program to make it work.
 </p>
 <p>
  Here's the first example of that explanation thing I was talking about
earlier - what the hell is a daemon-core based program? Well, HTCondor Daemon
Core is just what the name suggests - it's a library that gives you the core
of a UNIX or NT server process. It gives you a platform-independent way to
create processes and react to the termination of those processes, set timers,
handle signals, and be able to easily handle client "commands" with just a few
functions. Daemon core is goodness and light, and the parts of HTCondor that
don't use daemon core are unadultered evil, like the checkpoint server.
 </p>
 <p>
  One thing that daemon core is not is threaded -
  <code>
   DaemonCore
  </code>
  is an example of
event-driven execution. At it's heart, daemon core is just a big loop that
calls select(2) over and over again. (select is a Unix system call that takes
a list of file descriptors and a timeout, and blocks until something
"interesting" happens, or the timeout occurs. It's the second-coolest system
call ever, after mmap(2)).  This event-driven model is a bit frustrating for
developers, because most people tend to think procedurally, and it's easier
for people understand that what they're doing might be interrupted by the
computer, but when they start back up they'll be right where they left off.
It's not that hard to work in an event-driven model - the key to remember is
when you're going to do something that is going to block, instead of relying
on the threading package to keep things going for you you just have to
register a callback, and you'll logically pick up right where you left off
again, just in a new function. The mantra is: get back to the select() as
quick as you can - whenever you're not in select, nothing else can happen.
 </p>
 <p>
  Daemon Core is also not light weight - all this goodness comes at a price, and
HTCondor's libraries depend on the fact that everything is there. This has led
a lot of the "research" code to avoid using the HTCondor libraries, because
the HTCondor libraries are designed to write HTCondor daemons and tools. (For
example, NeST is implemented with an entirely fresh code base. In some ways,
this sucks, because the NeST developers have to re-learn what took Todd, Derek,
Jim, Rajesh, Pete, and Mike Litzkow many years to learn. But at the same time,
NeST is threaded.) If you're reading this because you want to write a HTCondor
daemon, then the question is already answered for you: you're using daemon
core.
 </p>
 <p>
  Now, back to the condor_dcskel directory: there are two files in there, an
Imakefile and a dcskel_main.C. This is enough to get you started. The first
step is to make a new directory to put your code in. Since our example is the
Mini-CA, we'll call our directory condor_ca. Then we'll copy the Imakefile and
dcskel_main.C into that directory, and rename dcskel_main.C to
ca_server_main.C
 </p>
 <p>
  One quick diversion - we'll need to make sure that our code gets built by the
top-level Imakefile. In our case, this is pretty easy - we only have to
change two lines in src/Imakefile.
 </p>
 <p>
 </p>
 <ol>
  <li>
   Track down the #define Programs line, and add your directory name (without
the condor_ prefix) and add your directory to the end of the line.
  </li>
  <li>
   Then, go find the object_target declarations, and add your directory again.
  </li>
 </ol>
 <p>
  Now, back into the condor_ca directory - let's remove all the references to
the dcskel and make ourselves a real program. First, start out in the
Imakefile, and wherever you see something with dcskel get rid of it. Here's
what the first Imakefile for the mini CA should look like:
 </p>
 <div class="code">
  <pre class="code">__START__

NAME = condor_ca_server
all_target( $(NAME) )

CFLAGS = $(STD_C_FLAGS)
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS)
LIB = $(DAEMONCORE_LIB) $(STD_LIBS)

OBJ = ca_server_main.o

c_plus_target($(NAME),$(OBJ),$(LIB))

html:
release:: all
stripped:: all
static:: all


__END__
</pre>
 </div>
 Nothing too complex - this says we're going to wind up with a condor_ca_server,
the objects to go in it is ca_server_main.o, and to build it like any other
C++ program.
 <p>
  Now let's edit ca_server_main.C:
 </p>
 <p>
  The first thing to change, of course, is the mySubSystem variable - this gets
used all over the place in debugging - Daemon Core will try and log to
$mySubSystem_LOG, and dprintf uses $mySubSystem_DEBUG to decide what debug level
to use, and so on.
 </p>
 <p>
  For a basic daemon core program, that's it! Everything will just work now.
 </p>
 <p>
  Of course, you don't believe me, and so you investigate a bit. (How could you
possibly be done - you didn't even write a main()...) So you read the bit of
code, and actually, you'll notice that you don't see a main() in there.
That's another bit about daemon_core - if you use it, you don't actually get
to control main() anymore - that's way off in the library somewhere. Daemon
core is going to call a couple functions that you need to provide, but
otherwise it's sticks to itself. The 4 functions it's going to call
are:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">main_init -- it gets called at startup.
main_config -- it gets called whenever daemon_core wants you to reconfigure
             yourself (QUESTION: does main_config get called at startup
             as well, or are you supposed to call it in main_init if you care,
             and main_config only gets called on future reconfigs?)
main_shutdown_graceful - it gets called when your program needs to exit, but
             your program can takes it's sweet time in shutting things down.
             I don't actually know if there's a time limit or not, but
             there basically isn't
main_shutdown_fast - you need to turn yourself off now. Don't dally about.
</pre>
 </div>
 <p>
  So, if you compile your new daemon up and run it (with the -f -t arguments,
don't forget!) you'll discover that you're the proud author of a useless
program. We should probably make it do something.
 </p>
 <p>
  Remember how daemon_core works - it's based around select(), and we want to
get back to select as often as we can. So, all we need to do is convince
select() to call a function we write when something interesting happens,
we can have something happen. Remember when I said daemon core lets us have
timers and commands and signals and such? Well, the way you use those is with
a few Register_X calls - there's a Register_Command, a Register_Timer, a
Register_Signal, a Register_Reaper (it gets called when a process exits), and a
Register_Socket. We can register a thing we're interested in, and a function
to get called, and Daemon Core will call that function when select says
something interesting happened on that socket. Those functions are called
handlers.
 </p>
 <p>
  I lied a little bit when I said Daemon Core was a library - right now, we
should start calling it by it's true name, daemonCore. daemonCore is a C++
object, and there is one daemonCore, and only one daemonCore in your program.
daemonCore is derived from the Service class (which is defined in
condor_timer_manager.h, of all places :). This Service class is actually
pretty important, because everything function that we register with daemonCore
that we want to be a class method as a handler, that class needs to be
inherited from the Service class. For now, let's ignore C++ and just register
a C function that prints hello. In the main_init class, add this line:
 </p>
 <div class="code">
  <pre class="code">	daemonCore-&gt;Register_Command(12345, "SAY_HELLO",
			(=CommandHandler=)&amp;say_hello, "say_hello", NULL, READ, D_FULLDEBUG );
</pre>
 </div>
 <p>
  The arguments are:
 </p>
 <ol>
  <li>
   The command number (usually defined in condor_includes/condor_commands.h
  </li>
  <li>
   A text description of the command
  </li>
  <li>
   A "
   <code>
    CommandHandler
   </code>
   ", which is really a function pointer
  </li>
  <li>
   A text description of the handler
  </li>
  <li>
   The service class to use. Since this is a C handler, we don't need one.
  </li>
  <li>
   What Permission level we need to be to call this function (ie
   HOSTALLOW_READ, HOSTALLOW_ADMINISTRATOR, etc)
  </li>
  <li>
   What dprintf level to use (I'm not really clear on how this works...)
  </li>
 </ol>
 <p>
  Of course, we'll need to add the command handler as well, but that's
pretty easy:
 </p>
 <div class="code">
  <pre class="code">int
say_hello(Service *, int, Stream *sock)
{
	dprintf(D_ALWAYS, "Hello, =DaemonCore=!\n");

	return true;
}
</pre>
 </div>
 <p>
  So, now we can print how "Hello,
  <code>
   DaemonCore
  </code>
  " on command, but we still have a
pretty useless program - how do we get the command to our daemon, so daemonCore
will call our function? The answer is CEDAR.
 </p>
 <p>
  Now, most of you have heard of CEDAR, but I'd bet a good chunk of the team
doesn't know just what it is. If the question is, "what does CEDAR do", the
answer is "Yes". CEDAR is our all-singing, all-dancing communications library
that keeps Hao and Sonny in business full time. CEDAR stands for the
HTCondor External DAta Representation library (well, maybe it does.) CEDAR
started out life as a replacement for XDR, which was a way to represent
data between different hosts, assuming the only thing that was portable was
bytes. Sun used it in Sun RPC (so NFS uses/ used it) - thankfully, I'm too
young to have ever had to use it (instead, I get XML. Oh Joy.) But CEDAR has
grown far beyond that.
 </p>
 <p>
  CEDAR, for the low low price of just linking it in, can:
 </p>
 <p>
 </p>
 <ol>
  <li>
   Convert a large number of types between different hosts in a reliable
method. For example, if a client sends a server a double, and they're totally
different architecture, CEDAR will reorder the bytes if need be, and convert
it into the right-size (if a long is 4 bytes on one platform, and 8 on another
CEDAR gets it right.) CEDAR knows about a ton of different types, and it's
Smarter-Than-I-Am - it won't let you do Wrong things, like overflow a signed
integer.
  </li>
  <li>
   CEDAR is also our platform-independent socket and communications library.
CEDAR has two types of Sockets: The
   <code>
    ReliSock
   </code>
   , which gives you a TCP-like
stream, and the
   <code>
    SafeSock
   </code>
   , which gives you a UDP-based message exchange. (The
   <span class="wiki">
    <a class="missing" href="/web-preview/preview-add-event-summary/wiki-archive/pages/SafeSock/index.html" title="Safe Sock">
     SafeSock
    </a>
   </span>
   name has to do with buffering- you can just give it huge packets
and it gets it right, splitting them up into fragments and reassembling it
on the other side)
  </li>
  <li>
   CEDAR can authenticate for you with a whole host of authentication methods -
all you have to do is say "Authenticate" to a CEDAR socket, and it can use
Kerberos, X509, NT
   <code>
    LanMan
   </code>
   , File system, Claim-to-be, and hopefully soon a
password (actually, hopefully soon a PAM module, which gets us a
   <em>
    huge
   </em>
   new
world of stuff)
  </li>
  <li>
   CEDAR can encrypt everything that goes over it, either with Blowfish or
3DES. This is separate from the authentication code, so you can authenticate
without encrypting, or encrypting with only a shared secret ahead of time.
  </li>
  <li>
   CEDAR can bandwidth regulate
  </li>
  <li>
   CEDAR can limit itself to a range of ports
  </li>
  <li>
   CEDAR (will soon enough) support a connection-broker approach, to allow
for third parties to establish connections on a users behalf. We need this
for firewall support, where network access is not symmetric.
  </li>
 </ol>
 <p>
  Now, back to our daemon. We've registered command 12345 as the "Say hello"
command. A command is really nothing more than an integer that daemonCore
is watching for. When you fire up your daemon on the command line, you'll
see it print out "Command socket on &lt;128.105.45.39:22313&gt;" or some such -
that's the socket that daemonCore is watching (through the select loop) for
something interesting to happen on. So, to send a command to our daemon,
all we have to do is open up a socket to &lt;128.105.45.39:22313&gt; (this string,
by the way, is the "sinful string" of the daemon, so named because of a
field in a sockaddr structure).
 </p>
 <p>
  As a digression, we didn't actually have to Register a command - that's just
a nice shortcut that Daemon Core gives us. If we really wanted to, we could
have opened up another socket (not the command socket), and called
Register_Socket() on it. Then, as soon as something connected to that socket,
daemonCore would have called our socket handler, and we could start reading
things off the wire. We could then just try and read an integer off the wire,
and we could compare it to 12345, and if we found a match we could print
out "Hello" right there. We could also treat that socket handler as our our
Register_Command routine, where we call some function depending on what we
read off the network. (There are other reasons to use Register_Command, which
I'll get into in a bit)
 </p>
 <p>
  Once we have that socket, we just send the integer 12345 over, and say done,
and we should get a "Hello" out of our server. It's late, and I've got a bit
more to write yet tonight, so I'm not going to write this code for the example.
 </p>
 <p>
  Part of the reason I'm not going to write the example code is that you don't
want to send a command this way. For one, it's unreasonable to expect people
to know the exact socket address of everything they want to talk to - could
you imaging having to type a full hostname and port just to talk to the
schedd?  So there are better ways of finding out who you should talk to - if
you want to send a command to something, you use the daemon object. The daemon
object is smart - if you want to talk to a schedd, you create a daemon
object and tell it is schedd, and to "locate" that schedd. The daemon object
has all the smarts of how to find the daemon - it knows, for example, that to
find a schedd it should to see if there's a SCHEDD_ADDRESS file, and if not
then go to the collector and find out the sinful string of the schedd. The
daemon object also includes a slightly different API for sending a command -
instead of directly coding up the command integer and sending it, you call
daemon-&gt;startCommand(12345), and it does the same thing, but also takes care
of negotiating all the security stuff for you.
 </p>
 <p>
  I don't want to write too much about this, though - the I think the daemon
object got a rewrite, and the new way is condor_daemon_client. I will make
Zach or Derek explain how all that works.
 </p>
 <p>
  -Erik, writing a howto much longer and later than he expected to be.
 </p>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-5 d-none d-lg-flex">
                <img class="my-auto" height="120" alt="Condor High Throughput Computing" src="/web-preview/preview-add-event-summary/assets/images/CondorAlpha.png" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/security//">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/license.html">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/uw-support/">Internal Contract</a></td></tr>
                            <tr><td><a href="/web-preview/preview-add-event-summary/htcondor-support#external-support-options">External Organizations</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row my-4 justify-content-center">
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://ls.wisc.edu/">
                    

<div style="height:75px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-add-event-summary/assets/images/UW_Madison_Logo.webp">
        <img class="h-100" src="/web-preview/preview-add-event-summary/assets/images/UW_Madison_Logo.png" alt="UW-Madison Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="px-3 d-block m-auto" href="https://www.nsf.org">
                    

<div style="height:100px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-add-event-summary/assets/images/NSF_Logo.webp">
        <img class="h-100" src="/web-preview/preview-add-event-summary/assets/images/NSF_Logo.jpg" alt="NSF Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://morgridge.org/">
                    <img class="" height="40" src="/web-preview/preview-add-event-summary/assets/images/Morgridge_Logo.svg" alt="Morgridge Logo" />
                </a>
            </div>
        </div>
        <hr>
        <div class="row py-3">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
            </div>
        </div>
        <div class="row justify-content-center pb-4">
            <div class="col-lg-8 text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, you can find more information on their <a href="http://www.phoenixsoftware.com">website</a>.
                </span>
            </div>
        </div>
    </div>
</footer>



</body>
</html>
