{"id": 524, "title": "Ticket #524: Remove condor_birdwatcher's dependency on the MFC library", "description": "<blockquote>\ncondor_birdwatcher is the only remaining executable that depends on the MFCs.  Once we remove this dependancy, by making it a pure Win32 application, we will not require a separate target for building Condor under Visual Studio Express.</blockquote>", "remarks": "<blockquote>\n<em>2009-Jun-24 11:43:51 by ziliang:</em> <br/>\n\nPorting to Win32 done and even fixed functionality that was broken in the MFC version.  Display of condor_q and condor_status outputs is screwy but that's due to the respective outputs.  There may be a few instances where MFC stuff is dragged in as dependencies, but hopefully Ben will find any that I missed.  For my part, this is basically done.\n\n<p></p><hr/>\n<em>2010-Feb-01 16:57:27 by jfrey:</em> <br/>\n\nI just tried building the master branch with Visual Studio Express and it failed when building birdwatcher. This was the error: <code>Can't find winres.h</code>. This is an MFC header file.\n\n<p></p><hr/>\n<em>2010-Feb-03 08:20:53 by matt:</em> <br/>\n\nWhat is the target version for this ticket?\n\n<p></p><hr/>\n<em>2010-Aug-16 11:33:24 by ziliang:</em> <br/>\n\nThe header file in question is by default included with the professional versions of Visual Studio, and it was previous included in the Platform SDK, which is circa Windows 2003, in the Include\\mfc folder.  However, Microsoft removed those headers in their more recent SDKs.  We currently require the 2003 Platform SDK as it is the last one that supports building for Windows 2000 so we could just add the path to the folder in the project file and it will be able to find it, but if we move over to a newer SDK when we drop support for 2000, that doesn't work anymore.  Currently seeing if a workaround mentioned online will succeed.\n\n<p></p><hr/>\n<em>2010-Aug-17 14:20:46 by ziliang:</em> <br/>\n\nThe patch adds the path to the MFC headers that are included in the Platform SDK.  That should be sufficient as a stopgap.  However, when cmake permits us to move to a new SDK, we'll have to think of a more permanent solution.\n<hr/>\n<em>2010-Aug-23 17:42:37 by adesmet:</em> <br/>\n\nBulk change of target version from v070403 to v070404 using ./ticket_target_mover.\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Apr-01 14:13:16 by tannenba:</em> <br/>\n\nAttached patch needs a review\n\n<p></p><hr/>\n<em>2011-Apr-08 12:55:08 by ziliang:</em> <br/>\n\nThat patch is not valid anymore with the cmake transition.  I'll spin off a new one once I get the time to test the needed changes.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/215/bwproj.diff\">bwproj.diff</a>\n623 bytes added by ziliang on 2010-Aug-17 19:19:32 UTC.\n<br/>\nPatch to add header path to birdwatcher project file.<br/>\n</li><li><a href=\"../files/323/bw.diff\">bw.diff</a>\n1516 bytes added by ziliang on 2011-Apr-15 18:39:17 UTC.\n<br/>\nNew patch for eliminating MFC dependency in birdwatcher.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-15 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e425f2b541b7effe0462535042db2768a7db781a\">[21409]</a></span>: Remove dependency on MFC header file, hopefully allowing people with Visual Studio Express to build Condor. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=524\" onclick=\"get_ticket_and_populate_wrapper('524'); return false;\" title=\"Remove condor_birdwatcher's dependency on the MFC library\">#524</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Jul-15 15:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/545d0e2d92b4c8f0be952036ed926222b60530f0\">[15102]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=524\" onclick=\"get_ticket_and_populate_wrapper('524'); return false;\" title=\"Remove condor_birdwatcher's dependency on the MFC library\">#524</a></span>: Removed any strings with the words MFC in them.  (By Ben Burnett )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Apr-15 13:58", "status": "resolved", "created": "2009-May-27 12:51", "fixed_version": "2009-May-27 12:51", "broken_version": "v070300", "priority": "4", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "", "creator": "burnett", "rust": "", "customer_group": "other", "visibility": "public", "notify": "willb@redhat.com,ziliang@cs.wisc.edu,tannenba@cs.wisc.edu,jfrey@cs.wisc.edu", "due_date": ""}