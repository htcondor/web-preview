{"id": 6605, "title": "Ticket #6605: Revised regression testing milestones.", "description": "<blockquote>\nWhile the overall and final goals of the testing program haven't changed, the fact that we added PEAK metrics before finishing the SUM metrics tests means we're doing things in a different order.  This ticket supersedes <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=6543\" onclick=\"get_ticket_and_populate_wrapper('6543'); return false;\" title=\"Test multiple SUM metrics.\">#6543</a></span>, <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=6569\" onclick=\"get_ticket_and_populate_wrapper('6569'); return false;\" title=\"Test multiple PEAK metrics.\">#6569</a></span>, and <span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=6554\" onclick=\"get_ticket_and_populate_wrapper('6554'); return false;\" title=\"Advanced Custom Machine Resource Tests\">#6554</a></span>.  I'll commit test improvements on this ticket number until the next point release, at which point I may have to create another ticket for the changes to the next point release.\n\n<p></p><hr/>\nThe existing tests are:\n<ul>\n<li><code>cmr-monitor-basic</code> and <code>cmr-monitor-basic-partitionable</code>\n</li><li><code>cmr-monitor-memory</code> and <code>cmr-monitor-memory-partitionable</code>\n</li><li><code>cmr-monitor-both</code> and <code>cmr-monitor-both-partitionable</code>\n</li></ul>\n\n<p>The first tests one SUM metric, the second one PEAK metric, and the third running both at the same time.  All three tests test one resource per slot of a single resource type.\n\n</p><p>To address the comments on the previous tickets:\n\n</p><p></p><ul>\n<li>The <code>-partitionable</code> tests check dynamic slots.\n</li><li>The <code>cmr-*-ad.cmd</code> files submit eight jobs to a configuration known to have only four resources and check all eight jobs; this checks slot reuse.\n</li></ul>\n\n<p></p><hr/>\nThe next test will build on <code>cmr-monitor-both</code>.  The first step is to run the <code>cmr-monitor-both</code> tests in the presence of another active monitor (also with one resource instance per slot, but now with two resource types).  If these pass, the test should be extended to add tests of the second resource's reporting.  Once that's done, we can consider how to structure our answer to the next section.\n\n<p></p><hr/>\nWe also need to have a test for multiple SUM and multiple PEAK metrics per monitor.  (Although it might make sense to develop a test for each type of metric independently, since we need to test both simultaneously, that may be the only test we actually have/run.)  We would then have to test those monitors in the presence of other monitors (resource types) like them (that is, with multiple SUM and PEAK metrics), as well as test multiple resource instances per slot for each resource type.</blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-19 14:53:10 by tlmiller:</em> <br/>\n\nIt seems, upon further consideration, that the immediate concern is for multiple custom machine resource instances per slot, and not multiple metrics (of either type) per monitor.  We shall therefore implement a test in this ticket for the former and punt the latter to another ticket for work as needed.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=6620\" onclick=\"get_ticket_and_populate_wrapper('6620'); return false;\" title=\"Add tests for multiple SUM and multiple PEAK tests per monitor.\">#6620</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd tests for multiple SUM and multiple PEAK tests per monitor.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-21 16:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a880cbf502ac2ae5adc54f8b88043a31f891a984\">[54550]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Fix bug (don't divide by 0). No, not there, either.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-21 14:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/feebdf11605c540f10ca8c1ea9f27bac5027a7b5\">[54549]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Fix bug (don't divide by 0).  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-21 12:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5ffa8b573a822b24fb5d3398883e0f19ed6e86d3\">[54547]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Reduce cmr-many-instance* test runtimes to below 20 minutes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-20 17:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/611afc56ee3d435f019bc00d1ff8b83b737762bd\">[54544]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Implement cmr-monitor-many-instances[-partitionable], which is just like cmr-monitor-many, except when multiple instances of each resource type are assigned to each slot. Remove obsolete cmr-*.cmd files. Change cmr-monitor-many-partitionable to actually match cmr-monitor-many.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-19 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/32a11e5522f92591b6dbab79cc2f4c23063fd950\">[54543]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Fix obvious bug with multiple instances of the same CMR.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-16 13:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/78ac1d778057a7078c728406ac2721fcfc18292b\">[54530]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Implement TAKO tests for cmr-monitor-many.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-14 16:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/618a9abb45a0e6d4672febb5bd2f45a2327ac293\">[54514]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6605\" onclick=\"get_ticket_and_populate_wrapper('6605'); return false;\" title=\"Revised regression testing milestones.\">#6605</a></span>) Prototype cmr-monitor-many test. TAKO testing not yet implemented.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Mar-22 02:27", "status": "resolved", "created": "2018-Mar-14 16:32", "fixed_version": "2018-Mar-14 16:32", "broken_version": "v080707", "priority": "2", "subsystem": "Tests", "assigned_to": "tlmiller", "derived_from": "#6477", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}