{"id": 4405, "title": "Ticket #4405: Remove the need for the shadow to authenticate", "description": "<blockquote>\nBy inheriting all the sessions it needs to talk to the schedd and execute machine, the shadow should be able to function without actually authenticating.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/wiki-archive/tickets/?ticket=4462\" onclick=\"get_ticket_and_populate_wrapper('4462'); return false;\" title=\"Parent-child security sessions never expire\">#4462</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nParent-child security sessions never expire</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4463\" onclick=\"get_ticket_and_populate_wrapper('4463'); return false;\" title=\"Parent-child security session not used by parent\">#4463</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nParent-child security session not used by parent</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4483\" onclick=\"get_ticket_and_populate_wrapper('4483'); return false;\" title=\"Remove GSI libraries from the shadow\">#4483</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nRemove GSI libraries from the shadow</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-14 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1c8a5574b0350b4497162b2c37cba5d99aa18d24\">[40642]</a></span>: Punch hole for child daemon in parent's authorization table. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4405\" onclick=\"get_ticket_and_populate_wrapper('4405'); return false;\" title=\"Remove the need for the shadow to authenticate\">#4405</a></span> The security session we create during the birth of a daemon with its parent bypasses authentication, but not authorization in subsequent connections between the two. We need to add an authorization for \"condor@child\" at DAEMON level in\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-25 16:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/61c7e6889ca37eefb03ebd280868c4bf5ed7ca74\">[40510]</a></span>: Docs for working parent-child security sessions. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4405\" onclick=\"get_ticket_and_populate_wrapper('4405'); return false;\" title=\"Remove the need for the shadow to authenticate\">#4405</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-25 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/670ee769a02e295c87a892a66338136099993647\">[40509]</a></span>: Children of the schedd now use shadow socket for all commands. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4405\" onclick=\"get_ticket_and_populate_wrapper('4405'); return false;\" title=\"Remove the need for the shadow to authenticate\">#4405</a></span> Daemons can now set an alternate sinful string in the CONDOR_INHERIT environment variable for how a child daemon should contact them. The schedd uses this to have the daemons it spawns use the shadow command socket for all communication.\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-25 15:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/11cc8bf24f100543bc6c1e048a0e408e17ac179a\">[40508]</a></span>: Make parent-child security session in CEDAR usable. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4405\" onclick=\"get_ticket_and_populate_wrapper('4405'); return false;\" title=\"Remove the need for the shadow to authenticate\">#4405</a></span> In order for the pre-created security session between parent and child daemons to be usable, the child needs to know the list of command integers that the session can be used with. We now pass that in the serialized session string passed from\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-19 09:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6307989497d97345175fa895b1f7177ed1a678e8\">[40459]</a></span>: First pass at removing authentication from the shadow. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4405\" onclick=\"get_ticket_and_populate_wrapper('4405'); return false;\" title=\"Remove the need for the shadow to authenticate\">#4405</a></span>  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-21 09:43", "status": "resolved", "created": "2014-Jun-19 09:56", "fixed_version": "2014-Jun-19 09:56", "broken_version": "v080300", "priority": "2", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}