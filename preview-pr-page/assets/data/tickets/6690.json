{"id": 6690, "title": "Ticket #6690: Ensure that Docker jobs run on condor_annex default AMI", "description": "<blockquote>\nWe realized during HTCondor Week that we need to make sure that condor_annex produces Docker-ready instances by default.</blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-20 18:58:13 by tlmiller:</em> <br/>\n\nThis idea hit a snag during testing: Docker jobs can't run if the execute directory is encrypted.  GregT indicates that the problem isn't readily resolvable -- the container is in a different process tree than the starter -- but if we just disable encryption for Docker jobs, I think that would violate the principle of least astonishment for many people.  If we make a code change, handling this problem in matchmaking might be a better one, but that doesn't answer the question about that to do w.r.t. the default annex AMIs.  Maybe we could argue that if a job doesn't explicitly ask for encryption, it's OK to run it unencrypted, even if that's a little surprising from the machine point of view?  It's wildly unclear how many people are worried enough about their data to encrypt the execute directory on the cloud but not worried enough about it to avoid using the cloud at all.\n\n<p></p><hr/>\n<em>2019-Aug-02 17:10:43 by tlmiller:</em> <br/>\n\nWe'll just not encrypt the default Annex AMI for now.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-09 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/49e2598a49ca5d11f0b6be7c30784acccb6565fc\">[57796]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6690\" onclick=\"get_ticket_and_populate_wrapper('6690'); return false;\" title=\"Ensure that Docker jobs run on condor_annex default AMI\">#6690</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6944\" onclick=\"get_ticket_and_populate_wrapper('6944'); return false;\" title=\"Add JobEventLog API for intermittent readers\">#6944</a></span>) Release notes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-02 16:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9de38959a844d12b1f77694adfcebcd8b33a607c\">[57569]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7118\" onclick=\"get_ticket_and_populate_wrapper('7118'); return false;\" title=\"condor-annex-ec2 startup script needs better throttles\">#7118</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6690\" onclick=\"get_ticket_and_populate_wrapper('6690'); return false;\" title=\"Ensure that Docker jobs run on condor_annex default AMI\">#6690</a></span>) Update default annex AMI; now supports Docker.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-02 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b36b0cfe10f3d94531a28cb608ca65b7e4bf93af\">[57564]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7118\" onclick=\"get_ticket_and_populate_wrapper('7118'); return false;\" title=\"condor-annex-ec2 startup script needs better throttles\">#7118</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6690\" onclick=\"get_ticket_and_populate_wrapper('6690'); return false;\" title=\"Ensure that Docker jobs run on condor_annex default AMI\">#6690</a></span>) Update default annex AMI; now supports Docker.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Sep-11 15:49", "status": "resolved", "created": "2018-May-23 13:30", "fixed_version": "2018-May-23 13:30", "broken_version": "v080708", "priority": "2", "subsystem": "Annex", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}