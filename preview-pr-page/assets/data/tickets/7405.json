{"id": 7405, "title": "Ticket #7405: document security implications of condor_chirp", "description": "<blockquote>\nWe would like a clear understanding of the security issues relating to use of chirp for job classad updates and/or file xfer between the submit and execute hosts.</blockquote>", "remarks": "<blockquote>\n<em>2019-Dec-03 13:42:38 by gthain:</em> <br/>\n\nToday, if a job has access to chirp, it can read and write any file on the submitting machine as the submitting user. That is, if anyone on the execute machine steals the chirp token (which is in a file), they can read an write any file on the submit machine as the user. We have talked about ways to limit this to a particular directory tree or the submitting directory, but have not implemented this.\n\n<p></p><hr/>\n<em>2019-Dec-03 22:19:33 by pfc:</em> <br/>\n\nHelp me understand how many of these vulnerabilities exist anyway in a hypothetically compromised execute machine (sans Chirp), given the attacker's ability to communicate with the shadow (and maybe schedd) using the starter's stolen credentials.\n\n<p>Does Chirp really add new vulnerabilities, or just make them easier to exploit?\n\n</p><p></p><hr/>\n<em>2019-Dec-03 22:26:27 by pfc:</em> <br/>\n\nAnd in another direction, how much work (i.e., days, weeks, or months) would it be to add the directory constraint you mention above -- and would that fully address the Chirp-specific vulnerability?\n\n<p></p><hr/>\n<em>2019-Dec-17 11:22:47 by gthain:</em> <br/>\n\nIf chirp is off, then the shadow blocks these requests, so it is a bit of a new vulnerability.\n\n<p>Implementing a fix is a couple days work.\n\n</p><p></p><hr/>\n<em>2020-Mar-10 10:10:42 by pfc:</em> <br/>\n\nClosing since Greg T. says <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7482\" onclick=\"get_ticket_and_populate_wrapper('7482'); return false;\" title=\"Restrict remote files access to a whitelist of directories\">#7482</a></span> is the only security issue we need to worry about.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7482\" onclick=\"get_ticket_and_populate_wrapper('7482'); return false;\" title=\"Restrict remote files access to a whitelist of directories\">#7482</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nRestrict remote files access to a whitelist of directories</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2020-May-04 09:50", "status": "resolved", "created": "2019-Dec-03 13:05", "fixed_version": "2019-Dec-03 13:05", "broken_version": "", "priority": "2", "subsystem": "Security", "assigned_to": "gthain", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "peter.couvares@ligo.org, anderson@ligo.caltech.edu", "due_date": ""}