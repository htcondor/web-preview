{"id": 2640, "title": "Ticket #2640: SUBMIT_REQUIREMENTS: reject condor_submit if fails", "description": "<blockquote>\nOriginal idea from gthain.\n\n<p>New configuration setting: SUBMIT_REQUIREMENTS. When a job is submitted, this expression is evaluated in the context of the job's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>.  If FALSE, the job is rejected.\n\n</p><p>Example use cases:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\"># Jobs must explicitly set (Can't test =!=UNDEFINED since\n# ImageSize defaults to executable's size\nSUBMIT_REQUIREMENTS = ImageSize &gt; 1000\n</pre></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\">#Forbid scheduler universe jobs\nSUBMIT_REQUIREMENTS = JobUniverse != 7\n</pre></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\"># Require an AccountingGroup\nSUBMIT_REQUIREMENTS = AccountingGroup =!= UNDEFINED\n</pre></div>\n\n\n<p>Possible extension: allow a list of tests so we can give more useful rejection messages:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">SUBMIT_REQUIREMENT_LIST=SUBMIT_REQUIREMENT_SCHEDULER_UNIVERSE_FORBIDDEN,SUBMIT_REQUIREMENTS_IMAGESIZE_MUST_BE_SET\nSUBMIT_REQUIREMENTS_IMAGESIZE_MUST_BE_SET_SCHEDULER_UNIVERSE_FORBIDDEN = ImageSize &gt; 1000\nSUBMIT_REQUIREMENTS_SCHEDULER_UNIVERSE_FORBIDDEN = JobUniverse != 7\n</pre></div>\n\n\n<p>then when a submit fails:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% condor_submit myjob\nSubmitting job(s).\nJob rejected because the following requirement(s) failed:\nSUBMIT_REQUIREMENTS_SCHEDULER_UNIVERSE_FORBIDDEN\n</pre></div>\n\n\n<p></p><div>\n<table border=\"1\" cellpadding=\"2\" cellspacing=\"0\" summary=\"EMBED: Status Table of Derived Tickets\">\n<caption>\n  <a href=\"rptview?rn=86\" rel=\"nofollow\" title=\"EMBED: Status Table of Derived Tickets\">EMBED: Status Table of Derived Tickets</a>\n</caption>\n<tbody><tr>\n<td colspan=\"11\"><form action=\"rptview\" method=\"GET\">\n<input name=\"rn\" type=\"hidden\" value=\"86\"/>\nTN: <input name=\"TN\" type=\"text\" value=\"2640\"/>\n<input type=\"submit\" value=\"Go\"/>\n</form></td></tr> \n<tr>\n<th><a href=\"rptview?rn=86&amp;order_by=2&amp;order_dir=ASC&amp;TN=2640\">Developer</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=3&amp;order_dir=ASC&amp;TN=2640\">#</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=4&amp;order_dir=ASC&amp;TN=2640\">Status</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=5&amp;order_dir=ASC&amp;TN=2640\">Type</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=6&amp;order_dir=ASC&amp;TN=2640\">Pri</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=7&amp;order_dir=ASC&amp;TN=2640\">Created</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=8&amp;order_dir=ASC&amp;TN=2640\">Changed</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=9&amp;order_dir=ASC&amp;TN=2640\">Target</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=10&amp;order_dir=ASC&amp;TN=2640\">Due Date</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=11&amp;order_dir=ASC&amp;TN=2640\">Days left</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=12&amp;order_dir=ASC&amp;TN=2640\">Title</a></th>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4818,86\">4818</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n2\n</td>\n<td valign=\"top\">\n2015 Jan\n</td>\n<td valign=\"top\">\n2017 Dec\n</td>\n<td valign=\"top\">\nv080706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nAdd SCHEDD and JOB aliases for SUBMIT_REQUIREMENTS evaluations.\n</td>\n</tr>\n<tr bgcolor=\"#cacae5\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4898,86\">4898</a></td>\n<td valign=\"top\">\nnew\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2015 Feb\n</td>\n<td valign=\"top\">\n2015 Jun\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nSUBMIT_REQUIREMENTS and/or COMMIT_R... and/or JOB_INVARIANTS\n</td>\n</tr>\n<tr bgcolor=\"#cacae5\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=4823,86\">4823</a></td>\n<td valign=\"top\">\nnew\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2015 Jan\n</td>\n<td valign=\"top\">\n2015 Jan\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nAdvertise submit requirements\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njfrey\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=6152,86\">6152</a></td>\n<td valign=\"top\">\ndefer\n</td>\n<td valign=\"top\">\ndefect\n</td>\n<td valign=\"top\">\n5\n</td>\n<td valign=\"top\">\n2017 Feb\n</td>\n<td valign=\"top\">\n2017 Feb\n</td>\n<td valign=\"top\">\nv080601\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nJob submitter crash if submit requirements or transforms fail\n</td>\n</tr>\n</tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Jul-24 19:52:42 by bbockelm:</em> <br/>\n\nIn terms of keeping things consistent, shouldn't we have a SUBMIT_REQUIREMENTS_REJECT_REASON (similar to HOLD_REASON) instead?\n\n<p></p><hr/>\n<em>2015-Jan-07 11:36:47 by gthain:</em> <br/>\n\nDoes this fire on every remote commit?  If so, if there are some jobs in the queue, then an admin sets SUBMIT_REQUIREMENTS to false, do all shadow updates fail?\n\n<p></p><hr/>\n<em>2015-Jan-07 12:35:44 by bbockelm:</em> <br/>\n\nNope - this <strong>only</strong> fires for new classads in the transaction.  The implementation of the pre-existing \"<span class=\"wiki\"><a href=\"wiki?p=ListNewAdsInTransaction\" title=\"List New Ads In Transaction\">ListNewAdsInTransaction</a></span>\" is:\n\n<p></p><div class=\"verbatim\">\n<pre>active_transaction-&gt;InTransactionListKeysWithOpType( CondorLogOp_NewClassAd, new_keys );\n</pre></div>\n\n\n<p>So, I think i works as advertised.\n\n</p><p></p><hr/>\n<em>2015-Jan-08 15:31:13 by tlmiller:</em> <br/>\n\nAs implemented:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">SUBMIT_REQUIREMENT_NAMES = SCHEDULER_UNIVERSE_FORBIDDEN, IMAGESIZE_MUST_BE_SET\nSUBMIT_REQUIREMENTS_IMAGESIZE_MUST_BE_SET = ImageSize &gt; 1000\nSUBMIT_REQUIREMENTS_SCHEDULER_UNIVERSE_FORBIDDEN = JobUniverse != 7\n</pre></div>\n\n\n<p>produces\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">$ condor_submit myjob\nSubmitting job(s).\nERROR: Failed to commit job submission into the queue.\nERROR: Submit requirement SCHEDULER_UNIVERSE_FORBIDDEN not met.\n</pre></div>\n\n\n<p></p><hr/>\n<em>2015-Jan-08 21:44:11 by bbockelm:</em> <br/>\n\nHi,\n\n<p>The auto-generated message is better than none - but significantly worse than what we would do locally with \"SUBMIT_REQUIREMENTS_REASON\" that was there before.  I really would not want to expose the auto-generated ones to users.  Could you put it back?\n\n</p><p>Other than that, the other refactors look fine.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2015-Jan-09 14:39:23 by tlmiller:</em> <br/>\n\nI'm not sure what you don't like about the auto-generated ones; as long as the administrator chooses reasonable names for the requirements, they seem useful.\n\n<p>I strongly oppose the previous solution; writing nested conditionals to determine which clause failed and then returning the corresponding string is error-prone and mostly useless.\n\n</p><p>Instead, I'd rather implement SUBMIT_REQUIREMENT_&lt;NAME&gt;_REASON, which would be a string to return instead of (or in addition to?) the default string.  If you can come up with a good example, I'd be OK making it a <span class=\"wiki\"><a href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> expression which evaluates to a string, although I might prefer SUBMIT_REQUIREMENT_&lt;NAME&gt;_REASON_EXPR for that.\n\n</p><p></p><hr/>\n<em>2015-Jan-09 14:40:51 by tlmiller:</em> <br/>\n\nRetroactive design doc draft --\n\n<p><a class=\"external\" href=\"https://docs.google.com/a/wisc.edu/document/d/1HywDThmWKoJVWIPOrgN58oaiiR0myYl8NPLaafIJ4Lk\">https://docs.google.com/a/wisc.edu/document/d/1HywDThmWKoJVWIPOrgN58oaiiR0myYl8NPLaafIJ4Lk</a>\n\n</p><p></p><hr/>\n<em>2015-Jan-12 14:43:59 by tlmiller:</em> <br/>\n\nImplement SUBMIT_REQUIREMENT_&lt;NAME&gt;_REASON as an expression, figuring people wouldn't mind adding quotes if they just wanted to use constant strings.\n\n<p></p><hr/>\n<em>2015-Jan-12 15:04:57 by tlmiller:</em> <br/>\n\n(Documentation draft/notes -- Admin Manual)\n\n<p><strong>Submit Requirements</strong>\n\n</p><p>You may wish to restrict which jobs may enter the queue of a particular scheduler.  For instance, you may not wish to clog up your queue with jobs you know will never be able to run (for instance, standard universe jobs in a queue with restricted networking).  Or you may require that all jobs in the queue request a minimum amount of memory.\n\n</p><p>To do so, set the configuration knob SUBMIT_REQUIREMENT_NAMES.  This comma- or space- separated list tells HTCondor the names of your submit requirements; pick something descriptive, since the name is a major component of the default error message if a user attempts to submit a job which fail to meet the requirements.  For our example:\n\n</p><p></p><div class=\"verbatim\">\n<pre>SUBMIT_REQUIREMENT_NAMES = NotStandardUniverse, MinimalRequestMemory\n</pre></div>\n\n\n<p>The names in this list must be valid configuration knob names.  HTCondor sets each named requirement by looking up the configuration knob SUBMIT_REQUIREMENT_&lt;NAME&gt;.  Each knob must contain a valid <span class=\"wiki\"><a href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> expression that evaluates to a bool (or something convertible thereto).  For our example:\n\n</p><p></p><div class=\"verbatim\">\n<pre>SUBMIT_REQUIREMENT_NotStandardUniverse = JobUniverse != 1\nSUBMIT_REQUIREMENT_MinimimalRequestMemory = RequestMemory &gt; 512\n</pre></div>\n\n\n<p>Note that <span class=\"wiki\"><a href=\"wiki?p=JobUniverse\" title=\"Job Universe\">JobUniverse</a></span> and <span class=\"wiki\"><a href=\"wiki?p=RequestMemory\" title=\"Request Memory\">RequestMemory</a></span> are both job ad attributes.  Each submit requirement is evaluated (in the listed order) in the context of the the schedd ad (in the MY namespace) and the job ad (the TARGET namespace); attributes not found in the job ad will be look up in the schedd ad, as usual.  The first requirement that fails terminates evaluation and is the only reason reported.\n\n</p><p>You may also set a rejection reason for each requirement:\n\n</p><p></p><div class=\"verbatim\">\n<pre>SUBMIT_REQUIREMENT_NotStandardUniverse_REASON = \"This schedd does not accept standard universe jobs; try again elsewhere.\"\nSUBMIT_REQUIREMENT_MinimimalRequestMemory_REASON = strcat( \"The job only requested \", RequestMemory, \" megabytes.  If that's really how much memory your job needs, contact me at ...\" )\n</pre></div>\n\n\n<p>A rejection reason has the same name as the corresponding requirement, except with _REASON appended, and must be a <span class=\"wiki\"><a href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> expression which evaluates to a string.  Thus, in our first example, we had to put double quotes around the whole explanation.  In the second example, we construct a string using ClassAd's string manipulation funcations.\n\n</p><p>If you submit multiple jobs per cluster, please note that while we evaluate the submit requirements against individual jobs, any individual job failing the submit requirements will cause the entire submit to fail; the other jobs in the cluster will not enter the queue.\n\n</p><p></p><hr/>\n<em>2015-Jan-12 15:09:21 by tlmiller:</em> <br/>\n\nBrian also suggested, as long as we're changing the protocol, that we should return a <span class=\"wiki\"><a href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> instead of a bare string, for future-proofing.  This is probably a good idea.\n\n<p></p><hr/>\n<em>2015-Feb-12 14:22:04 by tlmiller:</em> <br/>\n\nDesign doc updated; hopefully it became clearer.\n\n<p></p><hr/>\n<em>2015-Feb-18 14:37:54 by tlmiller:</em> <br/>\n\nToddT reviewed the design and found it generally acceptable.  His concerns will be addressed in a child ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4818\" onclick=\"get_ticket_and_populate_wrapper('4818'); return false;\" title=\"Add SCHEDD and JOB aliases for SUBMIT_REQUIREMENTS evaluations.\">#4818</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd SCHEDD and JOB aliases for SUBMIT_REQUIREMENTS evaluations.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4823\" onclick=\"get_ticket_and_populate_wrapper('4823'); return false;\" title=\"Advertise submit requirements\">#4823</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdvertise submit requirements</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4898\" onclick=\"get_ticket_and_populate_wrapper('4898'); return false;\" title=\"SUBMIT_REQUIREMENTS and/or COMMIT_R... and/or JOB_INVARIANTS\">#4898</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSUBMIT_REQUIREMENTS and/or COMMIT_R... and/or JOB_INVARIANTS</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=6152\" onclick=\"get_ticket_and_populate_wrapper('6152'); return false;\" title=\"Job submitter crash if submit requirements or transforms fail\">#6152</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nJob submitter crash if submit requirements or transforms fail</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-16 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/28ac85a2c6d53b2d81fec535d02dba44a995e1a1\">[44656]</a></span>: improve 8.3.5 documentation for submit requirements <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-20 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a8740735b3eba7c8cc1676bf6efafeabb6e2ff3f\">[43650]</a></span>: completion of first pass documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-19 15:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/80174204560d2110e485bf024d1f4fbf01f466a8\">[43629]</a></span>: more, but not all the documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-19 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7048bc8d20e09af6c995116cc83a3c2de83b4f03\">[43627]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Add SUBMIT_REQUIREMENT_NAMES to param_info.in.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-19 11:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/048a407a6c5aa59a1aad02e95d8eef5f32ac1bb3\">[43623]</a></span>: documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>: refactor sub/subsub sections to accomodate new subsection  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-11 17:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d11abdf5d970ef434970c463133c967556ae93dd\">[43331]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Remove a declared but not defined function that nobody was using, and don't use it in the new code, either.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Feb-10 14:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d828f9b1fd3436ff471678e32db5375b2c2cfd0b\">[43292]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Change the new protocol to be ClassAd-based, for future-proofing.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-12 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/961d6a7d57af58eb1cec1a19cce83087772ba694\">[42169]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Add SUBMIT_REQUIREMENT_&lt;NAME&gt;_REASON.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-09 11:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4bfcbe68d412f986ff0e84474dd9e05d310c1aeb\">[42155]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Having the schedd be TARGET in the requirement expressions is wrong.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-09 11:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9e831a02f4fa8b91ce6eb8cfa02fb9898c7ad744\">[42153]</a></span>: Since it's no longer necessary, let's not randomly change the <span class=\"wiki\"><a href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> API. Revert \"Some lifetime management classes for classads. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>\" This reverts commit 8857cbcefcb59658d00bf59a8827752c8cadef60.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-08 16:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/240c60d786f45e5754600d40fd26ce803cfe10d2\">[42150]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Clean up some infelicities; thanks to TJ.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-08 15:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fb6bc7d65f8e9251d447ff91680710ddf89bad92\">[42146]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>) Move the submit requirements check to the receivers code to chances of checking a non-submit commit. Implement ticket's proposed system for better error messages.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-05 08:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/31c2d56be8aae2a037bb8e464d7bbf4a2d6769c5\">[42090]</a></span>: Client-side support for SUBMIT_REQUIREMENTS_REASON. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-05 08:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/35b4149441194095715bc143283d6a1794a926fe\">[42089]</a></span>: Add support for SUBMIT_REQUIREMENTS_REASON. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-05 08:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2f9dcd7a246df2a609f449b21b334ddef39d7c13\">[42088]</a></span>: Allow the <span class=\"wiki\"><a href=\"wiki?p=MatchClassAdDoesNotOwn\" title=\"Match Class Ad Does Not Own\">MatchClassAdDoesNotOwn</a></span> understand non-strict eval. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-03 22:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c09e86c26d9c7ced0c1a51fd1e1441d79de2cf86\">[42086]</a></span>: Allow schedd to set SUBMIT_REQUIREMENTS. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-03 22:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6660e0fb80426019a169233d692ccf615990789c\">[42085]</a></span>: Add ability to set requirements for a commit of new classads. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-03 22:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8857cbcefcb59658d00bf59a8827752c8cadef60\">[42084]</a></span>: Some lifetime management classes for classads. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2640\" onclick=\"get_ticket_and_populate_wrapper('2640'); return false;\" title=\"SUBMIT_REQUIREMENTS: reject condor_submit if fails\">#2640</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-May-27 14:45", "status": "resolved", "created": "2011-Nov-16 10:54", "fixed_version": "2011-Nov-16 10:54", "broken_version": "v000000", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "tlmiller", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "tannenba@cs.wisc.edu, zmiller@cs.wisc.edu", "due_date": "20141124"}