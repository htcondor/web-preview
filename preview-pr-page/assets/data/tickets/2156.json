{"id": 2156, "title": "Ticket #2156: Clean up test's stderr", "description": "<blockquote>\nOur test generate useless noise in standard error.  It would be nice to say nothing in the default, successful case, simplifying debugging. <a class=\"external\" href=\"http://nmi-s006.cs.wisc.edu//nmi/run/cndrauto/2011/05/cndrauto_nmi-s006.cs.wisc.edu_1305156978_11530/userdir/nmi:x86_64_rhap_5/job_ckpt_integers_std-1.err\">Representative output.</a>\n\n<p></p><ul>\n<li>\"Warning: Host name 'nmi-0251' is not an FQDN!! at batch_test.pl line 118.\" - Move to standard output? Don't complain at all, since it's clearly not a problem?\n</li><li><div class=\"strike\">\n<strike>\"Error executing condor_config_val: '0' 'Illegal seek' at batch_test.pl line 1218.\"</strike></div>\n - Test is backward, not actually failing.\n</li><li><div class=\"strike\">\n<strike>\"Configuration source:\" and \"Local configuration source:\"</strike></div>\n - batch_test.pl merges stderr into stdout now. Core problem is <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2157\" onclick=\"get_ticket_and_populate_wrapper('2157'); return false;\" title=\"condor_config_val -config mixes stderr/stdout output\">#2157</a></span></li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-May-12 15:59:23 by adesmet:</em> <br/>\n\n\"Configuration source:\" and \"Local configuration source:\" are being emitted by condor_config_val, which mixes output to stderr and stdout (<a class=\"file\" href=\"rlog?f=src/condor_tools/config_val.cpp\">/src/condor_tools/config_val.cpp</a> line 716-729).  This seems...  wrong. But it's worth checking to see if this is intentional; perhaps to let scripts get the list of files in stdout and ignore stderr? See <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2157\" onclick=\"get_ticket_and_populate_wrapper('2157'); return false;\" title=\"condor_config_val -config mixes stderr/stdout output\">#2157</a></span>\n\n<p></p><hr/>\n<em>2011-May-12 16:38:58 by adesmet:</em> <br/>\n\n<a class=\"external\" href=\"http://nmi-s006.cs.wisc.edu/results/Run-condor-branch.php?branch=workspace:%20batch_test.pl%20speed%20fix%20test&amp;user=adesmet\">testing</a>\n\n<p></p><hr/>\n<em>2011-May-13 11:32:24 by adesmet:</em> <br/>\n\nConfirmed. A typical test generates no stderr now, simpifying checking for errors.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-May-12 16:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f26339f59fada9e2f33cc181bb74442290964122\">[21860]</a></span>: The entire hostname checking codepath appears to serve no purpose and has several disadvantages. Removed. - <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2158\" onclick=\"get_ticket_and_populate_wrapper('2158'); return false;\" title=\"batch_test.pl waits 10 seconds if a FQDN can't be found\">#2158</a></span> - Stop uselessly sleep(10)ing - <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span> - Stop writing useless warning to stderr ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2158\" onclick=\"get_ticket_and_populate_wrapper('2158'); return false;\" title=\"batch_test.pl waits 10 seconds if a FQDN can't be found\">#2158</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-May-12 16:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/043c8a20ef77505fac8e565e9ea1621c6c07a1ae\">[21859]</a></span>: When calling \"condor_config_val -config\", merge stdout and stderr together. We're just dumping it for user review anyway and it's more useful in light of <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2157\" onclick=\"get_ticket_and_populate_wrapper('2157'); return false;\" title=\"condor_config_val -config mixes stderr/stdout output\">#2157</a></span> Testing change, no version history needed. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-May-12 15:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/375b9c311257698108eabe44395628311080db8d\">[21858]</a></span>: Fix spurious warning in test output. Test for success was backward, Perl's close returns true on success, not false. Also added a comment about some questionable logic. Regression testing, not use visible, no version history entry necessary. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2156\" onclick=\"get_ticket_and_populate_wrapper('2156'); return false;\" title=\"Clean up test's stderr\">#2156</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-May-13 11:32", "status": "resolved", "created": "2011-May-12 15:48", "fixed_version": "2011-May-12 15:48", "broken_version": "v070600", "priority": "4", "subsystem": "Tests", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": "20110517"}