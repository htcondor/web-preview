{"id": 1654, "title": "Ticket #1654: getrlimit() broken in stduniv", "description": "<blockquote>\ngetrlimit() is broken in stduniv. See the rust ticket.\n\n<p>I discovered that some backwards compatibility code in the CEDAR code for the rlimit structure was breaking the 64-bit transfer of the RLIM_INFINITY value.\n\n</p><p>While coverage testing, I found that the 32-bit version was also broken in that\nwe used __NR_getrlimit on the i386 kernel, which is 2gb limited (and produced the same output on 32-bit linux as the 64-bit problem, but for completely different reasons). I changed it to use __NR_ugetrlimit on the i386 kernel since that can handle up to 4gb and also RLIM_INFINITY properly.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-14 16:49:38 by psilord:</em> <br/>\n\nAdd documentation to manual, then resolve.\n\n<p></p><hr/>\n<em>2010-Sep-15 16:07:19 by psilord:</em> <br/>\n\nDocumentation updated. Resolved.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-15 14:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6129aad99501f2a4cc94b56939b29fb1c96cc3ef\">[25678]</a></span>: Added blurb for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1654\" onclick=\"get_ticket_and_populate_wrapper('1654'); return false;\" title=\"getrlimit() broken in stduniv\">#1654</a></span>.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Sep-14 16:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f6d868a0ba54715f90889d55a178f8d71431d7a0\">[18975]</a></span>: Fixed getrlimit() in the stduniv. The 64-bit version was broken by old crusty compatibility code in cedar from when the fields of the rlimit structure changed from signed to unsigned.\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Sep-15 16:07", "status": "defer", "created": "2010-Sep-14 16:46", "fixed_version": "2010-Sep-14 16:46", "broken_version": "v070400", "priority": "5", "subsystem": "Std", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "a20662", "customer_group": "ligo", "visibility": "public", "notify": "psilord@cs.wisc.edu,pcouvare@caltech.edu", "due_date": "20100914"}