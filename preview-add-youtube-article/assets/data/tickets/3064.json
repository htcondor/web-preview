{"id": 3064, "title": "Ticket #3064: debug_wait should be volatile", "description": "<blockquote>\n<a class=\"file\" href=\"rlog?f=src/condor_daemon_core.V6/daemon_core_main.cpp\">/src/condor_daemon_core.V6/daemon_core_main.cpp</a> around line 2044:\n<div class=\"code\">\n<pre class=\"code\">                    int debug_wait = 1;\n                    dprintf(D_ALWAYS,\n                                    \"%s is TRUE, waiting for debugger to attach to pid %d.\\n\",\n                                    debug_wait_param.Value(), (int)::getpid());\n                    while (debug_wait) {\n                            sleep(1);\n                    }\n</pre></div>\n\n\n<p>The compiler is free to optimize debug_wait out, meaning you can't just \"set debug_wait=0\" because debug_wait no longer exists.  Fix should be as simple as declaring it volatile.\n\n</p><p>This functionality, exposed via &lt;SUBSYS&gt;_DEBUG_WAIT is undocumented and intended only for internal use.  Thus, this change shouldn't be documented.\n\n</p><p>Workaround (for anyone using the old code): If you're using gdb, try \"jump daemon_core_main.cpp:2046\".  However, this doesn't reliably work.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jun-21 13:17:02 by adesmet:</em> <br/>\n\nCode reviewed by johnkn\n<hr/>\n<em>2012-Aug-23 14:10:57 by zmiller:</em> <br/>\n\nBulk change of target version from v070802 to v070803 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-21 11:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/238be31c5f20c0ca7bd7e86b3b29684526424f70\">[32446]</a></span>: Fix &lt;SUBSYS&gt;_DEBUG_WAIT; make debug_wait volatile. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3064\" onclick=\"get_ticket_and_populate_wrapper('3064'); return false;\" title=\"debug_wait should be volatile\">#3064</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Dec-05 17:41", "status": "resolved", "created": "2012-Jun-18 11:40", "fixed_version": "2012-Jun-18 11:40", "broken_version": "v070801", "priority": "2", "subsystem": "", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}