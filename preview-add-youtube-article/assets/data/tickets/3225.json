{"id": 3225, "title": "Ticket #3225: Set notification from DAGMan for jobs", "description": "<blockquote>\nFrom the following message on condor-users:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">From: Michael Fienen &lt;mike@xxxxxxx.xxx&gt;\nDate: Tue, 11 Sep 2012 00:24:09 -0500\nTo: Condor-Users Mail List &lt;condor-users@cs.wisc.edu&gt;\nSubject: [Condor-users] DAGman submit file - disable email notification\n\nHello Condor List!\n\nCan anyone provide a simple example of how to disable email notification of a DAG job?\n\nI've tried addition \"notification = never\" in the DAG submit file.\n\nAlso tried as an argument for condor_submit_dag but doesn't seem to be working there either.\n\nI feel like there is an obvious answer but it's eluding me.\n\nMany thanks!\n\nMike Fienen\nUS Geological Survey\n</pre></div>\n\n\n<p>It should be pretty easy to add a command-line flag to <code>condor_submit_dag</code> to globally set the notification of its jobs.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Oct-01 09:49:00 by nwp:</em> <br/>\n\nHere is how this was resolved:\n<div class=\"code\">\n<pre class=\"code\">From mike@xxxxxxx.xxx Tue Sep 11 10:35:28 2012\nSubject: Re: [Condor-users] DAGman submit file - disable email notification\nFrom: Michael Fienen &lt;mike@xxxxxxx.xxx&gt;\nDate: Tue, 11 Sep 2012 10:35:20 -0500\nCc: Michael Fienen &lt;mike@xxxxxxx.xxx&gt;,\n        Condor-Users Mail List &lt;condor-users@cs.wisc.edu&gt;\n\nNathan\n\nThanks again for the help. I was making a syntactical error:\nI submitted --&gt;  condor_submit_dag -notification=never &lt;dag_file&gt;.dag\n\nIt works fine when I {properly} remove the \"=\"\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Oct-24 13:30:30 by nwp:</em> <br/>\n\nHi Kent,\n\n<p>I have had this itch to scratch for a while with DAGMan.  Will you please review?  Code is on <code>V7_9-gittrac_3225-branch</code>.\n\n</p><p></p><hr/>\n<em>2012-Oct-24 13:44:40 by wenger:</em> <br/>\n\nDoes this flag turn off notification from just the DAGMan job itself, or also from all of the node jobs?\n\n<p></p><hr/>\n<em>2012-Oct-24 13:49:02 by nwp:</em> <br/>\n\nAll of the node jobs.  It is supposed to leave the DAGMan job itself alone... which it does not appear to do, now that I look at it again.  I want to leave the \"-notification\" flag independent of this one.  I have one problem to fix, anyway.\n\n<p></p><hr/>\n<em>2012-Oct-24 14:00:01 by nwp:</em> <br/>\n\nThe test suite is messing me up here.  If I just do condor_submit_dag directly, then I do get notification for the DAGMan job itself (but not the child jobs).  So it appears to be working as I planned.\n\n<p></p><hr/>\n<em>2012-Nov-02 15:06:35 by wenger:</em> <br/>\n\nsuppress_notification is in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SubmitDagDeepOptions\" title=\"Submit Dag Deep Options\">SubmitDagDeepOptions</a></span> struct, but it\ndoesn't get set anywhere in runSubmitDag() (dagman_recursive_submit.cpp),\nso I don't think it will actually get passed down to sub-DAGs.\n(I guess it wouldn't be a bad idea to add a sub-DAG to the test, although\nfor such a test to work, you'd have to use the command-line argument rather\nthan the config macro at the top level, because of gittrac <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2111\" onclick=\"get_ticket_and_populate_wrapper('2111'); return false;\" title=\"Config values are propagated from top-level DAGs to sub-DAGs\">#2111</a></span>.)\n\n<p></p><hr/>\n<em>2012-Nov-05 12:40:16 by nwp:</em> <br/>\n\nAdded another test for a command-line test, and a subdag; rebased onto master, and pushed.\n\n<p></p><hr/>\n<em>2012-Nov-06 10:19:12 by nwp:</em> <br/>\n\nAs discussed in FW meeting 5 November 2012, the default is changed so that jobs submitted by DAGMan never send notification.\n\n<p></p><hr/>\n<em>2012-Nov-06 11:24:13 by wenger:</em> <br/>\n\nIf the default is now true, the -suppress_notification command-line flag doesn't do any good, does it?  Shouldn't the sense of this be changed?\n\n<p></p><hr/>\n<em>2012-Nov-06 11:29:08 by nwp:</em> <br/>\n\nTrue enough.  I will add a -dont_suppress_notification flag and document it.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-13 16:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b6d26525f43140a7869b2ee0fffa9ecda49d28e2\">[34111]</a></span>: edits of all new documentation for the DAGMan notification email changes ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-06 15:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c70ba7868385a3ee15d7203590f9d9b9ee7bb04a\">[34022]</a></span>: Enable tests for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span> Discovered that the tests for suppress_notification were not enabled. Fix tests. Complete documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span>. Add a command line flag to enable notification. Add a new -dont_suppress_notification command line flag to override new default for notification  (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-06 10:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3c4cab10d539567f8af20cdb6c0da7fb2d665258\">[34009]</a></span>: Change default for job notification by DAGMan <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span> As discussed in FW meeting on 5 November 2012, change the default to true: that is, unless otherwise requested, all jobs submitted by condor_dagman will not send email notification of events.\u00a0[...]\n (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-05 12:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dbf7fbe29638f2623b6f32ae093b15afd06c1450\">[33979]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span>: added \"-suppress_notification\" to the list of options that are passed to sub-DAGs. Committer: Nathan W. Panike  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Nov-05 12:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c695aaa07665b4dfd88d9aaf671f9629a832b5ad\">[33978]</a></span>: Add option to suppress notification for DAGman jobs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3225\" onclick=\"get_ticket_and_populate_wrapper('3225'); return false;\" title=\"Set notification from DAGMan for jobs\">#3225</a></span> It would be nice to disable notification for all DAGman jobs without going through each submit file and entering a \"notification = never\" line.  (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jan-29 14:16", "status": "resolved", "created": "2012-Sep-11 08:35", "fixed_version": "2012-Sep-11 08:35", "broken_version": "", "priority": "3", "subsystem": "Dag", "assigned_to": "nwp", "derived_from": "#2155", "creator": "nwp", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu", "due_date": ""}