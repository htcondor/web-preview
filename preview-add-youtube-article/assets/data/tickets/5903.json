{"id": 5903, "title": "Ticket #5903: Fix RESCHEDULE command sent to schedd after job submission", "description": "<blockquote>\nIn order for the schedd to promptly handle a newly-submitted job, the submitter should send a RESCHEDULE command to the schedd. Otherwise, the job may sit idle for many minutes, even if there are resources available to run it immediately.\n\n<p>We've found two issues that foil this way to have the schedd promptly handle a new job:\n</p><ul>\n<li>The Job Router doesn't send a RESCHEDULE.\n</li><li>The DCSchedd object always sends RESCHEDULE via UDP, even if the schedd can't accept UDP messages (e.g. it's using shared port).</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-29 10:39:00 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Code review is good, as now the job router simply does the exact same thing as condor_submit.  Only criticism of the patch is the version history entry is written like it is targeted to a developer (i.e. something appropriate for a git commit message), and not targeted for an end-user.\n\n</p><p>A couple potential thoughts for the future (and for a separate tickets) come to mind:\n\n</p><p></p><ol>\n<li>the schedd should automatically do a reschedule at controlled intervals whenever a job moves into the idle state, thus rescheduling whenever\n\n<p></p></li><li>even with shared_port, seems like daemons other than the shadow and starter could have a UDP command socket enabled for intra-machine communication.</li></ol>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-13 15:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7bdf5236574a0c48ef2a2691bff253644dc2c656\">[49193]</a></span>: Docs for RESCHEDULE command bug fixes. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5903\" onclick=\"get_ticket_and_populate_wrapper('5903'); return false;\" title=\"Fix RESCHEDULE command sent to schedd after job submission\">#5903</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-13 15:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9e4b112fca91a9b8ae204af4ec3db8a5fe168c2d\">[49191]</a></span>: Send RESCHEDULE via TCP if schedd can't receive UDP. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5903\" onclick=\"get_ticket_and_populate_wrapper('5903'); return false;\" title=\"Fix RESCHEDULE command sent to schedd after job submission\">#5903</a></span> Shared port and CCB prevent the use of UDP.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-13 15:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/36edbee5f0cd2f9ddd8774af62bc237778237eb1\">[49190]</a></span>: Job Router should send RESCHEDULE after submitting a job. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5903\" onclick=\"get_ticket_and_populate_wrapper('5903'); return false;\" title=\"Fix RESCHEDULE command sent to schedd after job submission\">#5903</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Sep-29 10:42", "status": "resolved", "created": "2016-Sep-13 15:23", "fixed_version": "2016-Sep-13 15:23", "broken_version": "v080400", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "tannenba", "derived_from": "#3056", "creator": "jfrey", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}