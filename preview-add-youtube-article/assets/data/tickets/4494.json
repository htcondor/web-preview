{"id": 4494, "title": "Ticket #4494: IPv6: mixed-mode submit node (schedd/shadow)", "description": "<blockquote>\nA submit node should be able to simultaneously interact with an IPv4 pool and an IPv6 pool. This is not a final solution, it's a hack to render to create a useful system and enable testing in production.  Little to none of the work will remain when full mixed-mode support is available.\n\n<p>Whenever passing it's own address to another daemon, it should select the same protocol being used for the local connection. For example when advertising to an IPv6 collector, the schedd ad will contain only IPv6 addresses.\n\n</p><p>Design document: <a class=\"external\" href=\"https://docs.google.com/document/d/1cYpymli_sqyCvVq1OxeQKijrMkMcUkyCO36C7fFAC9I/edit?usp=sharing\">https://docs.google.com/document/d/1cYpymli_sqyCvVq1OxeQKijrMkMcUkyCO36C7fFAC9I/edit?usp=sharing</a>\n\n</p><p>We may be dependent on <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4513\" onclick=\"get_ticket_and_populate_wrapper('4513'); return false;\" title=\"IPv6: ConvertDefaultIPToSocketIP always sets IPv4 address\">#4513</a></span>: IPv6: ConvertDefaultIPToSocketIP always sets IPv4 address\n\n</p><p>Successors:\n</p><ul>\n<li><span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4715\" onclick=\"get_ticket_and_populate_wrapper('4715'); return false;\" title=\"Security and DNS in mixed-mode IPv4/IPv6\">#4715</a></span> Security\n</li><li><span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4714\" onclick=\"get_ticket_and_populate_wrapper('4714'); return false;\" title=\"Does CCB work in mixed-mode IPv4/IPv6?\">#4714</a></span> CCB\n</li><li><span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4712\" onclick=\"get_ticket_and_populate_wrapper('4712'); return false;\" title=\"Fix shared_port with mixed-mode IPv4/IPv6\">#4712</a></span> Shared port</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Sep-18 11:04:52 by adesmet:</em> <br/>\n\nNotes for self\n<ul>\n<li>debian-00 has IPv4 and IPv6 connectivity. It is the collector in these tests\n</li><li>debian-01 only has IPv6 connectivity. Startd\n</li><li>debian-02 only has IPv4 connectivity. Startd\n</li><li>debian-03 has IPv4 and IPv6 connectivity. Schedd unused.\n</li><li>debian-04 has IPv4 and IPv6 connectivity.\n</li></ul>\n\n<p></p><hr/>\n<em>2014-Oct-20 11:18:49 by adesmet:</em> <br/>\n\ndebian-01, if ENABLE_IPV6=TRUE and ENABLE_IPV4=TRUE, it will prefer 127.0.0.1 over an IPv6 interface. Clearly wrong. Workaround: ENABLE_IPV4=FALSE, but shouldn't be necessary.\n\n<p></p><hr/>\n<em>2014-Nov-12 13:02:52 by adesmet:</em> <br/>\n\nMerged in to 8.3.2</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=4690\" onclick=\"get_ticket_and_populate_wrapper('4690'); return false;\" title='Hunt down \"TODO.*IPv\"'>#4690</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nHunt down \"TODO.*IPv\"</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5288\" onclick=\"get_ticket_and_populate_wrapper('5288'); return false;\" title=\"NETWORK_HOSTNAME broken\">#5288</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nNETWORK_HOSTNAME broken</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jan-14 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f550c5235c4197f39b2631c1eadce558ddd0e5d\">[42217]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Correct a correction that gave the collector omniscience.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-22 18:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c9fbfe61dc64c24f6928f943bd539289e67fde60\">[42017]</a></span>: edit new IPv4/IPv6 mixed mode documentation, and move version history item to be first in list <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-22 16:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3fc15c2f22dda1801f45d0605234ac846c579948\">[42010]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Document how well (or not) IPv6 works in the 8.3.2 manual.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-01 11:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ae3e906ecdb6657ac29864fdfb21fab110dd2e66\">[41782]</a></span>: Revert \"Make address rewriting info D_FULLDEBUG+D_NETWORK. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>\" This reverts commit 24cf55e60712952f52376381f2e4afb28ca7f5a9.  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Dec-01 03:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/24cf55e60712952f52376381f2e4afb28ca7f5a9\">[41779]</a></span>: Make address rewriting info D_FULLDEBUG+D_NETWORK. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> Previously it was just D_FULLDEBUG, and the messages were filling up logs with lots of clutter. Now to see address rewriting info, put D_NETWORK at level 2 or have both D_NETWORK and D_FULLDEBUG.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-06 14:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0b4cb93be874b9a8d55e7c61a61e277679b19b95\">[41601]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Fix a typo that accidentally turned off address rewriting.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-03 17:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0fc2d7a5d341297ebe8c089669d722b4733be167\">[41568]</a></span>: Document dual-protocol schedd <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-31 11:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/847d178240e6f9ba46377f5884706cc1aee38f7c\">[41539]</a></span>: Various <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> fixes.  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-30 14:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1511a2f109c40d379902d9e42c3b458704cbb7a\">[52124]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) A Windows test fix.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-29 15:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6de8e0263a6092a9998e3e5d069660affde48811\">[41515]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Implement condor_nmi_submit --append-config-dir, which lets you specify a directory containing a file name 'testconfigappend', which will be appended to the main condor config for the tests for this specific run and this specific run only.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-29 13:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/99ced51b3d6f94f518b2f2fb1b181d2cc9e3c46c\">[41512]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) The test glue now skips the standard universe tests if they're disabled by testconfigappend.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-29 12:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cb46c012230878d6d9137984c09cb9234a2f6143\">[41513]</a></span>: Update Win32 sysapi_get_network_device_info_raw Was updated as part of mixed mode IPv6/IPv4 work. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-28 22:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/14fd27f34a152efffe1e1ed41b8afd1f59250f12\">[41511]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Missed a few standard universe tests.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-28 16:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6d08a6a9737b04f9792e93044edae23e83ea8eaa\">[41510]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) To appease the compiler, as well as uncertainty as to its desirability, return the null address rather than assert if no IPv4 address is found.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-28 15:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a8fdf4bcd8d04169c3b0aec8f119544d4f250697\">[41509]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Check for getaddrinfo() success /before/ using the result. Also, fix call to getaddrinfo() when on Ubuntu 10 or 12.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-28 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/00feef6c2f62b974126c76b03f743747f06e5768\">[41508]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Suicide if we can't find a real IPv4 address for the checkpoint server.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-28 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/07a321052729e1088d8d231c93b09064ab4986af\">[41507]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Don't allow the checkpoint server to see IPv6 addresses.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-27 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2d5c09a5367350b493746674404fbc12e907cada\">[41506]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Add 'IPv4' to test requirements system, for use with standard universe. A test requiring IPv4 when run under a configuration which disables it will succeed.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-27 16:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0eb5ede159f83bbc1fb2d23f8f9b46909e5d8f42\">[41505]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Now that getSockAddr() is only used by the standard universe, make sure it only returns IPv4 addresses.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-24 19:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6499d89c41fdd85d8aa3a79f284a4cfa38d8f407\">[41493]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Add D_FULLDEBUG info to address rewriting. Change address rewriting to enable ssh-to-job without removing the ability to test on loopback.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-23 15:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d7a4f1178d27179957a969412c8cbcce1b55aff1\">[41429]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Blocking CCB connects now create their listen port on an interface of the same protocol as the CC broker they're trying to communicate with.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-23 13:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e7ab83d3a48201e4c45c229c4203680577feef6c\">[41428]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Add a missing newline to the end of a debug message.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-23 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b11f05a78038eb7dd10de75b7d15741e5c2fbb8a\">[41427]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) A few more test fixes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-21 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c813d79c3e27451aabc48a250ba627bf1aeb5a28\">[41418]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Don't permit IPv6 sockets when spawning a standard universe starter.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-20 16:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3d423c733cc7f6d2e01f7fec0f699467cb59c072\">[41414]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) OK, so that fix was seriously broken.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-20 10:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/69d02245ea5c469efec056083cd1cf103a5bc1ff\">[41413]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) In a shocking display of depravity, not everything that calls putClassAd() is daemon core.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-17 17:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c879c0ed775faa46350863d08354d5f15ece6a8e\">[41408]</a></span>: Fix address rewriting <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> Should filter based on what is in attribute, not address of the active socket.  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-15 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/16c579346b3a469e37707bf9d4fe5926954cfc2e\">[41407]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Final patches to condor_view_classad_types test.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-15 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/60c1768d04681f7e3a5c0cba23c0a9ae0d35d65f\">[41396]</a></span>: Address rewriting works. For real. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> Potential re-writes are now considered against every single command socket the daemon has open. This should catch all cases while not catching the collector sending the ads of other daemons on the same machine.  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-13 18:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/82d14d94609f1ac670caf863853bf6139d1a8db7\">[41394]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Fix yet more Perl code for half-parsing sinfuls.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-10 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5db0f2454c09dc1159856b2e16693038d18279f7\">[41380]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Don't use -pool when calling condor_status in the parallel universe tests, since it's superflous and breaks things. (The calls themselves are probably superflous, given the new start-up code.)  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-10 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c4ff045ed646beeafad8477de0e01560e77f3c8e\">[41381]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Don't use the AI_ADDR_CONFIG hint, since Ubuntu 10 and 12 don't react to it the same way everybody else does.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-10 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e0ab8edac4d7c41b33623effdb3e8f09ab69253d\">[41378]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>) Remove some gratuitous IPv6 test failures.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-25 11:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/69026141a5bfd2c488090d64d8e6909b4dc3578d\">[41307]</a></span>: Overhaul init_local_hostname, had gotten buggy init_local_hostname had a lot of cruft built up. Various short-circuits were causing important later code to be skipped, and it was a generally tangled message. Overhauled. Part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-23 16:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ee7227f230b4d2b18d06f6a1df1d9c7d2012f2a9\">[41306]</a></span>: Work in progress <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-17 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e6d4349fcabaee916b728dbe48d5cb0c5e028d6a\">[41303]</a></span>: Fix flawed error message, add new one. Part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> work  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-17 15:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d55c18409a49338c2b4ab3530ed7853264fe4901\">[41302]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b908eace3c12154c33ee4b4c4ee2bb440024e576\">[41165]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b3139430363bcbe3d876d5d65d450c020e4582d4\">[41168]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9146cb00215a0b6490202a00f50adc24af87447f\">[41169]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4d0ee19fc9783d7ccb562f9da07ffaa1818cf052\">[41171]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/47c76e019c8f4a9bbd97102004a6d34079bf8acc\">[41176]</a></span>, Merge branch 'master' into master-4494-mixed-mode-submit Bringing branch up to date. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span>  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-27 18:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e5b09740fe6ae6660d739c7d5deb0d2c8607f2c\">[41184]</a></span>: When rewriting addresses, ensure IPv6 are [marked] ConvertDefaultIPToSocketIP was a bit of a hack, digging around directly in Sinful strings. Now it uses the Sinful object. (Mind you, it's still a hack.) The result is that when rewriting from IPv4 to IPv6, it does the right thing. Previously, teh IPv6\u00a0[...]\n (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-27 18:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1edb81a3d713cac3e6806ca2178911266548dbf\">[41183]</a></span>: Don't double up on square brackers on IPv6 addresses. Part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4494\" onclick=\"get_ticket_and_populate_wrapper('4494'); return false;\" title=\"IPv6: mixed-mode submit node (schedd/shadow)\">#4494</a></span> work.  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Nov-13 13:35", "status": "resolved", "created": "2014-Jul-29 10:41", "fixed_version": "2014-Jul-29 10:41", "broken_version": "v000000", "priority": "2", "subsystem": "", "assigned_to": "adesmet", "derived_from": "#4492", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}