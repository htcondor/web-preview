{"id": 2470, "title": "Ticket #2470: confusing failure when all starters are invalid", "description": "<blockquote>\nCarsten reported a problem encountered in testing an upgrade to 7.6.3 from 7.4.4.  When jobs were matched to partitionable slots, the startd logged the following:\n\n<p></p><pre>   09/09/11 09:14:00 slot1_1: Job requirements not satisfied.\n   09/09/11 09:14:00 slot1_1: Request to claim resource refused.\n   09/09/11 09:14:00 slot1_1: Claiming protocol failed\n</pre>\n\n<p>After some trouble, I realized that this is misleading.  The job requirements do match the slot ad.  The real problem is that no valid starters were recognized.  Here is what was logged shortly after the startd started:\n\n</p><p></p><pre>   09/09/11 09:12:37 Failed to insert \"unlimited\n   \" into ClassAd, ignoring invalid starter\n   09/09/11 09:13:37 Failed to insert \"unlimited\n   \" into ClassAd, ignoring invalid starter\n</pre>\n\n<p>The code in <code>Resource::willingToRun()</code> does not report that the job requirements did not match <strong>because there were no valid starters</strong>.  It would help if it did.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Sep-19 10:57:53 by danb:</em> <br/>\n\nThe cause of the problem turned out to be caused by a bug in a wrapper script that was being used to set ulimits.\n\n<p>I have improved the log messages so that this sort of problem is much easier to identify in the future.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-19 10:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ac918fd2b568bdf52d115198fffd2e81da22c8cc\">[27278]</a></span>: Document improved log message when there are no valid starters. ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2470\" onclick=\"get_ticket_and_populate_wrapper('2470'); return false;\" title=\"confusing failure when all starters are invalid\">#2470</a></span> ===VersionHistory:Complete===  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-19 10:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4f7155b5a6c0cb6c9f921891785b49e733f7b35e\">[27277]</a></span>: Improve log messages when no valid starter exists. Previously, if there were no valid starters, the startd logged this as \"Job requirements not satisfied.\" ===GT=== <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2470\" onclick=\"get_ticket_and_populate_wrapper('2470'); return false;\" title=\"confusing failure when all starters are invalid\">#2470</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-04 14:57", "status": "defer", "created": "2011-Sep-16 12:01", "fixed_version": "2011-Sep-16 12:01", "broken_version": "v070603", "priority": "5", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "a22547", "customer_group": "ligo", "visibility": "public", "notify": "dan@hep.wisc.edu,pcouvare@caltech.edu", "due_date": ""}