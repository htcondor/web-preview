{"id": 7015, "title": "Ticket #7015: Build htcondor python bindings for Anaconda distribution", "description": "<blockquote>\nWe distribute our Python bindings via rpm, deb, and whl (via PyPI), and we also have requests to distribute via conda. The basic recipe for building for Anaconda is:\n\n<p><a class=\"external\" href=\"https://conda.io/projects/conda-build/en/latest/concepts/recipe.html\">https://conda.io/projects/conda-build/en/latest/concepts/recipe.html</a>\n\n</p><p>Here's an example on how one Boost.Python user has built their package (though on macOS):\n\n</p><p><a class=\"external\" href=\"http://seite9.de/posts/anaconda.html\">http://seite9.de/posts/anaconda.html</a></p></blockquote>", "remarks": "<blockquote>\nSo far, cmake runs without complaint, but the build fails at building boost. Investigating.\n\n<p></p><hr/>\n<em>2019-May-01 13:26:42 by pfc:</em> <br/>\n\nI need to confirm with Duncan Macleod that the LD_PRELOAD workaround discussed on the CondorLIGO list a few weeks ago will indeed work, and if so, we can buy a bit more time before having a native Conda port.\n\n<p></p><hr/>\n<em>2019-May-01 13:27:57 by tannenba:</em> <br/>\n\nUsing Conda Forge\n\n<p></p><hr/>\n<em>2019-May-01 13:37:13 by pfc:</em> <br/>\n\nDuncan responds, \"Yes Peter, LD_PRELOAD works fine, and is a hacky, but stable, workaround until an 'official' conda package is available.\"\n\n<p></p><hr/>\n<em>2019-Aug-13 16:31:37 by jpatton:</em> <br/>\n\nHave a preliminary version uploaded to a personal Anaconda.org repository:\n\n<p><code>conda install -c jasoncpatton htcondor</code>\n\n</p><p>Built with the same wheels as on PyPI, so still Linux-only and still using some older externals. Will have updated externals when <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7037\" onclick=\"get_ticket_and_populate_wrapper('7037'); return false;\" title=\"formalize python wheel building process\">#7037</a></span> is resolved.\n\n</p><p>Feel free to test!\n\n</p><p></p><hr/>\n<em>2019-Sep-11 13:28:29 by gthain:</em> <br/>\n\nPeter tells us that Duncan has expertise in getting packages into the public anaconda distribution, and could be a good resource for us.\n\n<p></p><hr/>\n<em>2019-Sep-11 13:28:38 by gthain:</em> <br/>\n\nPeter tells us that Duncan has expertise in getting packages into the public anaconda distribution, and could be a good resource for us.\n\n<p></p><hr/>\n<em>2019-Sep-18 13:25:22 by jpatton:</em> <br/>\n\nDuncan and BrianB have been helping with getting the dependencies we need for conda-forge distribution set up. My next step is taking what BrianB's done with the globus toolkit recipe and get that working/merged upstream.\n\n<p></p><hr/>\n<em>2019-Nov-07 11:22:21 by jpatton:</em> <br/>\n\nPR for the recipe was merged and htcondor-feedstock was generated:\n<a class=\"external\" href=\"https://github.com/conda-forge/htcondor-feedstock\">https://github.com/conda-forge/htcondor-feedstock</a></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-15 19:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/253d2310c5de43089e68a5ebe7ea8274601bb763\">[58183]</a></span>: build: fix pythonarchlib for non /usr installs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span> Committer: Tim Theisen  (By Duncan Macleod )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 10:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ecb0bbdfd1bb7df29bb7db363b7c8d7ac332bd52\">[58090]</a></span>: Don't do GLIBC check for conda builds <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 10:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cef6cb5ff98d42ae5e8355d56b00a8a882bf9256\">[58088]</a></span>: Omit gridmanager from conda builds <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 10:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d28055b5f14dadce154469ea78b785e94dc3a8fe\">[58085]</a></span>: Omit annex from conda builds <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 09:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/747b1cdf06ec632c6fcee0bb6cacd9dbc7026916\">[58084]</a></span>: Remove unnecessary check for setting RPATHs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-11 09:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ab961a26afddeabe7ca8b9fa993bad1e68187c8f\">[58083]</a></span>: Put options for Python packages in package config file <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-10 15:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/45a52e69d86b32ceb4a0944368eb7ab934c3354e\">[58076]</a></span>: Don't build nordugridgahp if conda build <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-10 15:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cc3d26be766c87f6da1d6baeb79a6b0f6b44d6b1\">[58075]</a></span>: Do not use DLOPEN for CONDA_BUILD either <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-10 15:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6733c5680d7f32818e01e8561bb635f7599d6185\">[58073]</a></span>: Add CONDA_BUILD option to make conda builds go smoother <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7015\" onclick=\"get_ticket_and_populate_wrapper('7015'); return false;\" title=\"Build htcondor python bindings for Anaconda distribution\">#7015</a></span>  (By Jason Patton )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Dec-03 10:41", "status": "resolved", "created": "2019-Apr-24 13:43", "fixed_version": "2019-Apr-24 13:43", "broken_version": "", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "jpatton", "derived_from": "", "creator": "jpatton", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "tannenba@cs.wisc.edu, peter.couvares@ligo.org, duncan.macleod@ligo.org, stuart.anderson@ligo.org, karpel@wisc.edu, leo.singer@ligo.org", "due_date": ""}