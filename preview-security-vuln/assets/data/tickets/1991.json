{"id": 1991, "title": "Ticket #1991: condor_transfer_data seems to be missing log events", "description": "<blockquote>\nafter investigating ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1985\" onclick=\"get_ticket_and_populate_wrapper('1985'); return false;\" title=\"condor_submit -remote &lt;fails&gt;\">#1985</a></span>, it seems that after running condor_transfer_data the job's log file does not contain anything other than the submit event.  i can see the correct log file in the spool directory, but the log file is not part of the list of files that are transferred back when running condor_transfer_data, hence the events are missing.</blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-21 16:14:01 by zmiller:</em> <br/>\n\nas another datapoint, i tested to see whether ANY output files got back, thinking maybe that was the problem and it wasn't specific to the log file.  however, other files that were created DID get transferred back, while the log file was still missing from the \"<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SpooledOutputFiles\" title=\"Spooled Output Files\">SpooledOutputFiles</a></span>\" in the job ad.\n\n<p></p><hr/>\n<em>2011-Mar-22 15:56:53 by danb:</em> <br/>\n\nThe problem is that <code>SpooledOutputFiles</code> is set when the job does its final transfer of output to the spool directory.  Only transferred files are added to this list.  The log file is not added.\n\n<p>This behavior dates back to 7.5.4 (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1522\" onclick=\"get_ticket_and_populate_wrapper('1522'); return false;\" title=\"support directories in the input/output file transfer lists\">#1522</a></span>).\n\n</p><p></p><hr/>\n<em>2011-Mar-23 14:58:21 by jfrey:</em> <br/>\n\nAnother data point: if there's no file transfer between the shadow and starter (i.e. should_transfer_files = NO), then <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SpooledOutputFiles\" title=\"Spooled Output Files\">SpooledOutputFiles</a></span> doesn't get set and condor_transfer_data does send the user log back.\n\n<p></p><hr/>\n<em>2011-Mar-24 16:32:15 by danb:</em> <br/>\n\nPart of this problem is quite old (pre 7.0.0?).  If transfer_output_files is specified explicitly, then the user log is not fetched by condor_transfer_data.  This predates the addition of <code>SpooledOutputFiles</code> in 7.5.4.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-25 09:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eccde32c5af14b6253ab8f8b313cc8a4e4952562\">[21153]</a></span>: Improved fix for adding spooled user-log to file transfer list. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1991\" onclick=\"get_ticket_and_populate_wrapper('1991'); return false;\" title=\"condor_transfer_data seems to be missing log events\">#1991</a></span> The previous fix assumed the user-log was spooled when the sandbox was fetched. This fix verifies that the user-log actually is spooled, so it will work in a more general case, such as some files spooled, some files not.  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-25 08:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/75888a479dbaf20cb60ad7d6226be439bd81f66b\">[25972]</a></span>: Documented fix for spooled user log. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1991\" onclick=\"get_ticket_and_populate_wrapper('1991'); return false;\" title=\"condor_transfer_data seems to be missing log events\">#1991</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-25 08:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f67caf8b469ffecdcc7d1c3c9d035f3bdb2b9c4\">[21151]</a></span>: Add spooled user-log to the list of files to transfer when sandbox is fetched. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1991\" onclick=\"get_ticket_and_populate_wrapper('1991'); return false;\" title=\"condor_transfer_data seems to be missing log events\">#1991</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Apr-05 15:26", "status": "resolved", "created": "2011-Mar-21 15:52", "fixed_version": "2011-Mar-21 15:52", "broken_version": "v070506", "priority": "2", "subsystem": "Tools", "assigned_to": "danb", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com", "due_date": ""}