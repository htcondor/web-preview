{"id": 958, "title": "Ticket #958: Prioritizing GAHP commands", "description": "<blockquote>\nThe gridmanager restricts the number of concurrent commands it will issue to a GAHP server, with a default of 50. Additional commands are queued up and issued on first come, first served basis. This can cause a time-sensitive command to be stuck behind a long string of less-important commands. For example, a command to renew the leases of all submitted jobs may have to wait behind 5000 submit commands for new jobs.\n\n<p>In a recent test run of cream jobs, 1500 jobs were submitted simultaneously. The submission process consists of a REGISTER, then a START command. The REGISTER command for all 1500 jobs were executed (50 at a time) before the START command for any could execute.\n\n</p><p>The specific case of a deluge of job submissions used to be mitigated by the parameter GRIDMANAGER_MAX_PENDING_SUBMITS_PER_RESOURCE. But that parameter has been removed, and the sudden removal of a large number of jobs can create a similar delay in the execution of commands that may be more time-sensitive.\n\n</p><p>We need a way to prevent a large number of job submits or removals from delaying other GAHP commands. One possibility is to indicate certain commands as high or low priority. This could be done in the gridmanager or the gahp. If done in the gahp, then the throttle on concurrent gahp commands would need to be widened or removed. That would require all gahps to do their own throttling of concurrent command execution, which some already do.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Aug-18 13:26:11 by jfrey:</em> <br/>\n\nStarting in Condor 7.5.6, the gridmanager prioritizes GAHP commands as high, medium, or low. The priorities of the CREAM commands have been adjusted to prevent the problem described in this ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2859\" onclick=\"get_ticket_and_populate_wrapper('2859'); return false;\" title=\"Prioritize GRAM GAHP Commands\">#2859</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nPrioritize GRAM GAHP Commands</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6716\" onclick=\"get_ticket_and_populate_wrapper('6716'); return false;\" title=\"Prioritize Condor-C GAHP commands\">#6716</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nPrioritize Condor-C GAHP commands</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-13 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d9a325d118d7752b30b972fce73a26c2f74e5f52\">[19643]</a></span>: Prioritize GAHP commands in the gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=958\" onclick=\"get_ticket_and_populate_wrapper('958'); return false;\" title=\"Prioritizing GAHP commands\">#958</a></span> When the gridmanager throttles GAHP commands due to GRIDMANAGER_MAX_PENDING_REQUESTS, it can tag the queued commands as low, medium or high priority. When additional commands can be issued, the gridmanager first uses high-priority commands, then medium,\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Aug-18 13:26", "status": "resolved", "created": "2009-Nov-16 16:08", "fixed_version": "2009-Nov-16 16:08", "broken_version": "v070500", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#897", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}