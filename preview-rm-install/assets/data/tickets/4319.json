{"id": 4319, "title": "Ticket #4319: add #include like mechanism to config file parser", "description": "<blockquote>\nconfig files should support a way to declare that other files should also be parsed in much the same way that <code>#include</code> works for C/C++.  This would be both more flexible and more powerful than the current <code>LOCAL_CONFIG_FILE</code> mechanism.\n\n<p>To minimize changes in the parser, and to follow the current metaknob convention. the syntax will be\n\n</p><p></p><pre>    include : _file_\n</pre>\n\n<p>or\n\n</p><p></p><pre>    include : _cmd_ |\n</pre>\n\n<p>where <code>_file_</code> is the path to the file to read. the path may contain config macro references, but those references must be valid at the time the include statement is parsed.  include statements are executed right away as if the contents of <em>file</em> was in the current file at the include line.\n\n</p><p>In the second form, <em>cmd</em> is a command line to run, the output of which is read in and parsed as config.  (the second form is basically available for free because the code will re-use the config file parsing code that <code>LOCAL_CONFIG_FILE</code> currently uses.)</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Apr-17 20:53:28 by bbockelm:</em> <br/>\n\nIs it possible to include a directory too?\n\n<p><em>2014-Apr-17 20:53:28 by johnkn:</em> <br/>\n\nno, but It can easily be simulated using the \"<em>cmd</em> |\" described.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-06 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5436edfc8c44655b2a348db4e391f767e22adcb7\">[40359]</a></span>: New test for include mechanism in config files <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-29 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4239f14089c0837b6070abf84931ff9b4d2dddde\">[40271]</a></span>: define the new @include and @use syntax for configuration. Documentation is in the 8.2.0 manual, even though the feature is in 8.1.6. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4031\" onclick=\"get_ticket_and_populate_wrapper('4031'); return false;\" title=\"Add simple meta-params to enable complex features with default\">#4031</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-21 15:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3d6787abccedf858c94f772f9323b5ecffc57e49\">[40203]</a></span>: extended 8.1.6 version history item to identify all the new configuration file changes <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3820\" onclick=\"get_ticket_and_populate_wrapper('3820'); return false;\" title=\"Param system improvements for v8.1 series\">#3820</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4325\" onclick=\"get_ticket_and_populate_wrapper('4325'); return false;\" title=\"Strip default condor_config file down to the bare essentials.\">#4325</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3894\" onclick=\"get_ticket_and_populate_wrapper('3894'); return false;\" title=\"condor_config_val -dump should work remotely\">#3894</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4031\" onclick=\"get_ticket_and_populate_wrapper('4031'); return false;\" title=\"Add simple meta-params to enable complex features with default\">#4031</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4211\" onclick=\"get_ticket_and_populate_wrapper('4211'); return false;\" title=\"Add #ifdef-like mechanism to config file parser\">#4211</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-14 11:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0682ee2b5f07da57b34276147d92cf7609b83140\">[40123]</a></span>: document new configuration file include: syntax <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4031\" onclick=\"get_ticket_and_populate_wrapper('4031'); return false;\" title=\"Add simple meta-params to enable complex features with default\">#4031</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3820\" onclick=\"get_ticket_and_populate_wrapper('3820'); return false;\" title=\"Param system improvements for v8.1 series\">#3820</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-18 10:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c8ef516381e5c047a5bdee75722693c05d1820b1\">[39986]</a></span>: optional @ before use (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4031\" onclick=\"get_ticket_and_populate_wrapper('4031'); return false;\" title=\"Add simple meta-params to enable complex features with default\">#4031</a></span>) or include keywords (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span>) in config <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3820\" onclick=\"get_ticket_and_populate_wrapper('3820'); return false;\" title=\"Param system improvements for v8.1 series\">#3820</a></span> Also change all config keywords to case-insensitive. ===VersionHistory:None===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-17 21:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5328c78530b8ad39dfef488e803f2186eb41e1c4\">[39975]</a></span>: add include like mechanism to config parser <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4319\" onclick=\"get_ticket_and_populate_wrapper('4319'); return false;\" title=\"add #include like mechanism to config file parser\">#4319</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Aug-01 21:26", "status": "resolved", "created": "2014-Apr-17 13:59", "fixed_version": "2014-Apr-17 13:59", "broken_version": "v080105", "priority": "3", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "#3820", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}