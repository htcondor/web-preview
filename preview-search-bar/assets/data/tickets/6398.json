{"id": 6398, "title": "Ticket #6398: schedd should retire noop_jobs when they are submitted.", "description": "<blockquote>\nThe schedd currently only retires jobs that have <code>IsNoopJob</code> when it does <code>count_jobs</code>, which is does only about as often as it sends submitter ads to the collector.  This means that a DAG that uses noop jobs as nodes will be often run slower than one that uses real, but trivial jobs that consume real execute resources.  This is not ideal.\n\n<p>Instead, we can set a transaction trigger on <code>IsNoopJob</code> and retire jobs where that evaluates to true right after the commit of the submit transaction, (or of the qedit if it is set post-submit).  This will mean that count_jobs will only need to retire noop jobs that have an expression that becomes true only after the job has been alive for a while.\n\n</p><p>see <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6396\" onclick=\"get_ticket_and_populate_wrapper('6396'); return false;\" title=\"noop_job in submit isn't honored by schedd when a claim is reused\">#6396</a></span> for the 8.6 bug that triggered this.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2020-Nov-09 10:51", "status": "new", "created": "2017-Sep-07 15:20", "fixed_version": "2017-Sep-07 15:20", "broken_version": "", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}