<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="date" content="2021-10-20 20:53:54 +0000" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Upgrading To Eight Nine Twelve</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/search_bar.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/default.js" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Upgrading To Eight Nine Twelve</h1>
<div id="content">
 <span class="section">
  <h2>
   Upgrading to 8.9.12
  </h2>
 </span>
 <p>
 </p>
 <hr/>
 <strong class="three">
  UPDATE! On March 26 2021 at 3:30pm the HTCondor v8.9.12 release was pulled down from our website after significant backwards-compatibility problems were discovered. We addressed these issues in the v8.9.13 release, please see
  <span class="wiki">
   <a href="/web-preview/preview-search-bar/wiki-archive/pages/UpgradingToEightNineThirteen" title="Upgrading To Eight Nine Thirteen">
    Upgrading HTCondor to 8.9.13
   </a>
  </span>
  .
 </strong>
 <p>
 </p>
 <hr/>
 HTCondor 8.9.12 has introduced many security improvements.  As a result, the HTCondor team expects that after upgrading from an earlier version of 8.9 to v8.9.12, explicit administrator intervention will be required for many pools.  If you're upgrading from v8.8 or earlier, we strongly recommend waiting until mid-April 2021 for the release of HTCondor v9.0.
 <p>
  This document explains, in order of likelihood, how you may need to intervene when upgrading your pool from an earlier HTCondor v8.9.x, and what that intervention might be. For example, if after upgrading, you cannot see your pool via
  <em>
   condor_status
  </em>
  as before, it is likely a problem discussed here. A given pool might require multiple interventions, so please check each of the conditions after each heading below.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Step 1: Required changes to security configuration
 </h3>
 <p>
  The default HTCondor security configuration is no longer host-based.  Specifically, to allow HTCondor 9.0 to be secure by default, we have commented out the line
  <code>
   use security:host_based
  </code>
  from the default
  <code>
   /etc/condor/condor_config
  </code>
  , and have added a new configuration file,
  <code>
   /etc/condor/config.d/00-htcondor-9.0.config
  </code>
  .  (This file will not be overwritten by subsequent upgrades, so it is safe to modify.)  This file adds the line
 </p>
 <p>
 </p>
 <pre>   use security:recommended_v9_0
</pre>
 <p>
  which configures user-based security and requires encryption, authentication, and integrity. If you have already configured another daemon authentication method (e.g. pool PASSWORD, SSL, GSI, KERBEROS, etc) at some point in the past, you can comment out the above line in file
  <code>
   00-htcondor-9.0.config
  </code>
  and skip to Step 2 below.
 </p>
 <p>
  If you have not already configured some other daemon authentication method and thus are relying solely on host-based authentication (i.e. a list of allowed hostnames or IP addresses), you have three options:
 </p>
 <p>
 </p>
 <ul>
  <strong>
   Option A
  </strong>
  .  Use
  <em>
   get_htcondor
  </em>
  to reinstall your pool with a fresh installation; see the
  <a class="external" href="https://htcondor.readthedocs.io/getting-htcondor/index.html">
   instructions
  </a>
  .  The
  <em>
   get_htcondor
  </em>
  tool will configure your pool with our recommended security configuration for you.  Once it's done, you can copy your site-specific configuration from your old installation to the new installation by placing configuration files into
  <code>
   /etc/condor/config.d
  </code>
  .
  <p>
   <strong>
    Option B
   </strong>
   .  Run two commands (as root) on every machine in your pool to enable the recommended security configuration appropriate for  v8.9.12.  When prompted, type the same password for every machine. (
   <em>
    Note:
   </em>
   if typing a password is problematic, see the
   <a class="external" href="https://htcondor.readthedocs.io/en/latest/man-pages/condor_store_cred.html">
    condor_store_cred manual page
   </a>
   for other options such as reading the password from a file or command-line).
  </p>
 </ul>
 <p>
 </p>
 <pre>        # condor_store_cred -c add
        # umask 0077; condor_token_create -identity condor@mypool &gt; /etc/condor/tokens.d/condor@mypool
</pre>
 <p>
 </p>
 <ul>
  <strong>
   Option C
  </strong>
  .  Revert to the previous host-based security configuration that was the default before v8.9.12.  This is the most expedient way to get your pool running again as it did before upgrading, but realize that a host-based security model is not recommended.  If you go for this option, please consider it a temporary measure.  To configure HTCondor to function as it did before the upgrade, see the instructions in
  <code>
   /etc/condor/config.d/00-htcondor-9.0.config
  </code>
  .
 </ul>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Step 2: Compatibility changes with IDTOKENS
 </h3>
 <p>
  We fixed a bug in how the IDTOKENS authentication method reads its signing key(s), which are stored in directory
  <code>
   /etc/condor/passwords.d
  </code>
  .  If you are not currently using tokens, or you have created these signing key(s) by using the
  <em>
   condor_store_cred
  </em>
  command-line tool, you should not have any problems and can skip to Step 3.  If, however, you created the signing key file(s) in directory
  <code>
   /etc/condor/passwords.d
  </code>
  via some other method (such as a copying from
  <code>
   /dev/random
  </code>
  ), there is a possibility that previously issued tokens will no longer authenticate.  In this case, we recommend that you re-issue these tokens to clients via either
  <em>
   condor_token_create
  </em>
  or
  <em>
   condor_token_fetch
  </em>
  .
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Step 3: Directory permission changed in /etc/condor/tokens.d
 </h3>
 <p>
  HTCondor now reads files in
  <code>
   /etc/condor/tokens.d
  </code>
  as root.  If you have files in that directory, you should change their ownership, using the following command (run as root):
 </p>
 <p>
 </p>
 <pre>   # chown -R root:root /etc/condor/tokens.d</pre>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
