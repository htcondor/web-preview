<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Testing Condor On Linux</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Testing Condor On Linux</h1>
<div id="content">
 <span class="section">
  <h2>
   Testing HTCondor On Linux
  </h2>
 </span>
 <p>
  Starting in 8.9.3, HTCondor tests can be invoked using the
  <code>
   ctest
  </code>
  framework.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Building HTCondor
 </h3>
 <p>
  This is a simple primer for building HTCondor; refer to
  <span class="wiki">
   <a href="/web-preview/preview-search-bar/wiki-archive/pages/BuildingHtcondorOnLinux" title="Building Htcondor On Linux">
    BuildingHtcondorOnLinux
   </a>
  </span>
  for more in-depth build instructions.
 </p>
 <p>
 </p>
 <ol>
  <li>
   Get the source code from any of the following locations:
   <div class="code">
    <pre class="code">git clone https://github.com/htcondor/htcondor.git
# Source code can also be obtained from tarballs on HTCondor's website
</pre>
   </div>
   <p>
   </p>
  </li>
  <li>
   Compiling the code and tests.(See
   <span class="wiki">
    <a href="/web-preview/preview-search-bar/wiki-archive/pages/BuildingHtcondorOnLinux" title="Building Htcondor On Linux">
     BuildingHtcondorOnLinux
    </a>
   </span>
   for more details on building the code and pre-requisites)
   <div class="code">
    <pre class="code">cd htcondor # change directory to the root of source tree..
mkdir __build # make an out-of-source build destination
cd __build
../configure_uw ..
make install
</pre>
   </div>
  </li>
 </ol>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Running ctest
 </h3>
 <p>
  From the build directory, after creating a release directory via
  <code>
   make install
  </code>
  (or equivalent), run:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">ctest -j 20
</pre>
 </div>
 <p>
  That's it!  The tests should be idempotent - it should be safe to re-run them as many times as desired.
 </p>
 <p>
  If all the tests fail and the failures happened very quickly (i.e., no condor was launched), the first place to check is
  <code>
   Testing/Temporary/LastTest.log
  </code>
  .
 </p>
 <p>
  <strong>
   NOTE
  </strong>
  : Some tests failures cause a personal
  <code>
   condor_pool
  </code>
  to be leaked.  If you have issues re-running the tests, try doing
  <code>
   killall condor_master
  </code>
  .
 </p>
 <p>
  Some
  <code>
   ctest
  </code>
  tips and tricks:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code"># Run 40 test cases in parallel -- depending on your machine/container,
# you may be able to run as many as 80 or as few as 10 before tests fail due to overloading
ctest -j 40
# Run all tests matching the regex `cmr`:
ctest -R cmr
# Run all tests except those matching `cmr`:
ctest -E cmr
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Running ctest in a docker container
 </h3>
 <p>
  When running the condor tests inside a docker container, the container must be started with special flags for some of the tests to work.  While we hope to fix the tests in the future, for now, starting with a hostname like so
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">docker run --hostname docker.cs.wisc.edu &lt;rest of arguments&gt;
</pre>
 </div>
 <p>
  is needed.  This is because many tests assume the hostname are FQDNs, and there will be many test timeouts and failures if the hostname of the container has no dots in it.  Note that
 </p>
 <p>
 </p>
 <ol>
  <li>
   specifying a "--hostname" flag in Docker is NOT compatible with using "--network host", thus it is recommended to use the default NAT networking.
  </li>
  <li>
   using the default NAT networking also has the nice property of making another virtual interface.... because running the test suite can consume 5k ephemeral network ports, creating a virtual network interface will help prevent the bare metal server from running out of ports.
  </li>
  <li>
   the unit_test_sinful looks for ipv6 addresses, which most docker containers do not fully support with NAT networking, and thus running in Docker with NAT networking will cause this test to be skipped.
  </li>
 </ol>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
