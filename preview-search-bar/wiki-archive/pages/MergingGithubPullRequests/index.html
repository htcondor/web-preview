<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="date" content="2021-10-20 21:43:27 +0000" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Merging Github Pull Requests</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/search_bar.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/default.js" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Merging Github Pull Requests</h1>
<div id="content">
 <br/>
 To merge a pull request from github into your htcondor repository, you need to add github as a remote repository, and then create a new branch from the pull request.
 <strong>
  Following these directions will preserve authorship and timestamps.
 </strong>
 <p>
  Adding github as a remote repository is something you only need to do once for a given repo:
 </p>
 <div class="snip">
  <pre class="sniplabel">One-time config: add the github htcondor repository as a remote repository called github</pre>
  <pre class="snip">git remote add github https://github.com/htcondor/htcondor.git
</pre>
 </div>
 <p>
  Here is the general form for converting a github pull request to a branch.  Below this you will see many specific examples showing the convention for branch naming and commands to run in various different scenarios.
 </p>
 <div class="snip">
  <pre class="sniplabel">General: fetch a pull request ID from remote github creating branch BRANCHNAME</pre>
  <pre class="snip">git fetch github pull/ID/head:BRANCHNAME
</pre>
 </div>
 <p>
  <br/>
  <strong>
   MAKE A GITTRAC TICKET FOR THE PULL REQUEST.
  </strong>
 </p>
 <p>
  Create a new ticket, fill in the description with the reason for the change, fill in the customer group if known, the target release, etc.  Add a remark with a  code review signing off on the changes. Examples below use ticket number 9999.
 </p>
 <p>
  <strong>
   IT IS VERY IMPORTANT THAT YOUR MERGE THE PULL REQUEST INTO THE BRANCH IT WAS CREATED FROM.
  </strong>
 </p>
 <p>
  Most people create pull requests off of the master branch.  Look at the pull request on github, and near the top, directly under the title you will see a line similar to this:
 </p>
 <div class="snip">
  <pre class="sniplabel">Example message on github website</pre>
  <pre class="snip">zmiller wants to merge 1 commit into htcondor:master from zmiller:changing-some-htcondor-code
</pre>
 </div>
 <p>
  Now that you know the target branch, create a new branch with the correct name and the gittrac ticket number from the ticket you created above.  You will also need to know the pull request number for this step.
 </p>
 <p>
 </p>
 <div class="snip">
  <pre class="sniplabel">Example 1: create a branch targeting *master* (V8_9 in this example) for the github pull request (ID 107 here) and the gittrac ticket (9999 here)</pre>
  <pre class="snip">git fetch github pull/107/head:V8_9-gt9999-branch
</pre>
 </div>
 <p>
 </p>
 <div class="snip">
  <pre class="sniplabel">Example 2: create a branch targeting *stable* (V8_8 in this example) for the github pull request (ID 107 here) and the gittrac ticket (9999 here)</pre>
  <pre class="snip">git fetch github pull/107/head:V8_8-gt9999-branch
</pre>
 </div>
 <p>
  Now check out the target branch and merge the branch containing the pull request.  There are two cases below.
 </p>
 <p>
  <strong>
   MOST LIKELY
  </strong>
  , the pull request was made from master.  So you probably want to just do this:
 </p>
 <p>
 </p>
 <div class="snip">
  <pre class="sniplabel">Example: check out the master and merge the V8_9-gt9999-branch created above</pre>
  <pre class="snip">git checkout master
git pull
git merge V8_9-gt9999-branch  # ADD THE GITTRAC TICKET NUMBER TO MERGE COMMIT MESSAGE!!
git push origin master
</pre>
 </div>
 <p>
  Then, if the pull request was made from master but should also apply to the stable branch (because it's a bug fix), then cherry-pick the commit(s) back to the correct branch.
  <strong>
   There may be more than one commit in a pull request.
  </strong>
  If this is the case, make sure you do them in the correct chronological order.  If you are picking into a release branch consult with TimT and TJ first.
 </p>
 <p>
  One way to find the commit hashes is from the github.com website.  While viewing the pull request click on the "Commits" tab and you will see a list.
 </p>
 <p>
  Another way to get the commit hashes is by running "git log" while you still have the master branch checked out.  You are searching for the individual commit(s) in the pull request, NOT the commit of the merge you just did to master.  Search for appropriate keywords from the pull request, or for the committer's username, or "github.com".  Make sure you get all commits contained in the pull request, and in the right chronological order.  It's probably better to get them using the first method (i.e. directly from github.com).
 </p>
 <p>
  Ideally, find the commits in gittrac (they will be in the Timeline when the original committer made them, NOT when you merged) and add edit the commit message(s) to include the ticket number.
 </p>
 <p>
 </p>
 <div class="snip">
  <pre class="sniplabel">Example: Cherry-pick the commit(s) back to stable (V8_8-branch in this example)</pre>
  <pre class="snip">git checkout V8_8-branch
git pull
git cherry-pick &lt;commit-hash-1&gt;
git cherry-pick &lt;commit-hash-2&gt;
...
git push origin V8_8-branch
</pre>
 </div>
 <p>
  Again, find the commits in gittrac (this time they will be in the Timeline when you did the cherry-pick) and add edit the commit message(s) to include the ticket number.
 </p>
 <p>
  <strong>
   THIS IS EXTREMELY RARE
  </strong>
  , but if the pull request was targeted for stable (or a release branch), merge the pull request branch to the target branch and then do the normal merges forward.  Consult with TimT and TJ if dealing with a release branch.
 </p>
 <div class="snip">
  <pre class="sniplabel">Example: Merge the pull request into a stable branch (V8_8-branch in this example) and then forward into master</pre>
  <pre class="snip">git checkout V8_8-branch
git pull
git merge V8_8-gt9999-branch  # ADD THE GITTRAC TICKET NUMBER TO MERGE COMMIT MESSAGE!!
git push origin V8_8-branch
git checkout master
git pull
git merge V8_8-branch
git push origin master
</pre>
 </div>
 <p>
  <br/>
  <strong>
   THAT'S IT FOR MERGING!
  </strong>
  If you targeted the correct branch, the pull request should automatically close when gethub detects the SHA was merged.  Don't forget to add documentation and Version History if needed and reference the associated gittrac ticket number so everything is nicely grouped togther under the one ticket.
  <br/>
  <br/>
 </p>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
