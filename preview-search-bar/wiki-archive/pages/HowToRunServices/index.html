<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>How To Run Services</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="" type="text/javascript" async></script>
    <script src="" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>How To Run Services</h1>
<div id="content">
 <strong>
  In Progress NOT complete
 </strong>
 <span class="section">
  <h2>
   Introduction
  </h2>
 </span>
 This wiki page contains information about how to allow an administrator to schedule and manage services using HTCondor (IaaS).
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Configuration Options
 </h2>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  1.) Local Resources
 </h3>
 <p>
  <span class="subsubsection">
  </span>
 </p>
 <h4>
  Virtual Machine
 </h4>
 The most obvious solution to this problem now-a-days is to configure a virtual machine, or "appliance", whose sole purpose is to provide a service to a IT infrastructure.  This virtual machine can then be accessed and spun on demand
 <p>
 </p>
 <ul>
  <li>
   <a class="external" href="http://research.cs.wisc.edu/condor/manual/v7.7/2_11Virtual_Machine.html">
    http://research.cs.wisc.edu/condor/manual/v7.7/2_11Virtual_Machine.html
   </a>
  </li>
  <li>
   <a class="external" href="http://research.cs.wisc.edu/condor/manual/v7.7/3_3Configuration.html#SECTION004329000000000000000">
    http://research.cs.wisc.edu/condor/manual/v7.7/3_3Configuration.html#SECTION004329000000000000000
   </a>
  </li>
 </ul>
 <p>
  For these types of application it is relatively easy to configure a virtual machine with a hypervisor of your choosing and configure your appliance.  There are a couple of extra settings you may wish to add to your submission which will help in managing your appliances.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">#############################
# Submission additions for services
#############################
# For resilient services where they can not go down
# logs should be routinely investigated for activity
on_exit_remove=false
periodic_release=true

# Any attributes which will be useful in administration
+HTTPD_IP=TARGET.MachineIP
</pre>
 </div>
 <p>
  <span class="subsubsection">
  </span>
 </p>
 <h4>
  Chroot jobs
 </h4>
 Another way to achieve this is through the use of chroot jail.  By using your package management system you can install just the desired dependencies to a location which is idea for infrastructure.
 <p>
 </p>
 <ul>
  <li>
   <a class="external" href="http://prefetch.net/articles/yumchrootlinux">
    http://prefetch.net/articles/yumchrootlinux
   </a>
  </li>
 </ul>
 <p>
  This solution has a couple of trade offs the administrator should take into account.  It does come with the added performance boost of being native but there are several configuration issues which need to be taken into account:
 </p>
 <p>
 </p>
 <ul>
  <li>
   Consistent UID's into images (recommend using service ID's for consistency)
  </li>
  <li>
   Firewall configurations.
  </li>
 </ul>
 <p>
  Once your chroot image is created you will need to configure
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">##########################################
# Could be shared via NFS, or transferred
NAMED_CHROOT= httpd=/your/chroot/loc
</pre>
 </div>
 <p>
  Once your startd's have been configured you can run jobs.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">executable=your_scriptwrapper_to_kick_httpd_in_chroot.sh
log=$(cluster).$(process).log.txt
output=$(cluster).$(process).out.txt
error=$(cluster).$(process).err.txt

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

RequestMemory = 256M
+RequestedChroot="httpd"

queue 1
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  2.) Remote Resources
 </h3>
 <span class="subsubsection">
  <h4>
   Grid/EC2 Jobs
  </h4>
 </span>
 <p>
  TODO: Update 7.7 series docs with ec2 refs.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  References
 </h2>
 <p>
 </p>
 <ul>
  <li>
   <a class="external" href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/creating-loopback-s3-linux.html.html">
    http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/creating-loopback-s3-linux.html.html
   </a>
  </li>
 </ul>
 <p>
  Other refs:
 </p>
 <ul>
  <li>
   <a class="external" href="http://lxc.sourceforge.net/">
    http://lxc.sourceforge.net/
   </a>
  </li>
 </ul>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
