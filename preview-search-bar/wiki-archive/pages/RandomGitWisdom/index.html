<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="date" content="2021-10-20 20:53:54 +0000" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Random Git Wisdom</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/search_bar.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/default.js" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Random Git Wisdom</h1>
<div id="content">
 See also:
 <span class="wiki">
  <a href="/web-preview/preview-search-bar/wiki-archive/pages/ManagingCondorSourceTreesWithGit" title="Managing Condor Source Trees With Git">
   ManagingCondorSourceTreesWithGit
  </a>
 </span>
 <p>
  This page is the place for Git wisdom as it is discovered/created until it can be filed in a more permanent location.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  gitweb (bonsai-like support) on bonsai.cs.wisc.edu
 </h2>
 <p>
  A Gitweb service is running on bonsai.cs.wisc.edu,
  <a class="external" href="http://bonsai.cs.wisc.edu/gitweb/gitweb.cgi">
   http://bonsai.cs.wisc.edu/gitweb/gitweb.cgi
  </a>
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  gitweb setup
 </h3>
 <p>
  The Apache Httpd service on bonsai has the following additional configuration:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">&lt;Directory /var/www/html/gitweb&gt;
AllowOverride none
Options ExecCGI -Indexes
AuthType basic
AuthName "Condor Team"
AuthUserFile /var/www/conf/bonsai.passwd
&lt;LIMIT GET POST&gt;
require valid-user
&lt;/LIMIT&gt;
&lt;/Directory&gt;

Alias gitweb /var/www/gitweb
Alias gitweb/ /var/www/gitweb/
</pre>
 </div>
 <p>
  The gitweb CGI is installed under
  <code>
   /var/www/html/gitweb
  </code>
  and links to the projects that are available via gitweb are created under
  <code>
   /var/www/html/gitweb/projects
  </code>
 </p>
 <p>
  Additional note, the gitweb.cgi needed some modification to work on the old RH9 box that is bonsai.cs.wisc.edu. Uses of
  <code>
   decode_utf8
  </code>
  can only take one argument, and printing
  <code>
   &amp;amp;nbsp;
  </code>
  and
  <code>
   &amp;amp;sdot;
  </code>
  seems to be problematic. All changes are marked with a
  <code>
   # FW
  </code>
  comment.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  git-daemon (git:// URL support) on bonsai.cs.wisc.edu (CURRENTLY DISABLED)
 </h2>
 <p>
  This is a read-only git-daemon run on bonsai.cs.wisc.edu. It can service commands
  <code>
   git-fetch
  </code>
  ,
  <code>
   git-pull
  </code>
  ,
  <code>
   git-clone
  </code>
  and
  <code>
   git-archive
  </code>
  .
 </p>
 <p>
  To access it us the URL
  <code>
   git://bonsai/
  </code>
  +
  <code>
   CONDOR_SRC.git
  </code>
  ,
  <code>
   CONDOR_DOC.git
  </code>
  , or
  <code>
   CONDOR_EXT.git
  </code>
  , e.g.
  <code>
   git clone git://bonsai/CONDOR_SRC.git
  </code>
  .
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  git-daemon setup
 </h3>
 <p>
  git-daemon runs as an xinetd service as the apache user, which has an AFS token to access the repository.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">$ grep 9418 /etc/services
git             9418/tcp        git-daemon

$ cat /etc/xinetd.d/git-daemon
# description: The git server offers access to git repositories
service git
{
        disable         = yes
        type            = UNLISTED
        port            = 9418
        socket_type     = stream
        wait            = no
        user            = apache
        server          = /unsup/git/bin/git-daemon
        server_args     = --inetd --export-all --enable=upload-archive --base-path=/var/www/html/gitweb/projects
        log_on_failure  += USERID
</pre>
 </div>
 <p>
  To enable/disable this service change the
  <code>
   disable = yes|no
  </code>
  line in the
  <code>
   /etc/xinitd.d/git-daemon
  </code>
  and remember to send a
  <code>
   SIGHUP
  </code>
  to the
  <code>
   xinetd
  </code>
  process.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Checking if I need to git push
 </h2>
 <p>
  To check if you need to
  <code>
   git push
  </code>
  changes upstream, you can use
  <code>
   git push --dry-run
  </code>
  .  Note that this may require a newer version of git than is available in /unsup as of March 26, 2008.  It will be upgraded soon.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Using git with ssh public key authentication
 </h2>
 <p>
  In order to use git with ssh and public key authentication, you need to do the following:
 </p>
 <p>
  Create a file
  <code>
   /etc/krb5.conf
  </code>
  with the following contents:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">[libdefaults]
        default_realm = CS.WISC.EDU
[realms]
        CS.WISC.EDU = {
                kdc = kerberos.CS.WISC.EDU:88
                kdc = kerberos-1.CS.WISC.EDU:88
                kdc = kerberos-2.CS.WISC.EDU:88
                admin_server = kerberos.CS.WISC.EDU
                default_domain = CS.WISC.EDU
        }

[domain_realm]
        .cs.wisc.edu = CS.WISC.EDU
        cs.wisc.edu = CS.WISC.EDU
        .stat.wisc.edu = CS.WISC.EDU
        stat.wisc.edu = CS.WISC.EDU
</pre>
 </div>
 <p>
  Get a Kerberos ticket:
  <code>
   kinit
  </code>
  &lt;i&gt;username&lt;/i&gt;
 </p>
 <p>
  Add the following to your
  <code>
   ~/.ssh/config
  </code>
  file:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">Host gitssh
  User username
  Hostname host.cs.wisc.edu
  ChallengeResponseAuthentication no
  PreferredAuthentications gssapi-with-mic,password
  ForwardAgent yes
  GSSAPIAuthentication yes
  GSSAPIDelegateCredentials yes
</pre>
 </div>
 <p>
  Then, the repository is available at:
  <code>
   ssh://gitssh/p/condor/repository/CONDOR_SRC.git
  </code>
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Pushing only a single branch
 </h2>
 <p>
  A naked
  <code>
   git push
  </code>
  will try to push
  <strong>
   all
  </strong>
  branches up, which may not be what you want.  Even if you don't have changes on some branches, it will check if the origin is newer and will complain if the branch is pushed.  For example, if you've made changes to V7_0-branch, but not the master, but the master has changed on the upstream git repository, you might see this:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">% git push
Counting objects: 9, done.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 767 bytes, done.
Total 5 (delta 4), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
To /p/condor/repository/CONDOR_SRC.git
   3082206..2f05b12  V7_0-branch -&gt; V7_0-branch
 ! [rejected]        master -&gt; master (non-fast forward)
error: failed to push some refs to '/p/condor/repository/CONDOR_SRC.git'
</pre>
 </div>
 <p>
  This is harmless, but distracting.  The solution is to push only the branch you care about:
  <code>
   git push origin V7_0-branch
  </code>
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  Hooks
 </h2>
 <p>
  The post-update hook is run after every push.  We've changed this (in $GIT_DIR/hook/post-update) to run git update-server-info, so that it doesn't need
to be done by hand anymore.
 </p>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  What releases include this commit
 </h2>
 <p>
  &lt;p&gt;It's occasionally useful to determine which releases include a given commit, typically so you know which branches you need to fix a bug on. Assuming you're interested in commit a56c825f, use the following:
 </p>
 <div class="code">
  <pre class="code">git tag --contains a56c825f | egrep '^V[0-9]*_[0-9]*_[0-9]*$'
</pre>
 </div>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
