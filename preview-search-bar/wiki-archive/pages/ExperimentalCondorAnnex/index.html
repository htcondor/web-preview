<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Experimental Condor Annex</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="" type="text/javascript" async></script>
    <script src="" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Experimental Condor Annex</h1>
<div id="content">
 <span class="section">
  <h2>
   description
  </h2>
 </span>
 <p>
  <em>
   condor_annex
  </em>
  is (will be) a tool for expanding an HTCondor pool into the cloud.  (It presently only supports AWS.)
 </p>
 <p>
  Annex is both a verb -- the
  <em>
   condor_annex
  </em>
  tool doesn't scavenge cycles, but acquires them -- and a noun, referring to the collection of slots in the cloud.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  motivation
 </h3>
 <p>
  A user of your HTCondor pool, Dr. Needs-Moore, needs more cycles in less time than your pool can provide.  (This can happen for any number of reasons, but deadlines are a good and sufficient one.)  However, Dr. Needs-Moore has money to spend on solving this problem.  Solution: trade Dr. Needs-Moore's money for cycles.  Enter the cloud.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  constraints
 </h3>
 <p>
  We argue that the person whose money would be spent is the best one to decide when and how much to spend, so
  <em>
   condor_annex
  </em>
  must be usable by Dr. Needs-Moore.  However, the good doctor isn't a systems administrator, so
  <em>
   condor_annex
  </em>
  needs to be simple and easy to use.  At the same time, it should be hard to spend "too much" money.  In particular, idle instances should shut themselves off, and there should be a limit to how long the instances will run in any case (a lease).  (Naturally, it must be possible to extend the lease as necessary.)
 </p>
 <p>
  Our prototype reduces the end-user's responsibilities to the following command:
 </p>
 <p>
  <code>
   condor_annex --project-id 'TheNeeds-MooreLab' --expiry '2015-12-18 23:59' --instances 16
  </code>
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  proposed first-time user set-up
 </h3>
 <p>
 </p>
 <ol>
  <li>
   Dr Needs-Moore contacts the pool administrator wanting to run more jobs (by a deadline).
  </li>
  <li>
   The administrator determines that Dr Needs-Moore needs more cycles than their pool can provide (in that time).
  </li>
  <li>
   The administrator creates an AWS user for the doctor (using the AWS web console), downloads the doctor's credentials, massages them a bit, and sends the resulting file to the doctor.  The administrator also sends along a project ID.
  </li>
  <li>
   The doctor copies the file to the right place and, if our packaging hasn't already, has a grad student install the AWS command-line tool.
  </li>
 </ol>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  installation
 </h2>
 <p>
  ....
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Quick Start
 </h3>
 <p>
  This section explains how to set up
  <em>
   condor_annex
  </em>
  for single-user testing.  It assumes a fair degree of familiarity with AWS and HTCondor.
 </p>
 <p>
  <span class="subsubsection">
  </span>
 </p>
 <h4>
  AWS
 </h4>
 <p>
  Start by creating a new AWS account, or logging into your existing account.  You may prefer to do the former, since
  <em>
   condor_annex
  </em>
  is still experimental.  For the same reason,
  <em>
   condor_annex
  </em>
  presently assumes that it has almost unlimited privileges.  (In the future, there will be a high-privilege one-time set-up, and the end user will run
  <em>
   condor_annex
  </em>
  with a low-privilege AWS user (or role).)  You may want to create a(n IAM) user with "Admin" privileges, instead.
 </p>
 <p>
  You may have noticed a lot of information missing from the command-line above.
  <em>
   condor_annex
  </em>
  does all of its AWS work through the 'aws' command-line tool, which has a configuration file containing the access key and secret key for a given AWS account (or user or role).  If, like above, the command-line is incomplete,
  <em>
   condor_annex
  </em>
  will look up the missing information in the 'aws' tool's account.  This allows you (the annex administrator) to update and maintain the defaults without having to distribute files to your end users.
 </p>
 <p>
  The four default things you can set in the account are listed below.  All are region-specific.  Right now,
  <em>
   condor_annex
  </em>
  works best with the 'us-east-1' region, although the 'us-west-2' region is also supported.  (Right now, you must manually adjust the 'project ID' command line argument conform to the S3 bucket name restrictions, which are much tighter in us-west-2 for some reason.  You should also change the hard-coded default region in the
  <em>
   condor_annex
  </em>
  script.)
 </p>
 <p>
 </p>
 <ol>
  <li>
   An SSH keypair.
   <em>
    condor_annex
   </em>
   will use the one named "HTCondorAnnex".  (Found on the "EC2" page.)
  </li>
  <li>
   A VPC.
   <em>
    condor_annex
   </em>
   will use the one whose "name" tag is "HTCondorAnnex".  (Found on the "Networking" page.)  Turn on support in the VPC for DNS hostnames.
  </li>
  <li>
   VPC subnets.
   <em>
    condor_annex
   </em>
   will use the ones whose "name" tag is "HTCondorAnnex".  (Also found on the "Networking" page.")
  </li>
  <li>
   Launch configurations.
   <em>
    condor_annex
   </em>
   will use the ones named "HTCondorAnnex-1" through "HTCondorAnnex-8".  (Found on the "EC2" page.  You may need to create an
   <span class="wiki">
    <a class="missing" href="/web-preview/preview-search-bar/wiki-archive/pages/AutoScaling" title="Auto Scaling">
     AutoScaling
    </a>
   </span>
   Group in order to create a Launch Configuration; after doing so, you can cancel out of creating the
   <span class="wiki">
    <a class="missing" href="/web-preview/preview-search-bar/wiki-archive/pages/AutoScaling" title="Auto Scaling">
     AutoScaling
    </a>
   </span>
   Group.)
  </li>
 </ol>
 <p>
  To speed your quick start, we provide the following Amazon Linux AMIs with HTCondor 8.4.2 pre-installed:
 </p>
 <p>
 </p>
 <ul>
  <li>
   us-east-1 - ami-91e1a3fb
  </li>
  <li>
   us-west-1 - ami-7f06731f
  </li>
  <li>
   us-west-2 - ami-ac8890cd
  </li>
 </ul>
 <p>
  The launch configurations need only the instance type, the AMI ID, and the spot price, if any.  Additional specifications are presently ignored.
 </p>
 <p>
  Once you've used the web console to create all of these objects, you'll need to install and configure the 'aws' command-line tool.  You don't need to set a default region, but
  <em>
   condor_annex
  </em>
  defaults to 'us-east-1'.  Something along the lines of "yum install python-pip; pip install awscli" will usually get the tool installed.  To configure, run 'aws configure'.
 </p>
 <p>
  <span class="subsubsection">
  </span>
 </p>
 <h4>
  HTCondor
 </h4>
 <p>
  <em>
   condor_annex
  </em>
  assumes that it is run from a shell with a live HTCondor installation.  This means that the HTCondor binaries are in the PATH and that the environment variable CONDOR_CONFIG points to an HTCondor configuration file.  That configuration file should include lines like the ones below, since
  <em>
   condor_annex
  </em>
  assumes that pool password security is used (so that it knows what security token(s) to propagate).  The easiest way to accomplish this may be to create a personal condor; this also has the virtue of isolating your real pool from
  <em>
   condor_annex
  </em>
  while you test it.  See
 </p>
 <p>
  <a class="external" href="https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=CreatingPersonalHtcondor">
   https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=CreatingPersonalHtcondor
  </a>
 </p>
 <p>
  for more information about installing a personal condor.
 </p>
 <p>
 </p>
 <div class="verbatim">
  <pre>SEC_CLIENT_AUTHENTICATION_METHODS = FS, PASSWORD
SEC_DEFAULT_AUTHENTICATION = REQUIRED
SEC_DEFAULT_AUTHENTICATION_METHODS = FS, PASSWORD
SEC_PASSWORD_FILE = $(LOCAL_DIR)/password_file
ALLOW_WRITE = condor_pool@*/* $(FULL_HOSTNAME) $(IP_ADDRESS)
</pre>
 </div>
 <p>
  The manual has information on how to generate 'password_file'.  See also
 </p>
 <p>
  <a class="external" href="https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=HowToEnablePoolPassword">
   https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=HowToEnablePoolPassword
  </a>
 </p>
 <p>
  for more information about enabling pool password.
 </p>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
