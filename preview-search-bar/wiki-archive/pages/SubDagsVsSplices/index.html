<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="date" content="2021-10-21 14:50:19 +0000" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-search-bar/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-search-bar/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-search-bar/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-search-bar/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-search-bar/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-search-bar/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>Sub Dags Vs Splices</title>

    <script src="/web-preview/preview-search-bar/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-search-bar/assets/js/bootstrap.js" type="text/javascript"></script>
    <script src="/web-preview/preview-search-bar/assets/js/lunr.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/search_bar.js" type="text/javascript" async></script>
    <script src="/web-preview/preview-search-bar/assets/js/default.js" type="text/javascript" defer></script>

    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-search-bar/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-search-bar/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-search-bar/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-search-bar/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-search-bar/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                            <li class="nav-item">
                                <div id="main-search-bar" class="search-bar">
                                    <input type="text" class="form-control" placeholder="Loading..." aria-describedby="button-addon2">
                                    <div class="results-dropdown" class="results-dropdown w-100">
                                        <div class="search-results" ></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Sub Dags Vs Splices</h1>
<div id="content">
 This document is an explanation of why you might want to use the DAGMan
 <em>
  external sub-DAG
 </em>
 and
 <em>
  splice
 </em>
 features, and which one you might want to use in a particular situation.  (See
 <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/v8.5/2_10DAGMan_Applications.html#SECTION003108900000000000000">
  http://research.cs.wisc.edu/htcondor/manual/v8.5/2_10DAGMan_Applications.html#SECTION003108900000000000000
 </a>
 and
 <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/v8.5/2_10DAGMan_Applications.html#SECTION0031081000000000000000">
  http://research.cs.wisc.edu/htcondor/manual/v8.5/2_10DAGMan_Applications.html#SECTION0031081000000000000000
 </a>
 for detailed information about external sub-DAGs and splices,
respectively.)
 <p>
  <strong>
   When should I use one of these features?
  </strong>
 </p>
 <p>
  Both external sub-DAGs and splices allow you to compose a large workflow from
various sub-pieces that are defined in individual DAG files.  This is the
basic motivation for using either external sub-DAGs or splices:  you want to
create a single workflow from a number of DAG files, either because the
smaller DAG files already exist, or because it's easier to deal with
sub-parts of the workflow.  (One use case might be that you have sub-workflows
that you want to combine in different ways to make different overall
workflows.)
 </p>
 <p>
  Some reasons to use external sub-DAGs or splices:
 </p>
 <ul>
  <li>
   Create a workflow from separate sub-workflows
  </li>
  <li>
   Dynamically create parts of the workflow (external sub-DAGs only)
  </li>
  <li>
   Re-try multiple nodes as a unit (external sub-DAGs only)
  </li>
  <li>
   Short-circuit parts of the workflow (external sub-DAGs only)
  </li>
 </ul>
 <p>
  <strong>
   Feature comparison
  </strong>
 </p>
 <p>
  Here's a table comparing external sub-DAGs and splices.  Note that the bold entries are the ones that are advantageous for a given feature.
 </p>
 <p>
  <table border="1" cellspacing="0">
   <tbody>
    <tr>
     <td>
      <strong>
       Feature
      </strong>
     </td>
     <td>
      <strong>
       External sub-DAGs
      </strong>
     </td>
     <td>
      <strong>
       Splices
      </strong>
     </td>
     <td>
      <strong>
       Notes
      </strong>
     </td>
    </tr>
    <tr>
     <td>
      Ability to incorporate separate sub-workflow files
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Rescue DAG(s) created upon failure
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      DAG recovery (e.g., from submit machine crash)
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Creates multiple DAGMan instances in the queue
     </td>
     <td>
      yes
     </td>
     <td>
      <strong>
       no
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Possible combinatorial explosion of dependencies (see below)
     </td>
     <td>
      <strong>
       no
      </strong>
     </td>
     <td>
      yes
     </td>
     <td>
      Until we implement socket nodes for splices
     </td>
    </tr>
    <tr>
     <td>
      Sub-workflow files must exist at submission
     </td>
     <td>
      <strong>
       no
      </strong>
     </td>
     <td>
      yes
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      PRE/POST scripts allowed on sub-workflows
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
      Until we implement socket nodes for splices
     </td>
    </tr>
    <tr>
     <td>
      Ability to retry sub-workflows
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Job/script throttling applies across entire workflow
     </td>
     <td>
      no
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Separate job/script throttles for each sub-workflow
     </td>
     <td>
      yes
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Node categories can apply across entire workflow
     </td>
     <td>
      no
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ability to set priority on sub-workflows as nodes
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ability to reduce workflow memory footprint
     </td>
     <td>
      <strong>
       yes?
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
      If used properly
     </td>
    </tr>
    <tr>
     <td>
      Ability to have separate final nodes in sub-workflows
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ability to abort sub-workflows individually
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ability to associate variables with sub-workflow nodes
     </td>
     <td>
      <strong>
       yes
      </strong>
     </td>
     <td>
      no
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      Ability to configure sub-workflows individually
     </td>
     <td>
      yes
     </td>
     <td>
      no
     </td>
     <td>
      Can be good or bad
     </td>
    </tr>
    <tr>
     <td>
      Separate node status files, etc., for sub-workflows
     </td>
     <td>
      yes
     </td>
     <td>
      <strong>
       no
      </strong>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      A single halt file or condor_hold suspends the entire workflow
     </td>
     <td>
      <strong>
       no
      </strong>
     </td>
     <td>
      yes
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
 </p>
 <p>
  <strong>
   Possible combinatorial explosion of dependencies
  </strong>
 </p>
 <p>
  When one splice is the immediate parent of another splice, it is possible for
an extremely large number of dependencies to be created.  This is because
every "terminal" node of the parent splice becomes a parent of every "inital"
node in the child splice.  So, for example, if the parent splice has 1000
"terminal" nodes and the child splice has 1000 "initial" nodes, 1 million dependencies will be created.  (A "terminal" node is a node that has no
children within its splice; and an "initial" node is a node that has no
parents within its splice.)
 </p>
 <p>
  <strong>
   Should I use external sub-DAGs or splices?
  </strong>
 </p>
 <p>
  The simple answer is that, unless you need one of the features that's
available with external sub-DAGs but not with splices (see the table above), you should use splices.
Splices are generally simpler and have less overhead than external sub-DAGs
(unless the workflow is specifically designed to minimize the external
sub-DAG overhead).
Also, workflow-wide throttling is generally more useful than separate
throttles for sub-parts of the workflow.
 </p>
 <p>
  <strong>
   How to use external sub-DAGs to reduce workflow memory footprint
  </strong>
 </p>
 <p>
  (Coming soon!)
 </p>
 <p>
  Note:  This document is valid for HTCondor version 8.5.5.
 </p>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
