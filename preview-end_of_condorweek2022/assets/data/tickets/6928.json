{"id": 6928, "title": "Ticket #6928: Allow fixed shared port socket names", "description": "<blockquote>\nIt would be useful to be able to specify shared port sinfuls in configuration.  That's not presently possible because the shared port socket name contains both a PID and some random bytes.  It seems like this is overkill, at least if we assume that the DAEMON_SOCKET_DIR is not shared between different HTCondor instances.  Instead, we'd like to follow the example of the fixed 'collector' name, and name each daemon's socket after its local name (if specified) or its name in the config file (in DAEMON_LIST).  Daemons not started by the master should use their subsystem name instead.  Daemons started by daemons started by the master (starters, shadows, and grid managers, for example), should see no change, since we won't need to specify them in configuration.</blockquote>", "remarks": "<blockquote>\n<em>2019-Mar-05 22:02:57 by bbockelm:</em> <br/>\n\nJust to be clear - what happens when there's a naming collision?\n\n<p></p><hr/>\n<em>2019-Mar-06 10:25:57 by tlmiller:</em> <br/>\n\nCurrently, according to the comments in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SharedPointEndpoint\" title=\"Shared Point Endpoint\">SharedPointEndpoint</a></span> constructor, the assumption is that names are unique, so the last (most recent) endpoint will delete any files that get in the way (assuming they're stale).  That probably means that the last daemon started with the same name receives all the connections.\n\n<p>I need investigate what happens when we're using abstract domain sockets.  (I think the logic is much the same.)\n\n</p><p>Further thought on this topic is obviously needed, which is why this is off on a branch and not part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6922\" onclick=\"get_ticket_and_populate_wrapper('6922'); return false;\" title=\"Embed local, subsys, or config name in shared port socket name\">#6922</a></span>.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Feb-21 15:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f8ad4e020b696d310908777e71b5a68e390153b9\">[56233]</a></span>: (<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=6928\" onclick=\"get_ticket_and_populate_wrapper('6928'); return false;\" title=\"Allow fixed shared port socket names\">#6928</a></span>) Use my local name or subsys name for my shared port socket name if it isn't already set.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Feb-21 15:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8f579face88ace7001712a54d74e7a818098b30e\">[56232]</a></span>: (<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=6928\" onclick=\"get_ticket_and_populate_wrapper('6928'); return false;\" title=\"Allow fixed shared port socket names\">#6928</a></span>) Use config name for shared port socket name for daemons started by master.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Mar-06 10:25", "status": "new", "created": "2019-Feb-21 15:14", "fixed_version": "2019-Feb-21 15:14", "broken_version": "", "priority": "4", "subsystem": "DaemonSharedP", "assigned_to": "tlmiller", "derived_from": "#6922", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}