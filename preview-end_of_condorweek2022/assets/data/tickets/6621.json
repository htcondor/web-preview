{"id": 6621, "title": "Ticket #6621: condor_userprio shows 0 resources used when preemption disabled", "description": "<blockquote>\nfermi reports condor_userprio shows 0 resources used for all active users, even though they are clearly running jobs.\n\n<p>Turns out the problem only happens when\n\n</p><p>NEGOTIATOR_CONSIDER_PREEMPTION = false\n\n</p><p>is set.  In 8.7.3, the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> attribute in class ads is now first class, and the projection code with NEGOTIATOR_CONSIDER_PREEMPTION=False needs to explicitly add it in.</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Apr-25 11:50:52 by gthain:</em> <br/>\n\nAs a result of this bug, when NEGOTIATOR_CONSIDER_PREEMPTION is false, the negotiator, and thus the accountant, have zero numbers on claimed resources.  This is likely to cause problems for accounting, fair-share, and group accounting.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-26 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2e049b3b38a2bc146452c83038ac57c596285653\">[54578]</a></span>: Documetn <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6621\" onclick=\"get_ticket_and_populate_wrapper('6621'); return false;\" title=\"condor_userprio shows 0 resources used when preemption disabled\">#6621</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-22 17:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cdaf17df3271b0421e151111eb5038715e27fdbd\">[54566]</a></span>: Allow condor_userprio to work with preemption disabled <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6621\" onclick=\"get_ticket_and_populate_wrapper('6621'); return false;\" title=\"condor_userprio shows 0 resources used when preemption disabled\">#6621</a></span> By adding <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> to the projection  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Apr-25 11:50", "status": "resolved", "created": "2018-Mar-22 17:31", "fixed_version": "2018-Mar-22 17:31", "broken_version": "v080703", "priority": "1", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}