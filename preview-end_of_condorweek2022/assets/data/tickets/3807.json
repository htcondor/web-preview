{"id": 3807, "title": "Ticket #3807: condor-admin silently dropping email", "description": "<blockquote>\nZach writes in email:\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nI see Peter's mail in the RUST logs, but for whatever reason no ticket was\ncreated as a result.  I can't find any errors, nor was anything sent to\ncondor-system complaining about a malformed RUST, which is what sometimes\nhappens.\n\nSo, mail delivery worked.  RUST sucked, and as far as I can tell it did so\nsilently. :(\n</td></tr></tbody></table></div>\n\n\n<p>The only clue I can offer is that I attached some relevant logs, so the email was somewhat large (~3.5MB).</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jul-30 15:25:23 by zmiller:</em> <br/>\n\nThe problem was related to the condor-&gt;htcondor change and the code that munges the mail headers.  Specifically, Peter's To: header in the email looked like this:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">To: \"htcondor-admin@cs.wisc.edu\" &lt;condor-admin@cs.wisc.edu&gt;\n</pre></div>\n\n\n<p>The regex that remaps \"condor\" to \"htcondor\" was not being invoked because the first part of the address appears as if it has already been mapped.  Later parts of the rust system then saw \"condor-admin\" and didn't know what queue that was.\n\n</p><p>The scripts now globally replace all instances of condor-admin/support that appear in the To: and Cc: lines, and are smart enough not to change htcondor to hthtcondor as well. :)\n\n</p><p></p><hr/>\n<em>2013-Sep-03 09:16:41 by pfc:</em> <br/>\n\nZach,\n\n<p>I just sent an email to condor-support on Friday which Kent W. claims never arrived.  Might there still be a problem lingering with condor-support that you fixed for condor-admin?  Or maybe another problem?  I'll attach the email I sent.\n\n</p><p></p><hr/>\n<em>2013-Sep-03 10:18:42 by wenger:</em> <br/>\n\nAnother note about this -- I sent email with the following header to the ticket:\n\n<p></p><pre>  Date: Fri, 30 Aug 2013 14:47:47 -0500 (CDT)\n  From: R. Kent Wenger &lt;wenger@cs.wisc.edu&gt;\n  To: wenger &lt;htcondor-support@cs.wisc.edu&gt;\n  Cc: R. Kent Wenger &lt;wenger@cs.wisc.edu&gt;\n  Subject: Re: [htcondor-support #8336] possible critical 8.0.2 dagman\n      recovery bug\n</pre>\n\n<p></p><pre>  Date: Fri, 30 Aug 2013 14:49:21 -0500 (CDT)\n  From: htcondor-support response tracking system &lt;htcondor-support@cs.wisc.edu&gt;\n  To: pfcouvar@syr.edu\n  Cc: condorligo@aei.mpg.de, samantha.usman@gmail.com, dabrown@physics.syr.edu\n  Subject: [CondorLIGO] Re: [htcondor-support #8336] possible critical 8.0.2\n      dagman recovery bug\n</pre>\n\n<p>That showed up in my inbox on Friday the 30th -- but a second copy of it showed up in my inbox on Monday Sep. 2.\n\n</p><p>Hmm -- looks like I got two copies of this one, too:\n\n</p><p></p><pre>  Date: Fri, 30 Aug 2013 10:36:13 -0500 (CDT)\n  From: R. Kent Wenger &lt;wenger@cs.wisc.edu&gt;\n  To: wenger &lt;htcondor-support@cs.wisc.edu&gt;\n  Cc: R. Kent Wenger &lt;wenger@cs.wisc.edu&gt;\n  Subject: Re: [htcondor-support #8336] possible critical 8.0.2 dagman\n      recovery bug\n</pre>\n\n<p></p><pre>  Date: Fri, 30 Aug 2013 10:37:33 -0500 (CDT)\n  From: htcondor-support response tracking system &lt;htcondor-support@cs.wisc.edu&gt;\n  To: pfcouvar@syr.edu\n  Cc: condorligo@aei.mpg.de, samantha.usman@gmail.com, dabrown@physics.syr.edu\n  Subject: [CondorLIGO] Re: [htcondor-support #8336] possible critical 8.0.2\n      dagman recovery bug\n</pre>\n\n<p>Again I got the second copy two days later.  Also, the second copies of the two messages were out of order relative to each other.\n\n</p><p></p><hr/>\n<em>2013-Sep-03 11:00:46 by zmiller:</em> <br/>\n\nAfter examining RUST logs, there is no record of Peter's email at all.  So it seems that there was a delivery failure, or perhaps it was eating between delivery and getting piped to RUST.  In either case, RUST can't act on what it doesn't see.\n\n<p>If you are reasonably certain that you actually sent it (and I believe you are, but you may wish to double check) we could ask the CSL to examine their mail logs to see if there is some other issue.\n\n</p><p></p><hr/>\n<em>2013-Oct-01 14:44:30 by pfc:</em> <br/>\n\nResolving for now until/unless it happens again.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/798/s8336-email.eml\">s8336-email.eml</a>\n2095 bytes added by pfc on 2013-Sep-03 14:27:45 UTC.\n<br/>\nThis is the email I sent, minus the encoded attachment (since that's too big for a ticket attachment).\n\n<p>The encoded attachment was 6MB, which is large but not huge.  (Usually anything &lt;10MB works fine, right?)<br/>\n</p></li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "incident", "last_change": "2013-Oct-01 14:44", "status": "defer", "created": "2013-Jul-24 11:22", "fixed_version": "2013-Jul-24 11:22", "broken_version": "", "priority": "5", "subsystem": "Unknown", "assigned_to": "zmiller", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu tannenba@cs.wisc.edu wenger@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}