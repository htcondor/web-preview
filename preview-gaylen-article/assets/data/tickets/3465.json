{"id": 3465, "title": "Ticket #3465: Remote IO in Vanilla Universe", "description": "<blockquote>\nPOSIX Remote IO (the ability to access the submitter's filesystem) is one of the features in standard universe and missing from the vanilla universe.\n\n<p>However, most of the ingredients are there.  We have WantIOProxy and chirp IO which can provide POSIX remote IO when the job is run under parrot.\n\n</p><p>I propose wrapping chirp IO in a FUSE filesystem, allowing us to mount the submitter's filesystem.  We can then use filesystem namespaces to make this mount private to the job and have lifetime equal to the job's processes.\n\n</p><p>Design document incoming.  Will post this to UW git as branch \"V7_9-vanilla_remote_io-branch\".</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jan-28 08:31:05 by bbockelm:</em> <br/>\n\ndthain pointed out the following:\n\n<p><a class=\"external\" href=\"http://www.cse.nd.edu/~ccl/software/manuals/man/chirp_fuse.html\">http://www.cse.nd.edu/~ccl/software/manuals/man/chirp_fuse.html</a>\n\n</p><p>It is based on the CCL chirp client implementation and provides a far richer set of error handling, timeouts, and retries.  We ought to add integrating with that FUSE implementation (if present) to the TODO list in the design document.\n\n</p><p>Ideally, we would have only <strong>one</strong> Chirp client implementation, based on the CCL one.  This may be out-of-scope for this ticket.\n\n</p><p></p><hr/>\n<em>2013-Apr-04 10:13:59 by gthain:</em> <br/>\n\nComments on the design document:\n\n<p>1) If the filesystem is always mounted under /condor, that means that nested condors (personal condors or glideins) only see the most-nested condor.\n\n</p><p>2) The knob to turn this on or off is on the execute side or on the submit side?\n\n</p><p>3) The knob \"WantIOProxy\" is not new, and already has some semantics.  I'm a little leery of making it also enable the fuse mount.  Should we have another job attributes that turns on fuse mounting independently of chirp?\n\n</p><p>4) The new knobs don't appear in the param table.\n\n</p><p>5) When I try to run the code on Fedora 18, my job just goes on hold with errno 13: permission denied</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=3499\" onclick=\"get_ticket_and_populate_wrapper('3499'); return false;\" title=\"per job 'Name' mounting\">#3499</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nper job 'Name' mounting</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/677/HTCondor+Remote+IO.docx\">HTCondor Remote IO.docx</a>\n121081 bytes added by bbockelm on 2013-Jan-28 02:25:43 UTC.\n<br/>\nCorresponding design document.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Feb-18 10:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/03a6cdc31f81447ec8d3e751a48647ec7b5becec\">[34938]</a></span>: Ticket <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=3465\" onclick=\"get_ticket_and_populate_wrapper('3465'); return false;\" title=\"Remote IO in Vanilla Universe\">#3465</a></span> Cleanup fuse checks and conditionalize compilation  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-27 19:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1669f922e1c638bf5348bd7284f62970c95eaa10\">[34772]</a></span>: Implement a FUSE filesystem for Chirp IO. Allow Condor jobs to mount it in /condor/submitter or /. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=3465\" onclick=\"get_ticket_and_populate_wrapper('3465'); return false;\" title=\"Remote IO in Vanilla Universe\">#3465</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-26 23:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/006246db43b6695e3f42835972f162687bb0db3d\">[34771]</a></span>: Allow starter to FUSE-mount a filesystem at /condor if requested. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=3465\" onclick=\"get_ticket_and_populate_wrapper('3465'); return false;\" title=\"Remote IO in Vanilla Universe\">#3465</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-May-15 09:29", "status": "active", "created": "2013-Jan-27 20:22", "fixed_version": "2013-Jan-27 20:22", "broken_version": "v070900", "priority": "4", "subsystem": "", "assigned_to": "bbockelm", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu, tstclair@redhat.com", "due_date": ""}