{"id": 1584, "title": "Ticket #1584: Remove compatibility checks for submitter/scheduler ads", "description": "<blockquote>\nAs an old compatibility hack, submitter ads sent to the collector by the schedd used to have a <span class=\"quote\">MyType</span>  of \"Scheduler\", but ClassAd::GetMyTypeName() would return \"Submitter\" if the ad really was a submitter ad. How did it distinguish between submitter ads and real scheduler ads? Scheduler ads have a <span class=\"quote\">NumUsers</span> attribute and submitter ads don't.\n\n<p>Starting with Condor 7.3.2, we've been slowly separating the two ad types. See <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1581\" onclick=\"get_ticket_and_populate_wrapper('1581'); return false;\" title=\"Seperate scheduler and submitter ad types\">#1581</a></span> for a description of earlier changes. For 7.7.3, we fixed submitter ads from the dedicated scheduler to have the proper <span class=\"quote\">MyType</span> (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2505\" onclick=\"get_ticket_and_populate_wrapper('2505'); return false;\" title=\"Dedicated scheduler sets wrong MyType for submitter ads\">#2505</a></span>). The goal for 7.9.x is to remove the remaining compatibility code.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-09 13:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d90b376691ca1d627c3c8c1afa9581c12f9c0e81\">[36815]</a></span>: Remove compatibility code for Submitter/Scheduler ads. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span> Finish transition to always label submitter ads as \"Submitter\" on the wire instead of as \"Scheduler\". We remove code in the collector that forces the ad type to \"Submitter\" for submitter ads and queries for them. We assume all clients use the\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-27 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8ff9df8222e4bb2343165cf45224f8f44494eb68\">[27436]</a></span>: Revert \"Remove compatibility code for Submitter/Scheduler ads in the collector. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span>\" This reverts commit cb1dd3030f9ca9fb105ff41dc8bcf63fc2632cf2. The dedicated scheduler still sets MyType=\"Scheduler\" for submitter ads, so we can't remove these compatibility checks yet.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-26 11:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/70b746237a46422e70f547030a2573c5f044a811\">[27406]</a></span>: Revert \"Remove compatibility code for Submitter/Scheduler ads in the collector. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span>\" This reverts commit 657a1ad0b042d3a1b0c7f0a922c0f64c9c13030e.  (By Scott Kronenfeld )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-23 12:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/657a1ad0b042d3a1b0c7f0a922c0f64c9c13030e\">[27367]</a></span>: Remove compatibility code for Submitter/Scheduler ads in the collector. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span> Remove some additional checks in the negotiator and condor_status.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-22 16:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cb1dd3030f9ca9fb105ff41dc8bcf63fc2632cf2\">[27358]</a></span>: Remove compatibility code for Submitter/Scheduler ads in the collector. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1584\" onclick=\"get_ticket_and_populate_wrapper('1584'); return false;\" title=\"Remove compatibility checks for submitter/scheduler ads\">#1584</a></span> Finish transition to always label submitter ads as \"Submitter\" on the wire instead of as \"Scheduler\". We remove code in the collector that forces the ad type to \"Submitter\" for submitter ads and queries for them. We assume\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jul-24 14:18", "status": "resolved", "created": "2010-Aug-17 10:29", "fixed_version": "2010-Aug-17 10:29", "broken_version": "v070504", "priority": "4", "subsystem": "", "assigned_to": "jfrey", "derived_from": "#1581", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}