{"id": 3158, "title": "Ticket #3158: condor_config in $HOME is not practical", "description": "<blockquote>\nHaving a user-specified config file (~/.condor/condor_config) is a great idea, but it doesn't seem very useful.\n\n<p>It appears that (running master from last week) ~/.condor/condor_config acts as the global config file if it exists.  Thus, if it contains:\n\n</p><p></p><div class=\"verbatim\">\n<pre>FOO=bar\n</pre></div>\n\n\n<p>then \"condor_config_val -dump\" will contain the contents of the param table, FOO, and nothing else.\n\n</p><p>I next thought that this would work:\n\n</p><p></p><div class=\"verbatim\">\n<pre>LOCAL_CONFIG_FILE=/etc/condor/condor_config\nFOO=bar\n</pre></div>\n\n\n<p>Indeed, it pulls in the rest of the global configuration - but \"FOO\" is overridden by the contents of the global config (if the global config sets FOO).\n\n</p><p>So, I can't actually use ~/.condor/condor_config to override global configuration variables for a given user , which is the one thing I want to do with it.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Sep-24 15:15:07 by bbockelm:</em> <br/>\n\nJaime - can I get a review of this?\n<hr/>\n<em>2012-Oct-22 14:59:59 by zmiller:</em> <br/>\n\nBulk change of target version from v070901 to v070902 using ./ticket-target-mover.\n<hr/>\n<em>2012-Dec-11 16:38:39 by johnkn:</em> <br/>\n\nBulk change of target version from v070902 to v070903 using ./ticket-target-mover.\n<hr/>\n<em>2013-Jan-22 10:54:51 by johnkn:</em> <br/>\n\nBulk change of target version from v070903 to v070904 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-05 10:58:27 by johnkn:</em> <br/>\n\nBulk change of target version from v070904 to v070905 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2013-Mar-20 16:14:19 by tannenba:</em> <br/>\n\nJaime - Does this break any BOSCO assumptions?\n<hr/>\n<em>2013-Apr-22 11:10:10 by johnkn:</em> <br/>\n\nBulk change of target version from v070905 to v070906 using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2013-Dec-23 16:12:54 by bbockelm:</em> <br/>\n\nHi tannenba,\n\n<p>Can I push this?  We've been carrying it in production for &gt;1 year.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2014-Aug-20 13:46:52 by johnkn:</em> <br/>\n\nThis patch is rejected as a redefinition of the behavior of $(HOME)/.condor/condor_config.\n\n<p>There is also some consternation because this redefinition went in without consultation of the team as a whole (or even with the developer who put in the original behavior).\n\n</p><p>The original design of <code>$(HOME)/.condor/condor_config</code> was not intended to provide users with a way to modify the condor configuration (which is a problem with many alternative solutions. It was intended as a way for a user to install a personal htcondor and fully control the configuration of that htcondor without accidently picking up a system condor configuration.\n\n</p><p>It does seem useful to provide a way for the user to have a file that modifies the condor configuration without replacing it wholesale.  This can currently be solved by an administrator, but there is no way for a user to do this on their own except by creating a lot of environment variables.\n\n</p><p>In order to accomplish this and not conflict with the pre-existing meaning of <code>$(HOME)/.condor/condor_config</code>, we should use a different filename. <code>$(HOME)/.condor/user_config</code> has been proposed and is deemed reasonable by the team at CS.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4541\" onclick=\"get_ticket_and_populate_wrapper('4541'); return false;\" title=\"ordering of configuration files not well documented\">#4541</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nordering of configuration files not well documented</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/611/0001-Apply-the-user-s-condor_config-last-rather-than-firs.patch\">0001-Apply-the-user-s-condor_config-last-rather-than-firs.patch</a>\n3479 bytes added by bbockelm on 2012-Jul-24 14:42:35 UTC.\n<br/>\nProposed solution.<br/>\n</li><li><a href=\"../files/638/0001-Apply-the-user-s-condor_config-last-rather-than-firs.patch\">0001-Apply-the-user-s-condor_config-last-rather-than-firs.patch</a>\n3493 bytes added by bbockelm on 2012-Sep-24 20:43:30 UTC.\n<br/>\nThis patch doesn't apply cleanly post-formatstr.  New version attached.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-10 15:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/97a72d11cf13fdf92ef2283a9f72623a677e208e\">[41139]</a></span>: document last detail of disabling the use of this new configuration file <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-05 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f9c8a1ae94f74aea6c9569e23490c735b00ade7\">[41108]</a></span>: documentation of 8.3.1 change to user-specific configuration file <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-25 22:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c8cfae48a73f4b2750eb11bc491b9e8771b6b6d\">[41032]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-25 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/706e01bcd2a310a5d3f2bd6b8cca121a2831f3e9\">[41030]</a></span>: add a user-specific condor config file which is parsed last <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-25 10:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b06a977c247a91881ac092e2b75fa2189084a80d\">[41022]</a></span>: Revert \"Apply the user's condor_config last rather than first. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span>\" This reverts commit 8418e9e88989a216cada0dc1e086bb803ac02c3f. Conflicts: doc/version-history/8-3.history.tex  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-25 09:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8418e9e88989a216cada0dc1e086bb803ac02c3f\">[40753]</a></span>: Apply the user's condor_config last rather than first. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3158\" onclick=\"get_ticket_and_populate_wrapper('3158'); return false;\" title=\"condor_config in $HOME is not practical\">#3158</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Sep-08 13:47", "status": "resolved", "created": "2012-Jul-24 08:54", "fixed_version": "2012-Jul-24 08:54", "broken_version": "v070900", "priority": "2", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "bbockelm@cse.unl.edu, tstclair@redhat.com, tannenba@cs.wisc.edu", "due_date": ""}