{"id": 1682, "title": "Ticket #1682: Upgrade to new version of HDFS", "description": "<blockquote>\nNew version of HDFS (0.21) includes 135 improvements, 38 new features, 143 bug fixes and\noptimizations (<a class=\"external\" href=\"http://hadoop.apache.org/hdfs/docs/r0.21.0/changes.html\">http://hadoop.apache.org/hdfs/docs/r0.21.0/changes.html</a>).\n\n<p>The most important feature that comes with new version is that instead of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SecondaryName\" title=\"Secondary Name\">SecondaryName</a></span> Node which was acting as mere checkpointer, now we have Checkpoint Node and Backup Node to provide high availability.</p></blockquote>", "remarks": "<blockquote>\nCompletely removed <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SecondaryNameNode\" title=\"Secondary Name Node\">SecondaryNameNode</a></span> from node types. Instead, added roles to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NameNode\" title=\"Name Node\">NameNode</a></span> as follows (with command options):<br/>\n\nACTIVE (\"-regular\") : Start namenode in standard, active role. This is the default role.<br/>\n\nBACKUP (\"-backup\"): Start namenode in backup role, maintaining an up-to-date in-memory copy of the namespace and creating periodic checkpoints.<br/>\n\nCHECKPOINT (\"-checkpoint\"): Start namenode in checkpoint role, creating periodic checkpoints of the active namenode metadata.<br/>\n\n<br/>\n\nRenamed HDFS_SERVICES parameter as HDFS_NODETYPE which can bet set either HDFS_NAMENODE or HDFS_DATANODE. If parameter somehow can not be read then node is assumed to be a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DataNode\" title=\"Data Node\">DataNode</a></span>. <br/>\n\n\n<p>Added parameter \"HDFS_NAMENODE_ROLE\" to define role of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NameNode\" title=\"Name Node\">NameNode</a></span>, can be set either ACTIVE, BACKUP, or CHECKPOINT. Assumed to be ACTIVE by default. If node is set to be <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DataNode\" title=\"Data Node\">DataNode</a></span> then this parameter simply ignored.<br/>\n\n\n</p><p>Added new entry to externals </p><div class=\"code\">\n<pre class=\"code\">externals/bundles/hadoop/0.21.0/</pre></div>\n\n\n<p>Package <strong>hadoop-0.21.0.tar.gz</strong> is available at </p><div class=\"code\">\n<pre class=\"code\">http://parrot.cs.wisc.edu/externals/hadoop-0.21.0.tar.gz</pre></div>\n\n\n<p></p><hr/>\n<em>2010-Oct-06 12:13:46 by ilikhan:</em> <br/>\n\nexternals/bundles/hadoop/0.21.0/URLS:<br/>\n\n<div class=\"code\">\n<pre class=\"code\">http://parrot.cs.wisc.edu/externals/hadoop-0.21.0.tar.gz</pre></div>\n<br/>\n\n\n<p>externals/bundles/hadoop/0.21.0/build_hadoop-0.21.0:<br/>\n\n</p><div class=\"code\">\n<pre class=\"code\">#! /bin/sh\n\nset x\n. $EXTERNALS_CONFIG\n\nmkdir -p $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs\nmkdir -p $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs/conf\n\ncp -r $PACKAGE_SRC_NAME/lib $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs\ncp -r $PACKAGE_SRC_NAME/webapps $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs\ncp $PACKAGE_SRC_NAME/hadoop-common-0.21.0.jar $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs/\ncp $PACKAGE_src_name/hadoop-hdfs-0.21.0.jar $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs/\ncp $PACKAGE_SRC_NAME/hdfs/src/java/hdfs-default.xml $EXTERNALS_INSTALL_DIR/$PACKAGE_NAME/hdfs/conf/</pre></div>\n<br/>\n\n\n<p>externals/bundles/hadoop/0.21.0/build_hadoop-0.21.0.bat:<br/>\n\n</p><div class=\"code\">\n<pre class=\"code\">rm -rf ..\\..\\install\\hdfs\n\nmkdir ..\\..\\install\\hdfs\nmkdir ..\\..\\install\\hdfs\\conf\n\ncp -r %PACKAGE_SRC_NAME%\\webapps ..\\..\\install\\hdfs\ncp -r %PACKAGE_SRC_NAME%\\lib ..\\..\\install\\hdfs\ncp %PACKAGE_SRC_NAME%\\hadoop-common-0.21.0.jar ..\\..\\install\\hdfs\\\ncp %PACKAGE_SRC_NAME%\\hadoop-hdfs-0.21.0.jar ..\\..\\install\\hdfs\ncp %PACKAGE_SRC_NAME%\\hdfs\\src\\java\\hdfs-default.xml ..\\..\\install\\hdfs\\conf</pre></div>\n\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n<hr/>\nThis has been resolved some time ago</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1797\" onclick=\"get_ticket_and_populate_wrapper('1797'); return false;\" title=\"condor_hdfs is crashing\">#1797</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_hdfs is crashing</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=1808\" onclick=\"get_ticket_and_populate_wrapper('1808'); return false;\" title=\"condor_hdfs is crashing in BACKUP role\">#1808</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_hdfs is crashing in BACKUP role</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/231/git_status.txt\">git_status.txt</a>\n643 bytes added by ilikhan on 2010-Oct-06 16:58:27 UTC.\n</li><li><a href=\"../files/232/git_diff.txt\">git_diff.txt</a>\n8646 bytes added by ilikhan on 2010-Oct-06 16:58:35 UTC.\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "todo", "last_change": "2011-May-24 14:18", "status": "resolved", "created": "2010-Sep-28 20:42", "fixed_version": "2010-Sep-28 20:42", "broken_version": "v070403", "priority": "4", "subsystem": "Daemons", "assigned_to": "ilikhan", "derived_from": "", "creator": "ilikhan", "rust": "", "customer_group": "other", "visibility": "public", "notify": "gthain@cs.wisc.edu", "due_date": ""}