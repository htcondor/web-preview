{"id": 2916, "title": "Ticket #2916: Infinite loop in gridmanager for gram jobs", "description": "<blockquote>\nIf the job-manager for a gt2 gram job ends up running on a different port than the gridmanager expects, then the gridmanager can end up in an infinite loop trying to recover.\n\n<p>The gridmanager bounces between GM_START state trying to restart the jobmanager (getting an OLD_JM_ALIVE error) and GM_REGISTER state, registering for callbacks using the bad port (getting a connection failed error).\n\n</p><p>When the restart command results in an OLD_JM_ALIVE error, it includes the port of the currently-running jobmanager. The gridmanager should use that address for further attempts to connect to the jobmanager.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Apr-03 16:22:29 by jfrey:</em> <br/>\n\nThe infinite loop doesn't consume much cpu and the gridmanager continues to manage other jobs normally.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-03 16:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0e2d2501e23a48939bf2e849b521b72e2aa480b4\">[31094]</a></span>: Fixed an infinite loop in the gridmanager for gt2 jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2916\" onclick=\"get_ticket_and_populate_wrapper('2916'); return false;\" title=\"Infinite loop in gridmanager for gram jobs\">#2916</a></span> If the jobmanager is listening on a different port than what's in <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridJobId\" title=\"Grid Job Id\">GridJobId</a></span>, the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GlobusJob\" title=\"Globus Job\">GlobusJob</a></span> object will bounce between states GM_REGISTER and GM_RESTART, always attempting to contact the jobmanager using the incorrect port. Now, when a restart\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Apr-04 17:01", "status": "resolved", "created": "2012-Apr-03 15:01", "fixed_version": "2012-Apr-03 15:01", "broken_version": "v070600", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}