<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How To Ban User</title>

    <script src="/web-preview/preview-move-wiki/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-move-wiki/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-move-wiki/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-move-wiki/index.html"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-move-wiki/assets/images/CondorTitle.png" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>How To Ban User</h1>
<div id="content">
 <span class="section">
  <h2>
   How to ban a user from submitting jobs
  </h2>
 </span>
 <p>
  Known to work with HTCondor version: 7.0
 </p>
 <p>
  Suppose a user is submitting jobs that are causing problems (like crashing machines) and you need to temporarily block the user until you can talk with them and solve the problem.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to ban a user from submitting jobs
 </h3>
 <p>
  Add the following to the submit machine configuration:
 </p>
 <div class="code">
  <pre class="code">DENY_WRITE = dan@hep.wisc.edu/*
</pre>
 </div>
 <p>
  Then run
 </p>
 <div class="code">
  <pre class="code">condor_reconfig -full &lt;submit machine name&gt;</pre>
 </div>
 .  You might need to run that from  the central manager if only the central manager is allowed to run administrative commands in your HTCondor pool.  To verify that this configuration setting was successfully processed, query the schedd:
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_config_val -schedd DENY_WRITE
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to ban a user from joining the pool
 </h3>
 <p>
  If you do not control the submit machine, you could block the user from advertising to the pool collector.  Use
 </p>
 <div class="code">
  <pre class="code">condor_status -submitters</pre>
 </div>
 to see the value of the submitter ad's Name attribute for the user to be banned.  (You can use the -long option if the name is truncated in the output.)  Then enter it into the following configuration settings and run
 <div class="code">
  <pre class="code">condor_reconfig</pre>
 </div>
 .  It will take ~15 minutes for the existing submitter ad to expire, so restart the collector if you are in a hurry.
 <p>
 </p>
 <div class="code">
  <pre class="code">IsBannedSubmitter = MyType == "Submitter" &amp;&amp; Name == "dan@hep.wisc.edu"
COLLECTOR_REQUIREMENTS = ($(IsBannedSubmitter)) == False
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to ban a user from executing jobs on specific machines
 </h3>
 <p>
  If you just want to ban a user from submitting to some but not all machines, you could do that in the execute machine configuration:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">IsBannedUser = User =?= "dan@hep.wisc.edu"
START =  ($(START)) &amp;&amp; ( ($(IsBannedUser))  == FALSE )
</pre>
 </div>
 <p>
  Run
 </p>
 <div class="code">
  <pre class="code">condor_reconfig -all</pre>
 </div>
 after you have made that change (or just reconfig the execute machines that need it).
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
