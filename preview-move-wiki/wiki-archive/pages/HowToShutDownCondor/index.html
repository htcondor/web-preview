<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How To Shut Down Condor</title>

    <script src="/web-preview/preview-move-wiki/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-move-wiki/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-move-wiki/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-move-wiki/index.html"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-move-wiki/assets/images/CondorTitle.png" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>How To Shut Down Condor</h1>
<div id="content">
 <span class="section">
  <h2>
   How to shut down HTCondor without killing jobs
  </h2>
 </span>
 <p>
  Known to work with HTCondor version: 7.0
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to shut down a single execute node without killing jobs
 </h3>
 <p>
  Issue the following command from the central manager, or, depending on your security policy, from wherever and as whomever you need to be to issue administrative commands.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -startd -peaceful &lt;hostname&gt;
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to shut down the whole pool without killing any jobs
 </h3>
 <p>
  Initiate a peaceful shutdown of all execute nodes.  Issue the following command from the central manager, or, depending on your security policy, from wherever and as whomever you need to be to issue administrative commands.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -all -startd -peaceful
</pre>
 </div>
 <p>
  Once condor_status reports that the pool is empty of startds, shut everything else off:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -all -master
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to shut down a submit node after finishing all existing jobs in the queue
 </h3>
 <p>
  Disable new submissions to the schedd by adding the following to the configuration file:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">MAX_JOBS_SUBMITTED=0
</pre>
 </div>
 <p>
  Once all jobs have completed, turn off HTCondor by issuing the following command from the central manager, or, depending on your security policy, from wherever and as whomever you need to be to issue administrative commands.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -schedd -peaceful &lt;hostname&gt;
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to shut down a submit node after finishing all running jobs in the queue
 </h3>
 <p>
  As of HTCondor 7.1.1, you can do this by issuing the following command from the central manager, or, depending on your seucrity policy, from wherever and as whomever you need to be to issue administrative commands.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -schedd -peaceful &lt;hostname&gt;
</pre>
 </div>
 <p>
  In versions prior to HTCondor 7.1.1, you can put all idle jobs on hold and then wait for the running jobs to finish.  Run the following command as a user with administrative privileges in the queue (e.g. root).
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_hold -constraint 'JobStatus == 1'
</pre>
 </div>
 <p>
  In this case, you may also wish to disable the submission of new jobs by adding the following to your configuration:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">MAX_JOBS_SUBMITTED=0
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to shut down a submit node temporarily (e.g. to reboot the machine) without waiting for jobs to finish but doing as little damage as possible
 </h3>
 <p>
  Just shut down the schedd normally (graceful shutdown).  Issue the following command from the central manager, or, depending on your seucrity policy, from wherever and as whomever you need to be to issue administrative commands.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">condor_off -schedd &lt;hostname&gt;
</pre>
 </div>
 <p>
  During graceful shutdown of the schedd, all running standard universe jobs are stopped and checkpointed.  All other jobs are left running (if they have a non-zero
  <span class="quote">
   JobLeaseDuration
  </span>
  , which is 20 minutes by default).  The schedd gracefully disconnects from them in the hope of being able to later reconnect to the running jobs when it starts back up.  If the lease runs out before the schedd reconnects to the jobs, then they are killed.  Therefore, if you need a longer down time, you should increase the lease.  You can increase the default by adding the following to your HTCondor configuration:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">JobLeaseDuration = 5400
SUBMIT_EXPRS = $(SUBMIT_EXPRS) JobLeaseDuration
</pre>
 </div>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
