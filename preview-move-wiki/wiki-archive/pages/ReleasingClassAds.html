<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Releasing Class Ads</title>

    <script src="/web-preview/preview-move-wiki/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-move-wiki/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-move-wiki/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-move-wiki/index.html"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-move-wiki/assets/images/CondorTitle.png" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-move-wiki/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>Releasing Class Ads</h1>
<div id="content">
 <span class="section">
  <h2>
   Punchlist for creating a new ClassAds release
  </h2>
 </span>
 <p>
 </p>
 <ul>
  <li>
   Ensure
   <code>
    src/classad/CHANGELOG
   </code>
   has all relevant changes. Add a section for the new version if necessary.
   <p>
   </p>
  </li>
  <li>
   Update the version number and release date in the follow files:
   <ul>
    <li>
     <code>
      src/classad/CHANGELOG
     </code>
    </li>
    <li>
     <code>
      src/classad/do_packaging
     </code>
     : DIST_VERSION
    </li>
    <li>
     <code>
      src/classad/README
     </code>
     : first line
    </li>
    <li>
     <code>
      src/classad/classad.cpp
     </code>
     : ClassAdLibraryVersion()
     <strong>
      Update both functions with this name!
     </strong>
    </li>
    <li>
     <code>
      src/classad/Doxyfile
     </code>
     : PROJECT_NUMBER
    </li>
   </ul>
   <p>
   </p>
  </li>
  <li>
   Update the shared library version number in
   <code>
    src/classad/Makefile.am.m4
   </code>
   . Look for these two lines:
   <div class="code">
    <pre class="code">libclassad_la_LDFLAGS = -version-info 1:0:0
libclassad_ns_la_LDFLAGS = -version-info 1:0:0
</pre>
   </div>
   If the ABI has changed (such that programs linked against an older
version won't work with the new version), you should increment the first
number and set the second and third ones to zero. If the ABI has only been
expanded (new symbols added), increment the first and third numbers, and
set the second one to zero. If the ABI hasn't changed, then increment the
second number.
See
   <a class="external" href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN135">
    http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN135
   </a>
   for examples of things that will change the ABI incompatibly.
  </li>
 </ul>
 <p>
  This ABI compliance checker program may be useful:
  <a class="external" href="http://ispras.linuxfoundation.org/index.php/ABI_compliance_checker">
   http://ispras.linuxfoundation.org/index.php/ABI_compliance_checker
  </a>
 </p>
 <p>
  <em>
   Note:
  </em>
  The version given here isn't quite the version you'll see on the
.so files. Libtool converts it like so:
  <code>
   -version-info
  </code>
  <em>
   A:B:C
  </em>
  results in
  <code>
   libclassad.so.
  </code>
  <em>
   &lt;A-C&gt;.&lt;C&gt;.&lt;B&gt;
  </em>
  .
When releasing a version with incompatible ABI changes, you can end up
with a big jump in the major version of the .so if you just increment A
and set B and C to zero. Instead, you can set the
new version like so:
  <code>
   -version-info
  </code>
  <em>
   &lt;1+A-C&gt;:0:0
  </em>
  . This will result in the
major version of the .so incrementing by one.
 </p>
 <p>
 </p>
 <ul>
  <li>
   run
   <code>
    do_packaging
   </code>
   in
   <code>
    src/classad
   </code>
   <p>
   </p>
  </li>
  <li>
   Ensure the release builds successfully
   <div class="code">
    <pre class="code">cd classads-1.0.8
./configure
make
make check
cd ..
</pre>
   </div>
   <p>
   </p>
  </li>
  <li>
   Edit TAGS and add a new tag name for this version.
   <p>
   </p>
  </li>
  <li>
   Ensure all of your changes are committed.
   <p>
   </p>
  </li>
  <li>
   Tag the release:
   <div class="code">
    <pre class="code">git tag classads_1_0_8
git push origin classads_1_0_8
</pre>
   </div>
   <p>
   </p>
  </li>
  <li>
   Copy the release tarball into
   <code>
    /p/condor/public/ftp/classad/c++/
   </code>
   .
   <p>
   </p>
  </li>
  <li>
   Copy
   <code>
    src/classad/CHANGELOG
   </code>
   to
   <code>
    /p/condor/public/html/classad/c++changelogs/changes-&lt;version&gt;.txt
   </code>
   .
   <p>
   </p>
  </li>
  <li>
   Update
   <code>
    /p/condor/public/html/classad/classad.html
   </code>
   to mention the new release.
   <p>
   </p>
  </li>
  <li>
   Update the Doxygen webpages:
  </li>
 </ul>
 <p>
 </p>
 <div class="code">
  <pre class="code">/unsup/doxygen-1.7.1/bin/doxygen
mv /p/condor/public/html/classad/c++doc /p/condor/public/html/classad/c++doc.old
cp -r doc/html /p/condor/public/html/classad/c++doc
rm -rf /p/condor/public/html/classad/c++doc.old
</pre>
 </div>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
