{"id": 1785, "title": "Ticket #1785: privsep switchboard fails on broken symlinks", "description": "<blockquote>\nThe privsep switchboard fails to recursively chown a directory containing symlinks that point to files that do not exist.\n\n<p>The problem appears to be in chown_func().  It calls safe_open_no_follow(), which returns -1, which causes chown_func() to return -1.\n\n</p><p>We believe that the recursive rm works correctly in this situation.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jan-21 12:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1059db12270606291f9deea6cf93898c6016f10\">[25864]</a></span>: Documented privsep fix for broken symlinks. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1785\" onclick=\"get_ticket_and_populate_wrapper('1785'); return false;\" title=\"privsep switchboard fails on broken symlinks\">#1785</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jan-21 11:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1bf5a0cce1f765f971e089e8117683755b7c3e08\">[25881]</a></span>: Documented privsep fix for broken symlinks. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1785\" onclick=\"get_ticket_and_populate_wrapper('1785'); return false;\" title=\"privsep switchboard fails on broken symlinks\">#1785</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-01 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0e982c406ad3c359a3137ce23623f47da699eb56\">[19503]</a></span>: Fix procd problems <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1785\" onclick=\"get_ticket_and_populate_wrapper('1785'); return false;\" title=\"privsep switchboard fails on broken symlinks\">#1785</a></span> and solaris 11 /dev/null problem <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=1788\" onclick=\"get_ticket_and_populate_wrapper('1788'); return false;\" title=\"Opening /dev/null for write with O_CREATE fails on solaris 11\">#1788</a></span> starter would error is user created symbolic link to nowhere in the sandbox. Ignore symbolic links when changing owner. This is ok because symbolic links are 0777 and the directory owner controls removal.\u00a0[...]\n (By James A. Kupsch )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Jun-04 11:50", "status": "resolved", "created": "2010-Nov-29 18:12", "fixed_version": "2010-Nov-29 18:12", "broken_version": "v070400", "priority": "4", "subsystem": "", "assigned_to": "kupsch", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "dan@hep.wisc.edu,tannenba@cs.wisc.edu,gthain@cs.wisc.edu,bt@cs.wisc.edu", "due_date": ""}