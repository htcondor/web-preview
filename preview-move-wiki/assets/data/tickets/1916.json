{"id": 1916, "title": "Ticket #1916: Cannot ssh_to_job run as nobody", "description": "<blockquote>\nWhen a submit host and execute node differ by their UID_DOMAIN, jobs will be run as nobody. Typically, the nobody account is nologin (know somewhere it isn't?). This means that an ssh_to_job attempt will fail because the shell cannot be created.\n\n<p></p><div class=\"verbatim\">\n<pre>$ condor_ssh_to_job 543436.0\nThis account is currently not available.\nConnection to condor-job.grid1.somewhere.com closed.\n</pre></div>\n\n\n<p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> -\n</p><div class=\"verbatim\">\n<pre>02/16/11 15:16:58 Error file: /var/lib/condor/execute/dir_30862/.condor_ssh_to_job_1/sshd.log\n02/16/11 15:16:58 About to exec /usr/sbin/sshd -i -e -f /var/lib/condor/execute/dir_30862/.condor_ssh_to_job_1/sshd_config\n02/16/11 15:16:58 Create_Process succeeded, pid=30878\n02/16/11 15:16:58 Process exited, pid=30867, status=0\n02/16/11 15:16:58 unhandled job exit: pid=30867, status=0\n02/16/11 15:16:58 Process exited, pid=30878, status=0\n</pre></div>\n\n\n<p>At worst this is a gotcha that should be documented.</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Jun-22 13:22:08 by danb:</em> <br/>\n\nA small patch to the openssh sshd eliminates reliance on the target user's login shell.  One can have ssh_to_job use an alternate version of sshd by configuring SSH_TO_JOB_SSHD.  So we could overcome this problem by shipping our own condor_sshd.  Not sure what folks would think about that.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/386/ssh_to_job_sshd.patch\">ssh_to_job_sshd.patch</a>\n1377 bytes added by danb on 2011-Jun-22 18:23:49 UTC.\n<br/>\nThis patch to openssh 5.8p2 removes dependence on the target user's login shell and disables the check to see if the target account is locked.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Jun-22 13:24", "status": "new", "created": "2011-Feb-16 14:22", "fixed_version": "2011-Feb-16 14:22", "broken_version": "v070400", "priority": "4", "subsystem": "Tools", "assigned_to": "", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu matt@cs.wisc.edu", "due_date": ""}