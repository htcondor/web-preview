{"id": 289, "title": "Ticket #289: my_full_hostname() and Daemon::fullHostname() disagree on hostnames.", "description": "<blockquote>\nFrom the looks of it, my_full_hostname() and Daemon::fullHostname() disagree on hostnames in some cases. It seems like they could share more code than they do, which would ensure that if they are getting the wrong host name, at least they can agree on the wrong name.  Still, it is not clear to me that this is a Condor problem, or an incorrectly configured DNS problem.\n\n<p>This only seems to be happening on Windows machines, so there may be some local configuration problems as well (i.e. a hosts files is searched first for some reason, etc.)</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Mar-02 10:51:01 by burnett:</em> <br/>\n\nFrom <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=288\" onclick=\"get_ticket_and_populate_wrapper('288'); return false;\" title=\"Port collision not noticed by condor daemons in windows\">#288</a></span>:\n\n<p>It seems that this may be a DNS problem (or how we seem to break whilst using it):\n\n</p><p></p><pre>  02/27 23:14:02 Looking for matching Collector on 'nmi-0226.batlab.cs.wisc.edu'...\n  02/27 23:14:02 Found 'nmi-0226.cs.wisc.edu:0'\n</pre>\n\n<p>Somehow, in this instance, on Windows, the master decides it is called nmi-0226.batlab.cs.wisc.edu but when it goes looking for a collector by the same name, the only one it finds is nmi-0226.cs.wisc.edu. You'll of course note the missing batman reference in the second host name.\n\n</p><p></p><hr/>\n<em>2009-Oct-08 18:02:21 by danb:</em> <br/>\n\nmy_full_hostname() and Daemon::fullHostname() start with different information, so they can end up with different results if reverse-DNS info is misconfigured or the machine hostname is misconfigured.\n\n<p>my_full_hostname() tries to get the canonical hostname for the current machine.\n\n</p><p>Daemon::fullHostname() tries to get the canonical hostname for the IP address associated with the desired daemon.  In the case where we are getting the hostname of the collector, this usually involves looking up supplied hostname --&gt; IP --&gt; hostname.\n\n</p><p>I'm going to resolve this ticket, because I don't see that we have a case here of two different ways of doing the same thing and getting two different answers.  If we get a specific case in the future where this same problem seems to be happening, we should try to determine whether there is a way for Condor to detect the misconfiguration.\n\n</p><p></p><hr/>\n<em>2009-Oct-08 21:30:10 by burnett:</em> <br/>\n\nOn Windows, if your <code>hosts</code> file disagree with the DNS server, then the two functions will return different values.\n\n<p></p><hr/>\n<em>2009-Oct-08 21:30:56 by burnett:</em> <br/>\n\nNever-mind, that it what you said.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Jan-31 13:40", "status": "resolved", "created": "2009-Mar-02 10:41", "fixed_version": "2009-Mar-02 10:41", "broken_version": "v070301", "priority": "3", "subsystem": "Unknown", "assigned_to": "danb", "derived_from": "#288", "creator": "burnett", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu, burnett@cs.wisc.edu", "due_date": ""}