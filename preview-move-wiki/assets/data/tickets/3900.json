{"id": 3900, "title": "Ticket #3900: Improve expression building in python", "description": "<blockquote>\nBuilding an expression in python is currently nasty.  At the least, I'd like to provide a \"quote\" method in the classad module to properly quote a python string as a classad string.  I.e.,\n\n<p></p><div class=\"verbatim\">\n<pre>expr = classad.ExprTree(\"MyType =?= %s\" % classad.quote(foo))\n</pre></div>\n\n\n<p>Longer-term, I'd like to be able to build expressions directly in python:\n\n</p><p></p><div class=\"verbatim\">\n<pre>expr = classad.Reference(\"MyType\") == classad.Literal(foo)\n</pre></div>\n\n\n<p>For now, I think the \"quote\" method is sufficient.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-12 10:19:45 by bbockelm:</em> <br/>\n\nFor example,\n\n<p></p><div class=\"verbatim\">\n<pre>&gt;&gt;&gt; classad.ExprTree(\"foo =?= %s\" % classad.quote(\"bar\"))\nfoo is \"bar\"\n</pre></div>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4154\" onclick=\"get_ticket_and_populate_wrapper('4154'); return false;\" title=\"Improve expression building in python\">#4154</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nImprove expression building in python</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-30 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=38034\">[38034]</a></span>: document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3900\" onclick=\"get_ticket_and_populate_wrapper('3900'); return false;\" title=\"Improve expression building in python\">#3900</a></span>: new Python bindings <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> module functions quote() and unquote()  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-12 11:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37566\">[37566]</a></span>: Fix memory leak. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3900\" onclick=\"get_ticket_and_populate_wrapper('3900'); return false;\" title=\"Improve expression building in python\">#3900</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-12 10:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=37563\">[37563]</a></span>: Add quote / unquote methods which make it easier to create <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> string literals when building expressions from python strings. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3900\" onclick=\"get_ticket_and_populate_wrapper('3900'); return false;\" title=\"Improve expression building in python\">#3900</a></span> Example: &gt;&gt;&gt; classad.ExprTree(\"foo <code>?</code> %s\" % classad.quote(\"bar\")) foo is \"bar\"  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Oct-31 15:11", "status": "resolved", "created": "2013-Sep-09 11:50", "fixed_version": "2013-Sep-09 11:50", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "tim", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}