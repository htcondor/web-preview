{"id": 7192, "title": "Ticket #7192: better submit_utils Requirements generation for custom resources", "description": "<blockquote>\nRequirements generation for submit_utils will be changed, in part because of <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6936\" onclick=\"get_ticket_and_populate_wrapper('6936'); return false;\" title=\"job event log timestamps have no year, can appear to go backwards\">#6936</a></span> (request for 0 of a custom resource should not alter Requirements), since the fix for this bug does not apply to the 8.9 submit_utils code.\n\n<p>In 8.9, requirements generation will refer to job attributes rather than to submit keywords.  This means that <code>MY.RequestGPUs</code> affect the generated requirements in the same way that <code>request_gpus</code> does.\n\n</p><p>The fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6936\" onclick=\"get_ticket_and_populate_wrapper('6936'); return false;\" title=\"job event log timestamps have no year, can appear to go backwards\">#6936</a></span> will be refined. custom resource requests will affect requirements generation by\n\n</p><p></p><ul>\n<li>If the resource request is an expression that evaluates to a number at submit time, and the number is &gt; 0, then requirements will be altered.\n</li><li>If the resource request is an expression that evaluates to undefined at submit time, requirements will be altered as if it were a number &gt; 0\n</li><li>If the resource request is an expression that evaluates to a string, requirements will be altered if the string is non-empty\n</li></ul>\n\n<p>Always, requirements will not be altered if they already refer to the custom resource.  i.e. if the requirements already refers to GPUs, then RequestGPUs will not result a change to the requirements.\n\n</p><p>Furthermore, if the submit hash has <code>MY.Requirements</code> or \"+Requirements\", requirements generation will be entirely disabled.  This will also disable the side effects of requirements generation, since these side effects exist to insure that attributes referred to by generated requirements will exist.\n\n</p><p></p><ul>\n<li>Crondor jobs will not have a <code>ScheddInterval</code> attribute inserted into the job.\n</li><li>VM universe jobs that use VMWare transfer will not have a <code>FileSystemDomain</code> attribute inserted.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Aug-12 14:00:55 by johnkn:</em> <br/>\n\nno version history since this is really the same bug fix as a <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6938\" onclick=\"get_ticket_and_populate_wrapper('6938'); return false;\" title=\"submit_utils broken Requirements for request zero of a custom resource\">#6938</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-06 13:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57608\">[57608]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7192\" onclick=\"get_ticket_and_populate_wrapper('7192'); return false;\" title=\"better submit_utils Requirements generation for custom resources\">#7192</a></span>, a 8.9 implemetation of <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6938\" onclick=\"get_ticket_and_populate_wrapper('6938'); return false;\" title=\"submit_utils broken Requirements for request zero of a custom resource\">#6938</a></span>, better Requrements generation for custom resources in submit_utils ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-12 14:00", "status": "resolved", "created": "2019-Aug-06 13:57", "fixed_version": "2019-Aug-06 13:57", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "#6938", "creator": "johnkn", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}