{"id": 3482, "title": "Ticket #3482: Python bindings are not resilient against version changes", "description": "<blockquote>\nWhen we changed the version of master to 7.9.5, the build broke in the python bindings:\n<div class=\"code\">\n<pre class=\"code\">Traceback (most recent call last):\n  File \"tests/classad_tests.py\", line 4, in &lt;module&gt;\n    import classad\nImportError: /slots/04/dir_30792/userdir/src/condor_contrib/python-bindings/libpyclassad_7_9_5.so: undefined symbol: _ZNK7classad8ExprTree4selfEv\n\n    Start 4: python_htcondor_test\n4/5 Test #4: python_htcondor_test .............***Failed    0.05 sec\nTraceback (most recent call last):\n  File \"tests/htcondor_tests.py\", line 9, in &lt;module&gt;\n    import classad\nImportError: /slots/04/dir_30792/userdir/src/condor_contrib/python-bindings/libpyclassad_7_9_5.so: undefined symbol: _ZNK7classad8ExprTree4selfEv\n</pre></div>\n\n\n<p>I think the following code is the culprit:\n</p><div class=\"code\">\n<pre class=\"code\">PATH=$PWD/../../condor_collector.V6:$PWD/../../condor_schedd.V6:$PWD/../../condor_master.V6:$PWD/../../condor_tools:$PATH LD_LIBRARY_PATH=$PWD:$PWD/../../condor_utils:$PWD/../../classad:$PWD/../../../bld_external/classads-7.9.4/install/lib:$PWD/../../../release_dir/lib/condor PYTHONPATH=$PWD python \"$@\"\n</pre></div>\n\n\n<p>Note that 7.9.4 is hard-coded into the build.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Feb-05 10:28:04 by nwp:</em> <br/>\n\nShould have said this line is found in src/condor_contrib/python-bindings/test_driver\n\n<p></p><hr/>\n<em>2013-Feb-05 12:40:59 by nwp:</em> <br/>\n\nFixed this in the cmake file.  Checked my fix in NMI.  Pushed to master.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Feb-05 12:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=34857\">[34857]</a></span>: Fix python bindings through cmake <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3482\" onclick=\"get_ticket_and_populate_wrapper('3482'); return false;\" title=\"Python bindings are not resilient against version changes\">#3482</a></span> Have cmake prepare the test_driver file from a template. Restore src/condor_contrib/python-bindings/tests/test.old.ad to previous version, as that \"7.9.4\" addition does not matter.  (By Nathan W. Panike )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Feb-05 09:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=34855\">[34855]</a></span>: Placeholder commit to fix python bindings <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3482\" onclick=\"get_ticket_and_populate_wrapper('3482'); return false;\" title=\"Python bindings are not resilient against version changes\">#3482</a></span> Brian should come up with something soon so this is not so fragile against version changes.  (By Nathan W. Panike )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Aug-04 11:45", "status": "resolved", "created": "2013-Feb-05 10:05", "fixed_version": "2013-Feb-05 10:05", "broken_version": "v070905", "priority": "3", "subsystem": "Packaging", "assigned_to": "nwp", "derived_from": "#3407", "creator": "nwp", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu bbockelm@cse.unl.edu", "due_date": ""}