{"id": 2722, "title": "Ticket #2722: DAGMan should warn if a splice is marked as DONE", "description": "<blockquote>\nRight now, if you happen to have a splice marked as DONE in your DAG, DAGMan doesn't seem to complain about this at all.</blockquote>", "remarks": "<blockquote>\n<em>2011-Dec-16 12:57:25 by nwp:</em> <br/>\n\nThis is a bit unclear to me.  Does DAGman parse the DAG and then runs the nodes in the splice anyway, or does it carry on as if all the nodes in the splice are done?  The latter behavior is what I would expect as a user.\n\n<p></p><hr/>\n<em>2011-Dec-16 14:57:02 by wenger:</em> <br/>\n\nIt seemed to just ignore the \"DONE\" and go ahead and run everything.  Hmm -- looking at the code, it seems like if you don't specify a DIR on your splice, any trailing token is just ignored...\n\n<p>My first inclination is to say that we should just not allow a \"DONE\" on a splice, but maybe it would actually make sense to allow it (but that would be a lot more work).\n\n</p><p></p><hr/>\n<em>2015-Apr-30 11:13:54 by wenger:</em> <br/>\n\nThe same thing for NOOP -- if you append NOOP to the splice line it gets silently ignored.\n\n<p>I think both of these should be parse errors...\n\n</p><p></p><hr/>\n<em>2015-May-01 13:36:04 by wenger:</em> <br/>\n\nHmm -- my commit didn't show up in this ticket, I guess because of how I formatted the commit message.  Anyhow, the relevant commit is:\n\n<p></p><pre>  467d0c592442e2544b3571cb22d5b571abc1f29b</pre>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-04 13:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44786\">[44786]</a></span>: edit 8.3.6 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2722\" onclick=\"get_ticket_and_populate_wrapper('2722'); return false;\" title=\"DAGMan should warn if a splice is marked as DONE\">#2722</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4825\" onclick=\"get_ticket_and_populate_wrapper('4825'); return false;\" title=\"DAGMan should fail on SPLICE with incorrectly-formatted DIR option\">#4825</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44778\">[44778]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2722\" onclick=\"get_ticket_and_populate_wrapper('2722'); return false;\" title=\"DAGMan should warn if a splice is marked as DONE\">#2722</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4825\" onclick=\"get_ticket_and_populate_wrapper('4825'); return false;\" title=\"DAGMan should fail on SPLICE with incorrectly-formatted DIR option\">#4825</a></span>: Oops -- accidentally included some temporary code in the previous commit.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 13:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44776\">[44776]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2722\" onclick=\"get_ticket_and_populate_wrapper('2722'); return false;\" title=\"DAGMan should warn if a splice is marked as DONE\">#2722</a></span> / <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4825\" onclick=\"get_ticket_and_populate_wrapper('4825'); return false;\" title=\"DAGMan should fail on SPLICE with incorrectly-formatted DIR option\">#4825</a></span>: Splice parsing is more strict -- fails on certain errors instead of invisibly ignoring them. Also changed a bunch of parse error messages to start with the string \"ERROR:\" to be consistent with the others.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-May-01 13:37", "status": "resolved", "created": "2011-Dec-16 12:48", "fixed_version": "2011-Dec-16 12:48", "broken_version": "v070705", "priority": "3", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu", "due_date": ""}