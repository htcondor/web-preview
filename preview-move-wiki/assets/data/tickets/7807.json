{"id": 7807, "title": "Ticket #7807: Singularity should allow optional bind mounts", "description": "<blockquote>\nIn an effort to remove the OSG User Job Wrapper scripts, we need to duplicate some of the wrapper script functionality in condor.  One of the things the wrapper does is to run singularity with several directories on the host bind mounted insided the container, including /ceph /hdfds, /hadoop, /cvmfs.  However, many sites don't have all these directories on the host.  The existing user job wrapper, when given a list from the glidein startup string of potential directories to mount, only mounts those directories which exist on the host.\n\n<p>Condor's singularity support can't do this (easily). If you give it a bind mount, it will unconditionally pass it to singularity, which will fail at startup time.  We'll add a knob for condor to stat these directories, and only try to bind mount those which exist on the host.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-28 11:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61346\">[61346]</a></span>: Document version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7807\" onclick=\"get_ticket_and_populate_wrapper('7807'); return false;\" title=\"Singularity should allow optional bind mounts\">#7807</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-28 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61345\">[61345]</a></span>: Add admin docs for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7807\" onclick=\"get_ticket_and_populate_wrapper('7807'); return false;\" title=\"Singularity should allow optional bind mounts\">#7807</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7846\" onclick=\"get_ticket_and_populate_wrapper('7846'); return false;\" title=\"Allow singularity to ignore invalid bind mounts\">#7846</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Aug-20 08:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=60485\">[60485]</a></span>: Singularity bind mounts optional if host directory doesn't exist <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7807\" onclick=\"get_ticket_and_populate_wrapper('7807'); return false;\" title=\"Singularity should allow optional bind mounts\">#7807</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Sep-28 11:32", "status": "resolved", "created": "2020-Aug-18 16:03", "fixed_version": "2020-Aug-18 16:03", "broken_version": "v080900", "priority": "3", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}