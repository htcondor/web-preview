{"id": 3190, "title": "Ticket #3190: Adding ClassAd::Rename/Move method", "description": "<blockquote>\nI noticed that the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> class does not have a Rename or Move method.<br/>\n\n(Either name would make sense to me)\n\n<p>I.e. something with the semantics of\n</p><div class=\"code\">\n<pre class=\"code\">{\n  ExprTree *olde=jobClassAd-&gt;Remove(oldname);\n  jobClassAd-&gt;Insert(newname,olde);\n}\n</pre></div>\n\n\n<p>Apart from being easier to use, e.g.:\n</p><div class=\"code\">\n<pre class=\"code\">jobClassAd-&gt;Rename(oldname,newname);\n</pre></div>\n\nit would likely be more efficient, too.<br/>\n\nPlus, it would be easier to make it atomic.\n\n<p>Example code that would use this is during Status changes of a Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>, where we want to preserve the previous information.\n</p><div class=\"code\">\n<pre class=\"code\">jobClassAd-&gt;Rename(\"JobStatus\",\"LastJobStatus\");\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Aug-14 06:01:00 by matt:</em> <br/>\n\nThis would not be usable for ATTR_JOB_STATUS and ATTR_LAST_JOB_STATUS because they must go through the transaction log, which is layered above the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> interface.\n<hr/>\n<em>2012-Oct-22 14:59:59 by zmiller:</em> <br/>\n\nBulk change of target version from v070901 to v070902 using ./ticket-target-mover.\n<hr/>\n<em>2012-Dec-11 16:38:39 by johnkn:</em> <br/>\n\nBulk change of target version from v070902 to v070903 using ./ticket-target-mover.\n<hr/>\n<em>2013-Jan-22 10:54:51 by johnkn:</em> <br/>\n\nBulk change of target version from v070903 to v070904 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-05 10:58:27 by johnkn:</em> <br/>\n\nBulk change of target version from v070904 to v070905 using ./ticket-target-mover.\n<hr/>\n<em>2013-Apr-22 11:10:10 by johnkn:</em> <br/>\n\nBulk change of target version from v070905 to v070906 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2013-Apr-22 11:10", "status": "new", "created": "2012-Aug-10 19:41", "fixed_version": "2012-Aug-10 19:41", "broken_version": "v070900", "priority": "4", "subsystem": "Libs", "assigned_to": "", "derived_from": "", "creator": "sfiligoi", "rust": "", "customer_group": "other", "visibility": "public", "notify": "isfiligoi@ucsd.edu,tannenba@cs.wisc.edu,tstclair@redhat.com", "due_date": ""}