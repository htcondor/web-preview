{"id": 7464, "title": "Ticket #7464: condor_q -better-analyze drops \"!\"", "description": "<blockquote>\nStuart Anderson reports:\n\n<p></p><div class=\"verbatim\">\n<pre>Is it a bug or a feature that condor_q -better-analyze (version 8.8.6) drops \"!\", e.g.,\n\nRequirements = !regexp(\"Intel.*Gold 6254\", TARGET.cpuinfo_model_name)\n\nSlots\nStep Matched Condition\n----- -------- ---------\n[0] 48 regexp(\"Intel.*Gold 6254\",TARGET.cpuinfo_model_name)\n[1] 17847 TARGET.Arch == \"X86_64\"\n[2] 17799 [0] &amp;&amp; [1]\n[5] 16739 TARGET.Disk &gt;= RequestDisk\n[6] 16729 [2] &amp;&amp; [5]\n[7] 16769 TARGET.Memory &gt;= RequestMemory\n[8] 15692 [6] &amp;&amp; [7]\n\n\nLine [0] is strictly true for this pool, but not the Condition being used in line [2] (pun intended).\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2019-Dec-11 15:33:44 by johnkn:</em> <br/>\n\nIt's a kind of a printing bug. The ! is preserved in the analysis, but is getting lost when the analysis steps are labeled\nfor output.\nIt would be clearer to show [0] as ! regexp(...) and give it the correct count for that sub-expression, but that's a harder fix.\n\n<p>What is actually happening in the code is that step <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d3cdec07b6e6cd527dd0425ef23e33b976fced2f\">[2]</a></span> is evaluating the sub-expression\n\n</p><p>!regexp(\"Intel.*Gold 6254\", TARGET.cpuinfo_model_name) &amp;&amp; TARGET.Arch == \"X86_64\"\n\n</p><p>but (mis)labeling it as [0] &amp;&amp; <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9b89c8b1bf74329d497bfc336eb2e99345f69183\">[1]</a></span> (it should perhaps be labelled ![0] &amp;&amp; <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9b89c8b1bf74329d497bfc336eb2e99345f69183\">[1]</a></span> ?)\n</p><hr/>\n<em>2020-Apr-10 07:43:03 by tim:</em> <br/>\n\nBulk change of target version from v080808 to v080809 using ticket-target-mover.\n\n<p></p><hr/>\n<em>2021-Jul-13 10:15:18 by tim:</em> <br/>\n\nMoved to JIRA: <a class=\"external\" href=\"https://opensciencegrid.atlassian.net/browse/HTCONDOR-514\">https://opensciencegrid.atlassian.net/browse/HTCONDOR-514</a></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2021-Jul-13 10:15", "status": "abandoned", "created": "2020-Jan-07 11:47", "fixed_version": "2020-Jan-07 11:47", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "sba@caltech.edu", "due_date": ""}