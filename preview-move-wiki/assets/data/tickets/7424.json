{"id": 7424, "title": "Ticket #7424: jobs hang instead of being held when using too much memory", "description": "<blockquote>\nLaurenM @ CHTC reported on 12/11/19 at 4:45pm via Slack:\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nUser had a (prior) 4-core job that hung until 72 hours and went on hold even though he expected to finish in ~8 hours.\nSo, he re-tried it in an interactive job, and seconds after it started using multi-core, it hung. Like, our \u2018top\u2019 process hung, and he couldn\u2019t run commands.\nLooking at the memory, he requested 1024, but the job used 1221. While it was hung, it showed up as running in condor_q (which I looked at separately). After he killed his SSH client, it went into the X state, and is currently stuck there.\n</td></tr></tbody></table></div>\n\n\n<p>Attached to this ticket is the <code>StarterLog</code> and <code>StartdHistoryAd</code> from the execute node for the job Lauren was watching, which was job 3063850.0 on from submit2.chtc.\n\n</p><p>Also BrianB @ CHTC followed up via Slack:\n\n</p><p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nOn the above ^^^ -- I've noticed that if I send a simple xz command as a job and massively undersubscribe the memory (i.e., request 1GB and use settings that cause xz to try to use 4GB), then you get something like the above.\n</td></tr></tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/1033/starterlog\">starterlog</a>\n24183 bytes added by tannenba on 2019-Dec-11 23:42:24 UTC.\n<br/>\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StarterLog\" title=\"Starter Log\">StarterLog</a></span> from a job exhibiting the problem<br/>\n</li><li><a href=\"attach_get/1034/startdhist\">startdhist</a>\n5696 bytes added by tannenba on 2019-Dec-11 23:43:21 UTC.\n<br/>\nstartd history entry for a job exhibiting the problem<br/>\n</li></ul>\n</blockquote>", "check_ins": "", "type": "incident", "last_change": "2019-Dec-11 17:41", "status": "new", "created": "2019-Dec-11 15:52", "fixed_version": "2019-Dec-11 15:52", "broken_version": "v080904", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "#7367", "creator": "tannenba", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}