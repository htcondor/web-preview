{"id": 621, "title": "Ticket #621: Add GSI limited delegation config knob", "description": "<blockquote>\nAdd a config knob to enable delegation of full x509 proxies for pre-ws gram jobs. The gram client library already supports this possibility.\n\n<p>This same config knob can control the type of gsi delegation done on other parts of Condor. This includes moving a job's proxy as part of file transfer between Condor daemons, refreshing a job's proxy between Condor daemons, and delegating/refreshing a proxy as part of a ws gram job submission. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=221\" onclick=\"get_ticket_and_populate_wrapper('221'); return false;\" title=\"GSI delegation needs to support Limited Delegation\">#221</a></span> covers one of these cases.\n\n</p><p>The config knob will initially be a boolean. If desired, it could be expanded to be a classad expression evaluated in the context of the job whose proxy is being delegated.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jul-09 16:54:19 by jfrey:</em> <br/>\n\nIn the gt2 gahp, the GRAM_JOB_REFRESH_PROXY command has no option for delegation mode. We'll have to add one. GRAM_JOB_REQUEST does have a delegation mode option, but it's currently ignored by the gahp.\n\n<p></p><hr/>\n<em>2009-Aug-10 11:37:17 by jfrey:</em> <br/>\n\nConfig knob DELEGATE_FULL_JOB_GSI_CREDENTIALS pushed to master branch. It currently accepts True/False as values and only works for gt2 gram jobs.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-10 11:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=15275\">[15275]</a></span>: Add DELEGATE_FULL_JOB_GSI_CREDENTIALS to sample config file. gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=621\" onclick=\"get_ticket_and_populate_wrapper('621'); return false;\" title=\"Add GSI limited delegation config knob\">#621</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-10 11:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=24918\">[24918]</a></span>: Document DELEGATE_FULL_JOB_GSI_CREDENTIALS knob gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=621\" onclick=\"get_ticket_and_populate_wrapper('621'); return false;\" title=\"Add GSI limited delegation config knob\">#621</a></span>.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-10 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=15272\">[15272]</a></span>: Add new config know GSI_FULL_DELEGATION. Currently only used for gt2 jobs. When Condor needs to delegate a gsi proxy, this new config knob controls whether a full or limited proxy is delegated. Values can be true or false, default is false. gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=621\" onclick=\"get_ticket_and_populate_wrapper('621'); return false;\" title=\"Add GSI limited delegation config knob\">#621</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-10 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=15271\">[15271]</a></span>: Support full proxy delegation in gt2 gahp. The GRAM_JOB_REQUEST and GRAM_JOB_REFRESH_PROXY commands can now delegate either a full or a limited proxy. The previously-ignored arguments to GRAM_JOB_REQUEST about proxy delegation is now looked at. GRAM_JOB_REFRESH_PROXY has a new optional argument similar\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2009-Dec-17 13:42", "status": "resolved", "created": "2009-Jul-09 11:29", "fixed_version": "2009-Jul-09 11:29", "broken_version": "v070300", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#221", "creator": "jfrey", "rust": "a19436", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}