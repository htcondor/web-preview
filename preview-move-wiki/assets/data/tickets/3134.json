{"id": 3134, "title": "Ticket #3134: if /bin/hostname returns FQHN but FQHN isn't in /etc/hosts, Machine=\"\"", "description": "<blockquote>\nYou should either:\n\n<p>1) call \"hostname -s\" to make sure you get the short name (because the code expects to get a short name)\n\n</p><p>or\n\n</p><p>2) else just use the output of /bin/hostname if your /etc/hosts lookup fails, instead of using \"\"\n\n</p><p>and/or\n\n</p><p>3) print a clear error to the log (\"FQ output of /bin/hostname (foo.cs.wisc.edu) not found in /etc/hosts\")</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jul-17 15:48:26 by tannenba:</em> <br/>\n\nThe problem is illustrated below as condor_config_val claims FULL_HOSTNAME as not defined.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">[root@rslnd001 ~]# grep host /etc/nsswitch.conf\nhosts:      files dns\n\n[root@rslnd001 ~]# hostname\nrslnd001.sugar.phy.syr.edu\n\n[root@rslnd001 ~]# grep rslnd001 /etc/hosts\n10.20.6.1       rslnd001\n\n[root@rslnd001 ~]# condor_config_val  HOSTNAME\nrslnd001.sugar.phy.syr.edu\n\n[root@rslnd001 ~]# condor_config_val  FULL_HOSTNAME\nNot defined: FULL_HOSTNAME\n\n[root@rslnd001 ~]# condor_config_val -debug FULL_HOSTNAME\n07/17/12 16:27:19 condor_gethostname() claims we are rslnd001.sugar.phy.syr.edu\n07/17/12 16:27:19 NETWORK_INTERFACE=* matches lo 127.0.0.1, br0 10.20.6.1, virbr0 192.168.122.1, choosing IP 10.20.6.1\n07/17/12 16:27:19 hostname rslnd001.sugar.phy.syr.edu cannot be resolved by getaddrinfo\n</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Jul-17 16:34:28 by bbockelm:</em> <br/>\n\nHi,\n\n<p>I cannot reproduce using the recipe posted.  What's the search domain in /etc/resolv.conf?\n\n</p><p>Brian\n</p><hr/>\n<em>2012-Sep-19 16:15:53 by zmiller:</em> <br/>\n\nBulk change of target version from v070804 to v070805 using ./ticket-target-mover.\n<hr/>\n<em>2012-Oct-25 17:52:16 by johnkn:</em> <br/>\n\nBulk change of target version from v070806 to v070807 using ./ticket-target-mover.\n<hr/>\n<em>2012-Dec-19 09:30:47 by johnkn:</em> <br/>\n\nBulk change of target version from v070807 to v070808 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-28 17:16:00 by johnkn:</em> <br/>\n\nBulk change of target version from v070808 to v070809 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2015-Sep-21 12:00", "status": "defer", "created": "2012-Jul-17 15:43", "fixed_version": "2012-Jul-17 15:43", "broken_version": "v070801", "priority": "5", "subsystem": "Libs", "assigned_to": "adesmet", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu, tstclair@redhat.com,pcouvare@caltech.edu", "due_date": ""}