{"id": 3078, "title": "Ticket #3078: bosco_stop is not stoping condor", "description": "<blockquote>\nThis is a BOSCO ticket.\nbin/bosco_stop is failing to stop BOSCO on my RHEL5 host.\n\n<p>I can repeat the problem. As user marco on uc3-sub:\n</p><div class=\"verbatim\">\n<pre>bosco_start\nbosco_stop\n</pre></div>\n\nThen I see the process of my BOSCO condor_master still running\n\n<p>I wrote a new version of the script (bosco_stop.marco) that accept \"--force\" as parameter.\nWhen that is provided it checks for the process running BOSCO's condor_master and kills it with SIGQUIT.\nThis worked in stopping BOSCO's condor_master.\n\n</p><p>The file is attached. If notify via email Jaime (with Todd and Derek in CC)\n\n</p><p>Best, Marco</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Jun-21 16:16:04 by bbockelm:</em> <br/>\n\nDoesn't this suffer the same security issue / drawback as <span class=\"ticket\"><a class=\"stalled\" href=\"/tickets?ticket=127\" onclick=\"get_ticket_and_populate_wrapper('127'); return false;\" title=\"condor.boot.generic init script will kill wrong condor_master\">#127</a></span> ?\n\n<p></p><hr/>\n<em>2012-Jun-25 09:40:13 by jfrey:</em> <br/>\n\nI just did a quick test and bosco_stop worked as expected. I think we need to understand why bosco_stop isn't working in your installation.\n\n<p>If we decide we need a backstop of /bin/kill, then we should use the -pid argument when starting condor_master and consult that file for which pid to kill.\n\n</p><p></p><hr/>\n<em>2012-Jun-25 10:04:19 by marco:</em> <br/>\n\nI have a system condor running as root and on the same host I install BOSCO as regular user. Please try in a similar setup. I think that is confusing bosco_stop.\nMarco\n\n<p></p><hr/>\n<em>2012-Jun-25 11:05:58 by jfrey:</em> <br/>\n\nWhat daemons are running in the root installation of Condor on your machine?\n\n<p></p><hr/>\n<em>2012-Jun-25 11:22:28 by marco:</em> <br/>\n\nMASTER, SCHEDD, SHARED_PORT</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/582/bosco_stop.marco\">bosco_stop.marco</a>\n2441 bytes added by marco on 2012-Jun-21 20:16:32 UTC.\n<br/>\nReplacement for bin/bosco_stop<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "enhance", "last_change": "2012-Jun-25 11:22", "status": "new", "created": "2012-Jun-21 15:14", "fixed_version": "2012-Jun-21 15:14", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "jfrey", "derived_from": "", "creator": "marco", "rust": "", "customer_group": "other", "visibility": "public", "notify": "marco@hep.uchicago.edu", "due_date": ""}