{"id": 3771, "title": "Ticket #3771: Investigate unexpected checkpointing/file transfer behavior", "description": "<blockquote>\nWhile working on the <span class=\"wiki\"><a href=\"wiki?p=DmtcpCondor\" title=\"Dmtcp Condor\">DmtcpCondor</a></span> I observed the following.  I didn't investigate too far, so it's possible that some of these are user error or correct behavior.  They should be investigated further.\n\n<p><span class=\"section\"></span></p><h2>condor_vacate_job when_to_transfer_output=on_exit_or_evict</h2>\n\n<p>A job vacated because of condor_vacate_job will not pull back changed files when when_to_transfer_output=on_exit_or_evict.  Should it?  Perhaps it should be an option? (\"condor_vacate_job --transfer-okay\")\n\n</p><p><span class=\"section\"></span></p><h2>condor_vacate when_to_transfer_output=on_exit_or_evict</h2>\n\n<p>A job vacated because of condor_vacate will not pull back changed files when when_to_transfer_output=on_exit_or_evict.  This is probably as designed, as condor_vacate kinda means \"get off my machines ASAP\", and time spent in file transfer would be an annoyance.  But what is the person wants the jobs off \"soon\", but is willing to wait for file transfer?  Perhaps we should have \"condor_vacate --transfer-okay\"?\n\n</p><p><span class=\"section\"></span></p><h2>SUSPEND to condor_vacate yields odd results</h2>\n\n<p>When a job is running on a machine, then SUSPEND becomes TRUE, then I condor_vacate the machine, files do get transferred back (! Seems incongruous with the previous point).  But the user log is wonky; it doesn't look like an eviction, it looks like an outage:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">001 (077.000.000) 07/11 15:04:19 Job executing on host: &lt;128.105.14.170:40298&gt;\n...\n006 (077.000.000) 07/11 15:04:28 Image size of job updated: 100000\n\t11  -  MemoryUsage of job (MB)\n\t11196  -  ResidentSetSize of job (KB)\n...\n010 (077.000.000) 07/11 15:07:12 Job was suspended.\n\tNumber of processes actually suspended: 3\n...\n011 (077.000.000) 07/11 15:07:24 Job was unsuspended.\n...\n022 (077.000.000) 07/11 15:07:32 Job disconnected, attempting to reconnect\n    Socket between submit and execute hosts closed unexpectedly\n    Trying to reconnect to slot2@hal.cs.wisc.edu &lt;128.105.14.170:40298&gt;\n...\n024 (077.000.000) 07/11 15:07:32 Job reconnection failed\n    Job not found at execution machine\n    Can not reconnect to slot2@hal.cs.wisc.edu, rescheduling job\n...\n</pre></div>\n\n\n<p></p><ol>\n<li>The log seems wrong\n</li><li>That output came back is surprising, especially give that it doesn't normally seem to during a condor_vacate.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2013-Jul-11 17:49", "status": "new", "created": "2013-Jul-11 17:49", "fixed_version": "2013-Jul-11 17:49", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}