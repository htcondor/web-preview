{"id": 2280, "title": "Ticket #2280: ssh_to_job fails with openssh 5.8", "description": "<blockquote>\nRecent versions of openssh (e.g. 5.6-5.8) close all fds &gt; 2, so condor_ssh_to_job is broken, because it relies on inheritance of the ssh connection fd through ssh to the proxy command.\n\n<p>I have observed this in Fedora 15.\n\n</p><p>One possible solution is to pass the ssh connection fd over a named socket from ssh_to_job to the ssh proxy command (which is another instance of ssh_to_job).</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-30 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/10b1eaffd7e3264bc4fd797475f5854906e6bc7d\">[22356]</a></span>: Fixed ssh_to_job for openssh 5.6+. The problem was caused by ssh closing all fds &gt; 2, so passing the ssh connection from ssh_to_job to the ssh proxy command via inheritance of open files was broken. The problem has been fixed by passing the ssh connection across a named socket from ssh_to_job to the\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Jun-30 11:31", "status": "resolved", "created": "2011-Jun-29 23:07", "fixed_version": "2011-Jun-29 23:07", "broken_version": "v070600", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}