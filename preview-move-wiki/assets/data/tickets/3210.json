{"id": 3210, "title": "Ticket #3210: sprintf audit -> MyString.formatstr", "description": "<blockquote>\nPatches (against master) replace calls to the global\nsprintf overloads with calls to new formatstr functions.  Similarly,\nMyString::[v]sprintf is renamed to MyString::[v]formatstr.\n\n<p>The idea is that sprintf (as an unsafe C API) stands out better after\nthese changes, simplifying code review and encouraging migration to\nformatstr or snprintf.\n\n</p><p>The patches are mostly auto-generated, using a Clang plug-in which\nexamines the AST to tell the different sprintf implementations apart.  I\nmay have missed Windows-specific code and code under #ifdef, so it is\nprobably best not to apply the removal patches yet.\n\n</p><p>I can regenerate the patches for other branches and change \"formatstr\"\nto some other identifier if you want me to.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Aug-24 16:43:33 by tstclair:</em> <br/>\n\nThe multiple commits are from the changes that were missed by default audit which was proper.\n\n<p></p><hr/>\n<em>2012-Aug-27 10:45:41 by tstclair:</em> <br/>\n\nKicked to wrangler for possible review redistribution.\n<hr/>\n<em>2012-Dec-11 16:38:39 by johnkn:</em> <br/>\n\nBulk change of target version from v070902 to v070903 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 22:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33165\">[33165]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> cleanup f16 Werror builds  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33161\">[33161]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Fixes for formatstr on std:u uw-builds (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 13:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33158\">[33158]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Fixes for formatstr on uw-builds under tests (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 13:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33157\">[33157]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Fixes for formatstr on uw-builds (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 12:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33156\">[33156]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Continued mods from formatstr (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 11:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33155\">[33155]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Windows fixes for formatstr (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 11:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33154\">[33154]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3210\" onclick=\"get_ticket_and_populate_wrapper('3210'); return false;\" title=\"sprintf audit -&gt; MyString.formatstr\">#3210</a></span> Replace sprintf overloads with formatstr Signed-off-by: Timothy St. Clair &lt;tstclair@redhat.com&gt; Committer: Timothy St. Clair  (By Florian Weimer )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Sep-22 09:43", "status": "resolved", "created": "2012-Aug-24 16:28", "fixed_version": "2012-Aug-24 16:28", "broken_version": "v070900", "priority": "3", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "tstclair", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com, fweimer@redhat.com", "due_date": ""}