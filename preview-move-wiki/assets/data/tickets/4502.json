{"id": 4502, "title": "Ticket #4502: Memory leak in find_scope_id", "description": "<blockquote>\nfind_scope_id (<a class=\"file\" href=\"rlog?f=src/condor_utils/ipv6_interface.cpp\">/src/condor_utils/ipv6_interface.cpp</a>) leaks memory. ifaddr should be passed to freeifaddrs when we're done with it. In practice this is a small leak, but under certain cases when handling errors this function can be called in a loop and eat all available memory.\n\n<p>There are probably easier way to reproduce, but this works for me:\n</p><ol>\n<li>Get a machine with IPv4 and IPv6 addresses. Link-local is fine.  The following steps assume your IPv6 address is fe80::21e:4fff:fe9d:98f4 ; change as appropriate.\n</li><li>Set:\n<div class=\"code\">\n<pre class=\"code\">COLLECTOR_HOST = [fe80::21e:4fff:fe9d:98f4]:9618\nNETWORK_INTERFACE = fe80::21e:4fff:fe9d:98f4\nDAEMON_LIST=MASTER\nENABLE_IPV6=FALSE\nENABLE_IPV4=TRUE\n</pre></div>\n\n</li><li>run <code>condor_master</code></li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Jul-31 16:25:46 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>This change looks good.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Aug-15 11:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/004a6d1f9aef1df03a6e006389187547cd4af328\">[40977]</a></span>: minor edit of 8.2.3 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4502\" onclick=\"get_ticket_and_populate_wrapper('4502'); return false;\" title=\"Memory leak in find_scope_id\">#4502</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-31 15:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b9b35713f4cff306292ffc92fc468f5fdda93a8d\">[40813]</a></span>: Fix rare memory leak in find_scope_id. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4502\" onclick=\"get_ticket_and_populate_wrapper('4502'); return false;\" title=\"Memory leak in find_scope_id\">#4502</a></span>  (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Aug-04 11:49", "status": "resolved", "created": "2014-Jul-31 14:50", "fixed_version": "2014-Jul-31 14:50", "broken_version": "v080000", "priority": "4", "subsystem": "Libs", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}