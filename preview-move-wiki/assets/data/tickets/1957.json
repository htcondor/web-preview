{"id": 1957, "title": "Ticket #1957: Node job failure/retries/slow aborted event/recovery mode cause error", "description": "<blockquote>\nThe following combination of events results in a fatal error in DAGMan:\n\n<p>1) A node job failed (killed by a signal).\n2) DAGMan saw the terminated event for the job, and re-submitted it,\nbecause retries were turned on for that node.\n3) <strong>After</strong> the re-submission, an ABORTED event for the <strong>first</strong> job\nwas written to the user log.\n4) DAGMan went into recovery mode and re-read the events that resulted\nfrom steps 1-3.  (When not in recovery mode, the scenario above at least\nusually results in a non-fatal error; in recovery mode it's fatal because of\nchanges in the timing of seeing the various events.)</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-11 14:17:44 by wenger:</em> <br/>\n\nJust talked to Greg T about this -- he says it can go into 7.6.0 if I add a test that reproduces the bug.\n\n<p></p><hr/>\n<em>2011-Mar-16 13:53:43 by wenger:</em> <br/>\n\nThis is now documented in the 7.6.0 version history, so I'm going to resolve the ticket.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1961\" onclick=\"get_ticket_and_populate_wrapper('1961'); return false;\" title='\"Node not found\" message should know about retries'>#1961</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\n\"Node not found\" message should know about retries</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-16 13:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25954\">[25954]</a></span>: Documented the gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1957\" onclick=\"get_ticket_and_populate_wrapper('1957'); return false;\" title=\"Node job failure/retries/slow aborted event/recovery mode cause error\">#1957</a></span> fix in the 7.6.0 version history.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Mar-13 22:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=21033\">[21033]</a></span>: Added a test to reproduce gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=1957\" onclick=\"get_ticket_and_populate_wrapper('1957'); return false;\" title=\"Node job failure/retries/slow aborted event/recovery mode cause error\">#1957</a></span> (node job failure/retries/slow aborted event/recovery mode cause error) and fixed it.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Sep-04 14:44", "status": "defer", "created": "2011-Mar-10 12:16", "fixed_version": "2011-Mar-10 12:16", "broken_version": "v070404", "priority": "5", "subsystem": "Dag", "assigned_to": "nwp", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "wenger@cs.wisc.edu, psilord@cs.wisc.edu, gthain@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}