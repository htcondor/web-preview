{"id": 3730, "title": "Ticket #3730: document the specification of a trusted CA for EC2", "description": "<blockquote>\nFrom ToddM, who received the request from Fermi.\n\n<p>When you specify a service with a <a class=\"external\" href=\"https://\">https://</a>, x509://, or euca3s:// URL, HTCondor validates that service's certificate, checking that a trusted certificate authority (CA) signed it.  Commercial EC2 service providers generally use certificates signed by widely-recognized CAs; these will usually work without any additional configuration.  For other providers, you may need to specify which CAs you trust.  For these providers, you may see errors like the following in the EC2 GAHP log:\n\n</p><p>06/13/13 15:16:16 curl_easy_perform() failed (60): 'Peer certificate cannot be authenticated with given CA certificates'.\n\n</p><p>You specify which CAs you trust by including their certificates in a group of trusted CAs: either an on-disk directory or a single file, either of which may contain multiple certificates.  Unfortunately, which way will varies from system to system, depending on its SSL implementation. (HTCondor uses libcurl; see\n\n</p><p><a class=\"external\" href=\"http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCAINFO\">http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCAINFO</a>\n\n</p><p>and\n\n</p><p><a class=\"external\" href=\"http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCAPATH\">http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCAPATH</a>\n\n</p><p>for details.)  Some versions of HTCondor (those with the standard univese enabled) ship with their own libcurl, which will be linked against OpenSSL.\n\n</p><p>The behavior when specifying both is undefined, although the EC2 GAHP allows it.\n\n</p><p>The EC2 GAHP will set the CA file to whichever variable it finds first, checking in the following order:\n\n</p><p>(1) The environment variable X509_CERT_FILE (set when the HTCondor master starts up)\n(2) The HTCondor configuration variable SOAP_SSL_CA_FILE\n\n</p><p>The EC2 GAHP supplies no default value if it doesn't find one.\n\n</p><p>The EC2 GAHP will set the CA directory to whichever variable it finds first, checking in the following order:\n\n</p><p>(1) The HTCondor configuration variable GSI_DAEMON_TRUSTED_CA_DIR (2) The environment variable X509_CERT_DIR (set when the HTCondor master starts up)\n(3) The HTCondor configuration variables SOAP_SSL_CA_DIR\n\n</p><p>The EC2 GAHP supplies no default value if it doesn't find one.\n\n</p><p></p><hr/>\nThe descriptions of SOAP_SSL_CA_DIR, SOAP_SSL_CA_FILE, and GSI_DAEMON_TRUSTED_CA_DIR should probably mention that the EC2 GAHP may also use them.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-01 13:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=36730\">[36730]</a></span>: add documentation to specify trusted CA for EC2 ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3730\" onclick=\"get_ticket_and_populate_wrapper('3730'); return false;\" title=\"document the specification of a trusted CA for EC2\">#3730</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2013-Jul-01 14:06", "status": "resolved", "created": "2013-Jul-01 13:12", "fixed_version": "2013-Jul-01 13:12", "broken_version": "v080000", "priority": "2", "subsystem": "Unknown", "assigned_to": "smoler", "derived_from": "", "creator": "smoler", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}