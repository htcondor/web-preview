{"id": 1521, "title": "Ticket #1521: auto-selected output files and spooling are problematic", "description": "<blockquote>\nWhen output is auto-selected rather than being explicitly listed with transfer_output_files, the behavior is not optimal when spooling is being used.  The spooled output files are dumped into the spool directory along with the existing spooled input files.  Then when a client such as condor_transfer_data attempts to fetch the spooled output, everything in the spool is transferred, including the user log, the spooled input, and the spooled output.\n\n<p>I propose fixing this by recording in the job ad the list of output files that were copied from the execute node.  Call it <code>SpooledOutputFiles</code>.  This should override <code>TransferOutputFiles</code> when fetching the output from the spool.\n\n</p><p>This also happens to be useful in the solution to one of the problems in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1520\" onclick=\"get_ticket_and_populate_wrapper('1520'); return false;\" title=\"paths specified in transfer_output_files have undefined meaning\">#1520</a></span>.  The problem is that entries in the <code>TransferOutputFile</code> list that are paths are stored in the spool directory as basenames.  Something analogous to the schedd's rewriting of the spooled input file list needs to happen for the output files after stage-out is complete.  This could be accomplished by specifying the spooled (rather than origin) paths in <code>SpooledOutputFiles</code>.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jul-23 13:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d05970d77892e33a778f752782f9a4e726221b30\">[18630]</a></span>: Added support for directory trees in Condor's file transfer mode. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1522\" onclick=\"get_ticket_and_populate_wrapper('1522'); return false;\" title=\"support directories in the input/output file transfer lists\">#1522</a></span> This does NOT cause auto-selection of output to look in subdirectories.\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jul-23 17:08", "status": "resolved", "created": "2010-Jul-21 16:22", "fixed_version": "2010-Jul-21 16:22", "broken_version": "v070000", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu", "due_date": ""}