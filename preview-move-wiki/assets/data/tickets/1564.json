{"id": 1564, "title": "Ticket #1564: vm_no_output_vm doesn't work with vmware", "description": "<blockquote>\nCustomer claims that vm_no_output_vm doesn't work with VMware.\n\n<p>The problem is that the vm_gahp uses the Directory object to delete the files before stage-out, but tells it to perform the deletions as the condor user, whereas the files are owned by the executing user. Initializing the Directory object to perform actions as PRIV_USER fixes the problem.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Aug-10 14:09:08 by jfrey:</em> <br/>\n\nPushed fix to V7_4-branch for 7.4.4.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-10 14:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25620\">[25620]</a></span>: Add version history entry for vm_no_output_vm bug <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1564\" onclick=\"get_ticket_and_populate_wrapper('1564'); return false;\" title=\"vm_no_output_vm doesn't work with vmware\">#1564</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-10 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18760\">[18760]</a></span>: Fix vm_no_output_vm job attribute in vm gahp <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1564\" onclick=\"get_ticket_and_populate_wrapper('1564'); return false;\" title=\"vm_no_output_vm doesn't work with vmware\">#1564</a></span> The vm gahp was attempting to remove job files as the wrong user, allowing the files to be transferred back to the submit machine when they shouldn't be. The most noticeable case of incorrect transfer is when vm_no_output_vm is set to true in the submit\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Aug-10 14:09", "status": "resolved", "created": "2010-Aug-05 18:28", "fixed_version": "2010-Aug-05 18:28", "broken_version": "v070400", "priority": "2", "subsystem": "VM", "assigned_to": "jfrey", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}