{"id": 3353, "title": "Ticket #3353: custom attributes published by user code in job", "description": "<blockquote>\nNote - beyond the below, see the design doc at <a class=\"external\" href=\"http://goo.gl/rVnIFq\">http://goo.gl/rVnIFq</a>\n\n<p><span class=\"section\"></span></p><h2>Use Case</h2>\n\n<p>Stefano Belforte who is co-coordinating the CMS Physics Support project\nwithin CMS Computing has requested the ability to have the job publish custom attributes in the job ad at job completion.  Specifically, he needs to be able to publish an application-specific error code that is not expressible in the job exit status published by condor.  Having this information in the job ad will make it possible to write better job policy expressions (e.g. automatic retry for specific types of failures).  It will also make it easier for users to query the status of their completed jobs using condor_history --- obviating the need to dig through output files to gain access to this information.\n\n</p><p><span class=\"section\"></span></p><h2>Weakness of Current Solutions</h2>\n\n<p>Currently, the user code in the job can publish custom attributes by using condor_chirp's set_job_attr command.  There are two reasons why this is not a good solution for CMS:\n\n</p><p></p><ol>\n<li>To enable chirp, one must submit the job with WantIOProxy=True.  This tells the shadow to allow all chirp commands.  This gives the job a great deal of power.  It can read and write any file on the submit machine that the user has permission to access.  It can also change any attribute in the job that the user has permission to change.  The user's submit environment is therefore quite vulnerable in the event of a security compromise of any execute machine.\n\n<p></p></li><li>The chirp set_job_attr command generates a durable transaction in the schedd job queue log each time it is called.  Any extra transactions are undesired, because they can severely impact performance of the schedd.\n</li></ol>\n\n<p><span class=\"section\"></span></p><h2>Proposed Solution</h2>\n\n<p>We propose that the job write attributes into a file, and on exit of the job, these attributes get published into the job ad in the same transaction as other attributes that are updated in the final job update (exit status, memory usage, etc.).  If this file exists while the job is running, it will also be used to update attributes in the periodic update of the job ad.\n\n</p><p>The submit side will control which custom attributes are allowed to be set using a white-list that is the union of a schedd-wide configuration and a job-specific setting.  For flexibility, the white-list should support wildcards.  If the job attempts to set an attribute that does not match the white-list, the shadow will log a complaint but will proceed without error.\n\n</p><p>Failure to open, read, and parse the attribute file for any reason other than that the file does not exist will cause the job to go on hold with a descriptive error message if the error happens after the job has exited.  If the error happens while the job is still running, the starter will log an error message but will otherwise ignore the failure.  Failure to update the job ad during the final update will be handled as it is today: if all retry attempts fail, the job stays in the queue and may be restarted at a later time.  Failure to update the job ad during a periodic update will also be handled as it is today: the periodic update is not critical and is handled in a non-durable transaction (no sync to disk).\n\n</p><p>If the same attribute is set multiple times, the last setting takes effect.\n\n</p><p><span class=\"subsection\"></span></p><h3>Details </h3>\n\n<p>The file written by the job to publish custom attributes will be named .job.report.attrs.  The full path to it (including its name) will be in the environment variable $_CONDOR_JOB_REPORT_ATTRS_FILE.  It will be located in $_CONDOR_SCRATCH_DIR.\n\n</p><p>The white-list will be configured with JOB_REPORT_ATTRS.  The per-job white-list will be set in the submit file with the command job_report_attrs, which will create a job attribute named <code>JobReportAttrs</code>.\n\n</p><p><span class=\"section\"></span></p><h2>Alternate Solutions</h2>\n\n<p>A new chirp command could be added set_job_report_attr to add an attribute to the list of attributes to be bundled into the periodic and final updates.  This list should be maintained by the starter so that shadow restarts do not lose the information.  Additional controls could be added on the submit side to limit the chirp operations that are allowed.  For example, if the submit side is configured with a white-list of job report attributes, but <code>WantIOProxy</code> is false, chirp could be enabled only for set_job_report_attr and not for other operations.\n\n</p><p>The chirp mechanism has the advantage of allowing independent processes within the job to publish attributes without coordinating with each other.  If the job is composed of different software packages, glexec pluggins, wrappers, etc. that were written by different authors, this could be important.  The file-based mechanism, on the other hand, would require the different processes to avoid clobbering each other's updates to the file.  The latter could be achieved, for example, if the file is only ever appended to, never truncated or replaced.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-May-13 08:35:58 by bbockelm:</em> <br/>\n\nHi,\n\n<p>I have a tree for the alternate solution posted here:\n\n</p><p><a class=\"external\" href=\"https://github.com/bbockelm/htcondor/tree/V7_9-remoteupdates-branch\">https://github.com/bbockelm/htcondor/tree/V7_9-remoteupdates-branch</a>\n\n</p><p>I added:\n\n</p><p></p><ol>\n<li>Split authorization between remote I/O and remote updates.  You can now choose to enable one but not the other.\n</li><li>New chirp command, \"set_job_attr_volatile\".  This causes updates to travel via the existing periodic update mechanism used for resource updates.  The update is sent to the schedd via a non-durable transaction (no job log fsync) in the same classad as the other updates (no extra DC operations).  This makes chirp-based updates essentially zero-cost in terms of resources, but possibly lossy and delayed by a few minutes.  This makes the mechanism appropriate for large-scale monitoring.\n</li><li>Allowed condor_chirp to locate the chirp.config file (renamed to .chirp.config to match .machine.ad and .job.ad) via environment variable.  Previously, you had to send the update from the job $IWD - possibly hard to maintain in a glidein environment.  The environment variable is (I think) a more flexible mechanism.\n</li></ol>\n\n<p>Brian\n\n</p><p></p><hr/>\n<em>2013-May-14 06:58:52 by bbockelm:</em> <br/>\n\nDan, could you review the patchset?\n\n<p></p><hr/>\n<em>2013-May-14 09:31:54 by danb:</em> <br/>\n\nNice patch, Brian!\n\n<p>Note that the \"volatile\" updates are reliably committed in the final update, just like other job attributes such as the exit status.  I think \"volatile\" is still a reasonable description.  An alternative would be \"async\".\n\n</p><p>We should add a convenience command to condor_submit for setting <code>WantRemoteUpdates</code>, just like we have for WantRemoteIO.\n\n</p><p>In <code>RemoteResource::updateFromStarter()</code>, it looks to me like the shadow processes remote chirp updates whether or not remote updates have been enabled.  Shouldn't it call <code>allowRemoteWriteAttributeAccess()</code> there?\n\n</p><p>I see that get_job_attr now only works if <code>WantRemoteUpdates</code> is True.  I'm not sure we even need to protect against read access.\n\n</p><p>Should we have a chirp command get_job_attr_volatile that reads from the starter's copy of the job ad?\n\n</p><p></p><hr/>\n<em>2013-May-14 10:02:13 by danb:</em> <br/>\n\nAnother thing to think about: what damage could be done by a rogue job or starter by modifying job ad attributes?\n\n<p>We don't allow Owner to be updated in the schedd, but it can currently be updated in the starter's copy of the ad and the shadow's copy of the ad.  I don't <em>think</em> that can be exploited, but it seems risky.\n\n</p><p>I am also worried about any attribute that specifies a path to a file written by condor: user log, output file paths.\n\n</p><p>Execution of arbitrary code on the submit machine may also be possible by modifying the executable path and setting job management attributes to cause the job to be requeued as a local universe job.\n\n</p><p>Similarly, it is probably possible to escalate <code>WantRemoteUpdates</code> to <code>WantRemoteIO</code> by setting the latter and causing the job to requeue.\n\n</p><p></p><hr/>\n<em>2013-May-14 10:54:19 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>During transit from starter to shadow, any update attribute name is prefixed with \"Chirp\".  When inserted into the schedd, we strip out the prefix.  This is done so I can differentiate these attributes.  As a technical note, in the starter, I keep a separate ad for volatile updates.  Should I mix these back in?\n\n</p><p>What if we default to keeping the prefix, but have it be a config knob for the adventurous admin?  I could add that to set_job_attr.\n\n</p><p>Email feedback from Doug Thain: To maximize backward compatibility, we should check for both \".chirp.config\" and \"chirp.config\" in the client.\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-May-14 12:53:48 by danb:</em> <br/>\n\nOne minor quirk with the \"Chirp\" prefix in the update ad is that the update ad is also sent to the startd.  The startd will therefore see the \"Chirp\" prefix, whereas the copy of the job ad in the shadow and the schedd has this prefix stripped off.  I think this means the \"Chirp\" prefix will also be visible in the startd history file.\n\n<p>Another thing to worry about: the job can overwrite monitoring attributes such as memory usage.  Currently, the \"Chirp\" prefix prevents this from affecting the startd, but not the shadow and schedd.\n\n</p><p></p><hr/>\n<em>2013-May-14 20:39:46 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>Would you be OK with having a default prefix everywhere then?\n\n</p><p>Should we include the updates in the startd, or avoid them?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-May-15 10:17:36 by danb:</em> <br/>\n\nFor consistency, it would be nice if the startd sees the same updates as the schedd.\n\n<p>Given all the security concerns, I think we either need to have a prefix, or have explicit control over which attributes may be updated by the job.  I'm leaning towards a prefix.  I can't think of a use-case that wouldn't work with a prefix, because one can always construct the job so that other attributes refer to the prefixed attributes.  However, adding a prefix may break existing uses of set_job_attr.  Also, if the prefix is implicit when setting an attribute, this makes the semantics of get_job_attr awkward.  Perhaps the prefix should be explicitly specified by the user of set_job_attr rather than being implicit.  The operation should fail if the prefix is anything other than the expected one, which could just be hard-coded for now.  This opens the possibility of allowing updates to other attributes in the future without having to change the interface.\n\n</p><p>\"Chirp\" as a prefix suffers from being specific to a particular mechanism for setting attributes, but I can't think of a better name that isn't annoyingly long.  I'd go with \"Chirp\".\n\n</p><p></p><hr/>\n<em>2013-May-15 10:31:41 by sfiligoi:</em> <br/>\n\n+1 for requiring the prefix.\n\n<p>For backward compatibility, we could add a knob that disables this check.\n\n</p><p></p><hr/>\n<em>2013-May-15 12:16:08 by bbockelm:</em> <br/>\n\nDan - I'm really nervous about making the prefix explicit.  Seems like there may be breakage if the sysadmin changes the value but the user does not.  User applications may be quite difficult to port between prefixes.\n\n<p>Would you mind if I made it implicit?\n\n</p><p>Looks like we're arriving at a consensus here.  I'll probably try to tackle this over the weekend.\n\n</p><p></p><hr/>\n<em>2013-May-15 14:11:43 by sfiligoi:</em> <br/>\n\nAn idea: We could add the \"explicit prefix\"  in the job environment.\n\n<p></p><hr/>\n<em>2013-May-15 14:34:42 by danb:</em> <br/>\n\nJust to be clear about what we are talking about:\n\n<p>Implicit means the chirp command to set an attribute is something like this:\n\n</p><p></p><pre>    condor_chirp set_job_attr Blah Value\n</pre>\n\n<p>and that sets an attribute in the job ChirpBlah=Value.\n\n</p><p>Explicit means the chirp command is like this:\n\n</p><p></p><pre>    condor_chirp set_job_attr ChirpBlah Value\n</pre>\n\n<p>and that sets an attribute in the job ChirpBlah=Value.\n\n</p><p>In both cases, the proposed white-list for settable attributes is Chirp*.  In the explicit case, it is possible to try to set other attributes and to be rejected.  If we change our minds later and decide to add more attributes to the settable white-list, or to make this list configurable, how would you deal with that in the implicit case?  There is no way to refer to attributes with a different prefix.\n\n</p><p>What are you proposing for get_job_attr in the implicit case?  Does it prepend the prefix automatically and thus forbid read access to other attributes?  Or does it not prepend the prefix, in which case set_job_attr and get_job_attr are asymmetric?\n\n</p><p></p><hr/>\n<em>2013-May-22 08:15:16 by bbockelm:</em> <br/>\n\nOk, I think Dan's got me convinced to take the explicit approach.  A few updates:\n<ul>\n<li>REMOTE_UPDATE_PREFIX controls the required prefix.  Defaults to \"CHIRP\"\n</li><li>The starter will set _CONDOR_REMOTE_UPDATE_PREFIX in the job Unix environment.  This should help jobs determine the proper prefix\n</li><li>ENABLE_CHIRP enables all chirp functionality on the starter (still defaults to true).  However, parts of chirp can be disabled by disabling ENABLE_CHIRP_IO, ENABLE_CHIRP_UPDATES, and ENABLE_CHIRP_VOLATILE.  If ENABLE_CHIRP is false, all pieces of functionality are automatically disabled.\n</li><li>Setting WantIOProxy=True in the job still enables IO proxy and job updates.  This still defaults to off.\n</li><li>Setting WantRemoteUpdates=True in the job enables updates.  Overrides WantIOProxy for update functionality.\n</li><li>Setting WantVolatileUpdates=True in the job enables volatile updates.  This defaults to true.\n</li></ul>\n\n<p>Honestly, the logic for enabling / disabling chirp is screwy, mostly due to strapping a finer-grained authorization system onto the side of the existing coarse-grained one.\n\n</p><p></p><hr/>\n<em>2013-May-22 09:22:02 by danb:</em> <br/>\n\nSounds good.  I would argue that we don't need ENABLE_CHIRP_VOLATILE, REMOTE_UPDATE_PREFIX, and _CONDOR_REMOTE_UPDATE_PREFIX, but if you have reason to want them, go for it.\n\n<p></p><hr/>\n<em>2013-May-22 10:44:42 by bbockelm:</em> <br/>\n\nOne more thing - what's the \"correct\" behavior of get_job_attr when volatile updates are enabled but normal updates are disabled?\n\n<p>Right now, I'm leaning toward disabling it but am fairly ambivalent.  What's the possible schedd resource-consumption penalties of enabling get_job_attr?\n\n</p><p></p><hr/>\n<em>2013-May-22 12:05:35 by bbockelm:</em> <br/>\n\nOn the advice of danb, I added \"get_job_attr_volatile\".  This returns the starter's copy of the attribute.  Like set_job_attr_volatile, it has little/no resource impact on the schedd.\n\n<p></p><hr/>\n<em>2013-May-22 12:16:28 by bbockelm:</em> <br/>\n\nThis has been pushed to branch V8_1-remoteupdates-branch.\n\n<p>Dan, please review!\n\n</p><p></p><hr/>\n<em>2013-May-23 10:26:44 by danb:</em> <br/>\n\nHi Brian,\n\n<p>Looking good!\n\n</p><p>Do we really need REMOTE_UPDATE_PREFIX?  This complicates the user interface.  What is the benefit?\n\n</p><p>In RemoteResource::updateFromStarter(), I do not see a call to allowRemoteWriteAttributeAccess() when handling volatile updates.  Speaking of which, that function should be updated to know about what is allowed and what isn't.  (We agreed to change set_job_attr so it can only change Chirp* attributes, right?)\n\n</p><p></p><hr/>\n<em>2013-Jun-12 21:12:40 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>I just pushed fixes for your review comments.\n\n</p><p>I'm still reluctant to remove the ability to customize prefixes.  Maybe Todd has some insights?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Jun-19 10:23:58 by danb:</em> <br/>\n\n\n<p><strong>DESIGN/CODE REVIEW</strong>\n\n</p><p>My concerns have all been addressed.  I still think the customizable prefix complicates the user interface and may be out of place in the future if we add support for a configurable list of prefixes/attributes that may be written to.  However, I won't stand in the way of progress.  I consider this code acceptable as is.\n\n</p><p></p><hr/>\n<em>2013-Aug-16 16:09:19 by tannenba:</em> <br/>\n\n\n<p><strong>DESIGN/CODE REVIEW</strong>\n\n</p><p>Some very nice improvements.  Hard to believe we didn't have an environment var pointing to the chirp config file before now!\n\n</p><p>Questions / comments:\n\n</p><p></p><ol>\n<li>Can REMOTE_UPDATE_PREFIX be a list and/or include wildcards? I agree w/ Dan in that I question the need for REMOTE_UPDATE_PREFIX, except for the question of backwards compatibility which leads me to the next question...\n\n<p></p></li><li>How is backwards compatibility being dealt with?  For instance, if all job ad updates via chirp must now be prefixed with \"Chrip*\", and all other updates will be rejected,  does this mean mpich2 jobs will stop working because our <a class=\"file\" href=\"rlog?f=src/condor_examples/mp2script\">/src/condor_examples/mp2script</a> relies on chirp set_job_attrs that do not begin with Chirp*?  I wonder how many other jobs out in the wild will fail...\n\n<p></p></li><li>Do we need throttles/ circuit breakers?  What happens if a job tries to do a volatile chirp of 10,000 attributes?  I know the there were no such circuit breakers in place before, but does this change make the absence of such breakers worse?\n\n<p></p></li><li>Lotsa code refactoring w/ security-related implications implies to me we really should now have automated tests to confirm both positives and negatives, i.e. a test that not only confirms chip works with WantIOProxy=True but confirms it does NOT work with WantIOProxy=False etc. Ditto for the other settings.\n\n<p></p></li><li>Need a refreshed design doc that reflects the wisdom from the back and forth remarks and reflects what was actually proposed/done.\n\n<p></p></li><li>Not a big fan of some of the terminology.  Instead of calling it a \"volatile\" update, seems like \"async\" or \"lightweight\" or \"delayed\" update.  Kinda like \"delayed\" update, easy to understand that the update will eventually make it (e.g. it will definitely happen by the time the job completes) but could be delayed in order to be more scalable.  Also all the config knobs have CHIRP in them except for REMOTE_UPDATE_PREFIX - why? Also how about if all the config knobs start with CHIRP (e.g. CHIRP_ENABLE_UPDATES, CHIRP_ENABLE_IO, CHIRP_REMOTE_UPDATE_PREFIX) so they can easily be grouped together in a list etc?\n\n<p></p></li><li>Are the async chirp updates also sent along to the startd along with the other job resource usage information in the update ad?  What is the architectural justification for this? I am having a hard time thinking of one. Also seems wrong that sync chirp updates only go to the shadow, but async chirp updates go to both the shadow and the startd.\n</li></ol>\n\n<p></p><hr/>\n<em>2013-Aug-16 16:47:41 by bbockelm:</em> <br/>\n\nHi Todd,\n\n<p>In order:\n\n</p><p></p><ol>\n<li>Oddly enough, one of my first use cases for this requires me to do a custom prefix (to match an existing application, I need to prefix with \"PILOT_\" instead of \"Chirp\").  I would be OK with making this a list; my initial resistance was that this prevents us from using the REMOTE_UPDATE_PREFIX environment variable to determine the desired prefix.  However, I'm now thinking people doing scripts would survive...\n</li><li>This should be backwards compatible; set_job_attr works the same as before (and with the same security settings).\n</li><li>The \"precious resource\" previously was the shadow-&gt;schedd communication.  This is solved as these updates piggyback on existing communications.  We can probably put a limit in the number of custom attributes (and attribute size) to prevent folks from using up all the schedd memory.  How relevant do you feel this is?\n</li><li>I agree a unit test would be a reasonable addition here.\n</li><li>No argument.\n</li><li>Well, \"delayed\" as terminology becomes problematic if I make starter updates non-delayed as you suggest below.\n</li><li>No, these updates shouldn't go to the startd.  I'll look into it - if they do, I'd consider it a bug and fix it.\n<ul>\n<li>That said - I have a set of follow-up changes to insert information into the starter ad!\n</li></ul>\n</li></ol>\n\n<p>Brian\n\n</p><p></p><hr/>\n<em>2013-Aug-19 11:25:21 by bbockelm:</em> <br/>\n\nNew design doc posted to Google Docs.  Now starting the updates to the code to match doc / review.\n\n<p></p><hr/>\n<em>2013-Aug-19 12:13:30 by bbockelm:</em> <br/>\n\nJust pushed the rename of volatile -&gt; delayed.  All review items fixed except (3) and (4).\n\n<p>Discussing with ToddT offline: (3) will be fixed by adding a limit of 50 custom attributes and 1K of characters per attribute.\n\n</p><p></p><hr/>\n<em>2013-Aug-22 15:57:26 by danb:</em> <br/>\n\nI don't understand the opposition to attribute updates going to the startd.  What if I want to have the slot publish one of these attributes (STARTD_JOB_EXPRS)?  What if I want policy to depend in some way on these attributes?  Having fewer differences between the different copies of the job ad floating around seems better to me.\n\n<p></p><hr/>\n<em>2013-Aug-27 18:35:24 by bbockelm:</em> <br/>\n\nHi Dan,\n\n<p>My thought was to have a separate set of commands for updating the starter.  I guess I don't see the advantage of updating both - it doesn't happen for set_job_attr currently, right?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2013-Aug-28 09:39:47 by danb:</em> <br/>\n\nIt is true that set_job_attr does not update the copy of the job ad held by the starter and therefore also does not get propagated to the startd's copy of the job ad.  To me this seems more like a shortcut taken in the implementation than a desirable feature.  In this new situation, we are updating the starter's copy of the job ad.  Filtering out those attributes when updating the startd's copy of the ad seems like going through extra effort for no good purpose.  Maybe I am misunderstanding what is being proposed.\n\n<p></p><hr/>\n<em>2013-Aug-28 15:54:13 by bbockelm:</em> <br/>\n\nJust pushed:\n<ul>\n<li>Thorough unit tests for the functionality described in the design document, including the security model.\n</li><li>Limits to the number of attributes that can be used.\n</li><li>A handful of across-the-board bugfixes found by the unit tests.\n</li></ul>\n\n<p></p><hr/>\n<em>2013-Sep-20 14:39:44 by gthain:</em> <br/>\n\n<strong>CODE *REVIEW</strong>  Looks good.  I've pushed a fix to suppress a warning to get it to build on F17/18, so you can merge this to master &amp; push.\n\n<p></p><hr/>\n<em>2013-Sep-20 15:15:25 by bbockelm:</em> <br/>\n\nPushed!\n\n<p>I'll work on the documentation changes next.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-31 09:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db7323a13b2534624590af86d538bc1d1056b222\">[38038]</a></span>: last edits for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span> documentation  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-30 12:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/78918d56f742b8f16a554fb56a2d619d42a3b87d\">[38024]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-29 14:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c48681624e6b0aff7265daab0225098feb1a6dda\">[38016]</a></span>: edit new Chirp-related knob definitions <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-29 09:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cf2c70396ee41581f3d7c9d98eff290bb2ff5409\">[38003]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-20 19:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0d9011b3946d01c00583cbb726e7a9f3f47e65b2\">[37693]</a></span>: Fix windows CMake file <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-20 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/afeee43f759ff7acc703ac963b4cf17179705161\">[37692]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fe6841bba0d04bf347ddc8076acdcf70678509ce\">[35784]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5d0090fc330bedf835f7a52a877ad025709ffd21\">[35785]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/72e201525da2b5ad36b412464f2ff299ba622456\">[35786]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7143f9f7902f43819904be7c61ea9672a6acd487\">[35787]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3a05b6b38dfef166f59a2d1a7357bbae5786243\">[35788]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d67f22016ccd6c7df5a653c62ddfd113f626e1b8\">[35789]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f24fa2d65c6addbe4c82f55584455e5d3e86452c\">[35802]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b2a5ad3b4c85c325974b80e11805f166b9fc6c3b\">[35803]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/187ac070ec67e7b663e2d5e6d955cc57aeb353fb\">[35852]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ae470e127f2a0e974d53f9b8b718626de0702277\">[35853]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a99b2aa469b08917e834f6c4a0f39123601e96cb\">[36544]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fcd4c912b48917f7451a5b2f3a3ed0cda0b0797c\">[36545]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8c286ddf2e9f29b90dafc503e37f646526198dcc\">[37276]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e076e956a641dffedf45ee5c15237a1fae1f36c1\">[37391]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8f7f110f36f80cd6de947ee7319eb812e915e613\">[37392]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2e0b3a456e55357f691d5531fb80f8f25dbecfb\">[37393]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/57588ea327ac93b22fa1618e5267abae39bdc521\">[37394]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/843bf1f87c4b6afabf5247847f440fe57c82dccd\">[37395]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e138386a877c1413a650e1a7310b36cae33486b\">[37396]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/45b79d6c4fac0915b43d14dcfd5ff8af357c5e9e\">[37397]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3c980b5376a956e60f0e7d3199056a581bcc3e9c\">[37691]</a></span>, Merge branch 'V8_1-remoteupdates-branch'. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span> Conflicts: src/python-bindings/CMakeLists.txt  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-20 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3c980b5376a956e60f0e7d3199056a581bcc3e9c\">[37691]</a></span>: Suppres auto_ptr deprecation warnings <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-28 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/45b79d6c4fac0915b43d14dcfd5ff8af357c5e9e\">[37397]</a></span>: Implement unit tests for delayed update functionality and new security policies. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-28 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e138386a877c1413a650e1a7310b36cae33486b\">[37396]</a></span>: Fix handling of cached exprs and python booleans. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-28 15:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/843bf1f87c4b6afabf5247847f440fe57c82dccd\">[37395]</a></span>: Bugfixes from devloping unittsts. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-27 20:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/57588ea327ac93b22fa1618e5267abae39bdc521\">[37394]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3275ba96c5f166f444a9a02ad64919b82f52d7f\">[36999]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aa00526e530853d000db1fddcc588fb14710df74\">[37000]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/066146896e5052d735b7eb89811efeac9f02a46e\">[37001]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/86049c95772904c9f715ed79bca261eb2c98c9d0\">[37002]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6dbe9bed884130ec615ecb4f0add2d3cafbeceac\">[37003]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dd00f195768669824e32d00eda65fb09babeffd8\">[37004]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cc7137e479067570f12346f6fe636d60a13215e0\">[37033]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/da9e0052f815946b3d6a98d7f4c40c0755a959a4\">[37034]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/06259f2806c903b223fe2cd741594e2e185a4747\">[37035]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58271fbe883c6bf6cfe6187b9695f7af7043ad6f\">[37036]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1b1ab057bc07c1577e14d4232372a6eb5ffd75a\">[37038]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/af75b50d5b8d25795fe61c7e6372dd409f15d09a\">[37039]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/650a96688a03baaca24d1ff33d23dd653258eda4\">[37040]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/80d06a6fd1e72d00bf587142f0e4f4580853a3f7\">[37041]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fc2db53c45bfb36c466be9cf89faedcec7128d4f\">[37042]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/094e05187afd2f7efbae7a298e08d9ca40d72912\">[37045]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6f1ebe4ef8dec050b8a15f8bda39faf4f06aa6dc\">[37075]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1eeb54237cb0add07c8e04dd35ab9fdae0c1fcd2\">[37076]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/88503bdfba6a23c93f2ce47f3464bf5d5e8335d5\">[37077]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6238bd05c55eb1742af3c281c14b402d2d170c06\">[37078]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1adc52cbff7b0f459bde60886d8b13d260a37729\">[37082]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/76d2cd7bf2fbb29547aba3612943c4cfc4a2f481\">[37088]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c2890e0f3c36fb271cd7055273631b3877ad6e1b\">[37089]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9d3c7bf7e1211867f4baa6c41c0e3327fa1f57fc\">[37094]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c965b72d8bb1919c0eb3f2c99242b9946623fe47\">[37095]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de7cfb35de9f134947abefe7d9dce23fb05b916d\">[37098]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3afe797cabfc11403cfaa2b8475fb86deab39853\">[37099]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fb6d4b47bea4c763ecc309b9c0531808ecbe1b2a\">[37100]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/badc25d3c81b324fe4c389e4daa5d0a3d8d55c88\">[37102]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3caca85682d927fc16050e478a3bdb3b95b6e529\">[37103]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c90648ad1e7847775c7d7a4054aaee639609d7be\">[37106]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/038c1fce493e544f9213c0f33a0b1f64bda621d4\">[37130]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/947d84666afbe8a125732a949500a8cc03cdb228\">[37131]</a></span>,\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-27 20:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2e0b3a456e55357f691d5531fb80f8f25dbecfb\">[37393]</a></span>: Start refactoring the htcondor tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-27 20:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8f7f110f36f80cd6de947ee7319eb812e915e613\">[37392]</a></span>: Fix cmake copy command for python tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-27 20:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e076e956a641dffedf45ee5c15237a1fae1f36c1\">[37391]</a></span>: Add limits to prevent user from sending more than 50KB of updates into the schedd classad. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-19 12:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8c286ddf2e9f29b90dafc503e37f646526198dcc\">[37276]</a></span>: Rename volatile-&gt;delayed. Do not send delayed updates to starter. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-12 20:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a99b2aa469b08917e834f6c4a0f39123601e96cb\">[36544]</a></span>: Make sure volatile updates are passed through the security layer on the shadow. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-22 12:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ae470e127f2a0e974d53f9b8b718626de0702277\">[35853]</a></span>: Improve setting and getting volatile attributes. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span>. This update filters setting of attributes based on some prefix, defaulting to \"Chirp\". Any attribute set that does not start with the prefix will be ignored.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-12 20:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c584a30022712292294e823fa99173bfa2ff6049\">[35851]</a></span>: Improve bootstrap of chirp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span> By default, condor_chirp only will read chirp.config from the local directory. With this change, it will prefer to use the file referred to by $_CONDOR_CHIRP_CONFIG.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-12 11:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c8bc5804ccd4fd8316c773f86a41fa38331a55c\">[35850]</a></span>: Implement a volatile update mechanism for chirp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3353\" onclick=\"get_ticket_and_populate_wrapper('3353'); return false;\" title=\"custom attributes published by user code in job\">#3353</a></span> This is designed to be a scalable mechanism to send monitoring updates from the jobs.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Feb-18 11:00", "status": "resolved", "created": "2012-Nov-30 13:24", "fixed_version": "2012-Nov-30 13:24", "broken_version": "v070900", "priority": "2", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "dan@hep.wisc.edu,isfiligoi@ucsd.edu,tannenba@cs.wisc.edu,zmiller@cs.wisc.edu,bbockelm@cse.unl.edu", "due_date": ""}