{"id": 1020, "title": "Ticket #1020: VOMS attributes are extracted from the wrong credential", "description": "<blockquote>\nwhen authenticating using a GSI proxy with VOMS attributes present, the VOMS attributes are pulled from the credential presented to the other party, not from the other party's credential.  up until now, everyone who ever tested this used the same credential for both sides, and so the problem went unnoticed.  this means that the use of VOMS attributes for credential mapping is not to be trusted.\n\n<p>(tangent:  VOMS attributes present in the Job Ad ARE correct, since they are placed there by the submitter and not the schedd.  however, this also means they should not be trusted since they are not validated by the schedd like they should be)</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Dec-14 23:00:17 by zmiller:</em> <br/>\n\nhad to import some globus internal data structures (condor_includes/condor_gssapi_openssl.h) to get at the neccessary credential.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-15 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16670\">[16670]</a></span>: VOMS refactor pulled wrong credential name. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=935\" onclick=\"get_ticket_and_populate_wrapper('935'); return false;\" title=\"VOMS support breaks gratia due to semantic changes\">#935</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=936\" onclick=\"get_ticket_and_populate_wrapper('936'); return false;\" title=\"VOMS serialization is imprecise\">#936</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1020\" onclick=\"get_ticket_and_populate_wrapper('1020'); return false;\" title=\"VOMS attributes are extracted from the wrong credential\">#1020</a></span> It started returning the subject of the proxy, rather than its identity.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-15 09:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16663\">[16663]</a></span>: fix verification of VOMS attributes for use in authentication <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1020\" onclick=\"get_ticket_and_populate_wrapper('1020'); return false;\" title=\"VOMS attributes are extracted from the wrong credential\">#1020</a></span>.  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-14 21:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16661\">[16661]</a></span>: VOMS refactor. addresses many problems, tickets <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=935\" onclick=\"get_ticket_and_populate_wrapper('935'); return false;\" title=\"VOMS support breaks gratia due to semantic changes\">#935</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=936\" onclick=\"get_ticket_and_populate_wrapper('936'); return false;\" title=\"VOMS serialization is imprecise\">#936</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1020\" onclick=\"get_ticket_and_populate_wrapper('1020'); return false;\" title=\"VOMS attributes are extracted from the wrong credential\">#1020</a></span>.  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2009-Dec-15 14:23", "status": "resolved", "created": "2009-Dec-03 14:44", "fixed_version": "2009-Dec-03 14:44", "broken_version": "v070400", "priority": "2", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#161", "creator": "zmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}