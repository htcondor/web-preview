{"id": 771, "title": "Ticket #771: Schedd updates in gridmanager causes extra load", "description": "<blockquote>\nIn the gridmanager, whenever changes to job ad are pushed to the schedd, the relevant job object is notified after the push completes. The job object may be waiting for the push to finish before performing certain operations (such as waiting for a job id to be saved before finishing a submission to a remote system). But there are many changes to the job ad for which the job object isn't waiting. When there are 10,000s of of jobs, unnecessary signaling of the job objects can cause a lot of load.\n\n<p>For gt2 jobs, each new grid monitor status report causes <span class=\"quote\">LastRemoteStatusUpdate</span> to be changed in all related jobs submitted. These reports arrive every couple minutes, resulting in many schedd updates and signaling of job objects.\n\n</p><p>When a job ad change needs to be pushed to the schedd, the caller needs to identify whether job object is waiting for the push to complete. If it's not waiting, then it doesn't need to be signaled.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Oct-08 13:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=15956\">[15956]</a></span>: Improve schedd ad updates in the gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=769\" onclick=\"get_ticket_and_populate_wrapper('769'); return false;\" title=\"Gridmanager jobs stuck in endless loop updating schedd\">#769</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=771\" onclick=\"get_ticket_and_populate_wrapper('771'); return false;\" title=\"Schedd updates in gridmanager causes extra load\">#771</a></span> Fix some problems in how job ad changes are pushed to the schedd that were revealed by BNL's testing with tens of thousands of jobs: * When a job object wants a job ad change to be pushed to the schedd, it can say whether its <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=EvaluateState\" title=\"Evaluate State\">EvaluateState</a></span> timer\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jan-31 13:41", "status": "resolved", "created": "2009-Sep-23 14:28", "fixed_version": "2009-Sep-23 14:28", "broken_version": "v070400", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#760", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "", "due_date": ""}