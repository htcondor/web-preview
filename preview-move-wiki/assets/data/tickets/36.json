{"id": 36, "title": "Ticket #36: Hold scheduler and local universe jobs on permanent errors", "description": "<blockquote>\nNMI had a mal-formed shell script (no &amp;#8216;#!/bin/sh&amp;#8217;) submitted as a scheduler universe job. Condor repeatedly failed to execute it, getting errno 8 (Exec format error). The only indication that something was wrong was a line in the schedd log.\n\n<p>The local universe is a little better. Execution failure events appear in the user log and <span class=\"quote\">NumJobStarts</span> increments on each failed attempt.\n\n</p><p>In both universes, it would be nice if Condor put the job on hold for failures like that we&amp;#8217;re pretty sure are permanent.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jan-22 11:18:30 by matt:</em> <br/>\n\nIs this more than just specifying (as the user) a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=PeriodicHold\" title=\"Periodic Hold\">PeriodicHold</a></span>?\n\n<p></p><hr/>\n<em>2009-Mar-20 12:04:47 by burnett:</em> <br/>\n\nWhich errors qualify as permanent?\n\n<p></p><pre>  ...\n  errno 7 is E2BIG - Argument list too long\n  errno 8 is ENOEXEC - Exec format error\n  ...\n</pre>\n\n<p></p><hr/>\n<em>2009-Mar-20 12:06:02 by burnett:</em> <br/>\n\nOr do we just want a <span class=\"quote\">NumJobStarts</span> in every Universe?\n\n<p></p><hr/>\n<em>2009-Mar-20 13:08:16 by matt:</em> <br/>\n\nThe <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumJobStarts\" title=\"Num Job Starts\">NumJobStarts</a></span>, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumShadowStarts\" title=\"Num Shadow Starts\">NumShadowStarts</a></span>, etc mess should be fixed. Having a well defined set of information for policy across universes is a good thing.\n\n<p></p><hr/>\n<em>2009-Mar-20 16:03:17 by burnett:</em> <br/>\n\nSounds good, I just wanted to get an impression of what the problem was.\n\n<p></p><hr/>\n<em>2009-Mar-20 22:42:56 by tannenba:</em> <br/>\n\nThis ticket is <strong>not</strong> about changing the attributes kept about a job like <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumJobStarts\" title=\"Num Job Starts\">NumJobStarts</a></span> and friends.  Perhaps that is something that could be improved, but that is a topic for another day/ticket ;). It is about doing what the ticket says - errors that are very very likely to be non-transient should result in the job being placed on hold w/ a hold reason and a hold code.  Just like we do for Vanilla Universe jobs, but fail to do for scheduler, and perhaps local as well.  Wondering what errors are transient -vs- non-transient?  Start with the errors already deemed non-transient in the vanilla universe.  If the error would result in the job going on hold in vanilla, make certain it does so in scheduler &amp; local universe as well.\n\n<p></p><hr/>\n<em>2009-Oct-21 15:40:46 by psilord:</em> <br/>\n\nBen Burnett has left the Condor Project. This ticket is being unassigned.\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2012-Oct-16 13:12", "status": "new", "created": "2009-Jan-16 11:06", "fixed_version": "2009-Jan-16 11:06", "broken_version": "", "priority": "2", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}