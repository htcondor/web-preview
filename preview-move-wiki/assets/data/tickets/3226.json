{"id": 3226, "title": "Ticket #3226: Corrupt log failure.", "description": "<blockquote>\nSteps to repo:\n<div class=\"code\">\n<pre class=\"code\">1. Submit a PU job let it run\n2. rm the PU job\n3. Submit second PU job\n4. EXCEPT in Negotiator\n\nERROR \"Error: corrupt log record 86 (byte offset 4080) occurred inside closed transaction, recovery failed\" at line 1141 in file /home/tstclair/work/spaces/active/git/src/condor_utils/classad_log.cpp\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Sep-11 13:01:56 by eje:</em> <br/>\n\nI think the spaces in the key name are actually the culprit - the classad log parser assumes the key is a single token with no whitespace:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">101 Resource.&lt; slot4@tstclair.redhat , 192.168.122.1 &gt; * *</pre></div>\n\n\n<p>it would expect something like this:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">101 Resource.&lt;slot4@tstclair.redhat,192.168.122.1&gt; * *</pre></div>\n\n\n<p></p><hr/>\n<em>2012-Sep-25 16:50:33 by zmiller:</em> <br/>\n\nthis was caused by the initial commit made for ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3221\" onclick=\"get_ticket_and_populate_wrapper('3221'); return false;\" title=\"negotiator ASSERTs\">#3221</a></span>.  that commit was reverted and a smaller change was made, rendering this ticket obsolete.  resolving.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/633/parse_fail_on_pu.tar.gz\">parse_fail_on_pu.tar.gz</a>\n33800 bytes added by tstclair on 2012-Sep-11 17:11:08 UTC.\n<br/>\nFull log account of failure.  recheck line numbers. <br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "defect", "last_change": "2012-Sep-25 16:51", "status": "resolved", "created": "2012-Sep-11 11:53", "fixed_version": "2012-Sep-11 11:53", "broken_version": "v070803", "priority": "2", "subsystem": "Daemons", "assigned_to": "eje", "derived_from": "", "creator": "tstclair", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tstclair@redhat.com eje@cs.wisc.edu", "due_date": ""}