{"id": 3157, "title": "Ticket #3157: Blahp fails to handle some pbs job statuses", "description": "<blockquote>\nWhen the blahp's pbs_status.sh script calls qstat to determine a job's status, if the status output is not something that the script is expecting, it prints an invalid classad back to the blahp. The blahp fails to parse the ad and sends the error message \"Error allocating memory\" to the gridmanager. The script doesn't expect several valid pbs job status letters: \"W\", \"T\", and \"S\".\n\n<p>For now, we'll fix the most pressing bug:\n</p><ul>\n<li>Not recognizing valid pbs statuses\n</li></ul>\n\n<p>These additional problems will be put off for later:\n</p><ul>\n<li>pbs_status.sh should return an error when encountering unexpected output, not return an invalid classad\n</li><li>When the blahp fails to parse an invalid classad, it should return a better error message than \"Error allocating memory\"</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-07 14:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/66ac60010a6879c4183590ba86b1098552b8f0c7\">[32993]</a></span>: blahp version history. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3133\" onclick=\"get_ticket_and_populate_wrapper('3133'); return false;\" title=\"Blahp depends on condor_history -f\">#3133</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3016\" onclick=\"get_ticket_and_populate_wrapper('3016'); return false;\" title=\"blahp canceling of completed job causes a failure\">#3016</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3057\" onclick=\"get_ticket_and_populate_wrapper('3057'); return false;\" title=\"Blahp needs improved escaping of job arguments\">#3057</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3067\" onclick=\"get_ticket_and_populate_wrapper('3067'); return false;\" title=\"SGE BLAHP bug fix\">#3067</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3157\" onclick=\"get_ticket_and_populate_wrapper('3157'); return false;\" title=\"Blahp fails to handle some pbs job statuses\">#3157</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3181\" onclick=\"get_ticket_and_populate_wrapper('3181'); return false;\" title=\"Fix SGE job monitoring in the blahp\">#3181</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jul-23 15:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8352218e6deaddc97ff73c69731a29ae8d25af4e\">[32890]</a></span>: Recognize all valid pbs statuses in the blahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3157\" onclick=\"get_ticket_and_populate_wrapper('3157'); return false;\" title=\"Blahp fails to handle some pbs job statuses\">#3157</a></span> The blahp's pbs_status.sh script didn't recognize pbs job status letters 'W', 'T', or 'S'. They would cause the script to return an invalid classad to the blahp, which would then return the error message \"Error allocating memory\" to the gridmanager.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Aug-07 14:35", "status": "resolved", "created": "2012-Jul-23 15:45", "fixed_version": "2012-Jul-23 15:45", "broken_version": "v070800", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}