{"id": 7693, "title": "Ticket #7693: Support oauth tokens and krb/kerberos credentials in local universe", "description": "<blockquote>\nCurrently, <code>LOCAL</code> and <code>SCHEDULER</code> universe jobs do not have the ability to run with a user's OAuth tokens or Kerberos credentials.\n\n<p>Adding this support for <code>LOCAL</code> universe would involve having the Starter process know to do the work that the shadow does when OAuth credentials ar erequested (as opposed to using a shadow syscall, since there is no shadow in this case).  This is essentially reading files while root and then writing them into the sandbox while impersonating the user. Once that is in place, it should be fairly straightforward since there IS a job sandbox for the job so the credentials can be placed there and managed normally by the Starter.\n\n</p><p>For <code>SCHEDULER</code> universe this would be much more work because there is no Starter process to manage credentials and no job sandbox in which to place them.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Nov-10 10:26:42 by johnkn:</em> <br/>\n\nadded to jira as <a class=\"external\" href=\"https://opensciencegrid.atlassian.net/browse/HTCONDOR-69\">HTCONDOR-69</a></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=7871\" onclick=\"get_ticket_and_populate_wrapper('7871'); return false;\" title=\"Local universe jobs should got on hold when they can't run\">#7871</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nLocal universe jobs should got on hold when they can't run</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Nov-17 14:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61684\">[61684]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7853\" onclick=\"get_ticket_and_populate_wrapper('7853'); return false;\" title=\"python submit method on schedd object should take a Submit object\">#7853</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7693\" onclick=\"get_ticket_and_populate_wrapper('7693'); return false;\" title=\"Support oauth tokens and krb/kerberos credentials in local universe\">#7693</a></span> and HTCONDOR-67  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-01 15:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61391\">[61391]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7693\" onclick=\"get_ticket_and_populate_wrapper('7693'); return false;\" title=\"Support oauth tokens and krb/kerberos credentials in local universe\">#7693</a></span>, add refresh timer for scitokens in local universe  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Oct-01 09:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=61384\">[61384]</a></span>: Implement <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7693\" onclick=\"get_ticket_and_populate_wrapper('7693'); return false;\" title=\"Support oauth tokens and krb/kerberos credentials in local universe\">#7693</a></span>, add support for scitokens to Local universe ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Nov-17 15:05", "status": "resolved", "created": "2020-Jun-17 15:35", "fixed_version": "2020-Jun-17 15:35", "broken_version": "", "priority": "3", "subsystem": "Security", "assigned_to": "johnkn", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}