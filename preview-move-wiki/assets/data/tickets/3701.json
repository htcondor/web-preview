{"id": 3701, "title": "Ticket #3701: Gridmanager can crash on certain replies from EC2 GAHP", "description": "<blockquote>\nNormally, when a command issued to the EC2 GAHP fails, it returns two strings explaining the nature of the failure. For some types of failure, the GAHP doesn't return any details about the failure. In several places in the the EC2Job object of the gridmanager, it assumes the failure description strings are always present, and will dereference a NULL pointer if the strings are missing.\n\n<p>We need to add some checks in the gridmanager to avoid the dereferences when the string is NULL.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jun-17 16:15:58 by tlmiller:</em> <br/>\n\n<strong class=\"two\">CODE REVIEW</strong>\n\n<p>Everything looks good to me.  I'll second the suggestion that (for 8.1.x) we change the interface to use a std::string &amp; for the GAHP error code, instead; less error-prone.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-17 14:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=36594\">[36594]</a></span>: Version history for gridmanager memory leak and crash on EC2 failure. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3701\" onclick=\"get_ticket_and_populate_wrapper('3701'); return false;\" title=\"Gridmanager can crash on certain replies from EC2 GAHP\">#3701</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-14 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=36582\">[36582]</a></span>: Gridmanager can crash on certain replies from the EC2 GAHP <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3701\" onclick=\"get_ticket_and_populate_wrapper('3701'); return false;\" title=\"Gridmanager can crash on certain replies from EC2 GAHP\">#3701</a></span> Add some more checks for NULL error string on EC2 GAHP command failure. Also fix some memory leaks of those strings.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jun-14 14:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=36580\">[36580]</a></span>: Gridmanager can crash on certain replies from the EC2 GAHP <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3701\" onclick=\"get_ticket_and_populate_wrapper('3701'); return false;\" title=\"Gridmanager can crash on certain replies from EC2 GAHP\">#3701</a></span> When a command fails, the EC2 GAHP usually returns two error strings detailing the failure. In some cases, it doesn't return these strings. Many places in the EC2Job object of the gridmanager assume these strings are always present on a\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Jul-08 15:24", "status": "resolved", "created": "2013-Jun-14 10:25", "fixed_version": "2013-Jun-14 10:25", "broken_version": "", "priority": "1", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#3681", "creator": "tlmiller", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}