{"id": 4151, "title": "Ticket #4151: Improve Condor_gangliad", "description": "<blockquote>\nThe first deployment of ganglia in CHTC revealed several shortcomings:\n\n<p></p><ul>\n<li>Some graphs have the wrong units\n</li><li>condor_gangliad pushing metric for hosts not monitored by ganglia\n</li><li>Some accumulated statistics not accumulating\n</li><li>Incomplete documentation</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-07 12:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45520\">[45520]</a></span>: fix some typos and awkward wording in ganglia docs <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-26 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39489\">[39489]</a></span>: improve 8.1.4 documentation of support for Ganglia monitoring <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-25 15:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39469\">[39469]</a></span>: Ganglia documentation and improve version history items. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3965\" onclick=\"get_ticket_and_populate_wrapper('3965'); return false;\" title=\"Add preemption and job start stats to ganglia\">#3965</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-21 11:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39449\">[39449]</a></span>: First cut at gangliad docs <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-13 10:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39407\">[39407]</a></span>: Don't report a max value as a min <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-12 10:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39400\">[39400]</a></span>: Fix up minor Coverity warnings <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Two fields needed to initialized in the contstructor.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-10 15:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39377\">[39377]</a></span>: Fix resource (fds) leak in gangliad <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Also tweak the log messages.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-05 09:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39334\">[39334]</a></span>: Skip heartbeats when pub takes too long <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-05 08:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39331\">[39331]</a></span>: Fix up gangliad test (new config) <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Set GANGLIA_SEND_DATA_FOR_ALL_HOSTS parameter.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-04 22:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39322\">[39322]</a></span>: Send heartbeats to hosts not in ganglia <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Use the gstat command to see which hosts are in ganglia and send heartsbeats to hosts outside of ganglia. Add knob as to whether to include hosts outside of ganglia.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-28 18:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39321\">[39321]</a></span>: Send a heartbeat with each metric <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> This hack gets HTCondor metrics visible for hosts not currenly monitored by ganglia. It sends a heartbeat with each metric. This should be reworked to send 1 heartbeat for each node that is not monitored by ganglia.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-28 17:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39320\">[39320]</a></span>: Change accumulated times to floats <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Accumulated times are time_t integers (64-bit) and don't fit in int32. So, store them as floats.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-28 17:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39319\">[39319]</a></span>: Report in native units <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Avoid k kbytes in graphs by scaling to bytes and let ganglia graph it as Mbytes  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-14 10:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39151\">[39151]</a></span>: new file in manual for documentation of monitoring, starting with Ganglia. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-14 10:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39150\">[39150]</a></span>: new manual subsection (within Pool Management section) for documentation about monitoring. First doc is for Ganglia. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-10 10:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39318\">[39318]</a></span>: Add version metric;Scale <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DaemonCoreDutyCycle\" title=\"Daemon Core Duty Cycle\">DaemonCoreDutyCycle</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Add the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ConverVersion\" title=\"Conver Version\">ConverVersion</a></span> metric. Scale Daemon Core Duty Cycle by 100 and set the units to \"%\".  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-10 10:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=39317\">[39317]</a></span>: Default to appropriate type for metric. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4151\" onclick=\"get_ticket_and_populate_wrapper('4151'); return false;\" title=\"Improve Condor_gangliad\">#4151</a></span> Instead of reporting all metrics as double by default, report integers as int32, real numbers as float, and boolean as int8. Also, add the ability to scale numbers when reporting. Can report dutycycle as a %.  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Feb-27 15:26", "status": "resolved", "created": "2014-Jan-10 10:25", "fixed_version": "2014-Jan-10 10:25", "broken_version": "v080100", "priority": "2", "subsystem": "", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}