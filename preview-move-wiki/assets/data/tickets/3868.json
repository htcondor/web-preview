{"id": 3868, "title": "Ticket #3868: File/Directory conflict in Fedora RPM", "description": "<blockquote>\nThe relatively new Fedora RPMs are not installing on BaTLab Fedora platforms.  The following dump comes from an attempt at a condor install on exec-113.batlab.org.  Look at the \"Transaction Check Error\" at the end of the dump to see why.\n\n<p>Matyas, sorry if I assigned this to the wrong person.  You were my best guess.\n-Moate\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">Examining /root/condor_x86_64.rpm: condor-8.0.2-162062.x86_64\nMarking /root/condor_x86_64.rpm to be installed\nResolving Dependencies\n--&gt; Running transaction check\n...\nTransaction Summary\n================================================================================\nInstall  1 Package  (+ 6 Dependent packages)\nUpgrade             ( 30 Dependent packages)\n\nTotal size: 57 M\nDownloading Packages:\nRunning Transaction Check\nRunning Transaction Test\n\n\nTransaction Check Error:\n  file /usr/lib from install of condor-8.0.2-162062.x86_64 conflicts with file from package filesystem-3.1-2.fc18.x86_64\n  file /usr/bin from install of condor-8.0.2-162062.x86_64 conflicts with file from package filesystem-3.1-2.fc18.x86_64\n  file /usr/lib64 from install of condor-8.0.2-162062.x86_64 conflicts with file from package filesystem-3.1-2.fc18.x86_64\n  file /usr/sbin from install of condor-8.0.2-162062.x86_64 conflicts with file from package filesystem-3.1-2.fc18.x86_64\n  file /etc/init.d from install of condor-8.0.2-162062.x86_64 conflicts with file from package chkconfig-1.3.59-2.fc18.x86_64\n\nError Summary\n-------------\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nI think this is something Carl can do.\n\n<p></p><hr/>\n<em>2013-Nov-12 14:49:42 by moate:</em> <br/>\n\nWhat's the status on this one?\n\n<p></p><hr/>\n<em>2013-Nov-12 16:55:32 by edquist:</em> <br/>\n\nThe current condor.spec includes this line in the %files section:\n\n<p>@CPACK_RPM_INSTALL_FILES@\n\n</p><p>which should expand to the list of files that get built by cmake, but for some reason it includes the subdirs all the way up, like /usr/bin ... Looks like this is a known (but unloved) bug:\n\n</p><p></p><pre>  http://public.kitware.com/Bug/view.php?id=13609\n  http://public.kitware.com/Bug/view.php?id=12864\n</pre>\n\n<p>Part of me is surprised, since I thought it was legal for multiple rpms to own the same directory... But maybe not in Fedora?\n\n</p><p>Anyway, off hand I don't know the best way to fix it.  Can we put something into the %install section to remove system dirs from that install files list?\n\n</p><p>Otherwise you can wait for the unified rpm, which should not have this particular problem...\n\n</p><p></p><hr/>\n<em>2018-Sep-04 10:22:41 by tim:</em> <br/>\n\nFedora now builds via rpmbuild which fixes this problem.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2018-Sep-04 10:23", "status": "resolved", "created": "2013-Aug-22 12:19", "fixed_version": "2013-Aug-22 12:19", "broken_version": "v080002", "priority": "1", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "moate", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "", "due_date": ""}