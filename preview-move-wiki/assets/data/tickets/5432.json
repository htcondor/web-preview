{"id": 5432, "title": "Ticket #5432: collector doesn't always remove itself from collector list", "description": "<blockquote>\nAs indicated by <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5430\" onclick=\"get_ticket_and_populate_wrapper('5430'); return false;\" title=\"deadlock on windows when daemon talks to itself via shared port\">#5430</a></span>, the collector does not always remove itself from the collector list before attempting to send updates.  It seems to never work with a personal HTCondor on Windows.</blockquote>", "remarks": "<blockquote>\n<em>2015-Dec-05 19:43:57 by johnkn:</em> <br/>\n\nso the problem was that if shared port is on on windows, the collector doesnt' recognise the default shared port id as being itself because it isn't just \"collector\" on windows.\n\n<p></p><hr/>\n<em>2015-Dec-10 17:42:11 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>This looks good.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-14 21:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2c47b15e907eb9d6354847e72fd800b730fcccd5\">[46586]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5283\" onclick=\"get_ticket_and_populate_wrapper('5283'); return false;\" title=\"Shared port deadlock on Windows?\">#5283</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5430\" onclick=\"get_ticket_and_populate_wrapper('5430'); return false;\" title=\"deadlock on windows when daemon talks to itself via shared port\">#5430</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5431\" onclick=\"get_ticket_and_populate_wrapper('5431'); return false;\" title=\"shared port should fail when source and destination are the same\">#5431</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5432\" onclick=\"get_ticket_and_populate_wrapper('5432'); return false;\" title=\"collector doesn't always remove itself from collector list\">#5432</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5433\" onclick=\"get_ticket_and_populate_wrapper('5433'); return false;\" title=\"shared port on windows should hand sockets off without taking bigmutex\">#5433</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5434\" onclick=\"get_ticket_and_populate_wrapper('5434'); return false;\" title=\"Overflow error when setting cgroup vm limit when VM &gt; 2 gb\">#5434</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-05 18:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4ae6a72209b60e79181d96ec5c2b5af1b8812add\">[46357]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5432\" onclick=\"get_ticket_and_populate_wrapper('5432'); return false;\" title=\"collector doesn't always remove itself from collector list\">#5432</a></span> fix master to tell collector what the default shared port id is and the collector to use that information to avoid sending it's update ad to itself ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Dec-14 16:57", "status": "resolved", "created": "2015-Dec-04 11:18", "fixed_version": "2015-Dec-04 11:18", "broken_version": "", "priority": "2", "subsystem": "DaemonsCM", "assigned_to": "johnkn", "derived_from": "#5430", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}