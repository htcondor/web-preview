{"id": 5732, "title": "Ticket #5732: Allow more flexible command order within DAG files", "description": "<blockquote>\nJust had a discussion about <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5729\" onclick=\"get_ticket_and_populate_wrapper('5729'); return false;\" title='Allow \"for all\" for node name for script, retry, etc.'>#5729</a></span> with Lauren, and in the course of this she mentioned that she didn't realize that most commands that reference a node must come <strong>after</strong> the node is defined.\n\n<p>For example, the following is not legal:\n\n</p><p></p><pre>  SCRIPT PRE A ...\n  JOB A ...\n</pre>\n\n<p>We think this should probably be changed, to allow a \"natural\" ordering of certain commands:\n\n</p><p></p><pre>  JOB A\n  PARENT A CHILD B\n  SCRIPT PRE B ...\n  JOB B ...\n  SCRIPT POST B ...\n</pre>\n\n<p>I think the way to do this would be to go to a \"two pass\" parsing, where we parse JOB, SUBDAG EXTERNAL, and FINAL commands in the first pass, and everything else in the second pass.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Jun-17 15:12:45 by wenger:</em> <br/>\n\nCreated V8_5-gittrac_5732-branch for this.\n\n<p></p><hr/>\n<em>2016-Jun-20 12:49:42 by wenger:</em> <br/>\n\nJust did a build/test that passed on all platforms (except Win10, which is having problems right now), so I'm going to assign this to Zach for review.\n\n<p></p><hr/>\n<em>2016-Jun-20 13:24:48 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Looks good.\n\n<p></p><hr/>\n<em>2016-Jun-20 14:42:49 by wenger:</em> <br/>\n\nMerged to master (for 8.5.6), so I'm going to resolve this.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/947/gt5732_diff\">gt5732_diff</a>\n10597 bytes added by wenger on 2016-Jun-20 17:52:07 UTC.\n<br/>\nThis is a diff of everything on the branch so far.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-20 14:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48588\">[48588]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5732\" onclick=\"get_ticket_and_populate_wrapper('5732'); return false;\" title=\"Allow more flexible command order within DAG files\">#5732</a></span>: Added version history entry and changed command order documentation in the DAGMan section.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-19 11:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48583\">[48583]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5732\" onclick=\"get_ticket_and_populate_wrapper('5732'); return false;\" title=\"Allow more flexible command order within DAG files\">#5732</a></span>: Cleaned up parsing, added test.  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jun-17 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48582\">[48582]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5732\" onclick=\"get_ticket_and_populate_wrapper('5732'); return false;\" title=\"Allow more flexible command order within DAG files\">#5732</a></span>: Initial implementation of two-pass parsing -- needs cleanup and test of \"out-of-order\" commands.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Jun-20 14:43", "status": "resolved", "created": "2016-Jun-15 15:17", "fixed_version": "2016-Jun-15 15:17", "broken_version": "v080505", "priority": "3", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "wenger@cs.wisc.edu, lmichael@cs.wisc.edu, ckoch5@wisc.edu, zmiller@cs.wisc.edu", "due_date": ""}