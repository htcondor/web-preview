{"id": 4769, "title": "Ticket #4769: DAGMan failure because of double event read", "description": "<blockquote>\n(This actually looks more like a library problem than an actual DAGMan problem, but I'm classifying it as a DAGMan problem for now.)\n\n<p>Anyhow, the job_dagman_maxprescripts test is failing (sometimes) on Windows (Windows8, at least).  In the case I saw, it failed because we read two submit events for the same job (although the actual log file only has one event).  Here's stuff from the dagman.out file.\n\n</p><p></p><pre>  12/10/14 12:26:21 Submitting Condor Node NODE19 job(s)...\n  ...\n  12/10/14 12:26:22 From submit: Submitting job(s).\n  12/10/14 12:26:22 From submit: 1 job(s) submitted to cluster 21.\n  12/10/14 12:26:22       assigned Condor ID (21.0.0)\n  ...\n  12/10/14 12:26:22 Reassigning the id of job NODE19 from (21.0.0) to (21.0.0)\n  12/10/14 12:26:22 Event: ULOG_SUBMIT for Condor Node NODE19 (21.0.0)\n  12/10/14 12:26:22 Number of idle job procs: 2\n  12/10/14 12:26:22 Reassigning the id of job NODE19 from (21.0.0) to (21.0.0)\n  12/10/14 12:26:22 Event: ULOG_SUBMIT for Condor Node NODE19 (21.0.0)\n  12/10/14 12:26:22 BAD EVENT: job (21.0.0) submitted, submit count != 1 (2)\n  12/10/14 12:26:22 Continuing with DAG in spite of bad event (BAD EVENT:\n    job (21.0.0) submitted, submit count != 1 (2)) because of\n    allow_events setting\n  ...\n  12/10/14 12:26:32 Error checking Condor job events: BAD EVENT:\n    job (21.0.0) ended, submit count != 1 (2)\n  12/10/14 12:26:32 ERROR \"Assertion ERROR on (false)\" at line 3180 in\n    file c:\\condor\\execute\\dir_8420\\userdir\\src\\condor_dagman\\dag.cpp\n</pre>\n\n<p>I wonder if the fact that DAGMan is writing a lot of POST script terminated events somehow relates to this problem...</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<blockquote>\n<ul>\n<li><a href=\"attach_get/858/job_dagman_maxprescripts.dag.dagman.out\">job_dagman_maxprescripts.dag.dagman.out</a>\n50056 bytes added by wenger on 2014-Dec-11 18:56:29 UTC.\n</li><li><a href=\"attach_get/859/job_dagman_maxprescripts.dag.nodes.log\">job_dagman_maxprescripts.dag.nodes.log</a>\n19900 bytes added by wenger on 2014-Dec-11 18:56:41 UTC.\n</li></ul>\n</blockquote>", "check_ins": "", "type": "defect", "last_change": "2014-Dec-11 12:54", "status": "new", "created": "2014-Dec-11 12:54", "fixed_version": "2014-Dec-11 12:54", "broken_version": "v080206", "priority": "3", "subsystem": "Dag", "assigned_to": "", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, zmiller@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}