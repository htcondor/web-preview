{"id": 5133, "title": "Ticket #5133: accounting groups clarification/example", "description": "<blockquote>\nwhen the +AccountingGroup attribute was first defined for use in submit files it was not used to describe an accounting group in modern terms at all.  Instead it was use to define what would be more reasonably be called a user alias.\n\n<p>So lets say that I run a submit a job like this:\n</p><div class=\"verbatim\">\n<pre>    Universe=Vanilla\n    Executable=sleep\n    Arguments=600\n</pre></div>\n\n\n<p>condor_userprio will show\n</p><div class=\"verbatim\">\n<pre>\n                                 Effective   Priority   Res   Total Usage  Time Since\nUser Name                         Priority    Factor   In Use (wghted-hrs) Last Usage\n------------------------------- ------------ --------- ------ ------------ ----------\njohnkn@machine                        500.00   1000.00      0       421.03    1+21:53\n</pre></div>\n\nand the relevant attributes of condor_userprio -long are\n<div class=\"verbatim\">\n<pre>AccountingGroup26 = \"&lt;none&gt;\"\nName26 = \"johnkn@machine\"\nIsAccountingGroup26 = false\n</pre></div>\n\n\n<p>Since my username is johnkn.  But if I run this job, I'm telling the account to treat \"Science\" as my NAME for accounting purposes\n</p><div class=\"verbatim\">\n<pre>    Universe=Vanilla\n    Executable=sleep\n    Arguments=600\n    +AccountingGroup=\"Science\"\n</pre></div>\n\nAnd so condor_userprio shows this.\n<div class=\"verbatim\">\n<pre>                                 Effective   Priority   Res   Total Usage  Time Since\nUser Name                         Priority    Factor   In Use (wghted-hrs) Last Usage\n------------------------------- ------------ --------- ------ ------------ ----------\nScience@machine                       500.00   1000.00      0       421.03    1+21:53\n</pre></div>\n\nand the relevant attributes of condor_userprio -long are\n<div class=\"verbatim\">\n<pre>AccountingGroup17 = \"&lt;none&gt;\"\nName17 = \"Science@machine\"\nIsAccountingGroup17 = false\n</pre></div>\n\nThus the use of +AccountingGroup=\"Science\" is NOT setting a group in the sense that the group accounting uses the term\n\n<p>So far this agrees with the above sentence.   But for a short period of time HTCondor would treat a . in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=AccountingGroup\" title=\"Accounting Group\">AccountingGroup</a></span>\nattribute as triggering new behavior.  so +AccountingGroup=\"Science.johnkn\" would give be treated as a group specification\nrather than a user alias.\n\n</p><p>But this didn't work very well, because It's fairly common for usernames to have dots in them in some places\n(for instance \"John.Knoeller\" was my username at a place where I worked previously.)\n\n</p><p>So the dots-are-special behavior of +AccountingGroup was reverted, and no the dot has no meaning - except, that it is used\nas a sort of fields separator, so if there is a dot and everything before the dot matches the name of a defined accounting group,\nthen you get different behavior.\n</p><div class=\"verbatim\">\n<pre>    Universe=Vanilla\n    Executable=sleep\n    Arguments=600\n    +AccountingGroup=\"Science.johnkn\"\n</pre></div>\n\nGives one of two different behaviors depending on the group configuration.   if Science is NOT in the GROUP_NAMES attribute\nyou get this.\n<div class=\"verbatim\">\n<pre>                                 Effective   Priority   Res   Total Usage  Time Since\nUser Name                         Priority    Factor   In Use (wghted-hrs) Last Usage\n------------------------------- ------------ --------- ------ ------------ ----------\nScience.johnkn@machine                500.00   1000.00      0       421.03    1+21:53\n</pre></div>\n\nand\n<div class=\"verbatim\">\n<pre>AccountingGroup29 = \"&lt;none&gt;\"\nName29 = \"Science.johnkn@machine\"\nIsAccountingGroup29 = false\n</pre></div>\n\nbut if Science IS in the GROUP_NAMES attribute, you get this.\n<div class=\"verbatim\">\n<pre>Group                                   Config     Use    Effective   Priority   Res   Total Usage  Time Since Requested\n  User Name                              Quota   Surplus   Priority    Factor   In Use (wghted-hrs) Last Usage Resources\n-------------------------------------- --------- ------- ------------ --------- ------ ------------ ---------- ----------\ngroup_Science                               0.33 no                     1000.00      0         0.02    0+00:07          0\n  johnkn@machine                                               500.00   1000.00      0         0.02    0+00:07\n</pre></div>\n\nand the relevant attributes of condor_userprio -long are\n<div class=\"verbatim\">\n<pre>AccountingGroup6 = \"&lt;none&gt;\"\nName6 = \"group_Science\"\nIsAccountingGroup6 = true\n\nAccountingGroup41 = \"group_Science\"\nName41 = \"group_Science.johnkn@crane8.cs.wisc.edu\"\nIsAccountingGroup41 = false\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nThis is correctly documented in the manual.  A wiki page with pointers into the 7.0 manual was probably what caused a user to have poor information.  The wiki page has been updated, and no changes will go into the manual.  Therefore, this ticket gets resolved without a fixed version field.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "doc", "last_change": "2015-Jul-09 13:07", "status": "resolved", "created": "2015-Jul-06 14:08", "fixed_version": "2015-Jul-06 14:08", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "smoler", "derived_from": "", "creator": "smoler", "rust": "", "customer_group": "users", "visibility": "public", "notify": "", "due_date": ""}