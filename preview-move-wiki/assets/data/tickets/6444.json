{"id": 6444, "title": "Ticket #6444: condor_job_router_info crashes if JOB_ROUTER_ENTRIES_REFRESH set", "description": "<blockquote>\nIf <code>JOB_ROUTER_ENTRIES_REFRESH</code> is set to a positive value, then <code>JobRouter::config()</code> attempts to register a daemon-core timer. If this happens inside <code>condor_job_router_info</code>, this results in a crash. The call to daemon-core needs to be suppressed if <code>m_operate_as_tool</code> is <code>true</code>.</blockquote>", "remarks": "<blockquote>\n<em>2017-Oct-18 10:01:38 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> change looks good.\n\n<p></p><hr/>\n<em>2017-Oct-25 10:26:16 by tim:</em> <br/>\n\n<strong>Doc Review:</strong> OK</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-18 13:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/92ea1951cf1206a1e3c0f06c00e3e7d115cb3cf7\">[52604]</a></span>: Docs for condor_job_router_info crash fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6444\" onclick=\"get_ticket_and_populate_wrapper('6444'); return false;\" title=\"condor_job_router_info crashes if JOB_ROUTER_ENTRIES_REFRESH set\">#6444</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-12 10:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2a3857c705e84c3715d5bbaabd24952fd288055f\">[52559]</a></span>: Don't call daemonCore inside condor_job_router_info. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6444\" onclick=\"get_ticket_and_populate_wrapper('6444'); return false;\" title=\"condor_job_router_info crashes if JOB_ROUTER_ENTRIES_REFRESH set\">#6444</a></span> Suppress daemonCore timer calls for JOB_ROUTER_ENTRIES_REFRESH when inside of condor_job_router_info (i.e. m_operate_as_tool==true). Otherwise, we crash.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Oct-25 10:26", "status": "resolved", "created": "2017-Oct-12 10:08", "fixed_version": "2017-Oct-12 10:08", "broken_version": "", "priority": "2", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "", "due_date": ""}