{"id": 836, "title": "Ticket #836: startd crashes if CONDOR_HOST not found in /etc/hosts", "description": "<blockquote>\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorVersion\" title=\"Condor Version\">CondorVersion</a></span>: 7.4.0 Oct  9 2009 <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorPlatform\" title=\"Condor Platform\">CondorPlatform</a></span>: I386-LINUX_F11\n\n<p>Fedora 11/Personal Condor:\n\n</p><p>condor_startd crashes on strncpy inside UnixNetworkAdapter::getName when the string of CONDOR_HOST can't be resolved. Workaround is to place that host string in /etc/hosts for local resolution.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Oct-13 15:42:42 by pmackinn:</em> <br/>\n\nA little more detail: the CONDOR_HOST string has to agree with that specified inside /etc/sysconfig/network.\n\n<p>Basically, the ifr.ifr_name string ptr is not properly allocated prior to the strncpy (an earlier strdup is assumed I guessed).\n</p><hr/>\n<em>2010-Aug-23 17:07:50 by adesmet:</em> <br/>\n\nBulk change of target version from v070402 to v070404 using ./ticket_target_mover.\n\n<p></p><hr/>\n<em>2010-Aug-25 09:27:04 by matt:</em> <br/>\n\nFrom man netdevice -\n\n<p></p><div class=\"verbatim\">\n<pre>           struct ifreq {\n               char ifr_name[IFNAMSIZ]; /* Interface name */\n               union {\n</pre></div>\n\n\n<p></p><hr/>\n<em>2010-Aug-25 09:27:54 by matt:</em> <br/>\n\nFrom src/condor_c++_util/network_adapter.unix.cpp -\n\n<p></p><div class=\"verbatim\">\n<pre>void\nUnixNetworkAdapter::getName( struct ifreq &amp;ifr, const char *name ) const\n{\n   if ( NULL == name ) {\n      name = m_if_name;\n   }\n   strncpy( ifr.ifr_name, name, IFNAMSIZ );\n   ifr.ifr_name[IFNAMSIZ-1] = '\\0';\n}\n</pre></div>\n\n\n<p></p><hr/>\n<em>2010-Aug-25 12:06:18 by matt:</em> <br/>\n\nIt is possible that DaemonCore::InfoCommandSinfulString() returned NULL, which led to issues. However, more configuration information and machine configuration info is needed to properly debug. If you run into this again feel free to re-open.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/114/StartLog\">StartLog</a>\n36454 bytes added by pmackinn on 2009-Oct-12 17:23:16 UTC.\n<br/>\nDump of startd from log<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Aug-25 12:06", "status": "abandoned", "created": "2009-Oct-12 12:22", "fixed_version": "2009-Oct-12 12:22", "broken_version": "v070400", "priority": "3", "subsystem": "Daemons", "assigned_to": "matt", "derived_from": "", "creator": "pmackinn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "pmackinn@redhat.com, matt@cs.wisc.edu", "due_date": ""}