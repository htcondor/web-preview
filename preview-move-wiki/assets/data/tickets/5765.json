{"id": 5765, "title": "Ticket #5765: condor_history should honor SCHEDD_HOST if it is defined", "description": "<blockquote>\ncondor_history should default to a remote query to the schedd defined in <code>SCHEDD_HOST</code> when <code>SCHEDD_HOST</code> is defined.\n\n<p>Since you may still want to query the local history files explicitly even when SCHEDD_HOST is defined, a new argument -local will be added that will force the old behaviour of condor_history. i.e it will force it to will read from the configured history file(s)\n\n</p><p>As a part of this change, remote condor history will supply a projection for the default output, and a new option for streaming results will be added to condor_history and to the remote history query. We should consider adding support for streaming into the 8.4 release as well.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Jun-30 11:17:08 by johnkn:</em> <br/>\n\nThe reason for the new streaming option is that the current remote condor_history wire protocol puts an End-of-Message only at the end of the entire response.  This causes the client side to buffer the results and to only hand them back to the condor_history code once all of the results have been recieved.  Thus the current wire protocol results in condor_history not printing any output until all of the results have been recieved - and the entire result stream must fit into memory on the client side or the operation will fail and print nothing.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jul-20 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48815\">[48815]</a></span>: version history and doc for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5765\" onclick=\"get_ticket_and_populate_wrapper('5765'); return false;\" title=\"condor_history should honor SCHEDD_HOST if it is defined\">#5765</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jul-01 12:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48723\">[48723]</a></span>: condor_history honors SCHEDD_HOST if is defined, defaulting to a remote query rather than reading the local history files. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5765\" onclick=\"get_ticket_and_populate_wrapper('5765'); return false;\" title=\"condor_history should honor SCHEDD_HOST if it is defined\">#5765</a></span> this commit also adds the -local argument to force condor_history to read local history files even when SCHEDD_HOST is defined and also adds -stream-results that that results\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Jul-20 15:14", "status": "resolved", "created": "2016-Jun-29 13:16", "fixed_version": "2016-Jun-29 13:16", "broken_version": "", "priority": "2", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu; iain.steers@cern.ch; tannenba@cs.wisc.edu", "due_date": ""}