{"id": 4736, "title": "Ticket #4736: Nordugrid jobs held when exit info missing", "description": "<blockquote>\nWhen a nordugrid job completes, the gridmanager queries the nordugrip ldap server to get the job's exit code and runtime information. If any of the information is missing, then it puts the job on hold.\n\n<p>It turns out that most job information is optional, and what information is reported varies based on the local batch system. If the batch system is HTCondor, then nordugrid-job-usedwalltime isn't reported. It appears that nordugrid-job-usedcputime is already reported, with a default value of 0 if the underlying stats aren't collected from the batch system.\n\n</p><p>We should change the gridmanager so that it throws an error only if no information is returned, and use reasonable defaults when individual values are missing.\n\n</p><p>Also, when the gridmanager does throw an error, ensure a reasonable hold reason is set. Previously, we had the useless \"Unspecified gridmanager error\".</p></blockquote>", "remarks": "<blockquote>\n<em>2014-Nov-20 15:00:21 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Looks good.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-25 10:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=41758\">[41758]</a></span>: minor 8.2.5 version history item edit <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4736\" onclick=\"get_ticket_and_populate_wrapper('4736'); return false;\" title=\"Nordugrid jobs held when exit info missing\">#4736</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-20 14:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=41723\">[41723]</a></span>: Nordugrid jobs held when exit info missing <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4736\" onclick=\"get_ticket_and_populate_wrapper('4736'); return false;\" title=\"Nordugrid jobs held when exit info missing\">#4736</a></span> When the gridmanager queries the runtime stats of a completed nordugrid job, it expects all the stats to be present, and will put the job on hold if any are missing. It turns out most of these stats are optional. Only throw an error if all stats are missing\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Nov-20 15:43", "status": "resolved", "created": "2014-Nov-20 14:18", "fixed_version": "2014-Nov-20 14:18", "broken_version": "v080000", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "a27536", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}