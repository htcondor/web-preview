{"id": 2626, "title": "Ticket #2626: Permit dprintf to log to something besides a file.", "description": "<blockquote>\nThe dprintf system currently can only write to a log file, or, assuming a developer sets a global variable, to standard out.  A variety of groups have expressed interest in the ability to specify different output targets.\n\n<p>The current output targets beyond a file and the syntax for specifying them as follows (note that these WILL likely change, they are currently this way for prototyping purposes):\n\n</p><p></p><pre>  &lt;1&gt;: Standard out\n  &lt;2&gt;: Standard error\n  &lt;OUTDBGSTR&gt;: OutputDebugString function\n</pre>\n\n<p>The ultimate goal is to also include the ability to specify at the very least a pipe as well.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-23 19:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/016d642cd44727ac6d03c4dc476361adc45b7722\">[33747]</a></span>: Fix issues/compiler warnings from logging merge. Add newlines to end of the file. Remove unused parameters. Remove Windows control characters from newlines. <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-23 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/31e61a929233e9ac5a2cf086983b8aabbc336ff4\">[33746]</a></span>: Add newline to end of condor_debug.h to stop antique GCC versions from complaining. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-23 14:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/64047b46b0db2be954fd24d026b0a61b2f37728f\">[33744]</a></span>: Attempt to work around lack of stdint.h in VS2008. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-22 15:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/db529f671b6d907cb2b5c1d4786d5c630db8c066\">[33737]</a></span>: Shuffle around definition of function that's C++ code. Also try to squash warnings to build on Fedora 17. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-22 12:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5a78e2318b8770f11ccdefc1e56795f795e648d0\">[33717]</a></span>: Add back in default case for dprintf configuration that I accidentally forgot to do before. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-26 11:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9fdb7658f5015dbadae97ccb5b75aefc2d844852\">[33501]</a></span>: Move backtrace setup into new dprintf setup file. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-25 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ea3a4a00af3ca17089ef3ef44896c5f44ee7aa27\">[33486]</a></span>: Second pass to catch other usages of Termlog and isolate as needed. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-25 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9ed3c99f3690443af22be9af0d4949700abb97ca\">[33480]</a></span>: Separate dprintf setup from dprintf paraming/config more thoroughly. Create a customized dprintf config function for tools or things that choose to print out to stderr and the like. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-12 13:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6afdd6364ee6a99c4e6918d998459863d6df5513\">[33319]</a></span>: Fix header printing. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-07 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d4042ae8a87f164bc8c9b9464a9092b87e752169\">[33302]</a></span>: Fix flipped logic for checking sprintf error while writing debug header. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-06 12:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8c6394487e6e662d3d292edf973161b91ebfaa2d\">[33291]</a></span>: Fix reversed logic for dealing with failure to open dev null. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Sep-02 19:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/85e0a8e0ca8d304aed29546ff5585f6694b23dee\">[33246]</a></span>: Fix output to stderr due to botched check in configuration code and output setting. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-30 16:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8d8790844860e3b1de79b87521ba6a4f856a618f\">[33217]</a></span>: Pass Termlog into dprintf_config function in places missed last round. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-29 14:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3fca8ae9cfaa1fe5440c4764c3757745dc779ce3\">[33203]</a></span>: Work around destructor closing file pointers for the debug info struct. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-28 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7c9d45007df1d48baecf4f60871461ce229ac640\">[33198]</a></span>: Try to fix file rotation due to file pointer not being set. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 14:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ead05b9aa157dc56d4b77c254d720b867ce962a7\">[33159]</a></span>: Remove unused typedefs in debug header. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-24 11:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2cc11f523dacdaa94b11debe69027c870b90abc5\">[33153]</a></span>: Remove unneeded extra argument in sprintf_realloc call. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-23 16:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9c1220d66442ad2fe69fa33a48293dcadf16705a\">[33145]</a></span>: Eliminate causes of new warnings on Fedora. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-23 14:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0b2ff5fb5f1d9002d0034ade8b82a103ac228763\">[33139]</a></span>: Complete reversion to using char buffers again and use correctly vsprintf instead of sprintf, which was causing all sorts of grief. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-22 11:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a0c8f9dbecebb0dd01e671d80c12ca4e86c60efc\">[33134]</a></span>: Minor logic fixes to accomodate stderr and stdout. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-21 15:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4b6d923839a90f47a1545f0405ec358d790ecb14\">[33130]</a></span>: Fix logical oversight with assigning the dprintf function pointer. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-21 14:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b0071b88c4570119c3a10663db8354b5c38a868b\">[33129]</a></span>: Reorder else if logic so Win32 ifdef does not cause problems. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-21 13:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2fbf1248d0bafb35f1bc7310c392a9f65891b611\">[33127]</a></span>: Fix a couple of minor bugs in dprintf code and revert back to passing the dont_panic flag in as an argument for the debug_lock_it function. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-21 13:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7e49a22d30f4c6b412835d09d8df4eca0ec5f03f\">[33126]</a></span>: Revert back to a character buffer for formatting of the dprintf header. Isolate Termlog in dprintf code. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-14 14:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/16895ba0a9a79fdd72da3e0ef50798b3cea5a055\">[33046]</a></span>: Massive refactoring of debug messages to separate the generation of the message versus the actual writing of the message. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-09 15:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3b909a9fd709a6cdd8515e09abfa28c4323e2631\">[28197]</a></span>: First pass at refactoring setup of dprintf configuration. Removed all usages of param from dprintf outside of initial configuration. Dealt with cleaning up merge messes from other branches that touched dprintf code. Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2626\" onclick=\"get_ticket_and_populate_wrapper('2626'); return false;\" title=\"Permit dprintf to log to something besides a file.\">#2626</a></span>  (By Ziliang Guo )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Aug-14 14:20", "status": "new", "created": "2011-Nov-09 15:34", "fixed_version": "2011-Nov-09 15:34", "broken_version": "v070700", "priority": "4", "subsystem": "Libs", "assigned_to": "ziliang", "derived_from": "#2476", "creator": "ziliang", "rust": "", "customer_group": "other", "visibility": "public", "notify": "eje@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}