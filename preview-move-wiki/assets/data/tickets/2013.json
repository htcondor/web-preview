{"id": 2013, "title": "Ticket #2013: Check 32-bit standalone checkpointing for 7.6.0", "description": "<blockquote>\nI stumbled onto the fact that 32-bit standalone checkpointing may be broken and I need to test the head of the V7_6-branch to determine if it is true.</blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-31 13:34:12 by psilord:</em> <br/>\n\nIt's broken. :(\n\n<p></p><hr/>\n<em>2011-Apr-01 15:38:28 by psilord:</em> <br/>\n\nI reverted the commit which enabled compressed checkpoints and pushed it to\nV7_6-branch. This is only an emergency stop gap measure in case we need to ship 7.6.0 before we can fix it. At least it won't be broken software, just not well\nperforming software.\n\n<p></p><hr/>\n<em>2011-Apr-01 16:48:55 by psilord:</em> <br/>\n\nNext I've built the V7_4-branch and so Monday I'll compare the results to see what is happening between the two builds.\n\n<p></p><hr/>\n<em>2011-Apr-05 12:16:27 by psilord:</em> <br/>\n\nThe builds look like they are doing the right thing, but there are a lot of changes between the output of the pre-cmake branch and the cmake branch and I could have missed something. I've asked tstclair to take a look too to see if something was missed.\n\n<p></p><hr/>\n<em>2011-Apr-11 10:42:47 by psilord:</em> <br/>\n\nI believe I've found the error. I'll have a full write up in a bit.\n\n<p></p><hr/>\n<em>2011-Apr-11 16:43:58 by psilord:</em> <br/>\n\nI have a fix committed, but not yet pushed.\n\n<p></p><hr/>\n<em>2011-Apr-12 16:35:40 by psilord:</em> <br/>\n\nOk, it's been pushed to V7_6-branch and merged to master.\n\n<p></p><hr/>\n<em>2011-Apr-12 16:42:05 by psilord:</em> <br/>\n\nSent a link to Karen to document this ticket with the knowledge in the commit message.\n\n<p></p><hr/>\n<em>2011-Apr-13 11:22:39 by smoler:</em> <br/>\n\nPete, you need to come talk to me about this 7.6.0 version history item, as it does not have enough info for me to know how (or if) to change the existing 7.6.0 KNOWN BUG version history item about this same problem.\n\n<p></p><hr/>\n<em>2011-Apr-13 16:22:01 by psilord:</em> <br/>\n\nAh, this isn't a 7.6.0 version item, but a 7.6.1 version item. This fixes the bug described in the 7.6.0 manual, but it will be released for 7.6.1.\n\n<p></p><hr/>\n<em>2011-Apr-13 16:38:44 by smoler:</em> <br/>\n\nMy misunderstanding.  The tickets talk of 7.6.0 (see the title of this ticket!) and V7_6-branch, but I didn't read your e-mail message carefully, and it does say the version history item goes into 7.6.1.\n\n<p></p><hr/>\n<em>2011-Apr-13 16:57:57 by psilord:</em> <br/>\n\nOk, Karen verified she did the changes with me. I consider this ticket done.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2030\" onclick=\"get_ticket_and_populate_wrapper('2030'); return false;\" title=\"Write a standalone ckpt test for the test suite.\">#2030</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nWrite a standalone ckpt test for the test suite.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2055\" onclick=\"get_ticket_and_populate_wrapper('2055'); return false;\" title=\"Strengthen validation checks for compressed heap pointers in stduniv\">#2055</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nStrengthen validation checks for compressed heap pointers in stduniv</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-13 16:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e3c64f24042e843a1ed173d3d4065aa356116d77\">[26004]</a></span>: version history item describing gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span>, bug fix related to compressed checkpoints  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-13 16:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/369497d241342d66dff0937beb2b5953abf8875c\">[26010]</a></span>: Revert \"added gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> version history item about checkpoint compression,\" This reverts commit f0eeaa7ef95616518bd11d444e566be79924eabe.  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-13 12:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f0eeaa7ef95616518bd11d444e566be79924eabe\">[26007]</a></span>: added gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> version history item about checkpoint compression, but probably the existing known bug attached to this same ticket still needs to be modified.  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-12 16:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f04ed38a76e1329bac6a14d118986f190c3597c1\">[21348]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2055\" onclick=\"get_ticket_and_populate_wrapper('2055'); return false;\" title=\"Strengthen validation checks for compressed heap pointers in stduniv\">#2055</a></span> ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2055\" onclick=\"get_ticket_and_populate_wrapper('2055'); return false;\" title=\"Strengthen validation checks for compressed heap pointers in stduniv\">#2055</a></span> Reified the alternate heap into a global structure which keeps track of it instead of a collection of static variables in a function. Added some debugging calls to print out the structure, etc. Added very strong validation checks about how the chunks of\u00a0[...]\n (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-11 15:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/da815912726518d073a7e937ce9c1ba8562e5ef0\">[21347]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> Added a comment to be more clear what this file does.  (By Peter Keller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-11 14:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9af446f8e41be311153d74715ecbb8cd2d22404a\">[21346]</a></span>: ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2013\" onclick=\"get_ticket_and_populate_wrapper('2013'); return false;\" title=\"Check 32-bit standalone checkpointing for 7.6.0\">#2013</a></span> When we moved to the new cmake builds, the whole feature of compressed checkpoints was dropped due to time constraints. Later, it was added back again, but wrongly. However, Condor by default does not compress checkpoints in stduniv and so in our test suite all was\u00a0[...]\n (By Peter Keller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2011-Oct-19 11:18", "status": "resolved", "created": "2011-Mar-30 16:06", "fixed_version": "2011-Mar-30 16:06", "broken_version": "v070506", "priority": "1", "subsystem": "", "assigned_to": "psilord", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu, smoler@cs.wisc.edu", "due_date": ""}