{"id": 822, "title": "Ticket #822: gt2 jobs with GridJobId crash gridmanager on startup", "description": "<blockquote>\nThis bug was introduced in 7.3.2 with the GRAM5 code. In the constructor for <span class=\"quote\">GlobusJob</span>, if the job ad has a valid <span class=\"quote\">GridJobId</span> attribute, SetRemoteJobId() is called, which tries to invoke a method on myResource, which is still NULL at this point, resulting in a crash.\n\n<p>The call to myResource is to determine whether the resource is gt2 or gt5. Since the constructor knows the answer, the short-term fix is to add an optional argument to SetRemoteJobId(), which is used if myResource is NULL.\n\n</p><p>Part of the problem is that we have some circular reasoning going on. SetRemoteJobId() sets <span class=\"quote\">GridJobId</span> in the job ad and updates some related data members. But the constructor is calling it with the value from <span class=\"quote\">GridJobId</span> to just initialize the data members. We're not going to worry about that for now.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Oct-07 10:19:10 by jfrey:</em> <br/>\n\nPushed fix to V7_4-branch.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Oct-07 00:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4a91f476102adc1701ff80802d281f5c9d5fd093\">[15929]</a></span>: Fix gridmanager crash on already-submited gt2 jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=822\" onclick=\"get_ticket_and_populate_wrapper('822'); return false;\" title=\"gt2 jobs with GridJobId crash gridmanager on startup\">#822</a></span> Bug introduced Condor 7.3.2. In the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GlobusJob\" title=\"Globus Job\">GlobusJob</a></span> constructor, if the job ad already has <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridJobId\" title=\"Grid Job Id\">GridJobId</a></span> defined, a call to SetRemoteJobId() ends up deferencing myResource, which is still NULL at that point.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2009-Dec-26 20:22", "status": "resolved", "created": "2009-Oct-07 00:29", "fixed_version": "2009-Oct-07 00:29", "broken_version": "v070302", "priority": "1", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#675", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "", "due_date": ""}