{"id": 6423, "title": "Ticket #6423: docker universe should set cpu share to 100 * cores, like vanilla uni", "description": "<blockquote>\nBoth docker universe and vanilla universe jobs with cgroups limit the cpu utilization of jobs by setting the cpu shares field.  In vanilla universe, we've set this to 100 * the cores in the slot, but in docker universe it is set to 10* cores in the slot.  We'll make docker match the vanilla universe setting.</blockquote>", "remarks": "<blockquote>\n<em>2017-Oct-25 10:27:08 by tim:</em> <br/>\n\n<strong>Code and Doc Review:</strong> Looks good</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-25 18:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52660\">[52660]</a></span>: Transplant version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6401\" onclick=\"get_ticket_and_populate_wrapper('6401'); return false;\" title=\"MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe\">#6401</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6414\" onclick=\"get_ticket_and_populate_wrapper('6414'); return false;\" title=\"cgroup limits not getting set on some OSes due to signed'ness of memsw\">#6414</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6423\" onclick=\"get_ticket_and_populate_wrapper('6423'); return false;\" title=\"docker universe should set cpu share to 100 * cores, like vanilla uni\">#6423</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6424\" onclick=\"get_ticket_and_populate_wrapper('6424'); return false;\" title=\"Make STARTD_RECOMPUTE_DISK_FREE default to false\">#6424</a></span> to V8_6_7-branch  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-24 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52645\">[52645]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6423\" onclick=\"get_ticket_and_populate_wrapper('6423'); return false;\" title=\"docker universe should set cpu share to 100 * cores, like vanilla uni\">#6423</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Sep-29 10:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52448\">[52448]</a></span>: Set -cpuShare in docker universe to match vanilla jobs <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6423\" onclick=\"get_ticket_and_populate_wrapper('6423'); return false;\" title=\"docker universe should set cpu share to 100 * cores, like vanilla uni\">#6423</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Oct-25 10:27", "status": "resolved", "created": "2017-Sep-29 10:54", "fixed_version": "2017-Sep-29 10:54", "broken_version": "v080600", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}