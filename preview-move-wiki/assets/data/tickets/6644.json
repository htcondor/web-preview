{"id": 6644, "title": "Ticket #6644: Add regression tests of new START expression while draining.", "description": "<blockquote>\nMoved regression testing from parent ticket to allow it to be closed by the 8.7.8 code freeze.</blockquote>", "remarks": "<blockquote>\n<em>2018-Apr-13 11:37:26 by tlmiller:</em> <br/>\n\nShould need to check if MJRT is zero on final eviction.\n\n<p></p><hr/>\n<em>2018-Apr-15 15:15:11 by tlmiller:</em> <br/>\n\nWasn't as hard as expected.  (Probably means test is broken somehow.)  Resolving without documentation because we don't document our test( change)s.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-17 11:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/064d4f3951f5ebf3b89e962a8f94ab96f8b47822\">[54742]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) ... except on the new CentOS 7 machines, which /doesn't/ have D_CATEGORY. Make that optional.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-16 15:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ae820683f093684cb85fa84c805849ff593d447\">[54733]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Also missed D_CATEGORY. Also allow the startd a second's grace when check <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxMachineVacateTime\" title=\"Max Machine Vacate Time\">MaxMachineVacateTime</a></span>.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-15 21:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/47c2628e90bf4062862264bc7a53c77f3ee26176\">[54730]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Forgot about D_SUB_SECOND (being on by default in the test suite).  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-15 15:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c389b963eccc3118866b85ed727a315d15988095\">[54728]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Test that <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span> == 0 (and that <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxMachineVacateTime\" title=\"Max Machine Vacate Time\">MaxMachineVacateTime</a></span> works properly, too) on final eviction.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-13 11:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/699d2cea5f88f5ae022fdd942bab174e7872005a\">[54710]</a></span>: Squashed commit of the following: commit bab7c23839c5c68e9bff65c7f01de919a49064f9 Author: Todd L Miller &lt;tlmiller@cs.wisc.edu&gt; Date: Thu Apr 12 17:09:53 2018 -0500\u00a0[...]\n (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-12 17:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bab7c23839c5c68e9bff65c7f01de919a49064f9\">[54698]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Work in progress. (This commit should be squashed.)  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-12 16:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d84c5413396782a0f730d562a2e5d1e41334bcc6\">[54697]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Work in progress. (This commit should be squashed.)  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-12 16:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/186f8d380cdd937d243b9bbcc5d242fc625879a8\">[54695]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Work in progress. (This commit should be squashed.)  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-12 15:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2f9b45034d03d09bac5835473f4fb8f69c992bf\">[54693]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6644\" onclick=\"get_ticket_and_populate_wrapper('6644'); return false;\" title=\"Add regression tests of new START expression while draining.\">#6644</a></span>) Work in progress. (This commit should be squashed.)  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Apr-15 15:15", "status": "resolved", "created": "2018-Apr-10 16:35", "fixed_version": "2018-Apr-10 16:35", "broken_version": "v080708", "priority": "2", "subsystem": "Tests", "assigned_to": "tlmiller", "derived_from": "#6628", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}