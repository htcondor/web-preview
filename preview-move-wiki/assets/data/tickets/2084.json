{"id": 2084, "title": "Ticket #2084: Support GSI authentication for EC2 jobs", "description": "<blockquote>\nFermilab and others are developing an optional extension to OpenStack's EC2 Query interface that uses X509 authentication in place of the standard access id and secret key for user authentication. They would like Condor to support this alternative authentication mechanism.</blockquote>", "remarks": "<blockquote>\n<em>2011-May-12 10:06:07 by tannenba:</em> <br/>\n\nCan get a curl recipe from Tony on how to do this. Hoping for testing in 1 or 2 months.\n\n<p></p><hr/>\n<em>2011-Jul-28 10:27:46 by tlmiller:</em> <br/>\n\nThe V7_7-ec2_x509-branch has code which (clumsily) handles the full life-cycle of a VM using X.509 keys.  The code to use X.509 proxies should not be difficult, but the (test) server doesn't support them yet, either.  We'll resume testing when Fermi gets it going.\n\n<p></p><hr/>\n<em>2011-Aug-22 15:36:41 by tlmiller:</em> <br/>\n\nFermi reported (on Aug 15) that the test stand was up and working with X.509 proxies.  Due date reflects desired date to (start) testing user proxies on our end.\n\n<p></p><hr/>\n<em>2011-Aug-29 14:59:15 by tannenba:</em> <br/>\n\nTesting seemed to have positive results. Next milestones:\n<ul>\n<li><strong>9/1/2011</strong> send fermi a binary for user acceptance\n</li><li><strong>9/16/2011</strong> document\n</li><li>(pending user acceptance) merge\n</li><li>regression test (is this realistically possible?)\n</li></ul>\n\n<p></p><hr/>\n<em>2011-Sep-08 14:43:15 by tlmiller:</em> <br/>\n\nSent Fermi a binary for user acceptance testing.\n\n<p></p><pre>  [8/26: Ted Hesselroth got the EC2 + X.509 service running again.\n  [8/29: I've tested with X.509 proxies, and can connect, although none of my\n         VMs have started.  ToddT and I agree I should send them binaries\n         for user acceptance testing by EOB Thursday.\n  [9/01: (Thursday) Priority interrupt for writing Metronome annual report.  This\n         distracts me throughout Friday.  Monday was a holiday, and by the time\n         Tuesday rolls around, I've forgotten about this.]\n</pre>\n\n<p></p><hr/>\n<em>2011-Sep-12 17:17:58 by tlmiller:</em> <br/>\n\nMerged to master to get fix for scalability bug (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2447\" onclick=\"get_ticket_and_populate_wrapper('2447'); return false;\" title=\"EC2_GAHP fails to scale.\">#2447</a></span>).  Not in doc-pending state because we still need to get user acceptance testing results back.\n\n<p></p><hr/>\n<em>2011-Nov-21 14:58:34 by tlmiller:</em> <br/>\n\nResolving until Fermi complains.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-14 15:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27212\">[27212]</a></span>: Edit of newly added info on X.509 support in EC2. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-14 14:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27208\">[27208]</a></span>: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span> Merged <span class=\"chng\"><a href=\"chngview?cn=27175\">[27175]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27177\">[27177]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27178\">[27178]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27180\">[27180]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27181\">[27181]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27183\">[27183]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27184\">[27184]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27187\">[27187]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27193\">[27193]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27200\">[27200]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27201\">[27201]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27202\">[27202]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27203\">[27203]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27205\">[27205]</a></span>, Merge branch 'master' of git+ssh://chopin.cs.wisc.edu/p/condor/repository/CONDOR_SRC  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-14 14:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27207\">[27207]</a></span>: Documenting EC2 + X.509 (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>). ===VersionHistory:Complete===  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-12 16:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27170\">[27170]</a></span>: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span> Merged <span class=\"chng\"><a href=\"chngview?cn=27137\">[27137]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27138\">[27138]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27141\">[27141]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27142\">[27142]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27143\">[27143]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27144\">[27144]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27146\">[27146]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27148\">[27148]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27151\">[27151]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27154\">[27154]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27155\">[27155]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27157\">[27157]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27158\">[27158]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27159\">[27159]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27161\">[27161]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=27167\">[27167]</a></span>, Merge branch 'master' of git+ssh://chopin.cs.wisc.edu/p/condor/repository/CONDOR_SRC into V7_7-ec2_x509-branch  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-12 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27169\">[27169]</a></span>: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span> Merged <span class=\"chng\"><a href=\"chngview?cn=22284\">[22284]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22285\">[22285]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22286\">[22286]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22287\">[22287]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22288\">[22288]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22289\">[22289]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22292\">[22292]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22294\">[22294]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22295\">[22295]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22312\">[22312]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22313\">[22313]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22314\">[22314]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22315\">[22315]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22316\">[22316]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22317\">[22317]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22318\">[22318]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22319\">[22319]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22320\">[22320]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22321\">[22321]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22322\">[22322]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22323\">[22323]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22324\">[22324]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22325\">[22325]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22326\">[22326]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22327\">[22327]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22338\">[22338]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22339\">[22339]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22340\">[22340]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22347\">[22347]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22348\">[22348]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22349\">[22349]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22350\">[22350]</a></span>,\u00a0[...]\n (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-08 13:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27126\">[27126]</a></span>: Turned proxies on and confirmed that they work with FermiLab's service. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jul-11 16:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22508\">[22508]</a></span>: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span> Merged <span class=\"chng\"><a href=\"chngview?cn=22284\">[22284]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22285\">[22285]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22286\">[22286]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22287\">[22287]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22288\">[22288]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22289\">[22289]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22292\">[22292]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22294\">[22294]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22295\">[22295]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22312\">[22312]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22313\">[22313]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22314\">[22314]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22315\">[22315]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22316\">[22316]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22317\">[22317]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22318\">[22318]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22319\">[22319]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22320\">[22320]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22321\">[22321]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22322\">[22322]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22323\">[22323]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22324\">[22324]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22325\">[22325]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22326\">[22326]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22327\">[22327]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22338\">[22338]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22339\">[22339]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22340\">[22340]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22347\">[22347]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22348\">[22348]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22349\">[22349]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=22350\">[22350]</a></span>,\u00a0[...]\n (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-30 16:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22507\">[22507]</a></span>: Clear up the last two FIXMEs. Still in testing. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-30 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22506\">[22506]</a></span>: When trying to start a VM, check that the 200/OK response was actually OK, and included an instance ID. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-30 14:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22505\">[22505]</a></span>: We now have curl willing to talk to the server. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jun-29 10:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22504\">[22504]</a></span>: Fix logging and create infrastructure for doing X.509 w/ curl. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2084\" onclick=\"get_ticket_and_populate_wrapper('2084'); return false;\" title=\"Support GSI authentication for EC2 jobs\">#2084</a></span>  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Nov-21 14:58", "status": "resolved", "created": "2011-Apr-22 10:39", "fixed_version": "2011-Apr-22 10:39", "broken_version": "v070700", "priority": "4", "subsystem": "Grid", "assigned_to": "tlmiller", "derived_from": "#2150", "creator": "jfrey", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "jfrey@cs.wisc.edu matt@cs.wisc.edu tstclair@redhat.com", "due_date": "20110901"}