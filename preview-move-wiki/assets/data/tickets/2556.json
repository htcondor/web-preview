{"id": 2556, "title": "Ticket #2556: File transfer attributes ignored for vm universe", "description": "<blockquote>\nThe submit attributes should_transfer_files and when_to_transfer_output are ignored in many situations for vm universe jobs. The assumption is that the user always wants file transfer. The user should be able to request that files should never be transferred. Also, if the user tries to set these attributes to enable file transfer, condor_submit prints a warning that they may be typos.</blockquote>", "remarks": "<blockquote>\n<em>2013-Jul-17 13:01:07 by tlmiller:</em> <br/>\n\nIt is at best rather disconcerting for the manual\n(<a class=\"external\" href=\"http://research.cs.wisc.edu/htcondor/manual/v8.0/2_11Virtual_Machine.html\">http://research.cs.wisc.edu/htcondor/manual/v8.0/2_11Virtual_Machine.html</a>)\nto say\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nFor Xen and KVM jobs, if any files need to be transferred from the submit machine to the machine where the vm universe job will execute, HTCondor must be explicitly told to do so with the standard file transfer attributes:\n</td></tr></tbody></table></div>\n\n\n<p></p><pre>  should_transfer_files = YES\n  when_to_transfer_output = ON_EXIT\n  transfer_input_files = /myxen/diskfile.img,/myxen/swap.img\n</pre>\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nAny and all needed files on a system without a shared file system (between the submit machine and the machine where the job will execute) must be listed.\n</td></tr></tbody></table></div>\n\n\n<p></p><pre>  WARNING: the line `when_to_transfer_output = ON_EXIT' was unused by condor_submit. Is it a typo?\n  WARNING: the line `should_transfer_files = TRUE' was unused by condor_submit. Is it a typo?\n</pre>\n\n<p>especially since it implies that you can't pre-stage KVM images, or load them from a shared filesystem.\n\n</p><p>That is, if it is possible for <code>when_to_transfer_output</code> or <code>should_transfer_files</code> to be meaningful, <code>condor_submit</code> should never complain about them -- it's not wrong to specify the default.  (This can be useful for self-documenting submit files, or if the default changes.)\n\n</p><p>The interaction between <code>vm_no_output_vm</code> and <code>transfer_output_files</code> is also confusing, because <code>vm_no_output_vm</code> doesn't just prevent disk images from being transferred by default, but actually <em>deletes</em> them before file transfer occurs -- making what seems to be the obvious way of getting only one of the disk images back an inefficient way of putting the job on hold.  It would be nice if <code>condor_submit</code> warned when both were set, since <code>vm_no_output_vm</code> is superflous when <code>transfer_output_files</code> is set.  (If the VM disks aren't listed, they aren't coming back, and if they are, you specifically said you wanted them.)</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Jul-17 13:01", "status": "new", "created": "2011-Oct-17 16:54", "fixed_version": "2011-Oct-17 16:54", "broken_version": "v070600", "priority": "4", "subsystem": "VM", "assigned_to": "", "derived_from": "#2530", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}