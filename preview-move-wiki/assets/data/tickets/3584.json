{"id": 3584, "title": "Ticket #3584: Allow python-bindings to be built with Mac OS X", "description": "<blockquote>\nFor development purposes, it'd be convenient to enable python bindings for Mac OS X.\n\n<p>A quick perusal shows we'd need to cleanup some minor CMake defects (boost headers being used without adding boost to the include_directories), but everything should work for the Mac OS X developer with Python and boost headers/libraries installed.\n\n</p><p>... of course, getting boost, Python, and clang to play together is a likely a multi-hour exercise left for the user.  A clang-compiled version of boost is not binary compatible with gcc-compiled programs (and vice-versa).</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Apr-23 11:55:22 by bbockelm:</em> <br/>\n\nFirst attempt is in.\n\n<p>However, on further inspection, we still need to:\n</p><ul>\n<li>Ship libboost_python.{so,dylib} along with UW-style builds.\n</li><li>Rewrite the linked library paths of htcondor.so and classad.so.\n</li><li>Change the internal linking of libcondor_utils and libclassad to refer to @loader_path instead of @executable_path.\n</li></ul>\n\n<p>So, not quite home yet.\n\n</p><p></p><hr/>\n<em>2013-Apr-23 19:00:32 by bbockelm:</em> <br/>\n\nTurns out we don't need libboost_python for UW-style builds -- it's statically compiled.\n\n<p>Implemented the linker path changes for both Python modules and shared libraries.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-13 09:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6b54ed4e293e4977e0e970d5d1329789d2b8e090\">[37183]</a></span>: Do not restrict the build of mem_checker program to linux <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Aug-13 09:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d81a1f82b4f3e0ceae9dd3d57be0e49d5a451e10\">[37182]</a></span>: Fixed smoe config settings and shifted memory allocations and times in an attempt to get more image size updates <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-18 12:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8cbb8fe22e84702dcff81fb72c2d4852269adea6\">[36996]</a></span>: Add new memory checking c program to builds <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-28 15:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ddcf437b3c5c2cb204705fb5bf96bc1efc52afe\">[35896]</a></span>: add ticket number to version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-25 14:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e80cb5acc9204453fd9c7f75c79856d82e83b700\">[35549]</a></span>: Make pyclassad into an internal library. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-25 08:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9fcd5f2e570767ddc94472894dabc4f6cd41e9f2\">[35544]</a></span>: Try to fix Windows7 in Batlab. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span> Boost chokes if you explicitly ask it to enable python in the bootstrap but Python.h is not present. This patch enables --with-python in the bootstrap only if both the interpretter and libraries are found. On Windows7, the headers are missing.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-25 07:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d8f07176c7419c3d9cc1223baf7d087281899607\">[35543]</a></span>: Allow cmake to control the boost python settings <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>. Boost will try to auto-discover the correct python interpretter to use. This patch turns off the auto-discovery behavior and makes it use the one found by cmake.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-24 07:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3bc6bcec00800eefe3bc820bb05c6470fca8a0fd\">[35530]</a></span>: Fix non-matching endif in cmake. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 20:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c48dd5074fef6adb06a387a7363e13c8fb28431\">[35529]</a></span>: Disable Solaris. Touchup version history. Make globus build more resilient. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 19:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9712f8f06df401dea976e463aa44ec359cee8e00\">[35528]</a></span>: Fix classads linking on Solaris 11. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 18:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d32ed02d2d1858a024010b99d3162326e73e5528\">[35526]</a></span>: Fix compilation of VOMS on Mac OS X with clang. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 18:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58d03e5c843ad3bd0796e9547a30377aa4cbcc31\">[35527]</a></span>: Change linking of python modules on Mac OS X to refer to loader path. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 10:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/256649e83b3462b7fd43461b64de69de88b506f9\">[35505]</a></span>: Disable unit tests on Mac OS X / Solaris until we can debug NMI issues. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Apr-23 07:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/40942421a4b76c40183e679b6fa469878a00603d\">[35503]</a></span>: Clean up Mac OS X proper builds to enable python-bindings. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3584\" onclick=\"get_ticket_and_populate_wrapper('3584'); return false;\" title=\"Allow python-bindings to be built with Mac OS X\">#3584</a></span>  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Feb-28 09:22", "status": "resolved", "created": "2013-Apr-22 11:36", "fixed_version": "2013-Apr-22 11:36", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "bbockelm", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}