{"id": 3329, "title": "Ticket #3329: Excise collector code for duplicating classads", "description": "<blockquote>\nThis collector code seems unnecessary, since machine/resource ads for scale testing can be created by configuring multiple startds, and using NUM_CPUS, SLOT_TYPE_x, etc.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">\t\t// create fake duplicates of this ad, each with a different name, if\n\t\t// we are told to do so.  this feature exists for developer\n\t\t// scalability testing.\n\t\tif ( repeatStartdAds &gt; 0 &amp;&amp; clientAdToRepeat ) {\n\t\t\tClassAd *fakeAd;\n\t\t\tint n;\n\t\t\tchar newname[150],oldname[130];\n\t\t\toldname[0] = '\\0';\n\t\t\tclientAdToRepeat-&gt;LookupString(\"Name\",oldname,sizeof(oldname));\n\t\t\tfor (n=0;n&lt;repeatStartdAds;n++) {\n\t\t\t\tfakeAd = new ClassAd(*clientAdToRepeat);\n\t\t\t\tsnprintf(newname,sizeof(newname),\n\t\t\t\t\t\t \"Name=\\\"fake%d-%s\\\"\",n,oldname);\n\t\t\t\tfakeAd-&gt;InsertOrUpdate(newname);\n\t\t\t\tmakeStartdAdHashKey (hk, fakeAd);\n\t\t\t\thashString.Build( hk );\n\t\t\t\tif (! updateClassAd (StartdAds, \"StartdAd     \", \"Start\",\n\t\t\t\t\t\t\t  fakeAd, hk, hashString, insert, from ) )\n\t\t\t\t{\n\t\t\t\t\t// don't leak memory if there is some failure\n\t\t\t\t\tdelete fakeAd;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete clientAdToRepeat;\n\t\t\tclientAdToRepeat = NULL;\n\t\t}\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2013-Jan-22 10:54:51 by johnkn:</em> <br/>\n\nBulk change of target version from v070903 to v070904 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-05 10:58:27 by johnkn:</em> <br/>\n\nBulk change of target version from v070904 to v070905 using ./ticket-target-mover.\n<hr/>\n<em>2013-Apr-22 11:10:10 by johnkn:</em> <br/>\n\nBulk change of target version from v070905 to v070906 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2013-Apr-22 11:11", "status": "new", "created": "2012-Nov-19 13:11", "fixed_version": "2012-Nov-19 13:11", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "eje", "rust": "", "customer_group": "other", "visibility": "public", "notify": "eje@cs.wisc.edu, tstclair@cs.wisc.edu, johnkn@cs.wisc.edu", "due_date": ""}