{"id": 4274, "title": "Ticket #4274: Excessive Negotiator lookups", "description": "<blockquote>\nI used the non-blocking condor_q protocol as a mechanism to find blocking activity in the schedd (in one terminal, do \"strace condor_q 2&gt;&amp;1 | grep select\" to look for blocking; in a second terminal, call pstack to see what the schedd is doing).\n\n<p>One of the most common reasons for blocking was sending reschedule commands to the negotiator.  On a busy node, this was called every 3-4 seconds and took about a second to resolve the sinful string of the negotiator (as this causes a blocking collector query).\n\n</p><p>We should cache the daemon object corresponding to the negotiator (and hence sinful string) for a non-trivial amount of time.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Oct-27 15:09:35 by gthain:</em> <br/>\n\nWe used to only send the reschedule once every 20 seconds, but now with the timeslicing code, we only delay sending the reschedule command if the schedd is spending too much time negotiating.\n\n<p>Seems to me that no matter how fast negotiation is, pushing the elevator button multiple times isn't a good use of the schedd's time.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2015-Oct-27 15:09", "status": "new", "created": "2014-Mar-22 22:26", "fixed_version": "2014-Mar-22 22:26", "broken_version": "", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}