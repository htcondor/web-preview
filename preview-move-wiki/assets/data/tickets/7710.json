{"id": 7710, "title": "Ticket #7710: Simplify our RPM install instructions", "description": "<blockquote>\n<a class=\"external\" href=\"https://research.cs.wisc.edu/htcondor/instructions/el/7/development/\">Step One of our package install instructions</a> have four substeps, using wget to grab the repo signing key, and wget to get the repo description.\n\n<p>Propose we add the signing key in all the repo descriptions themselves, i.e. in all the RHEL7 and RHEL8 repos add the line\n\n</p><p></p><pre>    gpgkey=https://research.cs.wisc.edu/htcondor/yum/RPM-GPG-KEY-HTCondor\n</pre>\n\n<p>This would allow us to simplify the RHEL7 and RHEL8 instructions to add the htcondor repo from four commands to just:\n\n</p><p></p><pre>   yum-config-manager --add-repo https://research.cs.wisc.edu/htcondor/yum/repo.d/htcondor-stable-rhel7.repo\n</pre>\n\n<p>(p.s. at least in Centos 7 core, yum-config-manager is included, and wget is not)\n\n</p><p>Also, our package install instructions say to add the htcondor repo and then do yum install condor-all, but installing condor-all fails if EPEL is not also an added repo.  This should also be fixed.</p></blockquote>", "remarks": "<blockquote>\n<em>2020-Jun-24 22:00:32 by tim:</em> <br/>\n\nDid you not read the New Repository Layout design document? Also, the repo key if fetched with a file:// url, not https.\n\n<p></p><hr/>\n<em>2020-Jun-25 09:06:24 by tannenba:</em> <br/>\n\nHi, I did not yet read the New Repo Design document, what is the gittrac ticket associated with this?  Thanks.\n\n<p>Re repo key, <code>gpgkey=https:/xxxx</code> seems to work fine, is what <a class=\"external\" href=\"https://docs.fedoraproject.org/en-US/Fedora_Core/3/html/Software_Management_Guide/sn-writing-repodefs.html\">the fedora docs used as an example</a>, and I was also just following suit with <code>baseurl</code> <a class=\"external\" href=\"https://research.cs.wisc.edu/htcondor/yum/repo.d/htcondor-development-rhel7.repo\">which is also currently setup in our repos as an http url</a>.  Should our <code>baseurl</code> also be a file:// url ?\n\n</p><p></p><hr/>\n<em>2020-Jun-25 09:32:26 by tim:</em> <br/>\n\nJust because you <em>can</em> use an <code><a class=\"external\" href=\"https://=\">https://=</a> url for your signing key, doesn't mean you should. I was just going to follow the current practices of the Fedora and EPEL repository definitions.\n</code>\n<p></p><hr/>\n<em>2020-Jun-25 09:57:55 by tannenba:</em> <br/>\n\nSo then should <code>baseurl</code> also be a file:// url ?\n\n<p></p><hr/>\n<em>2020-Jun-25 10:00:21 by tim:</em> <br/>\n\nThe base url needs to be a network url such as <code><a class=\"external\" href=\"http://=\">http://=</a> or =https://</code> . That is were packages are downloaded.\n\n<p></p><hr/>\n<em>2020-Jun-25 10:14:00 by tannenba:</em> <br/>\n\nI am not an expert, but then just like baseurl, gpgkey needs to be an http URL, since it cannot be found on the local disk of the client.\n\n<p>gpgkey is a file url for the EPEL repo definition because EPEL has people first install an RPM that installs both the key and repo description onto their local disk.\n\n</p><p></p><hr/>\n<em>2020-Jun-25 10:18:05 by tim:</em> <br/>\n\nIf you had bothered to read my design document, you would know that when you <code>yum install</code> the htcondor release rpm, you get the repository descriptions for release, testing, snapshot, debuginfo, src as well as the gpg key for the respository.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2020-Jun-25 10:18", "status": "new", "created": "2020-Jun-24 18:49", "fixed_version": "2020-Jun-24 18:49", "broken_version": "", "priority": "2", "subsystem": "", "assigned_to": "tim", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matyas@cs.wisc.edu BBockelman@morgridge.org tannenba@cs.wisc.edu", "due_date": ""}