{"id": 6513, "title": "Ticket #6513: SciTokens support and refactor of credential management code", "description": "<blockquote>\nPlaceholder ticket.  <a class=\"external\" href=\"https://docs.google.com/document/d/1YK2G_0ooUy688jTQZ2CDGxjqCN6_uYMweR9UmDnNsKI/edit#heading=h.gjdgxs\">Design doc</a>, derived tickets, and all that to coming ASAP.\n\n<p>Git branch:  <a class=\"external\" href=\"https://htcondor-git.cs.wisc.edu/?p=condor.git;a=shortlog;h=refs/heads/V8_7-SciTokens-2-branch\">V8_7-SciTokens-2-branch</a>\n\n</p><p>The current work plan is to work \"backwards\" from the execute machine to the submit machine, so that some concrete functionality can begin to exist sooner and be tested and used even if the whole system isn't completed end-to-end and appropriately polished.\n\n</p><p>\"Phase Zero\" Milestones:\n</p><ol>\n<li>[DONE] Store credentials within SEC_CREDENTIAL_DIRECTORY by UID/username.  (One refresh token per module per user)\n</li><li>[DONE] User manually obtains and supplies their access tokens using the SEC_CREDENTIAL_PRODUCER.  Stored in SEC_CREDENTIAL_DIRECTORY with correct filenames.  Access tokens received by execute machine on job startup using syscall socket.\n</li><li>[DONE] User manually obtains and supplies their refresh tokens into the SEC_CREDENTIAL_PRODUCER.  Stored in SEC_CREDENTIAL_DIRECTORY with correct filenames.  CredD calls a hook or pings CREDMON to obtain access tokens from refresh tokens.  Execute node receives only access tokens and also refreshes access tokens from shadow periodically.\n</li><li>[DONE] SEC_CREDENTIAL_PRODUCER can specify type of credential produced, as well as produce multiple creds, all stored tidily in the SEC_CREDENTIAL_DIRECTORY.\n</li><li>[4/2] Create module architecture.  CredD now reads module configuration, starts CREDMONs as children (if needed) and uses correct CREDMON or hook to do refresh.\n</li><li>Credmon capable of receiving redirects/tokens to store in SEC_CREDENTIAL_DIRECTORY\n</li><li>condor_submit queries CredD to determine if all creds needed are present, advises user of services missing.\n</li><li>During condor_submit, CredD creates request files with needed info for missing services, submit returns a URL to the CREDMON with request ID included\n</li><li>Some rudimentary cleanup of unused tokens\n</li></ol>\n\n<p>That will get us to a \"working\" although still clumsy system.  Plenty more to be done after that, and I will create a new list of milestones at that time.</p></blockquote>", "remarks": "<blockquote>\nDevelopment on this branch/ticket is not finished, so please keep the ticket open.\n\n<p></p><hr/>\n<em>2018-Apr-14 14:25:17 by tannenba:</em> <br/>\n\nQuick comment on patch <span class=\"chng\"><a href=\"chngview?cn=54712\">[54712]</a></span> - if SEC_CREDENTIAL_REFRESH was enabled and then subsequently disabled (by setting SEC_CREDENTIAL_REFRESH=0), the timer is never cancelled.\n\n<p></p><hr/>\n<em>2018-Nov-21 17:09:28 by johnkn:</em> <br/>\n\n<strong>CODE REVIEW</strong>.  Id Ifdef LINUX'ed the Scitokens code since it uses a variable sized array on the stack, which doesn't build on non-gcc.\n\n<p>A <code>ClassAdList</code> or <code>std::map&lt;string,Classad&gt;</code> would be a better choice for these data structures anyway.\n\n</p><p></p><pre>    Mystring foo = param(\"foo\")\n</pre>\n\n<p>Is a memory leak, there are several of these in the submit code.  use\n\n</p><p></p><pre>    auto_free_ptr foo(param(\"foo\"))\n</pre>\n\n<p>instead.\n\n</p><p><code>cred_has_tokens</code> should not be taking a <code>MyString</code> by value as input, use a const char * instead, especially as that is the data type that param() returns, which is what you pass into this function. like this\n\n</p><p></p><pre>    auto_free_ptr tokens_needed(submit_hash.submit_param(\"UseOauthServices\", \"use_oauth_services\"));\n    if (tokens_needed) {\n      credd_has_tokens(tokens_needed);\n    }\n</pre>\n\n<p>There are several places where params with ZKM in the name are used, this should never happen in code that is intended to be merged in to a release.\n\n</p><p>The submit code implicitly assumes that service tag names are case-insensitive, but it uses <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StringList\" title=\"String List\">StringList</a></span> to build a set of them which is not case-insensitive.   the classad::References type is a case-preserving, case-insensitive set.\n\n</p><p></p><hr/>\n<em>2018-Dec-19 17:24:09 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW PART 2</strong>\n\n<p>Continuing some code review comments from above...\n\n</p><p>utils/store_cred.cpp needs work, esp commit <span class=\"chng\"><a href=\"chngview?cn=53133\">[53133]</a></span> :\n</p><ol>\n<li>memory leaks ( fixed some in <span class=\"chng\"><a href=\"chngview?cn=55900\">[55900]</a></span>, but more to go )\n   in NEW_UNIX_STORE_CRED(), mkdir is called multiple times on the same path for no apparent reason.  Also mkdir() return value never checked.  Also mkdir is invoked with root priv without ever checking the safety of the path via safe_is_path_trusted() !?\n</li><li>For the various unix store cred methods, why have a cred_modified parameter? Seems like it is only set to true if method returns true (i.e. redundant)\n</li><li>Should use methods from the util library like dircat() and friends instead of hand-rolled sprintfs everywhere to create directory and file paths.\n</li><li>Strings, methods, variables, config knobs, dprintfs with things like ZKM and CERN all over...\n</li></ol>\n\n<p>in submit.cpp credd_has_tokens() :\n\n</p><p></p><ol>\n<li>no error handling or return code checking for encode() or decode() or end_of_message() for calls to the CREDD\n</li><li>in the event of failure to connect to the credd, it would be nice to print out the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> stack someplace since we created one.\n</li><li>memory leaks\n</li></ol>\n\n<p></p><hr/>\n<em>2019-Jan-03 09:27:57 by tim:</em> <br/>\n\nNo docs. Reviewed and fixed by multiple team members\n\n<p></p><hr/>\n<em>2019-Jan-03 14:02:05 by tim:</em> <br/>\n\nMore work to be done. Assigning to 8.8.1. Will decide whether appropriate for stable release.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"docpending\" href=\"/tickets?ticket=6734\" onclick=\"get_ticket_and_populate_wrapper('6734'); return false;\" title=\"Need a python binding for sending a credential like condor_submit does\">#6734</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nNeed a python binding for sending a credential like condor_submit does</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=6860\" onclick=\"get_ticket_and_populate_wrapper('6860'); return false;\" title=\"scitokens: parentheses in requirements expr causes submit to fail\">#6860</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: parentheses in requirements expr causes submit to fail</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6861\" onclick=\"get_ticket_and_populate_wrapper('6861'); return false;\" title=\"scitokens: oauth client secret should not be stored in condor_config\">#6861</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: oauth client secret should not be stored in condor_config</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6862\" onclick=\"get_ticket_and_populate_wrapper('6862'); return false;\" title=\"scitokens: admin cannot define hostname:port of credmon webserver\">#6862</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: admin cannot define hostname:port of credmon webserver</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6863\" onclick=\"get_ticket_and_populate_wrapper('6863'); return false;\" title=\"scitokens: can't do secure file read/write with non-root WSGI apps\">#6863</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: can't do secure file read/write with non-root WSGI apps</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6864\" onclick=\"get_ticket_and_populate_wrapper('6864'); return false;\" title=\"scitokens: credd log needs cleaning up\">#6864</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: credd log needs cleaning up</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6867\" onclick=\"get_ticket_and_populate_wrapper('6867'); return false;\" title=\"scitokens: starter silently ignores error when fetching creds\">#6867</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: starter silently ignores error when fetching creds</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6868\" onclick=\"get_ticket_and_populate_wrapper('6868'); return false;\" title=\"scitokens: users cannot list or delete their own tokens\">#6868</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: users cannot list or delete their own tokens</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=6869\" onclick=\"get_ticket_and_populate_wrapper('6869'); return false;\" title=\"scitokens: Abandon ZKM_QUERY_CREDS\">#6869</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: Abandon ZKM_QUERY_CREDS</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6870\" onclick=\"get_ticket_and_populate_wrapper('6870'); return false;\" title=\"scitokens: remote starter does not get credentials from shadow\">#6870</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nscitokens: remote starter does not get credentials from shadow</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6891\" onclick=\"get_ticket_and_populate_wrapper('6891'); return false;\" title=\"job ads do not specify which tokens should be transferred\">#6891</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\njob ads do not specify which tokens should be transferred</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=6892\" onclick=\"get_ticket_and_populate_wrapper('6892'); return false;\" title=\"credmon(s) should run under the credd\">#6892</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncredmon(s) should run under the credd</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=6942\" onclick=\"get_ticket_and_populate_wrapper('6942'); return false;\" title=\"Missing CREDMON_COMPLETE blocks schedd when using OAuth tokens mode\">#6942</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMissing CREDMON_COMPLETE blocks schedd when using OAuth tokens mode</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7046\" onclick=\"get_ticket_and_populate_wrapper('7046'); return false;\" title=\"CREDD_OAUTH_MODE on by default\">#7046</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCREDD_OAUTH_MODE on by default</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7086\" onclick=\"get_ticket_and_populate_wrapper('7086'); return false;\" title=\"merge CredD OAuth mode and Kerberos mode\">#7086</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nmerge CredD OAuth mode and Kerberos mode</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7462\" onclick=\"get_ticket_and_populate_wrapper('7462'); return false;\" title=\"Different token types should be distinguished in the cred dir\">#7462</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDifferent token types should be distinguished in the cred dir</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7463\" onclick=\"get_ticket_and_populate_wrapper('7463'); return false;\" title=\"Add common OAuth endpoints to param table\">#7463</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd common OAuth endpoints to param table</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7484\" onclick=\"get_ticket_and_populate_wrapper('7484'); return false;\" title=\"oauth credentials are swept too quickly\">#7484</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\noauth credentials are swept too quickly</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Dec-19 16:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55900\">[55900]</a></span>: Fix some memory leaks when storing a credential on unix. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Dec-17 11:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55896\">[55896]</a></span>: Make sure to send the credentials to the user sandbox <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span> Committer: Tim Theisen  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-26 11:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55807\">[55807]</a></span>: Do OAuth token processing even if not using SEC_CREDENTIAL_PRODUCER <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-21 14:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55801\">[55801]</a></span>: ifdef LINUX the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SciTokens\" title=\"Sci Tokens\">SciTokens</a></span> code because it doesn't build on Windows or older Macs <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-20 12:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55790\">[55790]</a></span>: Clean up debug statements <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-13 14:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55721\">[55721]</a></span>: Changes to submit to allow specification of OAuth tokens including services, permissions, resource. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span> This code still has tons of extra debug messages and other issues that need to be cleaned up before merging.  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-05 16:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55531\">[55531]</a></span>: Preliminary checkin of code from <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SciTokens\" title=\"Sci Tokens\">SciTokens</a></span> hackathon plus changes to interface with Jason's new CREDMON. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Apr-13 13:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54712\">[54712]</a></span>: Always reset the refresh timer in TOKENS mode. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-30 15:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54634\">[54634]</a></span>: Clear .mark file in TOKENS mode. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-29 19:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54626\">[54626]</a></span>: Execute side doesn't need to mark and sweep in TOKENS mode. Fix small memory leak. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-29 15:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54613\">[54613]</a></span>: Clean up debug messages for credential cleanup. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-29 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54609\">[54609]</a></span>: Properly sweep credentials in TOKENS mode on the submit side. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-28 14:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54596\">[54596]</a></span>: Properly clean up credential directory for TOKENS model. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-27 16:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54587\">[54587]</a></span>: Use correct priv state to poll for file <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-27 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54582\">[54582]</a></span>: Fix polling path for credential file. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-09 13:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54478\">[54478]</a></span>: Version history for <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Mar-02 13:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54422\">[54422]</a></span>: first portion of module support for multiple credmons. not complete. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-15 14:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54303\">[54303]</a></span>: Make sure to poll (and usecorrect filename) even if not using a hook to transform creds. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-06 10:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54216\">[54216]</a></span>: Cleanup debug messages and other tidbits. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-25 16:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=54176\">[54176]</a></span>: Call hook to convert cred. Only transfer use-level creds. Store atomically. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-16 15:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53145\">[53145]</a></span>: Copy entire credential wallet to sandbox, periodically refresh, and use _CONDOR_CREDS env variable to point to it. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-12 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53133\">[53133]</a></span>: Make dir and change privs, update file names, add debug info. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-12 10:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53131\">[53131]</a></span>: Conditionally invoke the syscall instead of new command. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Jan-08 17:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=53108\">[53108]</a></span>: First pass at using shadow syscall socket to transfer multiple credentials. Not complete, not tested. <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=6513\" onclick=\"get_ticket_and_populate_wrapper('6513'); return false;\" title=\"SciTokens support and refactor of credential management code\">#6513</a></span>  (By zmiller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-May-13 17:01", "status": "active", "created": "2017-Dec-15 11:33", "fixed_version": "2017-Dec-15 11:33", "broken_version": "", "priority": "3", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}