{"id": 3952, "title": "Ticket #3952: Add grid-type gce to the gridmanager", "description": "<blockquote>\nAdd a new GCE (Google Compute Engine) grid-type to the grid universe, similar to the existing EC2 grid-type.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-17 14:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d8b0d3cfb8181fecb90a5dceaee944eb00b73c31\">[39427]</a></span>: last details of doc for new gce grid type <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-17 13:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8772a9fd5ed21211454d06ff0481904c8f7c6ad5\">[39425]</a></span>: Edit and complete documentation of new gce grid type. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-04 16:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b0b78b773c2c976397b652decf6186f4079cba44\">[39315]</a></span>: Docs for new grid-type gce. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Feb-04 15:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/243ce18012b855b4b9e05905a938a408b2f9e1fb\">[39314]</a></span>: Add param defaults for GCE GAHP. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-30 13:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3786cbbd7204f46f1ecbb253549a516344f3df22\">[39271]</a></span>: Build proper GCE default network interface name. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jan-30 13:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/76e1a5f67380b5fe3c0f379dfbe467f1e79970ae\">[39270]</a></span>: Modify the syntax for GCE metadata to be less Condor-specific. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> The gahp shouldn't have to understand Condor's goofy syntax for specifying environment variables.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-26 14:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ad840d60038554541c0e576d917b132e90c03ca3\">[39269]</a></span>: Improve cancelation code for gce jobs in the gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-26 14:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ed92dc1c68935ea6cb07e8d0cf29b2b04ddc6dd0\">[39268]</a></span>: Simplify threading code in the gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> Remove unneeded code from when there were many fine-grained locks.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-21 16:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8a55a5ad53b3b12c0cd27dd0be816138d2ceb9ba\">[38814]</a></span>: Support setting of metadata in the gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> Metadata can be set directly in the submit file or in a seperate file, similar to EC2 user data. The formatting is different, as GCE metadata is ascii key/value pairs. Metadata given in the submit file via gce_metadata is formatted identically to the\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-11 16:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/90d7de0eb3f10833a631e12b1e73d9a2285905ab\">[38699]</a></span>: Wait for asynchronous requests to finish in gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> Some requests in GCE return immediately, before the operation has taken place. The response includes a handle that can be used to check the status of the operation later. Instance creation and deletion work this way. The gce_gahp now waits for\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-11 16:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5dd56d047da9c9b9c50440e7528f99c770b38b30\">[38698]</a></span>: Reduce copying with ParseLine() in gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-08 15:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/512d736f7f330f9b6b0b295a949f15d4b6e57da2\">[38135]</a></span>: Minor fixes to GCE code to build on all platforms. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-07 14:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e72c18806239df61195d4c948910e38024ccad02\">[38125]</a></span>: Use OAuth 2.0 service to get necessary credentials. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> Instead of assuming the auth file has a bare access token, we now expect to have a refresh token and related data, formatted in JSON as generated by the gcutil command-line tool. We use that information to obtain an access token from Google's\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-07 14:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/67ac8919ab544bcbc3117350d8ff71412124dd77\">[38124]</a></span>: House cleaning around the gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> * Remove unnecessary includes * Consolidate some files * Import some std:: classes into global namespace  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-06 11:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1b86a13015efe4e523fa5597a3c1f78bd8f0e732\">[38101]</a></span>: Gridmanager changes for GCE. Now we can submit and cancel jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span> * Start ignoring instance id, which isn't very useful.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-23 11:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6312a256244b78e3dbbb02ccacdfbc19873c3d39\">[38099]</a></span>: Initial code to implement a new gce grid universe type. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3952\" onclick=\"get_ticket_and_populate_wrapper('3952'); return false;\" title=\"Add grid-type gce to the gridmanager\">#3952</a></span>  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-May-21 14:27", "status": "resolved", "created": "2013-Sep-27 10:22", "fixed_version": "2013-Sep-27 10:22", "broken_version": "", "priority": "3", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#3833", "creator": "jfrey", "rust": "", "customer_group": "atlas", "visibility": "public", "notify": "", "due_date": ""}