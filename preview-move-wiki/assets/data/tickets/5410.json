{"id": 5410, "title": "Ticket #5410: ec2_iam_profile_name doesn't set role when making a spot request", "description": "<blockquote>\nec2_iam_profile_name is supposed to set the profile (which according to the AWS documentation also sets the role) for an EC2 VM request.  When using this macro, the profile name is never issued with the spot request.  This must be included as part of the actual request since there is no way to assign a role after the fact.\n\n<p>I noticed an oddity that I am not sure if it is related or not.  When looking at the job classad, I see both ec2_iam_profile_name and EC2IamProfileName.\n\n</p><p>I will email the EC2Gahp log, the job classad, and the submit file to Todd.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Nov-23 13:20:02 by tlmiller:</em> <br/>\n\nI have no idea why both forms (submit file and job ad -style) show up in the job ad.  I'll have to look into that more.\n\n<p></p><hr/>\n<em>2015-Dec-14 10:03:40 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> The changes look good. Although, the 2 lines added at 7249 in gahp-client.cpp do not match the coding style of the previous 8 lines.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-02 13:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ceb90d6964ab2229f5ecd330cbbffe95537bec73\">[46340]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5410\" onclick=\"get_ticket_and_populate_wrapper('5410'); return false;\" title=\"ec2_iam_profile_name doesn't set role when making a spot request\">#5410</a></span>) Version history item.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-23 14:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/30a161e120ff3bc2a2a570e96cd93fb24c12d29c\">[46292]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5410\" onclick=\"get_ticket_and_populate_wrapper('5410'); return false;\" title=\"ec2_iam_profile_name doesn't set role when making a spot request\">#5410</a></span>) Add the missing plumbing to support IAM profiles for Spot instances, as well.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Dec-14 10:03", "status": "resolved", "created": "2015-Nov-23 12:02", "fixed_version": "2015-Nov-23 12:02", "broken_version": "v080402", "priority": "2", "subsystem": "", "assigned_to": "jfrey", "derived_from": "", "creator": "tiradani", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "", "due_date": ""}