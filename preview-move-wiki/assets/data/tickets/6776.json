{"id": 6776, "title": "Ticket #6776: docker universe doesn't bind mount scratch dir with file xfer off", "description": "<blockquote>\nDocker universe always mounts the iwd of the job.  WHen file xfer is on, this is the scratch directory.  When off, it is the iwd from the submit side.  In the latter case, we should also bind mount the scratch directory, so the job can see the .job.ad, any security tokens placed in the scratch directory, and use chirp.</blockquote>", "remarks": "<blockquote>\n<em>2018-Oct-24 15:01:46 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> Looks good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-23 17:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d8fed399022ff9b586102007b944cad1a0ab7dab\">[55612]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6740\" onclick=\"get_ticket_and_populate_wrapper('6740'); return false;\" title=\"Singularity doesn't allow MOUNT_UNDER_SCRATCH to be an expression\">#6740</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6772\" onclick=\"get_ticket_and_populate_wrapper('6772'); return false;\" title=\"SingularityVersion isn't advertised when docker is not configured\">#6772</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6776\" onclick=\"get_ticket_and_populate_wrapper('6776'); return false;\" title=\"docker universe doesn't bind mount scratch dir with file xfer off\">#6776</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6798\" onclick=\"get_ticket_and_populate_wrapper('6798'); return false;\" title=\"negotiator core dump with meta if-defined operator\">#6798</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Sep-27 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d352ec5de401a0424fe21b13a346ae6d456b1caf\">[55480]</a></span>: Ignore MOUNT_UNDER_SCRATCH when non-root, even inside docker <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6776\" onclick=\"get_ticket_and_populate_wrapper('6776'); return false;\" title=\"docker universe doesn't bind mount scratch dir with file xfer off\">#6776</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Sep-21 10:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f4a2b272602b565e156df9dd582507a533990138\">[55449]</a></span>: Mount scratch dir for docker uni jobs w/o file xfer <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6776\" onclick=\"get_ticket_and_populate_wrapper('6776'); return false;\" title=\"docker universe doesn't bind mount scratch dir with file xfer off\">#6776</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Oct-24 15:01", "status": "resolved", "created": "2018-Sep-21 10:07", "fixed_version": "2018-Sep-21 10:07", "broken_version": "v080600", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}