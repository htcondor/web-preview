{"id": 3360, "title": "Ticket #3360: condor_status quietly fails when there is clock skew between machines", "description": "<blockquote>\ncondor_status will fail when the time on the machine where condor_status is run is a few minutes different that the time at the collector.  For instance\nwhen the collector's clock is <code>15:17:43</code>,  and the client clock is =15:15:00=(about 3 minutes slow), condor_status will always fail.\n\n<p>condor_status reports this failure as \"Access denied\" which is misleading.\n\n</p><p>The collector log will show something like:\n\n</p><p></p><pre>    12/05/12 15:17:43 Got QUERY_STARTD_ADS\n    12/05/12 15:17:43 Received an expired query (old by 228s), ignoring\n</pre>\n\n<p>This bug was introduced by <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2983\" onclick=\"get_ticket_and_populate_wrapper('2983'); return false;\" title=\"RFE: Allow Collector to discard queries where client has given up\">#2983</a></span>, an attempt to discard queries when the client has given up.  But the query in this case isn't actually old, and client hasn't given up.  The collector needs to use a mechanism to decide that a client has given up that isn't fooled by clock skew.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2013-Jan-22 10:54:51 by johnkn:</em> <br/>\n\nBulk change of target version from v070903 to v070904 using ./ticket-target-mover.\n<hr/>\n<em>2013-Mar-05 10:58:27 by johnkn:</em> <br/>\n\nBulk change of target version from v070904 to v070905 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-18 12:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35197\">[35197]</a></span>: minor edit of 7.9.5 version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3360\" onclick=\"get_ticket_and_populate_wrapper('3360'); return false;\" title=\"condor_status quietly fails when there is clock skew between machines\">#3360</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-13 19:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35146\">[35146]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3360\" onclick=\"get_ticket_and_populate_wrapper('3360'); return false;\" title=\"condor_status quietly fails when there is clock skew between machines\">#3360</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-13 14:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35137\">[35137]</a></span>: Revert \"Allow the Collector to discard queries where the client has given up, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2983\" onclick=\"get_ticket_and_populate_wrapper('2983'); return false;\" title=\"RFE: Allow Collector to discard queries where client has given up\">#2983</a></span>\" This reverts commit 90cffd268ac786b9e787eb336fd79822f079d3d6. which simply doesn't work unless the clocks are perfectly synchronized between machines. fixes <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3360\" onclick=\"get_ticket_and_populate_wrapper('3360'); return false;\" title=\"condor_status quietly fails when there is clock skew between machines\">#3360</a></span>  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Apr-02 09:38", "status": "resolved", "created": "2012-Dec-05 15:41", "fixed_version": "2012-Dec-05 15:41", "broken_version": "v070902", "priority": "3", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "#2983", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}