{"id": 5312, "title": "Ticket #5312: allow binary (non-printable) credential files", "description": "<blockquote>\nThere are a couple places where credentials are handled as NULL-terminated strings, relics of the store_cred functionality on windows when the credd could assume this was true (as they were passwords, not binary files).\n\n<p>One option is the function signatures and code need to be changed to pass (char* buf, int len) instead of NULL-terminated strings.  Another options is to base64 encoded/decode the data as it moves in and out of the actual credential files.  One advantage to base64 is that stuff is passed around less \"in the clear\" (although certainly base64 adds no actual security, only prevents casual or accidental snooping).</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Mar-30 17:24:43 by zmiller:</em> <br/>\n\nNo version history needed for <span class=\"chng\"><a href=\"chngview?cn=48138\">[48138]</a></span> because the bug it fixed never made it into an official release.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-30 17:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48138\">[48138]</a></span>: Make the master branch backward compatible with credential files written by earlier HTCondor versions. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-29 15:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48135\">[48135]</a></span>: Follow coding conventions - include copyright notice in src. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-29 15:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48134\">[48134]</a></span>: Follow code conventions - files must include condor_common.h <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span> Besides fixes all kinds of cross-platform issues, condor_common.h enables precompiled headers on some platforms.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-29 15:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48133\">[48133]</a></span>: Do not rely upon C++11 conformance (yet!). <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span> This fixes the build on older Visual Studio compilers, and also likely on RHEL5. This also fixes a problem where the code could have passed a zero to malloc().  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-07 15:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=47681\">[47681]</a></span>: Allow base64-encoded data to contain newlines. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Nov-12 14:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=46255\">[46255]</a></span>: Remove unused variable to clean up warnings. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-21 21:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=46068\">[46068]</a></span>: Allow credentials to be binary data, rather than just \"passwords\". <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5312\" onclick=\"get_ticket_and_populate_wrapper('5312'); return false;\" title=\"allow binary (non-printable) credential files\">#5312</a></span> There are many shortcomings of this commit. Mainly, it includes substitute code for the base64 encode and decode functions, because the condor util_lib version (condor_base64.h) was not working for me.  (By zmiller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Apr-26 20:56", "status": "resolved", "created": "2015-Oct-15 13:36", "fixed_version": "2015-Oct-15 13:36", "broken_version": "", "priority": "1", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#5272", "creator": "zmiller", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": "20151022"}