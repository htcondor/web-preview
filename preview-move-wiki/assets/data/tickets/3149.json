{"id": 3149, "title": "Ticket #3149: GSI_DAEMON_DIRECTORY must be set in condor_config; default is gone?", "description": "<blockquote>\nThe v7.6.4 schedd on Deb6 finds /etc/grid-security/grid-mapfile without GSI_DAEMON_DIRECTORY being set, but v7.8.1 on RHEL6 does not find the same mapfile unless you set GSI_DAEMON_DIRECTORY explicitly.\n\n<p>In both cases the GRIDMAP environment variable is present in the schedd's environment.  But we notice that ldd reports that 7.8.1 on RHEL6 is linked with Globus libs, whereas the 7.6.4 on Deb6 is not.\n\n</p><p> 7.8.1 on RHEL6:\n</p><div class=\"verbatim\">\n<pre>% ldd /usr/sbin/condor_schedd\nshell-init: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\n\tlinux-vdso.so.1 =&gt;  (0x00007fff9d1ff000)\n\tlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x000000309f000000)\n\tlibresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00000030a0000000)\n\tlibcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00000030a7c00000)\n\tlibcondor_utils_7_8_1.so =&gt; /usr/lib64/condor/libcondor_utils_7_8_1.so (0x00007fdfa874b000)\n\tlibclassad.so.3 =&gt; /usr/lib64/libclassad.so.3 (0x0000003ad6200000)\n\tlibvomsapi_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libvomsapi_gcc64dbg.so.0 (0x0000003ad6600000)\n\tlibglobus_gss_assist_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gss_assist_gcc64dbg.so.0 (0x00007fdfa853c000)\n\tlibglobus_gssapi_gsi_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gssapi_gsi_gcc64dbg.so.0 (0x00007fdfa8315000)\n\tlibglobus_gsi_proxy_core_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gsi_proxy_core_gcc64dbg.so.0 (0x00007fdfa8102000)\n\tlibglobus_gsi_credential_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gsi_credential_gcc64dbg.so.0 (0x00007fdfa7eef000)\n\tlibglobus_gsi_callback_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gsi_callback_gcc64dbg.so.0 (0x00007fdfa7ce2000)\n\tlibglobus_gsi_sysconfig_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gsi_sysconfig_gcc64dbg.so.0 (0x00007fdfa7ad4000)\n\tlibglobus_oldgaa_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_oldgaa_gcc64dbg.so.0 (0x00007fdfa78c9000)\n\tlibglobus_gsi_cert_utils_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_gsi_cert_utils_gcc64dbg.so.0 (0x00007fdfa76c1000)\n\tlibglobus_openssl_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_openssl_gcc64dbg.so.0 (0x00007fdfa74be000)\n\tlibglobus_openssl_error_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_openssl_error_gcc64dbg.so.0 (0x00007fdfa72b9000)\n\tlibglobus_proxy_ssl_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_proxy_ssl_gcc64dbg.so.0 (0x0000003ad5200000)\n\tlibglobus_callout_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_callout_gcc64dbg.so.0 (0x00007fdfa70b4000)\n\tlibglobus_common_gcc64dbg.so.0 =&gt; /usr/lib64/condor/libglobus_common_gcc64dbg.so.0 (0x00007fdfa6e6c000)\n\tlibltdl_gcc64dbg.so.3 =&gt; /usr/lib64/condor/libltdl_gcc64dbg.so.3 (0x0000003ad5e00000)\n\tlibexpat.so.1 =&gt; /lib64/libexpat.so.1 (0x0000003ad4e00000)\n\tlibpcre.so.0 =&gt; /lib64/libpcre.so.0 (0x00000030a8800000)\n\tlibssl.so.10 =&gt; /usr/lib64/libssl.so.10 (0x0000003ad5a00000)\n\tlibcrypto.so.10 =&gt; /usr/lib64/libcrypto.so.10 (0x0000003ad5600000)\n\tlibkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00000030a6400000)\n\tlibcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00000030a6000000)\n\tlibk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00000030a6800000)\n\tlibkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00000030a6c00000)\n\tlibgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00000030a7800000)\n\tlibz.so.1 =&gt; /lib64/libz.so.1 (0x000000309f400000)\n\tlibstdc++.so.6 =&gt; /usr/lib64/libstdc++.so.6 (0x00000030a0800000)\n\tlibm.so.6 =&gt; /lib64/libm.so.6 (0x000000309e400000)\n\tlibgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x000000309fc00000)\n\tlibpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x000000309ec00000)\n\tlibc.so.6 =&gt; /lib64/libc.so.6 (0x000000309e800000)\n\t/lib64/ld-linux-x86-64.so.2 (0x000000309e000000)\n\tlibfreebl3.so =&gt; /lib64/libfreebl3.so (0x00000030a7400000)\n\tlibkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00000030a5c00000)\n\tlibselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00000030a0400000)\n</pre></div>\n\n\n<p>7.6.4 on Deb6:\n</p><div class=\"verbatim\">\n<pre>% ldd /usr/sbin/condor_schedd\n \u00a0 \u00a0 \u00a0 \u00a0linux-vdso.so.1 =&gt; \u00a0(0x00007fff1dba0000)\n \u00a0 \u00a0 \u00a0 \u00a0libdl.so.2 =&gt; /lib/libdl.so.2 (0x00007f591353f000)\n \u00a0 \u00a0 \u00a0 \u00a0libresolv.so.2 =&gt; /lib/libresolv.so.2 (0x00007f5913329000)\n \u00a0 \u00a0 \u00a0 \u00a0libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x00007f59130f1000)\n \u00a0 \u00a0 \u00a0 \u00a0libstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x00007f5912ddd000)\n \u00a0 \u00a0 \u00a0 \u00a0libm.so.6 =&gt; /lib/libm.so.6 (0x00007f5912b5b000)\n \u00a0 \u00a0 \u00a0 \u00a0libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x00007f5912944000)\n \u00a0 \u00a0 \u00a0 \u00a0libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x00007f5912728000)\n \u00a0 \u00a0 \u00a0 \u00a0libc.so.6 =&gt; /lib/libc.so.6 (0x00007f59123c6000)\n \u00a0 \u00a0 \u00a0 \u00a0/lib64/ld-linux-x86-64.so.2 (0x00007f5913759000)\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Sep-04 14:55:14 by gthain:</em> <br/>\n\nThere are a couple of things going on here.  First, in 7.6, we statically linked globus (and pretty much every external library), so the globus.so don't show up at all in ldd output.  Perhaps the ident command would find them?\n\n<p>Second, going from 7.6 to 7.8, we changed to a newer version of Globus, which is why GSI_DAEMON_DIRECTORY must be explicitly set.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2015-Sep-21 11:39", "status": "defer", "created": "2012-Jul-19 15:19", "fixed_version": "2012-Jul-19 15:19", "broken_version": "v070801", "priority": "5", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pfcouvar@syr.edu, skoranda@gravity.phys.uwm.edu,pcouvare@caltech.edu", "due_date": ""}