{"id": 671, "title": "Ticket #671: RFE: reverse direction of alive messages, go with startd->schedd", "description": "<blockquote>\nBy default the Schedd sends ALIVE messages to all Startds executing jobs.\n\n<p>For a long time now Condor has had the, undocumented, ability to reverse these ALIVES.\n\n</p><p>The mechanism for sending the ALIVEs is also overly complex, see <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=32\" onclick=\"get_ticket_and_populate_wrapper('32'); return false;\" title=\"Replace MAX_CLAIM_ ALIVES_MISSED with DEFAULT_CLAIM_ LEASE_DURATION\">#32</a></span>.\n\n</p><p>Condor should change the direction to Startd-&gt;Schedd by default.\n\n</p><p>This change should accompany simplification for the ALIVE process and MUST include good documentation so existing administrators with strong firewall policies know how to upgrade their systems.\n\n</p><p>A benefit of the direction reversal is to offload work from the Schedd.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Aug-17 10:02:04 by tannenba:</em> <br/>\n\nI have some additional wisdom about this issue in the associated RUST ticket.\n\n<p></p><hr/>\n<em>2009-Aug-17 12:25:53 by matt:</em> <br/>\n\nBy having the Schedd send ALIVEs, it has the ability to renew all leases before gracefully shutting down. While this isn't done right now, doing so would help limit the number of leases that expire on jobs while the Schedd is gone.\n\n<p></p><hr/>\n<em>2010-Aug-16 16:43:56 by jfrey:</em> <br/>\n\nPushed changes to master for 7.5.4. In 7.5.4 and beyond, the default is for the startd to send keep-alives to the schedd. If a daemon detects that it's talking to a pre-7.5.4 peer, it will revert to the old default of the schedd sending the keep-alives.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Aug-12 12:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8776943bf5a1892ce78e3b3c3f31fcfb78d3c706\">[18809]</a></span>: Reverse direction of alive messages between schedd and startd <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1420\" onclick=\"get_ticket_and_populate_wrapper('1420'); return false;\" title=\"Change default for STARTD_SENDS_ALIVES\">#1420</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=671\" onclick=\"get_ticket_and_populate_wrapper('671'); return false;\" title=\"RFE: reverse direction of alive messages, go with startd-&gt;schedd\">#671</a></span> Claim keep-alives now default to being sent by the startd, rather than the schedd. The default value of STARTD_SENDS_ALIVES is now 'peer', which means the daemon's behavior is based on the version of its peer. If the peer is older\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Oct-11 19:51", "status": "resolved", "created": "2009-Aug-17 09:59", "fixed_version": "2009-Aug-17 09:59", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "tannenba", "derived_from": "", "creator": "matt", "rust": "a19043", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu, jfrey@cs.wisc.edu", "due_date": ""}