{"id": 5559, "title": "Ticket #5559: Limit the update rate for absent submitters", "description": "<blockquote>\nIn order to reduce the rate of updates to the collector, submitter ads for users that have no jobs in the queue should not update as often as the ads for active users.\n\n<p>The update currently happens in the schedd's count_jobs function.  The fix will be to keep track of the last time and update was sent, and whether that update was for an absent submitter (i.e a user with no jobs in the queue).  Updates will be skipped when at least one update has been sent for the absent user, and the last update was more recently than the ABSENT_SUBMITTER_UPDATE_RATE, which defaults to 5*60 sec.\n\n</p><p>It should be noted that prior to this change, it appears that the code would send absent submitters TWICE each time any subnmitters were updated.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Apr-29 09:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=48325\">[48325]</a></span>: version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5597\" onclick=\"get_ticket_and_populate_wrapper('5597'); return false;\" title=\"condor_q -xml broken in 8.5.2\">#5597</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5559\" onclick=\"get_ticket_and_populate_wrapper('5559'); return false;\" title=\"Limit the update rate for absent submitters\">#5559</a></span>. documentation for 2 new knobs added in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5559\" onclick=\"get_ticket_and_populate_wrapper('5559'); return false;\" title=\"Limit the update rate for absent submitters\">#5559</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-14 15:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=47726\">[47726]</a></span>: limit the update rate for absent submitters. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5559\" onclick=\"get_ticket_and_populate_wrapper('5559'); return false;\" title=\"Limit the update rate for absent submitters\">#5559</a></span> this commit introduces two new knobs, the first sets the maximum rate at which absent submitter ads will be refresed to the collectors, the second sets the time that submitters can be absent before their info will be removed from the schedd. ABSENT_SUBMITTER_UPDATE_RATE\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Apr-29 09:56", "status": "resolved", "created": "2016-Mar-14 13:32", "fixed_version": "2016-Mar-14 13:32", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "#4490", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}