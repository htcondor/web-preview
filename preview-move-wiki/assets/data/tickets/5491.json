{"id": 5491, "title": "Ticket #5491: Negotiator should advertise accounting ads to collector", "description": "<blockquote>\nThe negotiator internally keeps information about each submitter in the accountant.  This is information that condor_userprio and condor_q -analyze query.  Information about each submitter includes their effective priority, priority factor, current usage, etc.  This information really belongs in the collector, where it can be forwarded to the gangliad for monitoring, and more efficiently queried, instead of querying the frequently busy (and single threaded) collector.  To keep the memory used by the collector bounded, we will not forward information about every submitter ever seen (which the accountant stores), but only for active submitters.</blockquote>", "remarks": "<blockquote>\n<em>2016-Mar-23 09:18:50 by tim:</em> <br/>\n\nNot sure that this work is complete. Pushing to next release. If it happens to be complete, we can document it in the next release.\n\n<p></p><hr/>\n<em>2016-Mar-24 11:03:48 by tim:</em> <br/>\n\nOn release day, we found that this work is complete. I'll update the 8.5.3 version history on the master branch.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6673\" onclick=\"get_ticket_and_populate_wrapper('6673'); return false;\" title=\"COLLECTOR_REQUIREMENTS causes all accounting ads to be rejected\">#6673</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCOLLECTOR_REQUIREMENTS causes all accounting ads to be rejected</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Mar-24 11:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bdfe5fb7a2aa33f987139c01355f54669bf50a24\">[48102]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5491\" onclick=\"get_ticket_and_populate_wrapper('5491'); return false;\" title=\"Negotiator should advertise accounting ads to collector\">#5491</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Feb-22 09:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c818b9095f18cfec19e0fa022d99933c8c8411f3\">[47639]</a></span>: remove excess newline for condor_status -af output introduce in previous commit for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5491\" onclick=\"get_ticket_and_populate_wrapper('5491'); return false;\" title=\"Negotiator should advertise accounting ads to collector\">#5491</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Feb-21 15:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8f9ca42e45e2351538158f1c529c1228ae2e6683\">[47635]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5491\" onclick=\"get_ticket_and_populate_wrapper('5491'); return false;\" title=\"Negotiator should advertise accounting ads to collector\">#5491</a></span>, better control of column widths, also prevent a buffer overrun when formatting the version string  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Feb-16 11:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/52136e9c4afc20f123c85d9e110f494d71e5c6ca\">[47608]</a></span>: add support for accounting ads to condor_status. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5491\" onclick=\"get_ticket_and_populate_wrapper('5491'); return false;\" title=\"Negotiator should advertise accounting ads to collector\">#5491</a></span> -subsys now recognises accounting as an ad type and prints some userprio information this commit also adds: * projections for all formatted condor_status queries * Drain column for the totals display * a display format for -subsys drain * improved\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Jan-21 16:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9743633d1539faf92311147abff8e67a533e5580\">[47488]</a></span>: Negotiator advertises accounting ads to collector <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5491\" onclick=\"get_ticket_and_populate_wrapper('5491'); return false;\" title=\"Negotiator should advertise accounting ads to collector\">#5491</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Mar-24 11:26", "status": "resolved", "created": "2016-Jan-21 16:38", "fixed_version": "2016-Jan-21 16:38", "broken_version": "v080500", "priority": "2", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}