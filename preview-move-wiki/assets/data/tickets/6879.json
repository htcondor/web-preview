{"id": 6879, "title": "Ticket #6879: condor_ssh_to_job doesn't work from 8.8.0 schedd  to 8.9.0 startd", "description": "<blockquote>\nAs part of the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SciTokens\" title=\"Sci Tokens\">SciTokens</a></span> work, we replaced the base64 encoding/decoding routines from ones that came from openssl to homebrew implementations.\n\n<p>The OpenSSL base64 encoder always inserts a newline after every 76 bytes of output.  Our homebrew one does not.  The OpenSSL base64 decoder can't handle lines longer than 76 bytes, but our homebrew one can.\n\n</p><p>So, for 8.9.0, I've changed our encoder to append a newline every 76 bytes.  In general, seems like this line wrapping should work at a higher level, but this fix allows ssh_to_job to work for now.\n\n</p><p>Also, we should fix the base64 encoder/decoder interfaces -- one takes an unsigned char as input, the other a signed char.  One returns the output, the other sets it as an output parameter.  One takes an input length and a char *, the other just a char *, and assumes it is null terminated.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jan-24 11:05:48 by bbockelm:</em> <br/>\n\n&gt; we replaced the base64 encoding/decoding routines from ones that came from openssl to homebrew implementations\n\n<p>!?!?!?!?!\n\n</p><p>Isn't that the bug?\n\n</p><p></p><hr/>\n<em>2019-Feb-06 11:17:44 by tim:</em> <br/>\n\nRestored old base64 encoding. We are back to two implementation. This was never released. No docs.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jan-24 21:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56079\">[56079]</a></span>: Revert \"Allow condor_ssh_to_job to work from 8.8.0 to 8.9.0 <span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=6879\" onclick=\"get_ticket_and_populate_wrapper('6879'); return false;\" title=\"condor_ssh_to_job doesn't work from 8.8.0 schedd  to 8.9.0 startd\">#6879</a></span>\" This reverts commit 821151719c1625c67216f4ea2828fbf97b895821. Conflicts: src/condor_utils/condor_base64.cpp  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jan-23 21:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56070\">[56070]</a></span>: Fix formatting of <span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=6879\" onclick=\"get_ticket_and_populate_wrapper('6879'); return false;\" title=\"condor_ssh_to_job doesn't work from 8.8.0 schedd  to 8.9.0 startd\">#6879</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jan-23 21:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=56069\">[56069]</a></span>: Allow condor_ssh_to_job to work from 8.8.0 to 8.9.0 <span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=6879\" onclick=\"get_ticket_and_populate_wrapper('6879'); return false;\" title=\"condor_ssh_to_job doesn't work from 8.8.0 schedd  to 8.9.0 startd\">#6879</a></span> by making condor's base64 encoding routines backward compatible with the older openssl based routines.  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Feb-06 11:17", "status": "abandoned", "created": "2019-Jan-23 21:22", "fixed_version": "2019-Jan-23 21:22", "broken_version": "v080900", "priority": "1", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}