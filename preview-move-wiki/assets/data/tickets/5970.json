{"id": 5970, "title": "Ticket #5970: Job transform: error message always report last item in transform list", "description": "<blockquote>\nEnabling schedd to do job transform. Related ticket: <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5885\" onclick=\"get_ticket_and_populate_wrapper('5885'); return false;\" title=\"enable the schedd to perform job classad transforms upon submission\">#5885</a></span>.\nWhen adding the following line to condor config file:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">JOB_TRANSFORM_NAMES = BAD ILLEGAL ALWAYS NEVER ALWAYS_NEWSCRIPT\nJOB_TRANSFORM_BAD @=end\n[\n  set_NeverThere3 = \"Please work!\";\n  12foo = asd\"as\";\n  ugh = 7 %$ 8;\n]\n@end\nJOB_TRANSFORM_ILLEGAL @=end\n[\n  requirements = illegal =?= true;\n  set_ProcId = 999;\n]\n@end\nJOB_TRANSFORM_ALWAYS @=end\n[\n  requirements = True;\n  set_AlwaysThere = \"Please work!\";\n  delete_NeverThere2 = true;\n  eval_set_OnlyProcZero = ProcId == 0 ? \"Please work - proc zero\" : \"Please work - proc non-zero\"\n]\n@end\nJOB_TRANSFORM_NEVER @=end\n[\n  requirements = False;\n  set_NeverThere1 = \"Please work!\";\n]\n@end\nJOB_TRANSFORM_ALWAYS_NEWSCRIPT @=end\n  SET AlwaysThereNew = \"Please work!\"\n  DELETE NeverThereNew\n@end\n</pre></div>\n\n\n<p>Next, create file <code>test.sub</code> that contains the following job description:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">executable = test.sub\nhold = true\n+NeverThere2 = \"Please work!\"\n+illegal = $(ILLEGAL:false)\nqueue 2\n</pre></div>\n\n\n<p>and added a test.sub\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">executable = test.sub\nhold = true\n+NeverThere2 = \"Please work!\"\n+illegal = $(ILLEGAL:false)\nqueue 2\n</pre></div>\n\n\n<p>and call condor_submit test.sub, schedd logs shows that\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">10/17/16 16:35:32 (pid:2204867) (426.0) job_transforms: Failed to set ProcId = 999\n10/17/16 16:35:32 (pid:2204867) (426.0) job_transforms: ERROR applying transform ALWAYS_NEWSCRIPT (err=-4,rval=-2)\n</pre></div>\n\n\n<p>where ALWAYS_NEWSCRIPT is the last item in the transform list.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Oct-31 15:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=49503\">[49503]</a></span>: Minor fix to dprintf error message for job transforms. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5970\" onclick=\"get_ticket_and_populate_wrapper('5970'); return false;\" title=\"Job transform: error message always report last item in transform list\">#5970</a></span> ===VersionHistory:None=== bug never shipped.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Nov-16 10:38", "status": "resolved", "created": "2016-Oct-17 17:00", "fixed_version": "2016-Oct-17 17:00", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "johnkn", "derived_from": "#5885", "creator": "shuyang", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}