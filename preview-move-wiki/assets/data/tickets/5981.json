{"id": 5981, "title": "Ticket #5981: Enable encryption by default for credd commands", "description": "<blockquote>\nThe credential-movement commands STORE_CRED and CREDD_GET_PASSWD require encryption to be enabled, with certain exceptions. They assume the encryption will be enabled via security policy in the config file. To make the admin's job easier, we should make the code explicitly enable encryption (failing if it's not available).\n\n<p>This requires forcing authentication to always happen for these commands, and always using encryption for the QUERY mode of STORE_CRED. This presents some possible backwards-compatibility issues on Windows when storing user passwords. They should be minimal, since version-skew within a single machine is unlikely.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Nov-28 13:44:05 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong>: Looks good.\n\n<p></p><hr/>\n<em>2018-Oct-11 12:33:49 by jfrey:</em> <br/>\n\nIt turns out that inter-machine communication can be common in a Windows pool (i.e. single credd). In this case, if there's version skew across 8.5.8, the incompatibility can be worked around by requiring encryption in the config file:\n<div class=\"verbatim\">\n<pre>CREDD.SEC_DAEMON_ENCRYPTION = REQUIRED\n</pre></div>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Oct-27 16:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ed2b304726772775c6800883908e68c99e0324be\">[49487]</a></span>: Enable encryption by default for credd commands <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5981\" onclick=\"get_ticket_and_populate_wrapper('5981'); return false;\" title=\"Enable encryption by default for credd commands\">#5981</a></span> Commands STORE_CRED and CREDD_GET_PASSWD now always require authentication and explicitly enable encryption. Previously, encryption had to be enabled via policy configuration, and authentication/encryption were optional when talking to a \"local\" service.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Oct-11 12:33", "status": "resolved", "created": "2016-Oct-27 15:30", "fixed_version": "2016-Oct-27 15:30", "broken_version": "v080500", "priority": "2", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#5272", "creator": "jfrey", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "", "due_date": ""}