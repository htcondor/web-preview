{"id": 2982, "title": "Ticket #2982: RFE: Data on Collector queries", "description": "<blockquote>\nThe condor_collector's primary task is receiving ads and servicing queries against those ads.\n\n<p>Data is needed to explore what queries are run and their behavior.\n\n</p><p>To that end, proposal is to add a dprintf to report query information. This information will be in an undefined format (don't rely on it being stable).\n\n</p><p>For instance,\n\n</p><p></p><div class=\"verbatim\">\n<pre>Query info: matched=5; skipped=3; query_time=0.001162; send_time=0.001652; type=Any; requirements={( ( ( MyType == \"Scheduler\" ) || ( MyType == \"Submitter\" ) ) || ( ( MyType == \"Machine\" ) ) )}; peer=&lt;127.0.0.1:46378&gt;; projection={}\n\nQuery info: matched=4; skipped=0; query_time=0.001492; send_time=0.000630; type=MachinePrivate; requirements={true}; peer=&lt;127.0.0.1:47873&gt;; projection={}\n\nQuery info: matched=1; skipped=0; query_time=0.000998; send_time=0.000457; type=Scheduler; requirements={( ( Name == \"matt@eeyore.local\" ) )}; peer=&lt;127.0.0.1:46296&gt;; projection={}\n\nQuery info: matched=4; skipped=0; query_time=0.000912; send_time=0.003644; type=Machine; requirements={true}; peer=&lt;127.0.0.1:38013&gt;; projection={Name Machine Opsys Arch State Activity LoadAvg Memory ActvtyTime MyCurrentTime EnteredCurrentActivity}\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-10 15:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d387ae97eae6530a6ba69f0c557c139d804d7548\">[32013]</a></span>: Revert \"Revert \"Add query information to collector's debug output, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2982\" onclick=\"get_ticket_and_populate_wrapper('2982'); return false;\" title=\"RFE: Data on Collector queries\">#2982</a></span>\"\" This reverts commit 3ba57d8533f9417e031b50ef006c1649dcf0c6c9.  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-10 14:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c65efaf2ac221c76d4209eb8efa875d02ada6cc3\">[32009]</a></span>: Removed non-windows restriction on <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=AdTypeFromString\" title=\"Ad Type From String\">AdTypeFromString</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=AdTypeToString\" title=\"Ad Type To String\">AdTypeToString</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-10 10:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3ba57d8533f9417e031b50ef006c1649dcf0c6c9\">[32003]</a></span>: Revert \"Add query information to collector's debug output, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2982\" onclick=\"get_ticket_and_populate_wrapper('2982'); return false;\" title=\"RFE: Data on Collector queries\">#2982</a></span>\" This reverts commit 7fb5b2592cf1b77fcad4dce5632ccad0f41ffab7. Reason: broke Windows build  (By Scot Kronenfeld )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-May-10 10:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7fb5b2592cf1b77fcad4dce5632ccad0f41ffab7\">[31999]</a></span>: Add query information to collector's debug output, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2982\" onclick=\"get_ticket_and_populate_wrapper('2982'); return false;\" title=\"RFE: Data on Collector queries\">#2982</a></span>  (By Matthew Farrellee )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-May-10 10:11", "status": "resolved", "created": "2012-May-10 10:08", "fixed_version": "2012-May-10 10:08", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "matt", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}