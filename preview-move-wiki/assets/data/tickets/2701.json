{"id": 2701, "title": "Ticket #2701: DMTCP: mtcp_restart not pulled from right location", "description": "<blockquote>\nQuick import from email discussion:\n\n<p>psilord says:\n</p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \n...as I understand it, the problem is that mtcp_restart is not being copied from the correct place. The install location of mtcp_restart must be verified from the config &amp;&amp; make &amp;&amp; make install of the release tarball, and from the debian deb file to figure out where the Makefile in the dmtcp/condor integration package should get it. If you could make a new release of it that fixes this one bug, Nickolas can make easy progress on his work.\n</td></tr></tbody></table></div>\n\n\n<p>Nickolas \"Nick\" Fotopoulos says:\n\n</p><p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nAlan, the mtcp_restart location is one bug, to be sure, but even when I hack around it with a symlink, I'm getting a mysterious failure that I don't know how to debug further. The description is below. Any help would be appreciated.\n</td></tr></tbody></table></div>\n\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  The shim script can successfully run foo.py with DMTCP on the shared filesystem (file transfer turned off entirely), even with checkpointing. When I adapted it to a real, multi-threaded Python GStreamer app, however, no dmtcp_restart_script.sh was produced after condor_vacate_job (about forty seconds into a one-minute job). These are the relevant lines:</td></tr></tbody></table></div>\n\n\n<p></p><div class=\"code\">\n<pre class=\"code\">[node56 11/21/11 11:06:53 PST]: Didn't find dmtcp_restart_script.sh.  Next invocation is initial!\n[node56 11/21/11 11:06:53 PST]: This is bad and means DMTCP failed to write it, or a full fs.\n</pre></div>\n\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  If you can log into ldas-{grid,pcdev1}.ligo.caltech.edu, my example is in /home/nvf/temp/test_gstlal_dmtcp. My last attempt was process 548.  Any ideas why the restart script was not produced?</td></tr></tbody></table></div>\n\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  Should you care to run it yourself, I think you'll need to source environment.sh and copy H-H1_LDAS_C02_L2_CACHE-953780682-2190.lcf and system_job.sub.</td></tr></tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2011-Dec-09 17:17", "status": "new", "created": "2011-Dec-09 17:17", "fixed_version": "2011-Dec-09 17:17", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}