{"id": 3609, "title": "Ticket #3609: Local Resource Testing - Static  and dynamic slots", "description": "<blockquote>\n<strong class=\"three\">Local Resouce Testing</strong>\n<strong>job_local_resouces.run</strong>\n\n<p>This test has two parts. In the configuring of static slots\nwe configure quantities as a hard count, a percent and a fraction\nand ensure we get the correct Ads published.\n\n</p><p>In the pslots we configure and then run a job or more to make sure\nthe dynamic allocation was done.\n\n</p><p>Discovered how to have a fresh condor each time to ensure we dont have\nhave conflicting configs.\n\n</p><p>We request all the ads for the dynamic slot after waiting a couple negotiation cycle to allow the updates to hit the collector.\n\n</p><p>Then we run again with couple waits and check the partionable slot for\ncorrect adjusted resources.</p></blockquote>", "remarks": "<blockquote>\nMake sure to test a script setting the local resource value.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-29 12:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0783dcdcfc2ca0cf6f4359c5f40e460345f8eb68\">[38011]</a></span>: Convert basic calls to condor tools to ones with patience <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jul-30 09:38</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1b1ab057bc07c1577e14d4232372a6eb5ffd75a\">[37038]</a></span>: The test broke when we fixed callbacks to being in the same pid and thus globals were being changed finally. Test was missing initialization back to zero for current jobs running before each sub-test. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-08 14:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cb3045e6f8ec6cc585779e0799686b9ded0e9805\">[35661]</a></span>: Added <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CreateLocalConfig\" title=\"Create Local Config\">CreateLocalConfig</a></span> to place local config info into a file based on both a name and the pid requestion it. The new file name is returned. It is initially used in both <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3598\" onclick=\"get_ticket_and_populate_wrapper('3598'); return false;\" title=\"CPU affinity test\">#3598</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-08 14:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/19b7f98b204a350cf611efaf0cd74faf181b2d49\">[35660]</a></span>: Add new local resource test <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-08 14:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8ff51798cf9962bb22f2883ead2e4ca138a385bb\">[35659]</a></span>: Add job_local_resources to test list. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-08 14:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/886ce692274d90ade4cf70e3e8fd38540f571dd6\">[35658]</a></span>: Added another hash element which can be defined with <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StartCondorWithParams\" title=\"Start Condor With Params\">StartCondorWithParams</a></span>. \"fresh_local\" set to true, we now can pass in \"condorlocalsrc\" as a file and start with a fresh condor and not one based on the .local from the current condor. Initially user in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3609\" onclick=\"get_ticket_and_populate_wrapper('3609'); return false;\" title=\"Local Resource Testing - Static  and dynamic slots\">#3609</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3598\" onclick=\"get_ticket_and_populate_wrapper('3598'); return false;\" title=\"CPU affinity test\">#3598</a></span>  (By Bill Taylor )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-06 12:39", "status": "resolved", "created": "2013-May-06 10:25", "fixed_version": "2013-May-06 10:25", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3594", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}