{"id": 987, "title": "Ticket #987: Purge Oracle code", "description": "<blockquote>\nRemove unused, never compiled Oracle code. This will also allow for simplification of --enable-quill and WANT_QUILL to fully control the presence of the Quill feature.</blockquote>", "remarks": "<blockquote>\n<em>2009-Nov-20 01:34:05 by matt:</em> <br/>\n\n<ul>\n<li>Remove HAVE_ORACLE, orphan code <strong>[DONE]</strong>\n</li><li>Remove OCI tests from aclocal.m4 <strong>[DONE]</strong>\n</li><li>Remove orphaned code protected by HAVE_ORACLE <strong>[DONE]</strong>\n</li><li>Remove all code depending on T_ORACLE <strong>[DONE]</strong>\n</li><li>Remove orphaned oracle_create,dropddl.sql <strong>[DONE]</strong>\n</li><li>Remove execCommandWithBind, Oracle only, orphaned <strong>[DONE]</strong>\n</li><li>Remove WANT_QUILL from configure.ac, orphan Quill code <strong>[DONE]</strong>\n</li><li>Change WANT_QUILL to HAVE_EXT_POSTGRESQL in code, un-orphan Quill code <strong>[DONE]</strong>\n</li><li>Change QUILL_LIB/INC to POSTGRESQL_LIBS/INC <strong>[DONE]</strong>\n</li><li>Remove extra unused variables (QUILL_FLAGS, TT_FLAGS, ORACLE_INC/LIB) <strong>[DONE]</strong>\n</li><li>Remove QUILL/POSTGRESQL dependency from <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobRouter\" title=\"Job Router\">JobRouter</a></span> <strong>[DONE]</strong>\n</li><li>Make --disable-quill disabled test for postgresql <strong>[DONE]</strong>\n</li><li>Handle execCommandWithBind <strong>[IGNORED]</strong>\n</li><li>Handle condor_ttdb_buildtsval <strong>[IGNORED]</strong>\n</li><li>Simplify switch statements on dbtype <strong>[IGNORED]</strong>\n<br/>\n\n<strong>47 files changed, 257 insertions(+), 4577 deletions(-)</strong></li></ul>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-02 12:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18294\">[18294]</a></span>: Add back lost postgres code accidentally removed in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span> One of the <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span> commits removed the postgres branch instead of the oracle branch  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-23 16:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16444\">[16444]</a></span>: Fixed proper build after oracle removal, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16418\">[16418]</a></span>: Replaced QUILL_INC with POSTGRESQL_INC, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16419\">[16419]</a></span>: Removed QUILL_FLAGS from Project.tmpl, it didn't exist, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16420\">[16420]</a></span>: Removed TT_FLAGS from Project.tmpl, it didn't exist, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16421\">[16421]</a></span>: Removed non-existent ORACLE_INC and ORACLE_LIB, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16422\">[16422]</a></span>: Removed QUILL/POSTGRESQL dependency for the Job Router, it was superfluous, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16423\">[16423]</a></span>: --disable-quill now controls test for postgresql, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16424\">[16424]</a></span>: Resolved recursive POSTGRESQL_INC issue, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16425\">[16425]</a></span>: Fixed the T_ORACLE purge, previously had removed the wrong code, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span> Side note: why oh why do if (dt == T_ORACLE) { // ORACLE CODE } else { // POSTGRESQL CODE } in 90% of the code and if (dt != T_ORACLE) { // POSTGRESQL CODE } else { // ORACLE CODE } in 10%  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16426\">[16426]</a></span>: Removed some dead code around execCommandWithBind, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16411\">[16411]</a></span>: Removed orphaned oracle_create,dropddl.sql, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16412\">[16412]</a></span>: Removed Oracle only function, execQueryWithBind, from PGSQLDatabase and associated headers, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16413\">[16413]</a></span>: Addition of some history for dbtype, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16414\">[16414]</a></span>: Removed WANT_QUILL, replaced with HAVE_EXT_POSTGRESQL, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16415\">[16415]</a></span>: Missed a WANT_QUILL in Project.tmpl, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16416\">[16416]</a></span>: Moved #ifdef HAVE_EXT_POSTGRESQL, was WANT_QUILL, after include condor_common as it comes from config.h, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16417\">[16417]</a></span>: Replaced QUILL_LIB with POSTGRESQL_LIBS, were previously equal, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16407\">[16407]</a></span>: Orphaned HAVE_ORACLE, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16408\">[16408]</a></span>: Removed OCI tests from aclocal.m4, they are not used in configure.ac, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16409\">[16409]</a></span>: Removed orphaned uses of HAVE_ORACLE, orphaned ORACLEDatabase and others, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Nov-22 08:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16410\">[16410]</a></span>: Removed all code depending on T_ORACLE, did not bother reformating or improving the result, <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=987\" onclick=\"get_ticket_and_populate_wrapper('987'); return false;\" title=\"Purge Oracle code\">#987</a></span>  (By Matthew Farrellee )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Nov-19 07:14", "status": "resolved", "created": "2009-Nov-20 01:20", "fixed_version": "2009-Nov-20 01:20", "broken_version": "", "priority": "4", "subsystem": "Daemons", "assigned_to": "matt", "derived_from": "#928", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}