{"id": 1633, "title": "Ticket #1633: Change OpSys from WINNT51, WINNT61, etc to simply WINNT", "description": "<blockquote>\nFor Windows computers, Condor includes the version number in the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span>.  So Windows 7 is WINNT61, Vista is WINNT60, Server 2008 might be WINNT60 or WINNT61, XP might be WINNT51 or WINNT52.\n\n<p>This is surprising, since it means that if I submit a job on a Vista box, by default I'll end up with <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT60\" my Requirements expression and my job won't run on a Windows 7 box, despite the fact that my job will almost certainly run fine on Windows 7.  Crafting a Requirements expression that says, \"Anything Windows NT based is okay\" is a nuisance, requiring one to fiddle around with substr() or regular expressions.\n\n</p><p>This is also different from our other major platform, Linux, which always advertises an <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> of LINUX, without regard to the version.  If anything, different distributions of Linux are less compatible than Windows, and we don't distinguish them.\n\n</p><p>For users who care, the version information is available already; machine classads contain things like:\n\n</p><p><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WindowsMajorVersion\" title=\"Windows Major Version\">WindowsMajorVersion</a></span> = 5<br/>\n\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WindowsMinorVersion\" title=\"Windows Minor Version\">WindowsMinorVersion</a></span> = 1<br/>\n\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WindowsBuildNumber\" title=\"Windows Build Number\">WindowsBuildNumber</a></span> = 2600<br/>\n\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WindowsServicePackMajorVersion\" title=\"Windows Service Pack Major Version\">WindowsServicePackMajorVersion</a></span> = 3<br/>\n\n<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=WindowsServicePackMinorVersion\" title=\"Windows Service Pack Minor Version\">WindowsServicePackMinorVersion</a></span> = 0\n\n</p><p>Proposed: Remove the version number from the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span>.  So simply advertise WINNT.\n\n</p><p>To consider: this is an opportunity to tweak the name.  \"NT\" is a dead name, it's all just Windows now. Might might consider options like WINDOWS, MSWINDOWS, or MSWIN.\n\n</p><p><span class=\"section\"></span></p><h2>Compatibility </h2>\n\n<p><em>This is likely backwards incompatible change.</em>  Old jobs and old submit files will do the wrong thing.  We'll need to call this out for people who are upgrading.  What can we do to minimize the pain?\n\n</p><p><span class=\"section\"></span></p><h2>new jobs, old startds</h2>\n\n<p>New jobs will be looking for WINNT, but old startds will only offer WINNT61, WINNT51, or similar.\n\n</p><p>Possible fixes:\n\n</p><p></p><ul>\n<li>Do nothing.  Announce it widely.  Either upgrade your startds or craft custom Requirements.\n</li><li>new jobs should require any WINNT we know about: (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT\" || <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT51\" || <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT52\" || <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT60\" || <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> == \"WINNT61\").  On the down side, this is messy.\n</li><li>Instead of using WINNT or WINDOWS, declare all versions of Windows to be WINNT51 (or whatever the most widely deployed version is).  This breaks some old startds, but might minimize compatibility problems.\n</li></ul>\n\n<p><span class=\"section\"></span></p><h2>old jobs, new startds</h2>\n\n<p>Old jobs will require WINNT51, WINNT61, or whatever, but a new startd will advertise WINNT (or WINDOWS, or whatever) and so the jobs won't match.\n\n</p><p>Possible fixes:\n</p><ul>\n<li>Do nothing.  Announce it widely.  Update your jobs with condor_qedit or update the submit files before reusing.\n</li><li>Detect old Requirements expressions or dependent expressions and rewrite them.\n</li><li>Leave <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> as it is and add a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSysNew\" title=\"Op Sys New\">OpSysNew</a></span> (or some better name). New jobs will use <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSysNew\" title=\"Op Sys New\">OpSysNew</a></span> (and perhaps also <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> as a fallback).\n</li><li>Declare <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=OpSys\" title=\"Op Sys\">OpSys</a></span> to be WINNT51 forever and ever.  While misleading, it's backward compatible with many old jobs.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:19:13 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-01 16:19", "status": "new", "created": "2010-Sep-01 16:49", "fixed_version": "2010-Sep-01 16:49", "broken_version": "v070000", "priority": "3", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}