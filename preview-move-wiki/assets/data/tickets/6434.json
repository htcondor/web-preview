{"id": 6434, "title": "Ticket #6434: event log reader should tolerate well formed events it does not know", "description": "<blockquote>\nThe event log reader library currently aborts if it sees an event ID that it doesn't know. This makes it dangerous to add new event types because older readers might see them and then abort.\n\n<p>Since the first part of is well defined, and the termination marker is also well defined, it is possible for the event log reader to skip past them and even to read and re-write them as long as we are not trying to convert from XML logs to non-XML logs and visa versa.\n\n</p><p>The proposed fix is to define a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FutureEvent\" title=\"Future Event\">FutureEvent</a></span>, which will be instantiated whenever the event log reader reads an event with an event ID that is not in it's list of known IDs.  This event will capture the event id, the remainder of the event line (after the timestamp) in a field called 'head' and all of the lines before the ... terminator in a field called 'payload'.  This event will be able to write the event back out from these fields, but the primary use is to be able to skip over them when scanning for fields that the read does recognise, such as the submit event and remove event.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Oct-26 15:33:00 by johnkn:</em> <br/>\n\nno version history for this item. it's future proofing, not really a bug fix or feature.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-07 19:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=52513\">[52513]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6434\" onclick=\"get_ticket_and_populate_wrapper('6434'); return false;\" title=\"event log reader should tolerate well formed events it does not know\">#6434</a></span>, change event log reader so that it tolerates events it doesn't recognise. It will return them as a generic <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FutureEvent\" title=\"Future Event\">FutureEvent</a></span>, which allows them to be skipped over in tools like condor_wait and dagman. ===VersionHistory:Pending=== not clear that this change needs a version history  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Oct-26 15:53", "status": "resolved", "created": "2017-Oct-07 19:08", "fixed_version": "2017-Oct-07 19:08", "broken_version": "", "priority": "4", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}