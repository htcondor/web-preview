{"id": 2421, "title": "Ticket #2421: Create simple installation for current blahp over ssh", "description": "<blockquote>\nCurrently, setting up our blahp-over-ssh prototype is overly\ncomplicated. We want to make the setup process as easy as possible\nwithout major modifications to the code.\n\n<p><span class=\"subsection\"></span></p><h3>Current Plan</h3>\nThese are the steps the user would need to perform:\n<ul>\n<li>On the user's submit machine\n<ul>\n<li>Install Condor regularly with simple --bosco option\n<ul>\n<li>This can be done without root and without setting CONDOR_CONFIG in the environment\n</li></ul>\n</li><li>Start condor_master\n</li></ul>\n</li><li>For each PBS/LSF submit node\n<ul>\n<li>Run a setup tool that installs all required software on the remote machine\n</li></ul>\n</li></ul>\n\n<p>The following work would have to be done. We estimate this would take 1-2 days.\n</p><ul>\n<li>Define default locations for passphrase file and blahp installation\n</li><li>Modify REMOTE_HOSTS in remote_gahp to have a default option\n</li><li>Modify REMOTE_HOSTS to have a username field with default option\n</li><li>Add remote_gahp and bosco_add_host scripts to Condor\n</li><li>Add --bosco option to condor_install (.5 days) (UW)\n<ul>\n<li>Installs a personal Condor under <code>~/bosco</code>\n</li></ul>\n</li><li>Write installation instructions\n</li><li>Add <code>~/.condor/condor_config</code> to list of default config file locations (.5 days) (UW)\n</li><li>Change code to use separate ssh key for blahp authentication. (3 days) (UW)\n<ul>\n<li>Key is encrypted with passphrase stored elsewhere on disk.\n</li></ul>\n</li><li>Write bosco_add_host, which installs blahp on the remote server (2 days)\n<ul>\n<li>Modify blahp config file (which is a shell script) to determine proper values each time it's invoked\n</li><li>On first invocation, script generates ssh key for bosco\n</li></ul>\n</li><li>Improve blahp's handling of staging files vs using shared filesystem (.5 days) (UW or CG)\n<ul>\n<li>Assume shared filesystem\n</li></ul>\n</li><li>Improve blahp's handling of pbs skipping complete state for some jobs (UW or CG)\n<ul>\n<li>Check how cream and gram handle this (2 days)\n</li><li>Add check for pbs configuration that fixes this and print error (.5 days)\n</li><li>Discuss improving blahp with its developers (4 days)\n</li></ul>\n</li></ul>\n\n<p><span class=\"section\"></span></p><h2>Milestones </h2>\n\n<p></p><ul>\n<li>remote_gahp accepts options on command line <strong>DONE</strong>\n</li><li>remote_gahp uses separate ssh credential <strong>DONE</strong>\n</li><li>remote_gahp has default locations for files (ssh credential, batch_gahp) <strong>DONE</strong>\n</li><li>SGE support in Condor <strong>DONE</strong>\n</li><li>Add ~/.condor as default Condor config file location <strong>DONE</strong>\n</li><li>Support new blahp types without changes in Condor <strong>DONE</strong>\n</li><li>Change gridmanager to allow extra arguments to remote_gahp <strong>DONE</strong>\n</li><li>Usage scenario transcript <strong>DONE</strong>\n</li><li>Upgrade blahp external in Condor to latest version <strong>DONE</strong>\n</li><li>Improve blahp handling of completed state <strong>DONE</strong>\n</li><li>Write/modify local installation script <strong>DONE</strong>\n</li><li>Write remote installation script <code>bosco_add_host</code> <strong>DONE</strong>\n<ul>\n<li>send blahp to remote CE\n</li></ul>\n</li><li>Change blahp's pbs configuration to assume a shared filesystem <strong>DONE</strong>\n</li><li>Make real screen capture of BOSCO installation <strong>DONE</strong>\n\n<p></p></li><li>Test assembled package\n</li></ul>\n\n<p><span class=\"section\"></span></p><h2>Usage Scenario</h2>\n\n<p>Here's a proposed terminal session showing the installation of BOSCO.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /tmp/condor-7.7.4/condor_install --bosco\nInstalling Condor from /tmp/condor-7.7.4 to /home/jfrey/.condor\n\nCondor has been installed into:\n    /home/jfrey/.condor\n\nConfigured condor using these configuration files:\n  global: /home/jfrey/.condor/condor_config\n  local:  /home/jfrey/.condor/local.nostos/condor_config.local\n\nIn order for Condor to work properly you must add the Condor bin\nand sbin directories (/home/jfrey/.condor/bin) to your PATH environment\nvariable. Created scripts which can be sourced by users to setup their\nCondor environment variables.  These are:\n   sh: /home/jfrey/.condor/condor.sh\n  csh: /home/jfrey/.condor/condor.csh\n\nAlso, you must run /home/jfrey/.condor/sbin/condor_master\nto start Condor.\n% . ~/.condor/condor.sh\n% condor_master\n% bosco_add_host cluster.foo.edu\njfrey@cluster.foo.edu's password:\nInstalling BOSCO on cluster.foo.edu...\nInstallation complete\n%\n</pre></div>\n\n\n<p>Here's a real terminal session showing the installation of BOSCO.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% tar zxvf condor-7.7.5-UW_development-rhel5.7-stripped.tar.gz\n% cd condor-7.7.5-UW_development-rhel5.7-stripped\n% ./condor_install --bosco\nInstalling Condor from /scratch/jfrey/build.bosco/condor-7.7.5-UW_development-rhel5.7-stripped to /afs/cs.wisc.edu/u/j/f/jfrey/bosco\n\nCondor has been installed into:\n    /afs/cs.wisc.edu/u/j/f/jfrey/bosco\n\nConfigured condor using these configuration files:\n  global: /afs/cs.wisc.edu/u/j/f/jfrey/bosco/etc/condor_config\n  local:  /afs/cs.wisc.edu/u/j/f/jfrey/bosco/local.ferdinand/condor_config.local\n\nIn order for Condor to work properly you must set your CONDOR_CONFIG\nenvironment variable to point to your Condor configuration file:\n/afs/cs.wisc.edu/u/j/f/jfrey/bosco/etc/condor_config before running Condor\ncommands/daemons.\nCreated scripts which can be sourced by users to setup their\nCondor environment variables.  These are:\n   sh: /afs/cs.wisc.edu/u/j/f/jfrey/bosco/condor.sh\n  csh: /afs/cs.wisc.edu/u/j/f/jfrey/bosco/condor.csh\n\n% . ~/bosco/condor.sh\n% condor_master\n% bosco_add_host e016.chtc.wisc.edu\nEnter password for bosco ssh key:\nEnter password to copy ssh keys to e016.chtc.wisc.edu:\njfrey@e016.chtc.wisc.edu's password:\nInstalling BOSCO on e016.chtc.wisc.edu...\nInstallation complete\n% emacs ~/bosco/local.ferdinand/condor_config.local\n# Add GRIDMANAGER_MAX_SUBMITTED_JOBS_PER_RESOURCE=10\n# This ensures that at most 10 jobs are sent to the batch system at a time.\n% cat pbs.desc\nuniverse = grid\ngrid_resource = pbs jfrey@e016.chtc.wisc.edu\nexecutable = /home/jfrey/pbs-test/job.sh\noutput = /home/jfrey/pbs-test/job.output.$(Cluster).$(Process)\nerror = /home/jfrey/pbs-test/job.error.$(Cluster).$(Process)\ntransfer_executable = false\nskip_filechecks = true\n+remote_iwd=\"/home/jfrey/pbs-test\"\nnotification = NEVER\nqueue 100\n% condor_submit pbs.desc\nSubmitting job(s).....\n100 job(s) submitted to cluster 1.\n%\n</pre></div>\n\n\n<p>Here are some questions about the installation process:\n</p><ul>\n<li>Should we rely on having <code>CONDOR_CONFIG</code> set in the environment?\n<ul>\n<li>The user has to source <code>~/bosco/condor.sh</code> to get the Condor <code>bin</code> and <code>sbin</code> directories in their PATH. This also sets CONDOR_CONFIG.\n</li><li>We have proposed adding <code>~/.condor/condor_config</code> as a location to look for the Condor config file. The installer can make a symlink from there to <code>~/bosco/etc/condor_config</code>.\n</li></ul>\n</li><li>Should the install script start condor_master for the user?\n</li><li>Do we want a mechanism to restart condor_master if it or the machine crashes?\n</li></ul>\n\n<p><span class=\"section\"></span></p><h2>Notes and Bugs</h2>\nThe BOSCO code currently lives on V7_7-bosco-publicbranch in the Condor git repository. To build the BOSCO release package, see <span class=\"wiki\"><a href=\"wiki?p=BuildingBosco\" title=\"Building Bosco\">BuildingBosco</a></span>.\n\n<p>Details about the BOSCO command-line tools are available in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2811\" onclick=\"get_ticket_and_populate_wrapper('2811'); return false;\" title=\"BOSCO Command Line Tools\">#2811</a></span>.\n\n</p><p><span class=\"section\"></span></p><h2>Historical </h2>\n\n<p>We originally had three proposals for what to do. They are arranged below in increasing amount of work required and simpler setup for the user. We decided on proposal 2, with modifications as the work progressed.\n\n</p><p><span class=\"subsection\"></span></p><h3>Option 1</h3>\nThese are the steps the user would need to perform:\n<ul>\n<li>On the user's submit machine\n<ul>\n<li>Install customized version of Condor and start condor_master\n<ul>\n<li>This will require installing as root or ensuring CONDOR_CONFIG is always set in their environment\n</li></ul>\n</li><li>Place ssh passphrase in the default file\n</li></ul>\n</li><li>On the PBS/LSF submit node\n<ul>\n<li>Untar blahp tarball in default location\n</li></ul>\n</li></ul>\n\n<p>The following work would have to be done. We estimate this would take 1-2 days.\n</p><ul>\n<li>Define default locations for passphrase file and blahp installation\n</li><li>Modify REMOTE_HOSTS in remote_gahp to have a default option\n</li><li>Modify REMOTE_HOSTS to have a username field with default option\n</li><li>Assemble slightly modified Condor tarball\n<ul>\n<li>Add remote_gahp script\n</li><li>Modify config parameters\n</li></ul>\n</li><li>Assemble blahp tarball and make publicly available\n</li><li>Write installation instructions\n</li></ul>\n\n<p><span class=\"subsection\"></span></p><h3>Option 2</h3>\nThese are the steps the user would need to perform:\n<ul>\n<li>On the user's submit machine\n<ul>\n<li>Install customized version of Condor and start condor_master\n<ul>\n<li>This can be done without root and without setting CONDOR_CONFIG in the environment\n</li></ul>\n</li><li>Place ssh passphrase in the default file\n</li></ul>\n</li><li>On the PBS/LSF submit node\n<ul>\n<li>Untar blahp tarball in default location\n</li></ul>\n</li></ul>\n\n<p>The following work would have to be done (in addition to the work for option 1).\n</p><ul>\n<li>Add <code>~/.condor/condor_config</code> to list of default config file locations (.5 days) (UW)\n</li><li>Modify condor_install to use <code>~/.condor</code> as the preferred installation location for personal Condors. (.5 days) (UW)\n<ul>\n<li><code>~/.condor</code> is LOCAL_DIR. RELEASE_DIR would be under <code>~/bosco/condor</code> or some such.\n</li></ul>\n</li><li>Add installation script to blahp tarball to auto-configure blahp config file (2 days)\n<ul>\n<li>Or modify config file (which is a shell script) to determine proper values each time it's invoked\n</li></ul>\n</li><li>Improve blahp's handling of staging files vs using shared filesystem (.5 days) (UW or CG)\n<ul>\n<li>Assume shared filesystem\n</li></ul>\n</li><li>Improve blahp's handling of pbs skipping complete state for some jobs (UW or CG)\n<ul>\n<li>Check how cream and gram handle this (2 days)\n</li><li>Add check for pbs configuration that fixes this and print error (.5 days)\n</li><li>Discuss improving blahp with its developers (4 days)\n</li></ul>\n</li><li>Change code to use separate ssh key for blahp authentication. (3 days) (UW)\n<ul>\n<li>Key is encrypted with hard-coded passphrase.\n</li><li>Write setup script for user machine that generates Condor ssh key and modifies ssh trusted_keys on cluster node\n</li></ul>\n</li><li>Add installation script that includes smoke test job (3 days) (UW or CG)\n<ul>\n<li>Without the traceroute test\n</li><li>Consider having OSG service that's set up correctly\n</li></ul>\n</li></ul>\n\n<p><span class=\"subsection\"></span></p><h3>Option 3</h3>\nThese are the steps the user would need to perform:\n<ul>\n<li>On the user's submit machine\n<ul>\n<li>Run a condor_install script\n</li><li>Place ssh passphrase in the default file\n</li></ul>\n</li><li>On the PBS/LSF submit node\n<ul>\n<li>Nothing\n</li></ul>\n</li></ul>\n\n<p>The following work would have to be done (in addition to the work for options 1 and 2).\n</p><ul>\n<li>Write install script that downloads correct version of Condor, configures it as a personal Condor, and starts condor_master (3 days)\n</li><li>Strip down modified Condor tarball to remove unneeded files (.5 days)\n<ul>\n<li>Remove execute-side files\n</li><li>Remove central manager files\n</li><li>Remove shadows\n</li><li>Remove gahps\n</li></ul>\n</li><li>Modify remote_gahp to install blahp on remote machine if it's not installed already (2 days)\n</li><li>Have remote_gahp choose correct blahp to install via one of these options:\n<ul>\n<li>Use CDE (<a class=\"external\" href=\"http://www.stanford.edu/~pgbovine/cde.html\">http://www.stanford.edu/~pgbovine/cde.html</a>) to create a universal blahp installation (2 days)\n</li><li>Use a modified form of the install script mentioned above to select the correct blahp tarball (1 day)</li></ul>\n</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Sep-12 13:43:29 by jfrey:</em> <br/>\n\nWaiting for decision from Miron about which option to do.\n\n<p></p><hr/>\n<em>2011-Nov-21 17:06:12 by jfrey:</em> <br/>\n\nI've created branch V7_7-bosco-publicbranch in the git repository to hold our changes for this work.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2657\" onclick=\"get_ticket_and_populate_wrapper('2657'); return false;\" title=\"Add ~/.condor/condor_config as default config location\">#2657</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd ~/.condor/condor_config as default config location</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2670\" onclick=\"get_ticket_and_populate_wrapper('2670'); return false;\" title=\"Support any batch system that blahp supports without code changes\">#2670</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nSupport any batch system that blahp supports without code changes</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2811\" onclick=\"get_ticket_and_populate_wrapper('2811'); return false;\" title=\"BOSCO Command Line Tools\">#2811</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBOSCO Command Line Tools</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2913\" onclick=\"get_ticket_and_populate_wrapper('2913'); return false;\" title=\"Fix RemoteIwd for PBS/LSF jobs\">#2913</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFix <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=RemoteIwd\" title=\"Remote Iwd\">RemoteIwd</a></span> for PBS/LSF jobs</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3014\" onclick=\"get_ticket_and_populate_wrapper('3014'); return false;\" title=\"Batch GAHP segfaults gridmanager in trunk\">#3014</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBatch GAHP segfaults gridmanager in trunk</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-22 11:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bbb335b67b8217a96244460886b50b10bd929e3b\">[33716]</a></span>: Add BOSCO to 7.9.1 version history. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-08 17:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ed0fc07e73a25358c07739e76f69646b03ae85d0\">[30538]</a></span>: Change BOSCO install to be schedd-only. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-08 15:17</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eba0846382c5a986041ea13b17639aaa4461baeb\">[30527]</a></span>: Change BOSCO install to work with both rpm and tarball setups. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-08 15:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e2ac9625777623305e16e4a4c8585d9bfaf5794f\">[30526]</a></span>: Tolerate $HOME not being set in remote_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-02 11:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7f74fb2a5780ffd7a4164bee74835d931036a179\">[30096]</a></span>: BOSCO: Get full environment on remote end for remote_gahp <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> When starting the blahp on a remote machine via remote_gahp, tell bash to use an interfactive session. Otherwise, the full environment isn't set up, and we may not be able to find the batch system command-line tools.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-02 11:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8bc2067807907870f2b09293811966e29bfce40a\">[30095]</a></span>: Change default blahp configuration to assume no access to PBS logs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-02 10:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cf5a11f00357eec0c6db796d07943a99c5386385\">[30094]</a></span>: Add bosco_add_host command. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> This command configures a remote cluster front-end machine for use with BOSCO. It creates an ssh key for bosco the first time it's run. It then copies the blahp to the given machine and configures ssh there to allow access using the bosco ssh key.\u00a0[...]\n (By Derek Weitzel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-01 16:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/41a57604adfa539ed410950da8afc0e08a0f34e5\">[30091]</a></span>: Remove debugging lines from remote_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-01 16:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c9165327cec8a32cd459803392f3a4d2787afdcf\">[30090]</a></span>: Fix remote_gahp to accept user@hostname notation for remote host <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-01 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6c9207e5cdafa67aae31fe13fb812b0ae6fda8d5\">[30088]</a></span>: Alter blahp config file to search for pbs/lsf binaries. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Rather than have guesses about the location of pbs/lsf directories in the blahp config file that are probably wrong, attempt to determine them from the PATH. Admins can still set the proper location if the PATH method doesn't work.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-01 15:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0530a3d4f7742e0f2e7fe6bc43c628754c3a6905\">[30087]</a></span>: Add INFNBatchResource class for blahp jobs in the gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> This gives us gridmanager ads and job submission throttles for blahp jobs.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Feb-01 12:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fa2f0e208308872492e12b3ed275b6972e8cc8c0\">[30070]</a></span>: Some minor fixes to remote_gahp <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> * Change ssh key locations to match bosco_add_host * Divert stdout of local commands to stderr  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-30 18:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ab736ecc791a49c37b32c2cc53d5c797c1abf89\">[30026]</a></span>: Make BOSCO useable in a standard Condor installation. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Remove the requirement to change the value of BATCH_GAHP in order to use BOSCO. Instead, new config param REMOTE_GAHP points to the remote_gahp script and the gridmanager will use it instead of BATCH_GAHP for blah jobs when <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridResource\" title=\"Grid Resource\">GridResource</a></span> has\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-25 00:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/faf159be05173f99a20b8be74b350cd922b5896a\">[29193]</a></span>: Pull new blahp tarball from standard web server. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-25 00:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b7253bc9499ad221793715b28bdf8826e94d6758\">[29192]</a></span>: Configure blahp to assume a shared filesystem. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Committer: Jaime Frey  (By Marco Mambelli )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-18 15:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/079698f20c192f1af8101bb074cc09fbb7e61a49\">[29148]</a></span>: Change file locations in remote_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Change the locations of files used by remote_gahp. Also, invoke the remote batch_gahp without a wrapper script. To do this, we need to set GLITE_LOCATION in the remote process's environment.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-18 15:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c8217e8354f69c8c8f5a6ea6a928628c718c727f\">[29147]</a></span>: Add --bosco option to condor_configure <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> This option configures a BOSCO installation. That is, a personal Condor installed in ~/bosco with BATCH_GAHP=$(SBIN)/remote_gahp.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-18 15:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b0e885df3d5e9beba9f7461d5032af94abfb1127\">[29146]</a></span>: Include remote_gahp in the release. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-23 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6916f463321e251a8ff1adfe5b233c65f6ba5380\">[28911]</a></span>: Patch blahp to better handle job completion detection with PBS. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Committer: Jaime Frey  (By Derek Weitzel )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-13 16:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a10d31ae784ccc5a7164370307d8d554002d41d3\">[28754]</a></span>: Update blahp external to 1.16.3.3. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> This is the latest version of the blahp, which we want to develop against and contribute changes upstream.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-01 10:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/02042db62b08d36d5d1fe7e1a294e30997ecd66e\">[28523]</a></span>: Allow multiple argument to the remote_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-30 15:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f34d84f5ee2fdbceda42df36f4c56328dff74e33\">[28508]</a></span>: Updates to remote_gahp for blahp-over-ssh. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> Comment from Marco Mambelli: here is the updated remote_gahp: - it has the agreed default - it still allows per-host default in the script - it has also command line options Use -help to see details. Committer: Jaime Frey  (By Marco Mambelli )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Nov-23 10:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e23e38648da842ec5667fb2acd8f7902b07e661a\">[28414]</a></span>: Add remote_gahp script for running the blahp remotely. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2421\" onclick=\"get_ticket_and_populate_wrapper('2421'); return false;\" title=\"Create simple installation for current blahp over ssh\">#2421</a></span> remote_gahp is a small script that allows the gridmanager to run the blahp on a remote system via ssh. This allows submission to a pbs/lsf/sge cluster on a remote machine without using Condor-C.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Sep-25 17:23", "status": "resolved", "created": "2011-Aug-25 13:49", "fixed_version": "2011-Aug-25 13:49", "broken_version": "", "priority": "4", "subsystem": "Unknown", "assigned_to": "jfrey", "derived_from": "#1938", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dweitzel@cse.unl.edu,marco@hep.uchicago.edu", "due_date": ""}