{"id": 7263, "title": "Ticket #7263: Build RTD with most mature Python bindings available for version", "description": "<blockquote>\nPer site policy, any wheel that is uploaded to PyPI must have a unique version string compared to any prior uploaded wheels. That includes wheels that have been deleted. So if we somehow flub a release to PyPI, the only way to correct this is by uploading a post-release version. (For PyPI, this is signified by adding \".postN\" to the version string.) This creates a problem when building documentation for Read The Docs, as our configuration for our documentation build is coded to <code>pip install htcondor==${VERSION_STRING}</code>, which will <em>not</em> grab a post-release version (e.g. <code>${VERSION_STRING}.post1</code>).\n\n<p>We can do better by taking advantage of =pip='s ability to do logic with version strings. It's valid, for example, to do this:\n\n</p><p><code>pip install htcondor&gt;=8.9.3,&lt;8.9.4</code>\n\n</p><p>This will grab the latest version of the python bindings labeled as part of the 8.9.3 release, even if that includes a post release. I will change our doc build config file to use this logic (<code>&gt;=${CURRENT_VERSION},&lt;${CURRENT_VERSION_MINOR+1}</code>) instead of being coded to look for <code>${CURRENT_VERSION}</code> and only <code>${CURRENT_VERSION}</code>.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-17 15:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e703b9d41b1d52dc4d66e9c9931184f5d0418da0\">[57850]</a></span>: Build RTD with most mature bindings released on PyPI for given version <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7263\" onclick=\"get_ticket_and_populate_wrapper('7263'); return false;\" title=\"Build RTD with most mature Python bindings available for version\">#7263</a></span> Uses the fact that the earliest pre-release version string allowed on PyPI is (or will be normalized to) ${VERSION}a0, and we impose a hopefully reasonable maximum on post-releases to 999 (i.e. ${VERSION}.post999 in PyPI-normalized-version-string\u00a0[...]\n (By Jason Patton )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2019-Oct-02 15:27", "status": "resolved", "created": "2019-Sep-17 14:35", "fixed_version": "2019-Sep-17 14:35", "broken_version": "", "priority": "1", "subsystem": "Packaging", "assigned_to": "jpatton", "derived_from": "", "creator": "jpatton", "rust": "", "customer_group": "other", "visibility": "public", "notify": "jpatton@cs.wisc.edu,karpel@wisc.edu,tim@cs.wisc.edu", "due_date": ""}