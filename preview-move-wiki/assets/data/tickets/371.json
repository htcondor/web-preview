{"id": 371, "title": "Ticket #371: Timezone handling in new ClassAd functions inconsistent", "description": "<blockquote>\nIn new <span class=\"quote\">ClassAds</span> have a basic datatype call <span class=\"quote\">AbsTime</span>, which represents a timestamp including a timezone offset. There are several <span class=\"quote\">ClassAd</span> functions that split an <span class=\"quote\">AbsTime</span> into its component parts (year, month, day, hours, etc). The splitTime() function returns a <span class=\"quote\">ClassAd</span> with each component stored in a separate attribute. formatTime() is a printf-like function that returns a string containing the time in whatever format is given. A set of functions called getYear(), getMonth(), getHours(), etc. return the appropriate component of the given <span class=\"quote\">AbsTime</span>.\n\n<p>When splitTime() and formatTime() split up an <span class=\"quote\">AbsTime</span> into its components, they do so in the timezone given in the <span class=\"quote\">AbsTime</span>, which may be different than the local timezone. getYear() and friends split up the given AbsTime() according to the local timezone.\n\n</p><p>In the following classad snippet, <code>a</code> and <code>b</code> will evaluate to different values if the local timezone isn't UTC:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">t = AbsTime(\"2009-4-8T12:00:00z\")\na = splitTime(t).hours\nb = getHours(t)\n</pre></div>\n\n\n<p>This inconsistency is likely to be confusing to users. We should make all of these functions consistent.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2013-Jan-30 13:58", "status": "new", "created": "2009-Apr-08 14:48", "fixed_version": "2009-Apr-08 14:48", "broken_version": "", "priority": "5", "subsystem": "Libs", "assigned_to": "PitS", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}