{"id": 1766, "title": "Ticket #1766: ARCH=INTEL even when running on x64 versions of Windows", "description": "<blockquote>\nSince Condor is running 32 bit binaries on all flavors of Windows, these binaries run in the WOW64 sandbox on x64 flavors of Windows.  So when Condor asks for the system architecture, it gets back the arch of the WOW64 sandbox rather than the native arch.\n\n<p>The fix is to call <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GetNativeSystemInfo\" title=\"Get Native System Info\">GetNativeSystemInfo</a></span> but this API is not available on Windows 2000, so this problem was complex to fix before we dropped Win2k support.\n\n</p><p>The workaround is simple, just add ARCH=X86_64 to condor_config.local for machines that are running a x64 Windows OS.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-11 13:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25762\">[25762]</a></span>: history for bug fix <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1766\" onclick=\"get_ticket_and_populate_wrapper('1766'); return false;\" title=\"ARCH=INTEL even when running on x64 versions of Windows\">#1766</a></span> - ARCH=INTEL on x64 versions of Windows  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-11 12:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=19380\">[19380]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1766\" onclick=\"get_ticket_and_populate_wrapper('1766'); return false;\" title=\"ARCH=INTEL even when running on x64 versions of Windows\">#1766</a></span> get the native OS architecture (ARCH) on windows rather than the architecture of the WOW64 sandbox (which is always INTEL since there is no x64 build of condor.). This change effects all callers of the sysapi_condor_arch() function, not just the published ARCH attribute.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-May-09 10:10", "status": "resolved", "created": "2010-Nov-11 10:36", "fixed_version": "2010-Nov-11 10:36", "broken_version": "v070504", "priority": "2", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}