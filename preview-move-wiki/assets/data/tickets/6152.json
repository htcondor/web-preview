{"id": 6152, "title": "Ticket #6152: Job submitter crash if submit requirements or transforms fail", "description": "<blockquote>\nDuring job submission, if a submit requirement or transform fails, the schedd will send a serialized <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> object describing the error. The client API functions (RemoteCommitTransaction(), DisconnectQ()) take an optional <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> pointer, which receives the deserialized error data. This parameter defaults to NULL. But the pointer is always dereferenced when error data is received. Most callers of the client functions don't pass a non-NULL pointer.\n\n<p>This was observed on a LIGO machine, where the Job Router repeatedly crashed when the routed job violated a submit requirement.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Feb-16 13:28:37 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>At some point, we should think about adding the plumbing to actually report the errors here and elsewhere, but this is the correct fix for the stable series.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-16 14:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50172\">[50172]</a></span>: Docs for job submitter crash on failed submit bug fix. <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=6152\" onclick=\"get_ticket_and_populate_wrapper('6152'); return false;\" title=\"Job submitter crash if submit requirements or transforms fail\">#6152</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-15 16:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50163\">[50163]</a></span>: Fix crash on submit failure if <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> object isn't provided. <span class=\"ticket\"><a class=\"defer\" href=\"/tickets?ticket=6152\" onclick=\"get_ticket_and_populate_wrapper('6152'); return false;\" title=\"Job submitter crash if submit requirements or transforms fail\">#6152</a></span> The <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> pointer argument to RemoteCommitTransaction() is supposed to be optional. Don't dereference a NULL pointer.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Feb-16 15:36", "status": "defer", "created": "2017-Feb-15 16:17", "fixed_version": "2017-Feb-15 16:17", "broken_version": "v080305", "priority": "5", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "#2640", "creator": "jfrey", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "pcouvare@caltech.edu", "due_date": ""}