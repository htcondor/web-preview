{"id": 1522, "title": "Ticket #1522: support directories in the input/output file transfer lists", "description": "<blockquote>\nIt would be useful to support transfer of directories.  For example, it may sometimes be convenient to describe workflows using directories as containers for input/ouput so that the specifics of the files produced and consumed by a given run of the application don't have to affect the workflow description.  In some cases, handling directories would also simplify or eliminate the need for job wrapper scripts that untar inputs and tar up outputs.\n\n<p>I propose supporting the following:\n\n</p><p></p><ol>\n<li>A directory in the file transfer list is copied, along with all of its contents.  The directory is named on the remote side in the same way that files are treated: i.e. if a path to the directory is specified, only its basename is created on the remote side, unless a name remap specifies otherwise.\n\n<p></p></li><li>Analogous to rsync syntax, if a directory name in the file transfer list is followed by a slash, this has special meaning. It means that the contents of the directory should be copied but not the directory itself.\n\n<p></p></li><li>Symlinks to files should be followed when opening files for transfer, because that is the existing behavior.  Symlinks to directories are forbidden until we have time to implement support for them.  When we do implement it, internal symlinks should be recreated as relative symlinks on the remote side (i.e. we don't follow internal symlinks).  External symlinks should be followed and we must detect circularity and treat it as an error.\n\n<p></p></li><li>When output is auto-selected (i.e. by looking for new files in the output sandbox), we keep the existing behavior of ignoring subdirectories.  If the user wants output from subdirectories, then explicit output selection should be used.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2010-Jul-23 17:07:25 by danb:</em> <br/>\n\nI am resolving this ticket, since what it proposes has largely been done.  What remains to do should be proposed in separate tickets: support directories in other grid universes, and support symlinks to directories.\n\n<p></p><hr/>\n<em>2010-Sep-16 14:56:13 by danb:</em> <br/>\n\nJaime found a bug with this feature.  condor_submit no longer complains if the stdout/stderr point to directories.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1844\" onclick=\"get_ticket_and_populate_wrapper('1844'); return false;\" title=\"shadow fails to replace output directories in spool\">#1844</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nshadow fails to replace output directories in spool</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=2385\" onclick=\"get_ticket_and_populate_wrapper('2385'); return false;\" title=\"Create a test for transferring directories\">#2385</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCreate a test for transferring directories</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jul-23 15:51</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25577\">[25577]</a></span>: Documented changes to file transfer related to addition of support for directories. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1522\" onclick=\"get_ticket_and_populate_wrapper('1522'); return false;\" title=\"support directories in the input/output file transfer lists\">#1522</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jul-23 13:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18630\">[18630]</a></span>: Added support for directory trees in Condor's file transfer mode. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1522\" onclick=\"get_ticket_and_populate_wrapper('1522'); return false;\" title=\"support directories in the input/output file transfer lists\">#1522</a></span> This does NOT cause auto-selection of output to look in subdirectories.\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Oct-20 13:56", "status": "resolved", "created": "2010-Jul-21 16:43", "fixed_version": "2010-Jul-21 16:43", "broken_version": "v070504", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu", "due_date": ""}