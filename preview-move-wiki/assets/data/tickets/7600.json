{"id": 7600, "title": "Ticket #7600: Implement resource provisioning in condor", "description": "<blockquote>\nWe want to implement resource provisioning into the HTCondor system. Specifically, we want to introduce a special kind of job, a \"provisioner job\", whose purpose is to acquire compute resources on remote clusters (ie. Amazon EC2, Argonne Cooley). The main use case is for users to put a provisioner node in their DAGMan workflows, such that other nodes in the DAG execute on the allocated resources.\n\n<p>This is a master ticket for this work, which loosely includes the following tasks:\n\n</p><p></p><ul>\n<li>Define a special type of provisioner job which the condor_schedd recognizes as different from regular jobs. If a provisioner job fails, the condor_schedd always wants to recover it so we don't leave expensive compute resources running indefinitely.\n</li><li>Implement a provisioner node in condor_dagman.\n</li><li>Create an Amazon EC2 provisioner script which uses the condor_annex to allocate EC2 compute resources.\n</li></ul>\n\n<p>Child tickets:\n\n</p><p></p><ul>\n<li><span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5622\" onclick=\"get_ticket_and_populate_wrapper('5622'); return false;\" title='Allow \"provisioning\" nodes in a DAG?'>#5622</a></span> adds a basic, minimal provisioner node into condor_dagman. It's mostly just plumbing at this point, still lots of DAGMan work to be done in future tickets.\n</li><li><span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=7333\" onclick=\"get_ticket_and_populate_wrapper('7333'); return false;\" title=\"Develop an EC2 provisioner job based on condor_annex\">#7333</a></span> implements an Amazon EC2 provisioner based on the condor_annex. This is the executable that actually requests and later terminates the compute resources.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2020-Dec-04 12:36:28 by coatsworth:</em> <br/>\n\nMiron's thinking has evolved on this topic. Resource provisioning was initially envisioned as a first-class citizen in DAGMan; more recently, Miron is thinking about provisioning happening in a regular node as part of a DAGMan workflow.\n\n<p>This work is currently being continued in <a class=\"external\" href=\"https://opensciencegrid.atlassian.net/browse/HTCONDOR-95\">https://opensciencegrid.atlassian.net/browse/HTCONDOR-95</a>, in which a Slurm provisioner is built into a regular DAGMan workflow. If we ever decide to revisit implementing a first-class DAGMan provisioner, I'll add links to it here as well as the above Jira ticket.\n\n</p><p>For now, I'm closing this ticket.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5622\" onclick=\"get_ticket_and_populate_wrapper('5622'); return false;\" title='Allow \"provisioning\" nodes in a DAG?'>#5622</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAllow \"provisioning\" nodes in a DAG?</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7610\" onclick=\"get_ticket_and_populate_wrapper('7610'); return false;\" title=\"DAGMan should wait for provisioner ready state before submitting jobs\">#7610</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDAGMan should wait for provisioner ready state before submitting jobs</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=7786\" onclick=\"get_ticket_and_populate_wrapper('7786'); return false;\" title=\"Add tool to shut down + resume condor_dagman and provisioner jobs\">#7786</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nAdd tool to shut down + resume condor_dagman and provisioner jobs</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "", "type": "enhance", "last_change": "2020-Dec-04 12:36", "status": "abandoned", "created": "2020-Apr-15 15:19", "fixed_version": "2020-Apr-15 15:19", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}