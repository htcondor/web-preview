{"id": 7729, "title": "Ticket #7729: Negotiator given low priority in collector when using family session", "description": "<blockquote>\nWhen the family security session is in use, the negotiator's queries are given low priority by the collector. They should be getting high priority. This is due to the collector consulting the Subsystem attribute of the security policy ad to get the client's subsystem. For non-negotiated security sessions, each daemon sets Subsystem to its own daemon type. So the collector thinks queries from the negotiator are coming from a collector.\n\n<p>As a short-term fix, we will have the collector give high priority to queries that it thinks are coming from a collector. This will give high priority to queries for all daemons in the same family process tree, but no other daemons do queries that require a forked child. Also, if a central manager is also running a schedd or startd, then the admin is probably not too worried about scalability.\n\n</p><p>Ticket <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=7722\" onclick=\"get_ticket_and_populate_wrapper('7722'); return false;\" title=\"NonNegotiated Security Sessions have bad Subsystem attribute\">#7722</a></span> outlines a better fix, but it will have to wait for a future release.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Sep-28 15:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/069eeac89926caa0833be7af278825f27fb97cae\">[61352]</a></span>: Docs for negotiator query priority bug fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7729\" onclick=\"get_ticket_and_populate_wrapper('7729'); return false;\" title=\"Negotiator given low priority in collector when using family session\">#7729</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jul-07 11:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4f5ac6294bfb9626855e10485f4a440231e0df65\">[60092]</a></span>: Fix negotiator priority level in collector with family session. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7729\" onclick=\"get_ticket_and_populate_wrapper('7729'); return false;\" title=\"Negotiator given low priority in collector when using family session\">#7729</a></span> Before, when using the non-negotiated family security session, the negotiator was given low priority in the collector (because it thought the client subsystem was collector). Now, the collector gives high prority to queries where it\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2020-Sep-28 16:01", "status": "resolved", "created": "2020-Jul-07 10:44", "fixed_version": "2020-Jul-07 10:44", "broken_version": "", "priority": "2", "subsystem": "DaemonsCM", "assigned_to": "jfrey", "derived_from": "#7722", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}