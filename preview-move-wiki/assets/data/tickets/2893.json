{"id": 2893, "title": "Ticket #2893: Condor is willing to select down network interfaces", "description": "<blockquote>\nnetwork_interface_to_ip is willing to select an interface that is down.  It does so because sysapi_get_network_device_info_raw (<a class=\"file\" href=\"rlog?f=src/condor_sysapi/net_dev_info.cpp\">/src/condor_sysapi/net_dev_info.cpp</a>) doesn't include or filter on the up/downness of an interface.  Fixing this will necessitate changes all three implementations of sysapi_get_network_device_info_raw: WIN32, HAVE_GETIFADDRS, and SIOCGIFCONF.</blockquote>", "remarks": "<blockquote>\n<em>2012-Apr-09 15:42:28 by adesmet:</em> <br/>\n\nHAVE_GETIFADDRS implemented\n\n<p></p><hr/>\n<em>2012-Apr-09 15:55:21 by adesmet:</em> <br/>\n\nSIOCGIFCONF won't return down interfaces.  Updating code to add down interfaces seems would be a nuisance and potentially low-portability (The Linux man page recommends nosing in /proc/net/dev).  As allowing down interfaces (albeit at a very low priority) would be new functionality, not bothering.\n\n<p></p><hr/>\n<em>2012-Apr-10 15:13:47 by johnkn:</em> <br/>\n\nthe windows patch for <span class=\"chng\"><a href=\"chngview?cn=31603\">[31603]</a></span> - looks good to me. -tj</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/551/net_dev_info.win32.patch\">net_dev_info.win32.patch</a>\n625 bytes added by adesmet on 2012-Apr-10 16:37:52 UTC.\n<br/>\nProposed patch for Windows.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-10 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=31603\">[31603]</a></span>: ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2893\" onclick=\"get_ticket_and_populate_wrapper('2893'); return false;\" title=\"Condor is willing to select down network interfaces\">#2893</a></span>: Condor is willing to select down network interfaces: Windows fix.  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-10 11:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=31596\">[31596]</a></span>: add missing gittrac ticket number to new version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2893\" onclick=\"get_ticket_and_populate_wrapper('2893'); return false;\" title=\"Condor is willing to select down network interfaces\">#2893</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Apr-10 11:23</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=31589\">[31589]</a></span>: Document bug fix <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2893\" onclick=\"get_ticket_and_populate_wrapper('2893'); return false;\" title=\"Condor is willing to select down network interfaces\">#2893</a></span>:  (By Alan De Smet )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Mar-26 13:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=31572\">[31572]</a></span>: Code in place to avoid selecting down interfaces. Linux(ish) only at the moment. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2893\" onclick=\"get_ticket_and_populate_wrapper('2893'); return false;\" title=\"Condor is willing to select down network interfaces\">#2893</a></span> There are three code paths for enumerating interfaces: Windows, getifaddrs (Modern Linux), and ioctl(SIOCGIFCONF) (Unknown). At the moment detecting down interfaces is only implemented for getifaddrs. The other platforms\u00a0[...]\n (By Alan De Smet )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-Apr-10 15:15", "status": "resolved", "created": "2012-Mar-15 11:41", "fixed_version": "2012-Mar-15 11:41", "broken_version": "v070705", "priority": "4", "subsystem": "", "assigned_to": "adesmet", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": "20120330"}