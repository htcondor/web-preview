{"id": 5217, "title": "Ticket #5217: utmp isn't fully read for keyboard idle", "description": "<blockquote>\nIn fixing coverity-found ignored function returns, we assumed that fread returns number of bytes read, when indeed it returns number of items read.  This means that we were only reading the first item in the /var/run/utmp file, not the whole contents, and were missing keyboard idle times.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-13 13:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c15230e60a67a6251fad9fe7f8b15e1d7da1530a\">[45613]</a></span>: minor edit and correct spelling of 8.3.8 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5217\" onclick=\"get_ticket_and_populate_wrapper('5217'); return false;\" title=\"utmp isn't fully read for keyboard idle\">#5217</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-12 15:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0f16a93c46d1e5789e8245776871403b18fbf7e2\">[45594]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5217\" onclick=\"get_ticket_and_populate_wrapper('5217'); return false;\" title=\"utmp isn't fully read for keyboard idle\">#5217</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-12 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2121250a858c58ab2e5ee75e6ba92fe8a8b26ed8\">[45591]</a></span>: Correctly parse /var/run/utmp to get <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=KeyboardIdle\" title=\"Keyboard Idle\">KeyboardIdle</a></span> correct <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5217\" onclick=\"get_ticket_and_populate_wrapper('5217'); return false;\" title=\"utmp isn't fully read for keyboard idle\">#5217</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Aug-12 15:19", "status": "resolved", "created": "2015-Aug-12 12:57", "fixed_version": "2015-Aug-12 12:57", "broken_version": "v080307", "priority": "1", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": "20150812"}