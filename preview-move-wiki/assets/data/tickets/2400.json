{"id": 2400, "title": "Ticket #2400: Provide feedback when startup is complete", "description": "<blockquote>\nThere is currently no great way to know when Condor has started up.  Greg suggested something like Apache where it sends SIGUSR1 to its PPID once startup is complete.\n\n<p>This will be useful for testing Condor.  Also, Metronome would like this feature since it is using a personal condor to run each task as a Condor job (for future concurrency).</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-18 17:14:01 by matt:</em> <br/>\n\nHow are you defining \"started up\"?\n\n<p></p><hr/>\n<em>2011-Aug-19 10:02:03 by kronenfe:</em> <br/>\n\n@Matt: Started up could be defined as \"all the daemons are ready\".  This makes the problem much trickier since the master has to know the states of each daemon (in turn, they may have to send SIGUSR1 back to the master).\n\n<p>Started up could also mean that the master has completed it's initialization and not have any information about the state of the child daemons.  That's certainly easier to implement, but it's not as useful because we want to begin testing/using Condor immediately and not have other race conditions to worry about.\n\n</p><p>I know it's not an easy problem but Greg and I have had a few discussions about it in the past weeks.  I expect him to have thoughts on this.\n\n</p><p>-scot\n\n</p><p></p><hr/>\n<em>2011-Aug-19 12:31:56 by matt:</em> <br/>\n\n@Scot: If you're ok with burning USR1 and USR2 you could have USR1 mean started successfully (for all daemons including master) and let master also raise USR2 once it has received all appropriate USR1s from its children. You'd probably want to only look for USR1 from DC_DAEMON_LIST daemons, or even better start using daemon associated features, e.g.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">STARTD = $(SBIN)/condor_startd\nDC_DAEMON_LIST = STARTD\nvs\nSTARTD = $(SBIN)/condor_startd\nSTARTD_ISDC = True\n</pre></div>\n\n\n<p>In this case maybe STARTD_USR1_NOTIFY = True, see <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=2401\" onclick=\"get_ticket_and_populate_wrapper('2401'); return false;\" title=\"Turn DC_DAEMON_LIST into DAEMON specific features\">#2401</a></span></p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2015-Nov-11 08:26", "status": "abandoned", "created": "2011-Aug-18 17:01", "fixed_version": "2011-Aug-18 17:01", "broken_version": "", "priority": "5", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "kronenfe", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}