{"id": 2269, "title": "Ticket #2269: Deprecated header usage in GCC 4.6.0", "description": "<blockquote>\nAmong the thousands of warnings in compiling Condor with gcc 4.6.0 (Fedora 15), there is the following about a deprecated header that causes a warning per CXX file.\n\n<p>I know Fedora 15 support isn't top-of-the-pile, but we might as well be thinking about the future!\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">[ 89%] Building CXX object src/condor_dagman/CMakeFiles/condor_dagman.dir/job.cpp.o\nIn file included from /usr/lib/gcc/x86_64-redhat-linux/4.6.0/../../../../include/c++/4.6.0/ext/hash_map:61:0,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/classad/classad/classad_stl.h:30,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/classad/classad/classad.h:28,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/classad/classad/classad_distribution.h:25,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/condor_utils/compat_classad.h:27,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/condor_includes/condor_classad.h:30,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/condor_daemon_client/dc_transfer_queue.h:31,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/condor_schedd.V6/transfer_queue.h:26,\n                 from /home/bbockelm/projects/fedpkg/condor/condor-7.6.0/src/condor_schedd.V6/transfer_queue.cpp:22:\n/usr/lib/gcc/x86_64-redhat-linux/4.6.0/../../../../include/c++/4.6.0/backward/backward_warning.h:33:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated. [-Wcpp]\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nGreg, any updates on this?  Someone told me today that your patch for this was pulled due to some CREAM/BLAHP issue, but I wasn't quite sure what.\n\n<p>Can we at least pass \"-Wno-deprecated\" for now?\n\n</p><p></p><hr/>\n<em>2011-Oct-25 20:16:43 by gthain:</em> <br/>\n\nSo, the problem is that cream and blahp use the classads we build, but don't configure with cmake (or our cmake really).  So, blahp and cream don't run our custom unordered_map feature detection code, and then all kinds of bad things happen.  I talked it over with jfrey, who suggested that instead of doing ifdef HAS_TR1_UNORDERED_MAP, we have cmake emit the correct header file for classads.\n\n<p>Or, we could just drop all compilers that don't support TR1 for condor 7.8....</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-30 12:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2400d55a5e693a9cb506d1464fc611f64d060ddd\">[28049]</a></span>: Switch classad to use tr1 hash tables <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2269\" onclick=\"get_ticket_and_populate_wrapper('2269'); return false;\" title=\"Deprecated header usage in GCC 4.6.0\">#2269</a></span> Let's see if this works. Need to avoid cmake feature detection because this header is used outside of Condor in cream/blahp/etc., which don't build with cmake  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-May-03 09:33", "status": "resolved", "created": "2011-Jun-25 13:03", "fixed_version": "2011-Jun-25 13:03", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}