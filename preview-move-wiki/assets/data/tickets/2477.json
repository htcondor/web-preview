{"id": 2477, "title": "Ticket #2477: Break hard circular dependency between dprintf and config", "description": "<blockquote>\nCurrently the dprintf system uses config while initializing, while config itself uses dprintf to output log messages.  While dprintf does have the ability to buffer messages it receives before it knows what to do with them, dprintf really should be as isolated as possible from the rest of the util library.\n\n<p>Plan: Create a class that abstracts away calls to config.  This class will hold function pointers that can be set to the functions from Condor's config or a custom one written by a third party.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-25 11:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27976\">[27976]</a></span>: Change dprintf_config in contrib code to match new convention. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-24 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27964\">[27964]</a></span>: Final tweaks to breaking dependency between dprintf and config. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-13 14:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27808\">[27808]</a></span>: Tweak ifdefs to deal with C externs. Convert probe_process to C++ file. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-12 12:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27784\">[27784]</a></span>: Pass in function pointers to all other callsites of dprintf_config in non-contrib code. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-28 14:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27455\">[27455]</a></span>: Slightly rearchitecture the way the wrapper class is passed to the dprintf_system as per Pete's advice. We now have a convenience function that allocates a new instance of the wrapper class and fills it in. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-27 14:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27433\">[27433]</a></span>: Add the wrapper class itself. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Sep-27 14:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=27428\">[27428]</a></span>: Change dprintf_config callsites to use param wrapper class. Add wrapper class to build. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2477\" onclick=\"get_ticket_and_populate_wrapper('2477'); return false;\" title=\"Break hard circular dependency between dprintf and config\">#2477</a></span>.  (By Ziliang Guo )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Oct-25 11:03", "status": "resolved", "created": "2011-Sep-19 17:19", "fixed_version": "2011-Sep-19 17:19", "broken_version": "v070400", "priority": "4", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "#2476", "creator": "ziliang", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}