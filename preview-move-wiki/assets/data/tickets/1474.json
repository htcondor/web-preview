{"id": 1474, "title": "Ticket #1474: job ad schema - schedd tolerance w/o reliance on condor_submit", "description": "<blockquote>\nWhat is a Job Ad's Schema? There is one. It is a combination of the expectations from all the components that operate on a job. For instance, the Schedd expects an Owner, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobStatus\" title=\"Job Status\">JobStatus</a></span>, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobUniverse\" title=\"Job Universe\">JobUniverse</a></span>, Requirements etc. condor_q also wants <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CpuTime\" title=\"Cpu Time\">CpuTime</a></span> etc. The shadow wants an Iwd. Startd expects Requirements, etc. The starter wants a Cmd. Etc...\n\n<p>The Schedd currently ignores jobs that are missing an Owner, a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobStatus\" title=\"Job Status\">JobStatus</a></span> or a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobUniverse\" title=\"Job Universe\">JobUniverse</a></span>. The Schedd is thus relying on condor_submit to provide all these attributes. This reliance isn't even safe because of qedit, ex.\n\n</p><p></p><div class=\"verbatim\">\n<pre>$ condor_qedit 514.0 JobUniverse UNDEFINED\nSet attribute \"JobUniverse\".\n\n$ condor_q -l | grep Uni\nJobUniverse = UNDEFINED\n\nScheddLog after restart: Job 514.0 has no JobUniverse attribute.  Removing....\n</pre></div>\n\n\n<p>Preventing qedit from changing attributes is not a proper solution. Preventing the schedd from allowing these attributes to be changed is not proper either. Value validation is proper, and making the components that deal with job ads to have sane and consistent defaults.</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:08:44 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-02 06:25", "status": "new", "created": "2010-Jun-23 13:12", "fixed_version": "2010-Jun-23 13:12", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": ""}