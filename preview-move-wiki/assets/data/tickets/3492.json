{"id": 3492, "title": "Ticket #3492: EC2 GAHP doesn't like the new Eucalyptus XML", "description": "<blockquote>\nEucalyptus now returns (or can return) a different style of (valid) XML, in which all the tags are explicitly in the 'euca' namespace.  The parsers in the EC2 GAHP presently search for tag only in the default namespace.  Unfortunately, Expat (our XML parser) doesn't appear to have an option to recognize and discard namespaces, so this fix will require a lot of little code changes.</blockquote>", "remarks": "<blockquote>\n<em>2013-Feb-13 18:47:52 by tlmiller:</em> <br/>\n\nI had a clever idea that made this quick to work around.  Testing this work-around revealed an incompatibility in the XML that I also worked around.  However, that incompatibility also had a simple work-around.  Testing this revealed a serious bug in the response-parsing code.  Although we usually just ended up ignoring the spurious empty status report thereby created, sometimes the bug would eat important information about an instance and cause it go on hold, claiming that the cloud service had purged its records.  With this fix, all three of the EC2 implementations I could test (the Nimbus server is down at the moment) now seem to work.\n\n<p>I need to do some further investigation to see what this might mean for 7.8.x.\n\n</p><p></p><hr/>\n<em>2013-Feb-18 13:27:11 by tlmiller:</em> <br/>\n\nSince 7.8.x doesn't support the euca3 'protocol', that part of this fix is irrelevant.  Its response-parsing code also appear to be adequate, although I don't know if this is a result of asking for statuses one at a time, or that it uses a different version of the REST API.\n\n<p></p><hr/>\n<em>2013-Feb-20 16:12:34 by jfrey:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p></p><ul>\n<li>This code looks good.\n</li></ul>\n\n<p></p><hr/>\n<em>2013-Feb-21 13:14:31 by tlmiller:</em> <br/>\n\nDocumentation in commit.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Mar-11 12:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/26e1ccc752b5f7d8309b891a0dfd9e897750dbf4\">[35123]</a></span>: edit 7.9.5 version history item ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3492\" onclick=\"get_ticket_and_populate_wrapper('3492'); return false;\" title=\"EC2 GAHP doesn't like the new Eucalyptus XML\">#3492</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Feb-18 13:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a5d49a68d6ee22787e0810bc08492d612f22d6b7\">[34955]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3492\" onclick=\"get_ticket_and_populate_wrapper('3492'); return false;\" title=\"EC2 GAHP doesn't like the new Eucalyptus XML\">#3492</a></span>) Fix some response-parsing bugs.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Feb-21 13:14", "status": "resolved", "created": "2013-Feb-13 13:44", "fixed_version": "2013-Feb-13 13:44", "broken_version": "v070904", "priority": "3", "subsystem": "Grid", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}