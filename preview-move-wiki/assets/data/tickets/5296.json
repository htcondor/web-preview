{"id": 5296, "title": "Ticket #5296: Starter needs to receive opaque credential, store, and activate it", "description": "<blockquote>\nIf a job has attribute \"<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=SendCredential\" title=\"Send Credential\">SendCredential</a></span> == TRUE\" (see ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5309\" onclick=\"get_ticket_and_populate_wrapper('5309'); return false;\" title=\"Have condor_submit use job attribute to decide if sending uberticket\">#5309</a></span>) and no user credential already exists in SEC_CREDENTIAL_DIR, then before starting the job we must:\n\n<p></p><ol>\n<li>issue an RPC to the shadow to fetch the credential and store it securely in SEC_CREDENTIAL_DIR. (see ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5295\" onclick=\"get_ticket_and_populate_wrapper('5295'); return false;\" title=\"Add RPC in shadow for starter to fetch opaque credential from shadow.\">#5295</a></span>)\n\n<p></p></li><li>SIGHUP the Credential Monitor and wait an appropriate amount of time for the new credential to appear\n\n<p></p></li><li>Fail (job on hold?) or continue as before</li></ol>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-14 18:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45983\">[45983]</a></span>: Have the starter actually fetch user credentials, but only if needed. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5296\" onclick=\"get_ticket_and_populate_wrapper('5296'); return false;\" title=\"Starter needs to receive opaque credential, store, and activate it\">#5296</a></span>  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-14 17:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45980\">[45980]</a></span>: Implement protocol in the shadow daemon client to actually query the shadow. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5296\" onclick=\"get_ticket_and_populate_wrapper('5296'); return false;\" title=\"Starter needs to receive opaque credential, store, and activate it\">#5296</a></span>  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-14 16:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45979\">[45979]</a></span>: Added untested code in the starter to acquire user credentials. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5296\" onclick=\"get_ticket_and_populate_wrapper('5296'); return false;\" title=\"Starter needs to receive opaque credential, store, and activate it\">#5296</a></span>  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Oct-14 16:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45976\">[45976]</a></span>: Add stub in shadow daemon client to get user credential from shadow. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5296\" onclick=\"get_ticket_and_populate_wrapper('5296'); return false;\" title=\"Starter needs to receive opaque credential, store, and activate it\">#5296</a></span>  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Apr-26 20:57", "status": "resolved", "created": "2015-Oct-07 13:01", "fixed_version": "2015-Oct-07 13:01", "broken_version": "", "priority": "1", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#5272", "creator": "zmiller", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": "20151016"}