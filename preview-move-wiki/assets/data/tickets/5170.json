{"id": 5170, "title": "Ticket #5170: condor_reconfig zeros update SequenceNumber, looks like dropped update", "description": "<blockquote>\nWe've been seeing a high number of dropped updates in the start <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=UpdatesHistory\" title=\"Updates History\">UpdatesHistory</a></span> bitmap in chtc.  Turns out that condor_reconfig of a startd will zero the update sequence number, and looks like a dropped update to the collector.</blockquote>", "remarks": "<blockquote>\nCode should be reviewed, then back-ported to the 8.4 branch.\n\n<p></p><hr/>\n<em>2015-Nov-11 09:20:42 by gthain:</em> <br/>\n\n<strong>REVIEW</strong>\n\n<p>Generally, looks good.  I'm a little grumpy that both <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CollectorList\" title=\"Collector List\">CollectorList</a></span> and and DCCollectorAdSequences have a method named getAdSeq, one of which returns a pointer, the other a reference.\n\n</p><p>CollectorList::sendUpdates should just call CollectorList::getAdSeq, instead of duplicating the code.\n\n</p><p></p><hr/>\n<em>2015-Nov-19 10:24:26 by johnkn:</em> <br/>\n\nno version history.  this 'bug' was in the product for years and no one noticed but us...</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5408\" onclick=\"get_ticket_and_populate_wrapper('5408'); return false;\" title=\"Backport #5170 to Stable (8.4)\">#5408</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBackport <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5170\" onclick=\"get_ticket_and_populate_wrapper('5170'); return false;\" title=\"condor_reconfig zeros update SequenceNumber, looks like dropped update\">#5170</a></span> to Stable (8.4)</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Sep-21 13:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e0e482e6010427d3bd9f82674f2cdec45d2d3232\">[45870]</a></span>: remove code left dead by previous commit for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5170\" onclick=\"get_ticket_and_populate_wrapper('5170'); return false;\" title=\"condor_reconfig zeros update SequenceNumber, looks like dropped update\">#5170</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Sep-18 08:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/690ddabe2344fbb8ae2f35891d97c03da29eaad7\">[45859]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5170\" onclick=\"get_ticket_and_populate_wrapper('5170'); return false;\" title=\"condor_reconfig zeros update SequenceNumber, looks like dropped update\">#5170</a></span>, condor_reconfig zeros update sequence number, looks like a dropped update ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Nov-19 10:24", "status": "resolved", "created": "2015-Jul-23 10:10", "fixed_version": "2015-Jul-23 10:10", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}