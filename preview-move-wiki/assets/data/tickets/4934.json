{"id": 4934, "title": "Ticket #4934: Support IPv4 clients connecting to a mixed-mode pool.", "description": "<blockquote>\nCurrently command line tools on an IPv4-only host will receive only IPv6 addresses from mixed-mode collectors for mixed-mode daemons. As a result, the command line tools cannot connect from an IPv4-only host.\n\n<p>Goal: Command line tools running on IPv4-only hosts should to be able to contact mixed-mode daemons. New clients will choose an address based on protocol availability. Old clients will be given a best guess choice made by the collector.\n\n</p><p>For proposed changes, see <a class=\"external\" href=\"http://goo.gl/9eP8k1\">the design document</a>.\n\n</p><p></p><div>\n<table border=\"1\" cellpadding=\"2\" cellspacing=\"0\" summary=\"EMBED: Status Table of Non-[Resolved|Abandoned] Derived Tickets\">\n<caption>\n  <a href=\"rptview?rn=116\" rel=\"nofollow\" title=\"EMBED: Status Table of Non-[Resolved|Abandoned] Derived Tickets\">EMBED: Status Table of Non-[Resolved|Abandoned] Derived Tickets</a>\n</caption>\n<tbody><tr>\n<td colspan=\"11\"><form action=\"rptview\" method=\"GET\">\n<input name=\"rn\" type=\"hidden\" value=\"116\"/>\nTN: <input name=\"TN\" type=\"text\" value=\"4934\"/>\n<input type=\"submit\" value=\"Go\"/>\n</form></td></tr> \n<tr>\n<th><a href=\"rptview?rn=116&amp;order_by=2&amp;order_dir=ASC&amp;TN=4934\">Developer</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=3&amp;order_dir=ASC&amp;TN=4934\">#</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=4&amp;order_dir=ASC&amp;TN=4934\">Status</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=5&amp;order_dir=ASC&amp;TN=4934\">Type</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=6&amp;order_dir=ASC&amp;TN=4934\">Pri</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=7&amp;order_dir=ASC&amp;TN=4934\">Created</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=8&amp;order_dir=ASC&amp;TN=4934\">Changed</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=9&amp;order_dir=ASC&amp;TN=4934\">Target</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=10&amp;order_dir=ASC&amp;TN=4934\">Due Date</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=11&amp;order_dir=ASC&amp;TN=4934\">Days left</a></th>\n<th><a href=\"rptview?rn=116&amp;order_by=12&amp;order_dir=ASC&amp;TN=4934\">Title</a></th>\n</tr>\n<tr bgcolor=\"#cacae5\">\n<td valign=\"top\">\ntlmiller\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=5088,116\">5088</a></td>\n<td valign=\"top\">\nnew\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2015 Jun\n</td>\n<td valign=\"top\">\n2015 Aug\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nTest addrs parameter in the face of exotic networking configuration.\n</td>\n</tr>\n</tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2015-Mar-30 17:37:37 by adesmet:</em> <br/>\n\nNotes on how we go from Sinful to an actual connection attempt:\n\n<p></p><ul>\n<li>Daemon::New_addr (<a class=\"file\" href=\"rlog?f=src/condor_daemon_client/daemon.cpp\">/src/condor_daemon_client/daemon.cpp</a> line 2030) - Examines the <span class=\"wiki\"><a href=\"wiki?p=PrivName\" title=\"Priv Name\">PrivName</a></span>; if present and it matches PRIVATE_NETWORK_NAME, the Sinful is rewritten to be the <span class=\"wiki\"><a href=\"wiki?p=PrivNet\" title=\"Priv Net\">PrivNet</a></span>. (Does <span class=\"wiki\"><a href=\"wiki?p=PrivNet\" title=\"Priv Net\">PrivNet</a></span> include a port)\n</li><li>Sock::do_connect (<a class=\"file\" href=\"rlog?f=src/condor_io/sock.cpp\">/src/condor_io/sock.cpp</a> line 1108) - First tries to use CCB (Sock::special_connect) . If that fails, tries a direct connection. Presumably called after Daemon::New_addr.\n</li><li>Sock::special_connect (<a class=\"file\" href=\"rlog?f=src/condor_io/cedar_no_ckpt.cpp\">/src/condor_io/cedar_no_ckpt.cpp</a> line 846) - Short circuits to local connection if the primary address and its own address are the same, or if the client is the shared port daemon in the Sinful. Returns CEDAR_ENOCCB (allowing Sock::do_connect to continue) if not CCB is available. If CCB is available, it will be tried, and failing to connect over CCB stops further attempts.\n</li></ul>\n\n<p>This work will add an additional rewrite step in Sock::do_connect before special_connect is called.\n\n</p><p>What might go wrong if we rewrite the address such that special_connect is unable to identify that it's loopback or that it's the shared port daemon. Loopback: decreased efficiency; unnecessary use of shared_port. Is shared port daemon: why would shared_port initiate connections to itself? Under what cases does that code fire?\n\n</p><p></p><hr/>\n<em>2015-Mar-31 16:06:44 by adesmet:</em> <br/>\n\nProposed: the private network rewriting logic should be moved out of Daemon::New_addr and into Sock::do_connect.  There is no reason to make the logic Daemon specific, and moving it will reduce the locations where we do clever things with Sinfuls.\n\n<p></p><hr/>\n<em>2015-Apr-07 10:20:41 by adesmet:</em> <br/>\n\nExample new Sinful:\n\n<p></p><pre>  &lt;1.2.3.4:9000?addrs=1.2.3.4:9000;[FE80:0000:0000:0000:0202:B3FF:FE1E:8329]:9001&gt;\n</pre>\n\n<p>The use of semicolon as a separator was determined after attempting implementation with spaces and commas. Both are problems in circumstances where we have a list of Sinfuls (COLLECTOR_HOST); that code blindly splits the list on spaces and commas and so would incorrectly slice Sinfuls into parts.  URL escaping could solve the problem, but %2C and %20 were deemed less helpful. We considered the encoding of space a +, but the current encoder/decoder doesn't know about it and we want to minimize changes.  (On the down side, semicolon is a valid argument separator in real world URLs. The current code knows nothing about that, but it makes me sad.)\n\n</p><p></p><hr/>\n<em>2015-Apr-23 22:41:36 by bbockelm:</em> <br/>\n\nOne thing I noticed when testing the branch is this in the header for <code>condor_q</code>:\n\n<p></p><div class=\"verbatim\">\n<pre>-- Submitter: hcc-briantest.unl.edu : &lt;129.93.244.208:60359?addrs=[2600:900:6:1301:5054:ff:feab:a9fb]:60359+129.93.244.208:60359&gt; : hcc-briantest.unl.edu\n</pre></div>\n\n\n<p>The sinful is now longer than the 80 character width we otherwise use in <code>condor_q</code> output.  Are we really gaining much by printing out the sinful?  Can we ask TJ his thoughts on simply dropping it?\n\n</p><p></p><hr/>\n<em>2015-Apr-24 10:17:25 by tlmiller:</em> <br/>\n\nCoincidentally, we were just talking about the \"submitter\" part of that line is a terrible, terrible lie, so I'm pretty sure TJ would be OK with fixing it.\n\n<p></p><hr/>\n<em>2015-Apr-24 10:25:48 by johnkn:</em> <br/>\n\nI'd be in favor of dropping the sinful, and having the Submitter: value actually be the submitter rather than the schedd name.  I do think we need to show the schedd name though.\n\n<p></p><hr/>\n<em>2015-May-28 13:46:31 by tlmiller:</em> <br/>\n\nMoved condor_q discussion to subticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5071\" onclick=\"get_ticket_and_populate_wrapper('5071'); return false;\" title=\"adjust condor_q banner to eliminate sinful strings\">#5071</a></span>.\n\n<p></p><hr/>\n<em>2015-Jun-03 16:17:45 by tlmiller:</em> <br/>\n\nDocumented for 8.3.6; I'd still like AdS to review, if possible -- even if for no other reason than the networking code shouldn't be a surprise to him.\n\n<p></p><hr/>\n<em>2015-Jun-15 16:06:05 by adesmet:</em> <br/>\n\n<strong>CODE REVIEW</strong> of <span class=\"chng\"><a href=\"chngview?cn=45053\">[45053]</a></span> only (b85e807fd8533185eafcf7d0331526838c56bd88)\n\n<p>Passed.\n\n</p><p></p><hr/>\n<em>2015-Jun-16 10:41:58 by adesmet:</em> <br/>\n\n(The duplication of code makes me wince, but trying to unify the two code paths would be slightly higher risk. Given that we hope to jettison the code entirely in 8.5, the additional risk of unification isn't worth it.)\n\n<p></p><hr/>\n<em>2015-Aug-24 16:04:22 by tlmiller:</em> <br/>\n\nNo documentation needed for v8.3.8, since the change in that version was only to the testing code.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5071\" onclick=\"get_ticket_and_populate_wrapper('5071'); return false;\" title=\"adjust condor_q banner to eliminate sinful strings\">#5071</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nadjust condor_q banner to eliminate sinful strings</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5072\" onclick=\"get_ticket_and_populate_wrapper('5072'); return false;\" title=\"Write test for v1/original Sinful string interconversion.\">#5072</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nWrite test for v1/original Sinful string interconversion.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5073\" onclick=\"get_ticket_and_populate_wrapper('5073'); return false;\" title=\"Confirm stable sort in multiset.\">#5073</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nConfirm stable sort in multiset.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5074\" onclick=\"get_ticket_and_populate_wrapper('5074'); return false;\" title=\"Disable protocol-based rewriting, advertise IPv4 primary addresses.\">#5074</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nDisable protocol-based rewriting, advertise IPv4 primary addresses.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=5088\" onclick=\"get_ticket_and_populate_wrapper('5088'); return false;\" title=\"Test addrs parameter in the face of exotic networking configuration.\">#5088</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nTest addrs parameter in the face of exotic networking configuration.</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jul-08 13:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45254\">[45254]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Unbreak the Sinful self-test for new (CCB-safe) addrs format.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-15 14:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=45053\">[45053]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Update addrs encoding to not break 8.2.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-04 16:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44975\">[44975]</a></span>: edit new IPv4/IPv6 mixed mode prose <span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-03 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44956\">[44956]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Mention, in the version history item, why people might care.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-03 16:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44954\">[44954]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Add version history items and update IPv6 section in manual.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-06 11:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44795\">[44795]</a></span>: Squashed commit of the following: commit 138b863503f2a5bda1777cf5f6a352c48d7db3a2 Author: Todd L Miller &lt;tlmiller@cs.wisc.edu&gt; Date: Tue May 5 15:03:24 2015 -0500\u00a0[...]\n (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-05 15:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44794\">[44794]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Remove annoying Perl warning.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-05 15:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44793\">[44793]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix chooseAddrFromAddrs() not to return a pointer to a stack variable.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 21:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44784\">[44784]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix private network address round-tripping.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 21:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44783\">[44783]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix up round-trip of private network names.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 20:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44782\">[44782]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix up botched prior commit; add corrected handling of noUDP flag.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-01 20:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44781\">[44781]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) CCB-without-SP now round-trips.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-28 14:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44741\">[44741]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Add v1 de/code routines.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-28 10:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44733\">[44733]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Work in progress.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-23 14:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44712\">[44712]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Make sure people can tell that we actually saw multiple addresses from the debug output.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-21 14:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44692\">[44692]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix bug which reversed order of equally-desirable addresses.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-20 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44683\">[44683]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Implement client sorting of addresses by desirability.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-20 15:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44682\">[44682]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Task <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=3\" onclick=\"get_ticket_and_populate_wrapper('3'); return false;\" title=\"Customize GitTrac\">#3</a></span>, run #5b.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-17 14:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44681\">[44681]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Task <span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=3\" onclick=\"get_ticket_and_populate_wrapper('3'); return false;\" title=\"Customize GitTrac\">#3</a></span>, run <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5\" onclick=\"get_ticket_and_populate_wrapper('5'); return false;\" title=\"Add CLA field to User table\">#5</a></span>.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-16 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44677\">[44677]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Explain why we're not worried about privated addresses.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-16 12:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44650\">[44650]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) First pass at client-side address selection.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-15 17:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44649\">[44649]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Minor clean-up work.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-14 13:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44629\">[44629]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Work in progress.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-07 14:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44554\">[44554]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix Sinful and its unit test(s)?  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-31 15:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44481\">[44481]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix tests broken by the new, exotic Sinful strings.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-27 11:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44456\">[44456]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Switch from comma- to semicolon- separated: COLLECTOR_HOST is comma-separated and gets confused.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-27 11:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44455\">[44455]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Actually run the Sinful tests.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-26 15:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=44454\">[44454]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Fix fix for broken test.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-26 14:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=43740\">[43740]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Add a test for new Sinful functionality. Fix some tests which wrongfully assumed Sinfuls could be passed via the command-line unquoted. Add missing comments and asserts about hasAddrs(). Fix bug in Sinful's unbracketed-Sinful parser (fixes CCB).  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-24 17:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=43708\">[43708]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Add port numbers to the ip literals in 'addrs'.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-24 16:42</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=43707\">[43707]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) Add brackets around IPv6 addresses, update sockaddr parser to handle them. Add version parameter if we add an addrs parameter.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Mar-10 10:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=43552\">[43552]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/tickets?ticket=4934\" onclick=\"get_ticket_and_populate_wrapper('4934'); return false;\" title=\"Support IPv4 clients connecting to a mixed-mode pool.\">#4934</a></span>) The horrible hack.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Aug-24 16:04", "status": "review", "created": "2015-Mar-10 10:47", "fixed_version": "2015-Mar-10 10:47", "broken_version": "v080302", "priority": "3", "subsystem": "Libs", "assigned_to": "adesmet", "derived_from": "#4492", "creator": "tlmiller", "rust": "", "customer_group": "lark", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, adesmet@cs.wisc.edu, tannenba@cs.wisc.edu, bbockelm@cse.unl.edu", "due_date": ""}