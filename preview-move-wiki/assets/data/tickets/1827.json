{"id": 1827, "title": "Ticket #1827: reverting merge of master into V7_5_5-branch", "description": "<blockquote>\nThe changes documented below involve versions of Condor that were never released.  Customers do not need to worry about them.\n\n<p>I accidentally rebased V7_5_5-branch on top of the master branch and then pushed commit 0636a69c63c942e67ff5605bb0fa2988307a58e4 to V7_5_5-branch.  This resulted in some code intended for 7.5.6 to appear on V7_5_5-branch.\n\n</p><p>This has been undone, but it has ramifications for anyone working with out Git repository.\n\n</p><p>All developers will need to check to make sure they don't have the bad merge lurking in their repositories. If you haven't done a \"git pull\" or fetch since December 28th, you're probably okay, but check anyway.\n\n</p><p>To check, on any local branch you have that is based on V7_5_5-branch, do the following, replacing V7_5_5-branch with your local branch name.\n\n</p><p></p><ol>\n<li>Check if you have the bad merge on the branch:\n<div class=\"code\">\n<pre class=\"code\">git rev-list V7_5_5-branch | grep 0636a69c63c942e67ff5605bb0fa2988307a58e4\n</pre></div>\n\n</li><li>Check the output and return code (\"echo $?\") of the previous command:\n<ul>\n<li>If there is <strong>no output</strong> and a <strong>non-zero return code</strong>, all is well.  This branch is safe.  Go back to the start and repeat for other branches based on V7_5_5-branch.  If you're out of branches, you're done!\n</li><li>If the <strong>return code is 0</strong> and the <strong>output is \"git rev-list V7_5_5-branch | grep 0636a69c63c942e67ff5605bb0fa2988307a58e4\"</strong>, then you have the bad merge.  If this is the case, you <strong>must</strong> destroy and recreate the branch, otherwise you could reinfect the central repository.  Continue:\n</li></ul>\n</li><li>You'll need to delete your infected V7_5_5-branch and recreate it.  Do you have committed changes to V7_5_5-branch that you haven't pushed?\n<ul>\n<li><strong>No un-pushed changes:</strong> Just run the following to delete and recreate the local branch:\n<div class=\"code\">\n<pre class=\"code\">git checkout master\ngit branch -D V7_5_5-branch\ngit branch V7_5_5-branch origin/V7_5_5-branch\n</pre></div>\n\n</li><li><strong>Un-pushed changes:</strong> You will want to store your good changes away and reapply them. Be careful to not accidentally drag in the bad merge!  You can <em>not</em> use git stash for this, as git stash will just stash away the bad merge.  You can do this by hand, or you can use \"git format-patch\" and \"git am\" to store them away and re-apply them.   Use \"gitk\" or similar to find the ranges of SHAs that contain your changes.  Be sure to <em>not</em> include git 0636a69c63c942e67ff5605bb0fa2988307a58e4 in the range!  If you have multiple ranges, simply call \"git format-patch\" repeatedly, appending to the same file.  Once you have your ranges, use the following, or something similar:\n<div class=\"code\">\n<pre class=\"code\">git format-patch --stdout EARLIEST_GOOD_SHA1..CURRENT_GOOD_SHA1 &gt; v7_5_5-rescue\ngit checkout master\ngit branch -D V7_5_5-branch\ngit branch V7_5_5-branch origin/V7_5_5-branch\ngit checkout V7_5_5-branch\ngit am v7_5_5-rescue\n</pre></div>\n\n</li></ul>\n</li></ol>\n\n<p><span class=\"section\"></span></p><h2>Note to Self</h2>\n\n<p>The following are notes I kept while doing the surgery to repair the branch.\n\n</p><p><table border=\"1\" cellspacing=\"0\">\n<tbody><tr>\n<td>\n Commit </td>\n<td>\n Notes</td>\n</tr>\n\n<tr>\n<td>\n99987ec6c589ad94194c705cd7dcbd946d3bd207</td>\n<td>\n Last good commit on V7_5_5-branch before the rebase</td>\n</tr>\n\n<tr>\n<td>\n0636a69c63c942e67ff5605bb0fa2988307a58e4</td>\n<td>\n First commit after bad rebase </td>\n</tr>\n\n<tr>\n<td>\nacee7ae7ec7f0f047d9afc4d6489c6f4c63e3536</td>\n<td>\n The head of V7_5_5-branch </td>\n</tr>\n\n</tbody></table>\n</p><p>Full history of V7_5_5-branch before surgery:\n\n</p><p></p><div class=\"verbatim\">\n<pre>0000000000000000000000000000000000000000 b84606c73a0d5c812e49eed7decbb9e0f27406e9 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292207480 -0600\tpush\nb84606c73a0d5c812e49eed7decbb9e0f27406e9 6334a83cbb35d02cea1a8f9483bc996e53309be3 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292207643 -0600\tpush\n6334a83cbb35d02cea1a8f9483bc996e53309be3 7967e7666fe4101d37a781e08d1371b6003495f9 Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292269545 -0600\tpush\n7967e7666fe4101d37a781e08d1371b6003495f9 afc33908dc540dca87e717a37d830beac9d2e61a Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292346379 -0600\tpush\nafc33908dc540dca87e717a37d830beac9d2e61a 0696218ab8453c504f01cbd22b5163be80d8d32d Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292365606 -0600\tpush\n0696218ab8453c504f01cbd22b5163be80d8d32d 00f9f2e1b1d496eb80f9889e40696721777898bb Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292435286 -0600\tpush\n00f9f2e1b1d496eb80f9889e40696721777898bb c9baac34d3e94343a604de7a0477b92c2a280708 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292439156 -0600\tpush\nc9baac34d3e94343a604de7a0477b92c2a280708 5f1125e10c5fcf223bda4070305e91867bcc0887 Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292458569 -0600\tpush\n5f1125e10c5fcf223bda4070305e91867bcc0887 3b2a05794ef2097415888f6648a069f50d174311 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292516576 -0600\tpush\n3b2a05794ef2097415888f6648a069f50d174311 f2829da96e6e5cd7026d8ae2017262f6d54a29af Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292616649 -0600\tpush\nf2829da96e6e5cd7026d8ae2017262f6d54a29af 419cc3f10efad392de3482e4a209c30ff852a5e8 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292629608 -0600\tpush\n419cc3f10efad392de3482e4a209c30ff852a5e8 36178c9a459b1f29d1529323e6e612fb579da05a Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292698914 -0600\tpush\n36178c9a459b1f29d1529323e6e612fb579da05a 1d028e5a8a6c337a4dd4d9e3dedf33c56829b243 Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292699178 -0600\tpush\n1d028e5a8a6c337a4dd4d9e3dedf33c56829b243 2b9a3d61c2bad22fa6e22d06859c554bef089b62 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292780707 -0600\tpush\n2b9a3d61c2bad22fa6e22d06859c554bef089b62 65dccffe9cd7487a94a722e99ec0f3ad54283228 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292784779 -0600\tpush\n65dccffe9cd7487a94a722e99ec0f3ad54283228 cb71ca7d94c0a91b6c670930f1011eb2877582f5 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292861488 -0600\tpush\ncb71ca7d94c0a91b6c670930f1011eb2877582f5 0d895c7457d70f7e3911e1cdead0ed33e19510f9 Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292876982 -0600\tpush\n0d895c7457d70f7e3911e1cdead0ed33e19510f9 88980770a7b674d6998d2d5c7b08e4eb29eb489b Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292877008 -0600\tpush\n88980770a7b674d6998d2d5c7b08e4eb29eb489b 3a498acbe982020f2be19582fcda1a2b00de179d Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292877704 -0600\tpush\n3a498acbe982020f2be19582fcda1a2b00de179d 34d32635c34922afe286d20958e703f6ee744130 Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292878094 -0600\tpush\n34d32635c34922afe286d20958e703f6ee744130 7f850a6ffdf7c22e959e232102c4b15d60864ff5 Ziliang Guo &lt;ziliang@cs.wisc.edu&gt; 1292881422 -0600\tpush\n7f850a6ffdf7c22e959e232102c4b15d60864ff5 4621209bc447c19381443fad0a6729747e27b5cd Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292882579 -0600\tpush\n4621209bc447c19381443fad0a6729747e27b5cd 789a98214bf49836fdc7d388d71c0eef05433414 Greg Thain &lt;gthain@cs.wisc.edu&gt; 1292902194 -0600\tpush\n789a98214bf49836fdc7d388d71c0eef05433414 f31972d2c79c292a57690e8446b04ec53d943468 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292903337 -0600\tpush\nf31972d2c79c292a57690e8446b04ec53d943468 e801f2574784cbe073956193b62f87577903c3b5 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292943492 -0600\tpush\ne801f2574784cbe073956193b62f87577903c3b5 7fd84cf4015728ed4de175834391474d60da35d6 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292943838 -0600\tpush\n7fd84cf4015728ed4de175834391474d60da35d6 cdfd6881f9557b8661a3e21194472c8d1eff544a John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292947020 -0600\tpush\ncdfd6881f9557b8661a3e21194472c8d1eff544a 65f8fad1e704946e407d0e4f2903a2228ba3f898 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292955558 -0600\tpush\n65f8fad1e704946e407d0e4f2903a2228ba3f898 541ba7bc565326974ad02a257517960428c9abaf Dan Bradley &lt;dan@hep.wisc.edu&gt; 1292956259 -0600\tpush\n541ba7bc565326974ad02a257517960428c9abaf 077181c7e20a80b6d69a449feb718fb287335282 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292962401 -0600\tpush\n077181c7e20a80b6d69a449feb718fb287335282 5df69d86fd0cb8fd181d5ce56392d4094b8d373c Greg Thain &lt;gthain@cs.wisc.edu&gt; 1292962944 -0600\tpush\n5df69d86fd0cb8fd181d5ce56392d4094b8d373c b4a0555a34a2c1f5902e4710b7b5d7087ea025d4 Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292964228 -0600\tpush\nb4a0555a34a2c1f5902e4710b7b5d7087ea025d4 2c4bed3977af52a32648c1483d45dd46580741ac John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292971295 -0600\tpush\n2c4bed3977af52a32648c1483d45dd46580741ac 90d8bd635befd105e36391aaa4dcdd03674863cb John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1292971536 -0600\tpush\n90d8bd635befd105e36391aaa4dcdd03674863cb 5052e25dcecf045308ef1ff9e1a41e2fa8c0b38d Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292973859 -0600\tpush\n5052e25dcecf045308ef1ff9e1a41e2fa8c0b38d 1e49e681a06747303f19093f91d2ee718249bb9e Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1292974391 -0600\tpush\n1e49e681a06747303f19093f91d2ee718249bb9e 05262837715589adb3eeda06ddb2771bd7c65742 Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1293032082 -0600\tpush\n05262837715589adb3eeda06ddb2771bd7c65742 f1074bc868a1dfb0650ffb56e8654661df010813 Jaime Frey &lt;jfrey@cs.wisc.edu&gt; 1293032306 -0600\tpush\nf1074bc868a1dfb0650ffb56e8654661df010813 b2730f42afc5edb3f6f6068d36bf11b716a72ea1 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293039668 -0600\tpush\nb2730f42afc5edb3f6f6068d36bf11b716a72ea1 1fec1566d369247d931c812cd7c8253f527c2adb John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293060454 -0600\tpush\n1fec1566d369247d931c812cd7c8253f527c2adb c091525be99f6151bae222d19093177308a1d842 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293061549 -0600\tpush\nc091525be99f6151bae222d19093177308a1d842 cdf822f26f86716ed157e5d8d72ab9ac403be809 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293068976 -0600\tpush\ncdf822f26f86716ed157e5d8d72ab9ac403be809 4a2b1b9d43785dbeddc262f42fec6debca61cb58 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1293148691 -0600\tpush\n4a2b1b9d43785dbeddc262f42fec6debca61cb58 f23fa40a17f5936498d16bf35133b3cabae9a5d9 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1293470929 -0600\tpush\nf23fa40a17f5936498d16bf35133b3cabae9a5d9 97dd824d394a4ccd889673ed7ab0f0100f8bdc43 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293549726 -0600\tpush\n97dd824d394a4ccd889673ed7ab0f0100f8bdc43 2f8644b462ab0a5e4c8f0400a5187c78c4df7d89 John (TJ) Knoeller &lt;johnkn@cs.wisc.edu&gt; 1293560568 -0600\tpush\n2f8644b462ab0a5e4c8f0400a5187c78c4df7d89 99987ec6c589ad94194c705cd7dcbd946d3bd207 Cathrin Weiss &lt;cweiss@cs.wisc.edu&gt; 1293566182 -0600\tpush\n99987ec6c589ad94194c705cd7dcbd946d3bd207 0636a69c63c942e67ff5605bb0fa2988307a58e4 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1293576352 -0600\tpush\n0636a69c63c942e67ff5605bb0fa2988307a58e4 c9d14b171c9cb1d0a601b5d277f337e5987c7c60 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1293602939 -0600\tpush\nc9d14b171c9cb1d0a601b5d277f337e5987c7c60 acee7ae7ec7f0f047d9afc4d6489c6f4c63e3536 Dan Bradley &lt;dan@hep.wisc.edu&gt; 1293603435 -0600\tpush\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2011-Jan-27 14:50:47 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:20:02 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2011-Feb-01 16:45", "status": "resolved", "created": "2010-Dec-29 11:49", "fixed_version": "2010-Dec-29 11:49", "broken_version": "v070505", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}