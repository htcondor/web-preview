{"id": 6822, "title": "Ticket #6822: Configure sshd to more secure for condor_ssh_to_job", "description": "<blockquote>\nConfig the sshd used be condor_ssh_to_job to be more secure. This work is driven by people using HTCondor on FIPS 140-2 compliant systems.\n\n<p>Note: by changing the <code>Ciphers</code> and <code>MACs</code> settings for sshd to be FIPs compliant, condor_ssh_to_job will fail from submit hosts running RHEL5 or earlier.  This seems acceptable considering that HTCondor has not supported RHEL5 since v8.2, and we do not ensure compatibility between HTCondor v8.2.x and v8.8.x.</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Nov-20 17:02:46 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Commit needs documentation, so changing ticket to doc pending.\n\n</p><p>Also as part of the code review I made some changes in commit <span class=\"chng\"><a href=\"chngview?cn=55795\">[55795]</a></span> :\n\n</p><p></p><ol>\n<li>Setting <code>ClientAlive</code> settings to timeout an idle session in 10 minutes seems like it would break the semantics expected by users.   Note that condor_submit -interactive already sets an idle limit via bash's TMOUT environment variable.\n</li><li>Added additional comments / references in the file.\n</li><li>Set <code>Compression</code> to be delayed instead of just always no, which is still FIPs compliant.</li></ol>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-20 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55795\">[55795]</a></span>: For ssh_to_job, allow compression and do not timeout sessions. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6822\" onclick=\"get_ticket_and_populate_wrapper('6822'); return false;\" title=\"Configure sshd to more secure for condor_ssh_to_job\">#6822</a></span> Also added some additional comments.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-13 13:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55720\">[55720]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6822\" onclick=\"get_ticket_and_populate_wrapper('6822'); return false;\" title=\"Configure sshd to more secure for condor_ssh_to_job\">#6822</a></span>) Use sandbox Privilege Separation starting in v8.9.x. Ssh sandbox priv sep does not work on RHEL6, so we only specify it starting with HTCondor v8.9 which drops RHEL6 support.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-13 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55718\">[55718]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6822\" onclick=\"get_ticket_and_populate_wrapper('6822'); return false;\" title=\"Configure sshd to more secure for condor_ssh_to_job\">#6822</a></span>) Beef up HTCondor's sshd config template  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Jan-03 13:06", "status": "resolved", "created": "2018-Nov-13 13:45", "fixed_version": "2018-Nov-13 13:45", "broken_version": "", "priority": "1", "subsystem": "Security", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "support", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}