{"id": 1442, "title": "Ticket #1442: getDelimitedStringV1RawOrV2Quoted() of Env has a concatenation issue", "description": "<blockquote>\nThe getDelimitedStringV1RawOrV2Quoted() function:\n<div class=\"code\">\n<pre class=\"code\">bool\nEnv::getDelimitedStringV1RawOrV2Quoted(MyString *result,MyString *error_msg) const\n{\n\tif(getDelimitedStringV1Raw(result,NULL)) {\n\t\treturn true;\n\t}\n\telse {\n\t\treturn getDelimitedStringV2Quoted(result,error_msg);\n\t}\n}\n</pre></div>\n\n\n<p>In cases in which getDelimitedStringV1RawOrV2Quoted() cannot return a V1Raw string getDelimitedStringV1Raw() modifies result and returns false. Then getDelimitedStringV2Quoted() concatenates whatever was in result with the expected output.\n<br/>\n<br/>\n\nHere is a case that fails:\n</p><div class=\"code\">\n<pre class=\"code\">Env env;\nMyString actual, error;\nenv.MergeFromV2Raw(\"one=1 two=2 three=3 semi=;\", NULL);\nenv.getDelimitedStringV1RawOrV2Quoted(&amp;actual, &amp;error);\n</pre></div>\n\n\n<p>actual.Value() returns three=3\"three=3 semi=; two=2 one=1\" instead of just \"three=3 semi=; two=2 one=1\".</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-10 13:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=18444\">[18444]</a></span>: Changed getDelimitedStringV1RawOrV2Quoted() so that the result <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyString\" title=\"My String\">MyString</a></span> is cleared before calling getDelimitedStringV2Quoted(). <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1442\" onclick=\"get_ticket_and_populate_wrapper('1442'); return false;\" title=\"getDelimitedStringV1RawOrV2Quoted() of Env has a concatenation issue\">#1442</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Jun-10 13:08", "status": "resolved", "created": "2010-Jun-10 12:49", "fixed_version": "2010-Jun-10 12:49", "broken_version": "v070403", "priority": "3", "subsystem": "Libs", "assigned_to": "slauson", "derived_from": "#1239", "creator": "slauson", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu slauson@cs.wisc.edu", "due_date": ""}