{"id": 2596, "title": "Ticket #2596: negotiator excepts on unexpected startd ads", "description": "<blockquote>\nIgor reports that Benjamin managed to trigger a kill for the negotiator, by publishing weird <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>.\n\n<p></p><div class=\"verbatim\">\n<pre>[1448] bhass@devg-5 ~$ condor_status -l\nMachine = \"f05.cs.wisc.edu\"\nLastHeardFrom = 1319751813\nUpdateSequenceNumber = 1\nFauxType = \"DBMS\"\nName = \"random-test\"\nUpdatesTotal = 1\nDaemonStartTime = 1153192799\nMyAddress = \"&lt;128.105.149.105:34000&gt;\"\nAuthenticatedIdentity = \"bhass@devg-5.t2.ucsd.edu\"\nUpdatesHistory = \"0x00000000000000000000000000000000\"\nUpdatesSequenced = 0\nUpdatesLost = 0\nTargetType = \"(unknown type)\"\nCurrentTime = time()\nMyType = \"Machine\"\n\nLastHeardFrom = 1319751888\nUpdateSequenceNumber = 1\nName = \"random-test\"\nUpdatesTotal = 1\nMyAddress = \"&lt;127.0.0.1:0&gt;\"\nAuthenticatedIdentity = \"bhass@devg-5.t2.ucsd.edu\"\nUpdatesHistory = \"0x00000000000000000000000000000000\"\nUpdatesSequenced = 0\nUpdatesLost = 0\nTargetType = \"(unknown type)\"\nCurrentTime = time()\nMyType = \"Machine\"\n\n[1448] bhass@devg-5 ~$ condor_version\n$CondorVersion: 7.5.4 Oct 18 2010 BuildID: 280908 $\n$CondorPlatform: I386-LINUX_RHEL5 $\n\n\n-------- Original Message --------\nSubject: [Condor] Problem devg-5.t2.ucsd.edu: condor_negotiator exited (4)\nDate: Thu, 27 Oct 2011 14:45:33 -0700\nFrom: bhass@devg-5.t2.ucsd.edu\nTo: sfiligoi@fnal.gov\n\nThis is an automated email from the Condor system\non machine \"devg-5.t2.ucsd.edu\".  Do not reply.\n\n\"/home/bhass/glidecondor/sbin/condor_negotiator\" on \"devg-5.t2.ucsd.edu\" exited with status 4.\nCondor will automatically restart this process in 10 seconds.\n\n*** Last 20 line(s) of file /home/bhass/glidecondor/condor_local/log/NegotiatorLog:\n10/27/11 14:44:33 Failed to optimize machine ad random-test for matchmaking: No requirements found in ad to be optimized.\n10/27/11 14:44:33   Getting startd private ads ...\n10/27/11 14:44:33 Got ads: 6 public and 0 private\n10/27/11 14:44:33 Public ads include 0 submitter, 1 startd\n10/27/11 14:44:33 Phase 2:  Performing accounting ...\n10/27/11 14:44:33 Could not lookup state --- assuming not claimed\n10/27/11 14:44:33 Phase 3:  Sorting submitter ads by priority ...\n10/27/11 14:44:33 Phase 4.1:  Negotiating with schedds ...\n10/27/11 14:44:33 ---------- Finished Negotiation Cycle ----------\n10/27/11 14:45:33 ---------- Started Negotiation Cycle ----------\n10/27/11 14:45:33 Phase 1:  Obtaining ads from collector ...\n10/27/11 14:45:33   Getting all public ads ...\n10/27/11 14:45:33   Sorting 7 ads ...\n10/27/11 14:45:33 Failed to optimize machine ad random-test for matchmaking: No requirements found in ad to be optimized.\n10/27/11 14:45:33 Failed to optimize machine ad random-test for matchmaking: No requirements found in ad to be optimized.\n10/27/11 14:45:33   Getting startd private ads ...\n10/27/11 14:45:33 Got ads: 7 public and 0 private\n10/27/11 14:45:33 Public ads include 0 submitter, 2 startd\n10/27/11 14:45:33 Phase 2:  Performing accounting ...\n10/27/11 14:45:33 ERROR \"Assertion ERROR on (resource_hash.insert( ResourceName, ResourceAd ) == 0)\" at line 887 in file Accountant.cpp\n*** End of file NegotiatorLog\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2011-Oct-27 17:41", "status": "new", "created": "2011-Oct-27 17:41", "fixed_version": "2011-Oct-27 17:41", "broken_version": "v070504", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "isfiligoi@ucsd.edu,dan@hep.wisc.edu", "due_date": ""}