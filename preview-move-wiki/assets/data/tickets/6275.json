{"id": 6275, "title": "Ticket #6275: Python binding for condor_submit_dag", "description": "<blockquote>\nWe've had a request to add Python bindings for condor_submit_dag. This would probably work similarly to the existing binding for condor_submit, although Python has no knowledge of DAG structures, so we'd need some way to include them. This would probably happen in the form of a .dag file, a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>, or some other manner of data structure.\n\n<p>Work on this as time permits, or if/when more people come after us for it.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Aug-05 16:54:07 by coatsworth:</em> <br/>\n\nThis is done now. We've added a new <code>from_dag()</code> method to the <code>htcondor.Submit</code> class, which returns a submit description for a .dag file. It's worth noting this implementation still fundamentally depends on the .dag file and we're unlikely to ever implement a fully in-memory solution.\n\n<p>The syntax for using this method looks something like the following:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">dag_args = {\n\t\"maxidle\" : 10,\n\t\"maxpost\": 5\n}\ndag_submit = htcondor.Submit.from_dag(\"sleep.dag\", dag_args)\nschedd = htcondor.Schedd()\nwith schedd.transaction() as txn:\n\tcluster_id = dag_submit.queue(txn, 1)\n\tprint(\"Submit.queue returned cluster_id = \" + str(cluster_id))\n</pre></div>\n\n\n<p>In a future project we'll implement more Python bindings which will allow us to represent an in-memory DAG and then export it to a .dag file, however for now, that is outside the scope of this ticket.\n\n</p><p></p><hr/>\n<em>2019-Aug-06 11:36:00 by coatsworth:</em> <br/>\n\nImportant note: Brian created a duplicate ticket for this binding in <span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7060\" onclick=\"get_ticket_and_populate_wrapper('7060'); return false;\" title='Easy way to do \"condor_submit_dag\" from Python'>#7060</a></span> after I started working on it (and referencing this ticket in my commits). There was some interesting discussion in <span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7060\" onclick=\"get_ticket_and_populate_wrapper('7060'); return false;\" title='Easy way to do \"condor_submit_dag\" from Python'>#7060</a></span> that might be useful later, however I'm keeping this as the \"official\" ticket for this work and I've marked the other one as duplicate/resolved.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6804\" onclick=\"get_ticket_and_populate_wrapper('6804'); return false;\" title=\"Consolidate DAGMan utilities into library usable by python bindings\">#6804</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nConsolidate DAGMan utilities into library usable by python bindings</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"abandoned\" href=\"/tickets?ticket=7060\" onclick=\"get_ticket_and_populate_wrapper('7060'); return false;\" title='Easy way to do \"condor_submit_dag\" from Python'>#7060</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nEasy way to do \"condor_submit_dag\" from Python</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7278\" onclick=\"get_ticket_and_populate_wrapper('7278'); return false;\" title=\"Missing pieces for submit dag from python\">#7278</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMissing pieces for submit dag from python</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7337\" onclick=\"get_ticket_and_populate_wrapper('7337'); return false;\" title=\"Creating a DAG submit object with bindings kills Python if it fails\">#7337</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCreating a DAG submit object with bindings kills Python if it fails</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-06 12:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57606\">[57606]</a></span>: Added version history (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-21 10:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57222\">[57222]</a></span>: Added basic python binding for submitting dags (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-20 14:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57217\">[57217]</a></span>: Added more dagman options, better error messaging (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-19 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57181\">[57181]</a></span>: Moved DAG submission logic into a static Submit.from_dag() function (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-17 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57179\">[57179]</a></span>: Fixed bungled merge (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-31 11:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57177\">[57177]</a></span>: Fixed mangled merge (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-31 11:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57176\">[57176]</a></span>: Merged <span class=\"chng\"><a href=\"chngview?cn=56753\">[56753]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56754\">[56754]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56755\">[56755]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56759\">[56759]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56760\">[56760]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56787\">[56787]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56788\">[56788]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56794\">[56794]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56795\">[56795]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56796\">[56796]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56797\">[56797]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56798\">[56798]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56799\">[56799]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56800\">[56800]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56802\">[56802]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56817\">[56817]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56820\">[56820]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56821\">[56821]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56822\">[56822]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56823\">[56823]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56824\">[56824]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56839\">[56839]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56840\">[56840]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56841\">[56841]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56842\">[56842]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56847\">[56847]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56848\">[56848]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56853\">[56853]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56854\">[56854]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56856\">[56856]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56857\">[56857]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56859\">[56859]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=56862\">[56862]</a></span>,\u00a0[...]\n (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-30 11:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=57175\">[57175]</a></span>: Merged <span class=\"chng\"><a href=\"chngview?cn=55736\">[55736]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55745\">[55745]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55747\">[55747]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55751\">[55751]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55752\">[55752]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55770\">[55770]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55771\">[55771]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55772\">[55772]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55779\">[55779]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55780\">[55780]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55781\">[55781]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55786\">[55786]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55797\">[55797]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55805\">[55805]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55806\">[55806]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55812\">[55812]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55815\">[55815]</a></span>, Merging master with DAGMan python bindings code (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-30 11:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55819\">[55819]</a></span>: More cleanup (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-19 12:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55784\">[55784]</a></span>: Minor cleanup (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-19 11:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55783\">[55783]</a></span>: Added test + minor refactor (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-16 11:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55762\">[55762]</a></span>: Refactor and cleanup (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-15 16:57</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55761\">[55761]</a></span>: Added basic support for DAG submission arguments (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-14 16:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55759\">[55759]</a></span>: Trying to fix botched merge (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Nov-02 12:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55758\">[55758]</a></span>: Merged <span class=\"chng\"><a href=\"chngview?cn=55656\">[55656]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55657\">[55657]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55674\">[55674]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55675\">[55675]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55676\">[55676]</a></span>, <span class=\"chng\"><a href=\"chngview?cn=55680\">[55680]</a></span>, Tricky merge of dagman-utils (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6804\" onclick=\"get_ticket_and_populate_wrapper('6804'); return false;\" title=\"Consolidate DAGMan utilities into library usable by python bindings\">#6804</a></span>) and dagman-python-bindings (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)\u00a0[...]\n (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-19 16:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55756\">[55756]</a></span>: Added functionality to add .config data to dagman_utils (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-19 13:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55755\">[55755]</a></span>: Python Dag binding now generates .condor.sub via dagman_utils (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-18 18:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55753\">[55753]</a></span>: Initial dagman_utils refactor (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-17 16:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=55582\">[55582]</a></span>: Initial implementation with condor_submit_dag wrapper (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6275\" onclick=\"get_ticket_and_populate_wrapper('6275'); return false;\" title=\"Python binding for condor_submit_dag\">#6275</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Aug-07 11:44", "status": "resolved", "created": "2017-May-22 15:27", "fixed_version": "2017-May-22 15:27", "broken_version": "", "priority": "3", "subsystem": "PythonBinding", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "coatsworth@cs.wisc.edu", "due_date": ""}