{"id": 7344, "title": "Ticket #7344: Delay loop waiting for the network doesn't.", "description": "<blockquote>\n<div class=\"code\">\n<pre class=\"code\">10/25/19 18:04:02 DefaultReaper unexpectedly called on pid 26868, status 0.\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAI\nN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 2 of 2\n0).\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAIN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 3 of 20).\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAIN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 4 of 20).\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAIN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 5 of 20).\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAIN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 6 of 20).\n10/26/19 06:30:30 init_local_hostname_impl: ipv6_getaddrinfo() returned EAI_AGAIN for 'exec-23.batlab.org'.  Will try again after sleeping 3 seconds (try 7 of 20).\n10/26/19 06:30:30 ******************************************************\n10/26/19 06:30:30 ** condor_master (CONDOR_MASTER) STARTING UP\n10/26/19 06:30:30 ** /usr/sbin/condor_master\n10/26/19 06:30:30 ** SubsystemInfo: name=MASTER type=MASTER(2) class=DAEMON(1)\n10/26/19 06:30:30 ** Configuration: subsystem:MASTER local:&lt;NONE&gt; class:DAEMON\n10/26/19 06:30:30 ** $CondorVersion: 8.6.10 Apr 11 2018 BuildID: Debian-8.6.10~dfsg.1-1 Debian-8.6.10~dfsg.1-1 $\n10/26/19 06:30:30 ** $CondorPlatform: X86_64-Debian_9 $\n10/26/19 06:30:30 ** PID = 521\n10/26/19 06:30:30 ** Log last touched 10/26 06:26:15\n10/26/19 06:30:30 ******************************************************\n</pre></div>\n\n\n<p>So the machine dies and comes back about twelve hours later.  HTCondor is started before the network is fully up, but it doesn't actually <em>wait</em> like the log messages indicated that it should.\n\n</p><p>As a separate issue, this causes the master to come up with a private (shared port socket) command socket on the loopback interface.  At the time of inspection (two days later), the .master_address file had a non-loopback sinful in it, which raises the question of why the shared port daemon keeps failing with:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">10/26/19 06:30:31 attempt to connect to &lt;127.0.0.1:0&gt; failed: Connection refused (connect errno = 111).\n10/26/19 06:30:31 ChildAliveMsg: failed to send DC_CHILDALIVE to parent daemon at &lt;127.0.0.1:0&gt; (try 1 of 3): CEDAR:6001:Failed to connect to &lt;127.0.0.1:0?sock=521_f0ee&gt;\n10/26/19 06:30:31 attempt to connect to &lt;127.0.0.1:0&gt; failed: Connection refused (connect errno = 111).\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "incident", "last_change": "2019-Oct-28 11:56", "status": "new", "created": "2019-Oct-28 11:56", "fixed_version": "2019-Oct-28 11:56", "broken_version": "v080610", "priority": "2", "subsystem": "", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu, tim@cs.wisc.edu", "due_date": ""}