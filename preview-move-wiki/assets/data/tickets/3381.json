{"id": 3381, "title": "Ticket #3381: condor_collector logging to CollectorLog.old", "description": "<blockquote>\nOne condor_collector running, servicing queries and handling updates, and, whoops, logging into CollectorLog.old.\n\n<p></p><div class=\"verbatim\">\n<pre>/var/log/condor/CollectorLog -\n\n12/14/12 07:04:22 Now in new log file /var/log/condor/CollectorLog\n12/14/12 07:04:22 (Sending 414 ads in response to query)\n12/14/12 07:04:22 Query info: matched=414; skipped=36; query_time=0.016227; send_time=0.161746; type=Any; requirements={( ( ( MyType == \"Scheduler\" ) || ( MyType == \"Submitter\" ) ) || ( ( MyType == \"Machine\" ) ) )}; peer=&lt;10.10.10.10:37025&gt;; projection={}\n\n/var/log/condor/CollectorLog.old -\n\n12/14/12 07:04:22 Now in new log file /var/log/condor/CollectorLog\n12/14/12 07:04:22 Now in new log file /var/log/condor/CollectorLog\n12/14/12 07:04:22 WARNING: Failed to rotate log into file /var/log/condor/CollectorLog.old!\n12/14/12 07:04:22 Likely cause is that another Condor process rotated the file at the same time.\n12/14/12 07:04:22 Number of Active Workers 2\n12/14/12 07:04:22 Number of Active Workers 1\n12/14/12 07:04:22 (Sending 1 ads in response to query)\n12/14/12 07:04:22 Query info: matched=1; skipped=0; query_time=0.003016; send_time=0.000874; type=Negotiator; requirements={true}; peer=&lt;10.10.10.10:52035&gt;; projection={}\n12/14/12 07:04:22 Forwarding ad: type=Machine command=UPDATE_STARTD_AD\n12/14/12 07:04:22 Forwarding ad: type=Machine command=UPDATE_STARTD_AD\n12/14/12 07:04:22 Got QUERY_STARTD_PVT_ADS\n12/14/12 07:04:22 Number of Active Workers 1\n12/14/12 07:04:22 Number of Active Workers 0\n12/14/12 07:04:22 (Sending 409 ads in response to query)\n12/14/12 07:04:22 Query info: matched=409; skipped=0; query_time=0.011654; send_time=0.024144; type=MachinePrivate; requirements={true}; peer=&lt;10.10.10.10:34486&gt;; projection={}\n12/14/12 07:04:23 NegotiatorAd  : Inserting ** \"&lt; matchmaker.local &gt;\"\n12/14/12 07:04:24 Got QUERY_SCHEDD_ADS\n12/14/12 07:04:24 Number of Active Workers 1\n12/14/12 07:04:24 Number of Active Workers 0\n12/14/12 07:04:24 (Sending 1 ads in response to query)\n12/14/12 07:04:24 Query info: matched=1; skipped=0; query_time=0.001636; send_time=0.000859; type=Scheduler; requirements={true}; peer=&lt;10.10.10.11:43140&gt;; projection={Name TotalIdleJobs TotalRunningJobs TotalHeldJobs RecentJobsAccumRunningTime RecentJobsCompleted RecentJobsAccumTimeToStart RecentJobsStarted JobsAccumRunningTime JobsCompleted JobsAccumTimeToStart JobsStarted RecentJobsSubmitted RecentStatsLifetime RecentJobsStarted RecentStatsLifetime RecentJobsCompleted RecentStatsLifetime}\n...\n\n# ls -al /proc/$(pidof condor_collector)/fd\ntotal 0\ndr-x------. 2 root   root    0 Dec 14 07:08 .\ndr-xr-xr-x. 7 condor condor  0 Dec 13 12:09 ..\nlrwx------. 1 root   root   64 Dec 14 07:08 0 -&gt; /dev/null\nlrwx------. 1 root   root   64 Dec 14 07:08 1 -&gt; /dev/null\nlrwx------. 1 root   root   64 Dec 14 07:08 10 -&gt; socket:[2460543214]\nlrwx------. 1 root   root   64 Dec 14 07:08 11 -&gt; /var/log/condor/aviary_locator.log\nlrwx------. 1 root   root   64 Dec 14 07:08 12 -&gt; socket:[2460543215]\nlrwx------. 1 root   root   64 Dec 14 07:08 13 -&gt; anon_inode:[eventpoll]\nlrwx------. 1 root   root   64 Dec 14 07:08 14 -&gt; socket:[2460543108]\nlrwx------. 1 root   root   64 Dec 14 07:08 15 -&gt; socket:[2460543109]\nlrwx------. 1 root   root   64 Dec 14 07:08 16 -&gt; socket:[2460543217]\nl-wx------. 1 root   root   64 Dec 14 07:08 17 -&gt; /var/log/condor/CollectorLog.old\nlrwx------. 1 root   root   64 Dec 14 07:08 2 -&gt; /dev/null\nlrwx------. 1 root   root   64 Dec 14 07:08 3 -&gt; socket:[2698681730]\nlr-x------. 1 root   root   64 Dec 14 07:08 4 -&gt; pipe:[2460543159]\nl-wx------. 1 root   root   64 Dec 14 07:08 5 -&gt; pipe:[2460543159]\nlr-x------. 1 root   root   64 Dec 14 07:08 6 -&gt; pipe:[2460543201]\nl-wx------. 1 root   root   64 Dec 14 07:08 7 -&gt; pipe:[2460543201]\nlr-x------. 1 root   root   64 Dec 14 07:08 8 -&gt; /dev/urandom\nlrwx------. 1 root   root   64 Dec 14 07:08 9 -&gt; socket:[2460543213]\n</pre></div>\n\n\n<p>The query worker rotated the log, confusing its parent.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2012-Dec-14 06:24", "status": "new", "created": "2012-Dec-14 06:23", "fixed_version": "2012-Dec-14 06:23", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}