{"id": 1025, "title": "Ticket #1025: Replace dprintf levels with tags", "description": "<blockquote>\nThis is mostly psilord's thinking; I'm just submitting to get some initial thoughts in.  I'll let him flesh this out.\n\n<p>Census of existing dprintf level usage.  This is a really quick and dirty survey, and will include usages in comments and the actual definition.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">7021 D_ALWAYS\n2754 D_FULLDEBUG\n 407 D_SECURITY\n 291 D_JOB\n 253 D_SYSCALLS\n 151 D_FAILURE\n 141 D_NETWORK\n 102 D_HOSTNAME\n  96 D_DAEMONCORE\n  86 D_COMMAND\n  70 D_PROC\n  51 D_ACCOUNTANT\n  50 D_PROCFAMILY\n  37 D_IDLE\n  34 D_CKPT\n  31 D_PROTOCOL\n  27 D_LOAD\n  25 D_CONFIG\n  24 D_MACHINE\n  22 D_MATCH\n  18 D_EXPR\n  14 D_NFS\n  13 D_THREADS\n   9 D_PREEMPT\n   7 D_PRIV\n   6 D_KEYBOARD\n   3 D_UNUSED2\n   3 D_UNUSED1\n</pre></div>\n\n\n<p>Basically, the API would look something like this:\n\n</p><p><code>dprintf(level, tag list, format string, ...)</code>\n\n</p><p>In practice, you would call it like this:\n\n</p><p><code>dprintf(D_INFO, t(D_TAG1, D_TAG2, D_TAG3, ...), \"hello world\\n\");</code>\n\n</p><p><code>t</code> would be a C++ overloaded function which takes 1-10 tags and calls\n<code>t1</code>, <code>t2</code>, <code>t3</code>, etc, etc, etc which are the C API calls.\n\n</p><p>The tags are enums, specified in a header file.\n\n</p><p>Now, there could be only a flat set of tags, or a tag hierarchy. Pros and cons should be figured out for both.\n\n</p><p>As for the output, we can decide wether or not to propagate the tag names to the output lines or not, depending upon how we want to slice the data.\n\n</p><p>The current dprint() implementation can be changed to recast its bit flags into appropriate tags.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2009-Dec-23 13:02", "status": "new", "created": "2009-Dec-07 12:58", "fixed_version": "2009-Dec-07 12:58", "broken_version": "", "priority": "5", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu", "due_date": ""}