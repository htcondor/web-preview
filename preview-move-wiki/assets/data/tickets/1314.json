{"id": 1314, "title": "Ticket #1314: matches in M_STARTD_CONTACT_LIMBO are not removed as soon as desired", "description": "<blockquote>\nWhen all jobs that could have run on a match have been removed and that match is still waiting for the response to REQUEST_CLAIM (i.e. the match is in M_STARTD_CONTACT_LIMBO), the schedd holds onto the match until the startd responds.  It would be better to remove the match, which would cancel the REQUEST_CLAIM operation, allowing the startd to back out of retirement if it is in retirement, or at least allowing it to offer the slot to someone else.</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 16:03:30 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:46:04 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 16:01:00 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.\n\n<p></p><hr/>\n<em>2011-Jul-11 14:47:45 by danb:</em> <br/>\n\nI fixed this for the non-dedicated scheduler case, which is the case that originally spawned this ticket.  The dedicated scheduler is a very different case, because the scheduler may want to hold onto the claim even if no existing job can immediately make use of it.  In general, the dedicated scheduler has not been optimized to quickly yield unneeded claims, not just in this case but in others as well.  Therefore, I think we should consider this problem closed, without attempting an optimization to the dedicated scheduler for job removal during startd contact limbo.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2491\" onclick=\"get_ticket_and_populate_wrapper('2491'); return false;\" title=\"schedd crash after failed $$ expansion\">#2491</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nschedd crash after failed $$ expansion</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Jul-11 14:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=22402\">[22402]</a></span>: Cancel claim request if all jobs that could run on it are removed. Refactored code that recycles claims to reduce code duplication.\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Jul-11 14:47", "status": "resolved", "created": "2010-Mar-26 18:32", "fixed_version": "2010-Mar-26 18:32", "broken_version": "v070000", "priority": "4", "subsystem": "", "assigned_to": "danb", "derived_from": "#742", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu,dan@hep.wisc.edu", "due_date": ""}