{"id": 6336, "title": "Ticket #6336: Schedd skips jobs when negotiator prefetch enabled", "description": "<blockquote>\nWhen the negotiator starts a negotiation session with a schedd by giving it matchmaking results, then asks for request ads, the schedd skips one of its request ads, never sending it to the negotiator. This situation occurs when prefetching is enabled in the negotiator, and the negotiator doesn't prefetch all of the schedd's request ads.</blockquote>", "remarks": "<blockquote>\n<em>2017-Jul-31 14:51:11 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> change looks ok to me.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jul-31 16:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=51967\">[51967]</a></span>: Docs for negotiator prefetch bug fixes. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6336\" onclick=\"get_ticket_and_populate_wrapper('6336'); return false;\" title=\"Schedd skips jobs when negotiator prefetch enabled\">#6336</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6312\" onclick=\"get_ticket_and_populate_wrapper('6312'); return false;\" title=\"Protocol errors in negotiation\">#6312</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jul-11 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=51853\">[51853]</a></span>: Schedd skips jobs when negotiator prefetch enabled. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6336\" onclick=\"get_ticket_and_populate_wrapper('6336'); return false;\" title=\"Schedd skips jobs when negotiator prefetch enabled\">#6336</a></span> When the negotiator sends match results before asking for request ads, don't call nextJob() before sending the first request ad. Otherwise, we skip one of the ads.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Sep-14 14:41", "status": "resolved", "created": "2017-Jul-07 12:18", "fixed_version": "2017-Jul-07 12:18", "broken_version": "", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "tannenba", "derived_from": "#6312", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}