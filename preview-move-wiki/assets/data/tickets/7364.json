{"id": 7364, "title": "Ticket #7364: qcow version incompatibility takes down VMGahp", "description": "<blockquote>\nWhile testing a new EL7 CHTC submit host, we found that our qcow images generated on the host were version 3, which appeared to have compatibility issues with EL6:\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \n11/02/19 03:15:25 (D_ALWAYS) Failed to create libvirt domain: internal error process exited while connecting to monitor: char device redirected to /dev/pts/0\n2019-11-02T08:15:24.946338Z qemu-kvm: -drive file=/var/lib/condor/execute/slot1/dir_23471/input-image-014.qcow2,if=none,id=drive-virtio-disk1,format=qcow: 'qcow' invalid format\n</td></tr></tbody></table></div>\n\n\n<p>This is treated as an issue with VM universe on the worker node so it activates the killswitch and the WN sets <code><span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=HasVm\" title=\"Has Vm\">HasVm</a></span> = False</code>. Startd's should detect and advertise the highest qcow version they support, and if a job uses an unsupported version of qcow, the job should go on hold and indicate that the user should add qcow requirements to their job.\n\n</p><p>Inf RT ticket: <a class=\"external\" href=\"https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=98983&amp;results=064df32151edcbe6ce8e6560d55c36fc\">https://crt.cs.wisc.edu/rt/Ticket/Display.html?id=98983&amp;results=064df32151edcbe6ce8e6560d55c36fc</a></p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2019-Nov-08 14:14", "status": "new", "created": "2019-Nov-08 14:14", "fixed_version": "2019-Nov-08 14:14", "broken_version": "v080800", "priority": "4", "subsystem": "VM", "assigned_to": "tlmiller", "derived_from": "", "creator": "blin", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "blin@cs.wisc.edu", "due_date": ""}