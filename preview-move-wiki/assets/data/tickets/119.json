{"id": 119, "title": "Ticket #119: job_queue.log reading errors should include line numbers", "description": "<blockquote>\nIf the job_queue.log reading code in classad_log.C encounters problem, you get a relatively generic error like this:\n\n<p></p><ul>\n<li>10/23 14:40:51 Warning: Encountered nested transactions in /scratch/condor/spool/job_queue.log, log may be bogus...10/23 14:40:51 ERROR \"Error: bad record with op=104 in corrupt logfile\" at line 1052 in file classad_log.C\n</li></ul>\n\n<p>This is bad because 1: it doesn't tell the user where in the log the damage is, and 2: is actively confusing, because there is a line number given (1052 in this case), but it's a line number in the source code, not the line number in the log.\n\n</p><p>The desired behavior is something like this (Changes in <strong>bold</strong>):\n\n</p><p></p><ul>\n<li>10/23 14:40:51 Warning: Encountered nested transactions in /scratch/condor/spool/job_queue.log, log may be bogus...10/23 14:40:51 ERROR \"Error: bad record with op=104 in corrupt logfile <strong>on line 412</strong>\" at line 1052 in file classad_log.C\n</li></ul>\n\n<p>A quick look suggests that the code doesn't currently track line numbers, so obviously it would need to be taught to do that.\n\n</p><p>(Imported from <span class=\"drupalnode\"><a href=\"http://drupal-old.batlab.cs.wisc.edu/node/1696\">1696 (backup)</a> <a href=\"http://nmi.cs.wisc.edu/node/1696\">1696 (public)</a></span>)</p></blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-01 14:50", "status": "new", "created": "2009-Jan-26 11:38", "fixed_version": "2009-Jan-26 11:38", "broken_version": "", "priority": "4", "subsystem": "Libs", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}