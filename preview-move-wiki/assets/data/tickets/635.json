{"id": 635, "title": "Ticket #635: Job ClassAd should absorb arbitrary Machine ad fields on user request", "description": "<blockquote>\nA Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> should be able to specify a list of attributes from a Machine <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>.  When the job is matched to a given machine, the attributes so named are copied from the Machine <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> and inserted into the Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>.\n\n<p>Use cases:\n\n</p><p></p><ol>\n<li>A user is doing their own checkpointing in the vanilla universe.  Once they start running, future matches must be to a machine with similar attributes, perhaps Arch, or perhaps a custom attribute indicating a particular shared filesystem's presense (SharedFS).\n\n<p></p></li><li>A user might want to collect information about the machines his jobs ran on.  For example, he might collect Memory, KFlops, and perhaps some custom attributes (<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NetworkSpeed\" title=\"Network Speed\">NetworkSpeed</a></span>) and compare against run times to tune Requirements and Rank for future submissions.\n</li></ol>\n\n<p>Strawman syntax:\n\n</p><p>A use puts in his submit file:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">PullFromMachine = Arch, SharedFS, Memory, KFlops, NetworkSpeed\n</pre></div>\n\n\n<p>The Job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> ends up with:\n</p><div class=\"code\">\n<pre class=\"code\">PullFromMachine = \"Arch, SharedFS, Memory, KFlops, NetworkSpeed\"\n</pre></div>\n\n\n<p>Once matched to a machine, the job add would have something like the following added:\n</p><div class=\"code\">\n<pre class=\"code\">LastRemoteArch = \"INTEL\"\nLastRemoteSharedFS = \"/nfs/cluster-1-shared\"\nLastRemoteMemory = 1023\nLastRemoteKFlops = 1569267\nLastRemoteNetworkSpeed = 1000\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-20 15:59:08 by jfrey:</em> <br/>\n\nBulk change of target version from v070504 to v070505 using ./ticket-target-mover.\n<hr/>\n<em>2011-Jan-27 14:21:33 by danb:</em> <br/>\n\nBulk change of target version from v070505 to v070506 using ./ticket-target-mover.\n<hr/>\n<em>2011-Feb-01 14:49:30 by tannenba:</em> <br/>\n\nBulk change of target version from v070506 to NULL using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Feb-01 14:51", "status": "new", "created": "2009-Jul-22 11:29", "fixed_version": "2009-Jul-22 11:29", "broken_version": "", "priority": "4", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}