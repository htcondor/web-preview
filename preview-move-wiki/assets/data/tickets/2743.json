{"id": 2743, "title": "Ticket #2743: condor_chirp put and putfile doesnt work on Windows", "description": "<blockquote>\nthe condor_chirp client and server don't support <code>CONDOR_putfile</code> and <code>CONDOR_getfile</code>,  but condor_chirp.exe insists on using them to implement it's <code>put</code> function so condor_chirp put is broken on Windows.\n\n<p>In addition, the server side implementation of <code>CONDOR_putfile</code> opens the file for TEXT mode write, but the file is read and transmitted in BINARY mode, this tells the c-runtime <code>write</code> funtion to add a \\r for every \\n the write buffer.\n\n</p><p>Finally, the server (Starter) side of the chirp protocol has some parts of the protocol disabled with #ifdef WIN32 even though it might be talking to a Linux shadow that implements the full protocol.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-11 13:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=29068\">[29068]</a></span>: Hopefully did a correct edit of 7.6.6 version history items ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2739\" onclick=\"get_ticket_and_populate_wrapper('2739'); return false;\" title=\"condor_chirp closes the same FD twice - Asserts on Windows\">#2739</a></span> ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2743\" onclick=\"get_ticket_and_populate_wrapper('2743'); return false;\" title=\"condor_chirp put and putfile doesnt work on Windows\">#2743</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 17:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28983\">[28983]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2739\" onclick=\"get_ticket_and_populate_wrapper('2739'); return false;\" title=\"condor_chirp closes the same FD twice - Asserts on Windows\">#2739</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2743\" onclick=\"get_ticket_and_populate_wrapper('2743'); return false;\" title=\"condor_chirp put and putfile doesnt work on Windows\">#2743</a></span> ===VersionHistory:Complete===  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jan-04 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=28981\">[28981]</a></span>: fixes for 2 chirp bugs on Windows. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2743\" onclick=\"get_ticket_and_populate_wrapper('2743'); return false;\" title=\"condor_chirp put and putfile doesnt work on Windows\">#2743</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=2739\" onclick=\"get_ticket_and_populate_wrapper('2739'); return false;\" title=\"condor_chirp closes the same FD twice - Asserts on Windows\">#2739</a></span>. All chirp commands enabled in NTSenders for Windows, since it may be talking to Linux Shadow which implements them all. putfile, getfile, getdir and whoami implementations in the Shadow now build on Windows as well, the code for these was already fine\u00a0[...]\n (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2012-May-03 09:15", "status": "resolved", "created": "2012-Jan-04 15:38", "fixed_version": "2012-Jan-04 15:38", "broken_version": "v070600", "priority": "2", "subsystem": "Win32", "assigned_to": "gthain", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "users", "visibility": "public", "notify": "", "due_date": ""}