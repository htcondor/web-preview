{"id": 723, "title": "Ticket #723: leave_in_queue documentation changes for -spool option", "description": "<blockquote>\nleave_in_queue (AKA <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeaveJobInQueue\" title=\"Leave Job In Queue\">LeaveJobInQueue</a></span> in the job classad) is documented as defaulting to false.  This is true... unless you're using the -spool option to condor_submit.  In that case it defaults to\n\n<p></p><div class=\"code\">\n<pre class=\"code\">leave_in_queue = JobStatus == 4 &amp;&amp; (CompletionDate =?= UNDEFINED ||\\\n CompletionDate == 0 || ((CurrentTime - CompletionDate) &lt; 864000))\n</pre></div>\n\n\n<p>That policy will keep the job in the queue for 10 days after completing.\n\n</p><p>A user might instead prefer to have the job removed once the output is retrieved with condor_transfer_data. It might look something like this:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">leave_in_queue = (JobStatus == 4) &amp;&amp; ((StageOutFinish =?= UNDEFINED) ||\\\n(StageOutFinish == 0))\n</pre></div>\n\n\n<p>(Note: above was changed from <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutStart\" title=\"Stage Out Start\">StageOutStart</a></span> to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutFinish\" title=\"Stage Out Finish\">StageOutFinish</a></span>, as it more logically matches the intent.)\n\n</p><p>If the user doesn't want his output (say, because the job itself will upload the results somewhere), they might want to set it explicitly to FALSE.  This is only necessary if using -spool, as this is normally the default.\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">leave_in_queue = FALSE\n</pre></div>\n\n\n<p></p><hr/>\nDocumentation on <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutStart\" title=\"Stage Out Start\">StageOutStart</a></span> and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutFinish\" title=\"Stage Out Finish\">StageOutFinish</a></span>:\n\n<p>When a job is spooled to the remote site (using condor_submit -spool or Condor-C), Condor will hold onto the output in the spool while the job waits Completed in the queue.  condor_transfer_data can be used to retrieve the output, and Condor-C will do so automatically.  When retrieval begins <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutStart\" title=\"Stage Out Start\">StageOutStart</a></span> will be added to the job's <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>, set to the current time in Unix epoch time.  When retrieval ends, <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=StageOutFinish\" title=\"Stage Out Finish\">StageOutFinish</a></span> will be set to the current time in Unix epoch time.  While it is possible to set these with +StageOutStart=something or +StageOutFinish=something in a submit file,  it is not recommended.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-18 10:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25187\">[25187]</a></span>: completion of gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=723\" onclick=\"get_ticket_and_populate_wrapper('723'); return false;\" title=\"leave_in_queue documentation changes for -spool option\">#723</a></span>, related to job attribute <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeaveJobInQueue\" title=\"Leave Job In Queue\">LeaveJobInQueue</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-17 10:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=25186\">[25186]</a></span>: leave_in_queue and <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LeaveJobInQueue\" title=\"Leave Job In Queue\">LeaveJobInQueue</a></span> attribute defined and improved for gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=723\" onclick=\"get_ticket_and_populate_wrapper('723'); return false;\" title=\"leave_in_queue documentation changes for -spool option\">#723</a></span>  (By Karen Miller )</td></tr>\n</tbody></table>", "type": "doc", "last_change": "2009-Dec-18 10:11", "status": "resolved", "created": "2009-Sep-09 12:10", "fixed_version": "2009-Sep-09 12:10", "broken_version": "v070000", "priority": "4", "subsystem": "", "assigned_to": "smoler", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}