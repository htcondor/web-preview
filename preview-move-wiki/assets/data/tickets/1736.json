{"id": 1736, "title": "Ticket #1736: startd segfault receiving job classad update", "description": "<blockquote>\nIn CHTC, I observed a startd crash with the following log:\n\n<p></p><div class=\"verbatim\">\n<pre>10/27/10 07:47:54 slot8: in starter:killHard starting kill timer\n10/27/10 07:47:54 Return from Timer handler 96470 (Claim::leaseExpired)\n10/27/10 07:47:54 Calling Handler &lt;receiveJobClassAdUpdate&gt; (13)\n10/27/10 07:47:54 slot8: Received job ClassAd update from starter.\nStack dump for process 28239 at timestamp 1288183674 (15 frames)\ncondor_startd(dprintf_dump_stack+0xb7)[0x560e2a]\ncondor_startd[0x561096]\n/lib64/libpthread.so.0[0x358d60eb10]\ncondor_startd(_ZN6Client10setNumPidsEi+0x12)[0x4f812e]\ncondor_startd(_ZN5Claim14loadStatisticsEv+0x3b)[0x4fa5d9]\ncondor_startd(_ZN5Claim23receiveJobClassAdUpdateERN14compat_classad7ClassAdE+0x181)[0x4fafe1]\ncondor_startd(_ZN7Starter23receiveJobClassAdUpdateEP6Stream+0x11a)[0x51569c]\ncondor_startd(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x278)[0x549208]\ncondor_startd(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x54944f]\ncondor_startd(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x5f063d]\ncondor_startd(_ZN10DaemonCore17CallSocketHandlerERib+0x341)[0x53a8b9]\ncondor_startd(_ZN10DaemonCore6DriverEv+0x18c4)[0x53c210]\ncondor_startd(main+0x1aa8)[0x554dd2]\n/lib64/libc.so.6(__libc_start_main+0xf4)[0x358ca1d994]\ncondor_startd(__gxx_personality_v0+0x489)[0x4f74b9]\n</pre></div>\n\n\n<p>The startd received a job update after the claim lease expired and therefore right after it had hard-killed the starter.  Perhaps there is a pointer left behind that is pointing to something which has been deleted.\n\n</p><p>I don't know for sure that this problem only affects 7.5.4+.  It may affect earlier versions.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Oct-27 09:38:05 by danb:</em> <br/>\n\nThis problem was already fixed by Jaime in <span class=\"chng\"><a href=\"chngview?cn=19183\">[19183]</a></span>.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Oct-28 07:50", "status": "resolved", "created": "2010-Oct-27 09:29", "fixed_version": "2010-Oct-27 09:29", "broken_version": "v070504", "priority": "4", "subsystem": "", "assigned_to": "jfrey", "derived_from": "#121", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}