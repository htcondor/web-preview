{"id": 3605, "title": "Ticket #3605: 32-bit condor fails to execute jobs on large filesystem", "description": "<blockquote>\nWhen the job's initial working directory is on a filesystem with 64-bit values in the stat struct, execution of jobs by a 32-bit build of condor can fail with this error:\n\n<p></p><pre>    Failed to execute 'executable' with arguments blah:\n    Cannot access specified iwd \"/execute/dir/dir_23676\" (errno=75: 'Value too large for defined data type')\n</pre>\n\n<p>The problem is in <code>DaemonCore</code>.  Before the job is executed, the existence of the working directory is tested with a call to stat().  This source file does not define _FILE_OFFSET_BITS to 64.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Sep-16 11:28:02 by tannenba:</em> <br/>\n\n<strong>CODE REVIEW</strong>\n\n<p>Code changes look fine.</p></blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-02 12:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35582\">[35582]</a></span>: Check return code of full_read <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3605\" onclick=\"get_ticket_and_populate_wrapper('3605'); return false;\" title=\"32-bit condor fails to execute jobs on large filesystem\">#3605</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3590\" onclick=\"get_ticket_and_populate_wrapper('3590'); return false;\" title=\"Catchall ticket for coverity-found bugs\">#3590</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-May-01 21:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=35580\">[35580]</a></span>: Make iwd error reporting more robust. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3605\" onclick=\"get_ticket_and_populate_wrapper('3605'); return false;\" title=\"32-bit condor fails to execute jobs on large filesystem\">#3605</a></span> Do not use stat() to check existence. Instead, improve error propagation when chdir() fails. The child_failure_op that is passed back from the child process could be used to improve error reporting of other types of failures too. In this patch, I only dealt\u00a0[...]\n (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Sep-16 11:28", "status": "resolved", "created": "2013-May-01 20:08", "fixed_version": "2013-May-01 20:08", "broken_version": "v070800", "priority": "4", "subsystem": "", "assigned_to": "tannenba", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dan@hep.wisc.edu", "due_date": ""}