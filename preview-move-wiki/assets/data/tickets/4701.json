{"id": 4701, "title": "Ticket #4701: The obvious way to configure a personal condor is broken.", "description": "<blockquote>\nThe configuration\n\n<p></p><div class=\"verbatim\">\n<pre>use role : personal\nuse security : host_based\n</pre></div>\n\n\n<p>seems like an obvious way to get a personal condor, but doesn't actually create a working pool, because:\n\n</p><p></p><ol>\n<li>use role : personal sets CONDOR_HOST to 127.0.0.1\n</li><li>use security : host_based sets ALLOW_NEGOTIATOR to $(CONDOR_HOST)\n</li><li>Based on NETWORK_INTERFACE (default *) and BIND_ALL_INTERFACES (default TRUE), the collector drops an address file containing the host's public IPv4 address.\n</li><li>The negotiator reads that address file and contacts the collector accordingly.\n</li><li>The host's public IPv4 is NOT in ALLOW_NEGOTIATOR.\n</li></ol>\n\n<p>We don't want to turn off BIND_ALL_INTERFACES, because we think it's a good idea to allow users to expand a personal condor into a pool by only changing the ALLOW_* lines.  I think setting NETWORK_INTERFACE to 127.0.0.1 would prevent address rewriting, so querying the original collector would return useless addresses for the original daemons.\n\n</p><p>The proper solutions is probably something along the lines of: have 'use role : personal' set some variables (LOCAL_ADMINISTRATOR, LOCAL_NEGOTIATOR?) and have 'use role : host_based' add append them unconditionally to the corresponding ALLOW entries (including SCHEDD_NEGOTIATOR).  Empty entries at the end of the list are harmless, so this should just work (regardless of the ordering of the two use commands).</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2015-Feb-04 11:02", "status": "new", "created": "2014-Nov-05 16:24", "fixed_version": "2014-Nov-05 16:24", "broken_version": "", "priority": "3", "subsystem": "Libs", "assigned_to": "johnkn", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": ""}