{"id": 1001, "title": "Ticket #1001: Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs", "description": "<blockquote>\nActivation timer showed up in 1998 (git show 3cef52db). The conditional setting of ATTR_JOB_START has been around since at least 2003 (see V6_5-branch).\n\n<p>See: <a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=540545\">https://bugzilla.redhat.com/show_bug.cgi?id=540545</a></p></blockquote>", "remarks": "<blockquote>\n<em>2009-Nov-25 17:17:30 by tannenba:</em> <br/>\n\nSo...  bold proposal:  all startd policy expressions must meta-equals True to be triggered.  In other words, if any of the policy expressions evaluate to UNDEFINED it is the same as evaluating to False.  Thoughts?\n\n<p></p><hr/>\n<em>2009-Nov-30 08:55:38 by tstclair:</em> <br/>\n\nThe code actually did the \"right\" thing, but it was rather difficult to diagnose. I believe this points to a more fundamental issue, leaving breadcrumbs in error handling.  The original error was EXCEPT( \"Can't find WANT_SUSPEND in internal <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>\" ), which gives a starting point, but developers have to whip out their sloothing hats and determine a direction.\n\n<p>It may be beneficial to examine the EXCEPT sites and leave breadcrumbs (e.g. - \"Hint: Check that your expression does not have an UNDEFINED variable.\")\n\n</p><p>maybe an EXCEPT_TYPE(T, \"Message\")\nT appends debugging info based on type.\nCheck a, then b, then c, if all else fails nuke this code.\n\n</p><p>To be honest, I would use exceptions, or a tribool... but hey, that's me.  ;-)\n\n</p><p></p><hr/>\n<em>2009-Nov-30 09:36:52 by matt:</em> <br/>\n\nI would be for pulling the policy expressions into a central place where we can document and enforce consistency.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-29 15:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/614cb6cfb62f47641efdf15452e23f90d409a753\">[25797]</a></span>: more correctly document WANT_SUSPEND behavior -- changed in 7.4.2 (gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1001\" onclick=\"get_ticket_and_populate_wrapper('1001'); return false;\" title=\"Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs\">#1001</a></span>)  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-29 15:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1f0a6f39fbc32668dedc8a5ec2d3e139efe179c6\">[25795]</a></span>: Revert \"Documented meaning of UNDEFINED WANT_SUSPEND. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1001\" onclick=\"get_ticket_and_populate_wrapper('1001'); return false;\" title=\"Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs\">#1001</a></span>\" This reverts commit ba7dae13e5d9103838cd5bcf5753410c03f83fda.  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Nov-29 12:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ba7dae13e5d9103838cd5bcf5753410c03f83fda\">[25794]</a></span>: Documented meaning of UNDEFINED WANT_SUSPEND. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1001\" onclick=\"get_ticket_and_populate_wrapper('1001'); return false;\" title=\"Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs\">#1001</a></span>  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-18 14:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6d4b6e5119261851e17996e5121c42b7c3a045fe\">[16728]</a></span>: WANT_SUSPEND that is UNDEFINED, either by being absent or evaluating to UNDEFINED, now means FALSE. It used to mean EXCEPT! (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1001\" onclick=\"get_ticket_and_populate_wrapper('1001'); return false;\" title=\"Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs\">#1001</a></span>)  (By Matthew Farrellee )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-18 14:50</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/745a047243d94d23ac286fd604c57542f3f3cd15\">[16727]</a></span>: Protect <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ActivationTimer\" title=\"Activation Timer\">ActivationTimer</a></span> from going to UNDEFINED (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1001\" onclick=\"get_ticket_and_populate_wrapper('1001'); return false;\" title=\"Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs\">#1001</a></span>)  (By Matthew Farrellee )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2009-Dec-18 15:02", "status": "resolved", "created": "2009-Nov-25 11:50", "fixed_version": "2009-Nov-25 11:50", "broken_version": "v070000", "priority": "3", "subsystem": "Daemons", "assigned_to": "matt", "derived_from": "", "creator": "matt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu,zmiller@cs.wisc.edu,tannenba@cs.wisc.edu", "due_date": ""}