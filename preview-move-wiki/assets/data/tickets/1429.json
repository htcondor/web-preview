{"id": 1429, "title": "Ticket #1429: SUBMIT_EXPRS docs vs code: Not like +syntax.", "description": "<blockquote>\n<a class=\"external\" href=\"http://www.cs.wisc.edu/condor/manual/v7.4/3_3Configuration.html#param:SubmitExprs\">The documention for SUBMIT_EXPRS claims</a>:\n<div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nA comma-separated list of ClassAd attributes to be inserted into all the job ClassAds that condor_submit creates. This is equivalent to the \"+\" syntax in a submit description file.\n</td></tr></tbody></table></div>\n\n\n<p>Not necessarily. condor_submit may pull in SUBMIT_EXPRS directly as though they appeared in the submit. That can lead to slightly different parsing.  It may ignore it entirely.\n\n</p><p>I suspect that some submit file commands will be parsed from SUBMIT_EXPRS and others won't.  We should determine which behavior we want, then make it sure it apples to all submit file commands.\n\n</p><p>Here are some examples:\n\n</p><p><span class=\"section\"></span></p><h2>notification/JobNotification </h2>\n\n<p>For example, in my submit file, I can specify Notification=ALWAYS (JobNotification=1 in the job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span>) in my using two different syntax:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">executable=/bin/true\nNotification=ALWAYS\nqueue\n</pre></div>\n\n\n<p>or\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">executable=/bin/true\n+JobNotification=1\nqueue\n</pre></div>\n\n\n<p>You can test that they are identical with the following commands:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nnotification=always\\nqueue\\n\" | condor_submit -verbose -dump /dev/null | grep JobNotification\nJobNotification = 1\n% /bin/echo -e \"executable=/bin/true\\n+JobNotification=1\\nqueue\\n\" | condor_submit -verbose -dump /dev/null | grep JobNotification\n</pre></div>\n\n\n<p>If the documentation is correct, to specify this with SUBMIT_EXPRS, I might say:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">JobNotification=1\nSUBMIT_EXPRS=JobNotification\n</pre></div>\n\n\n<p>Except it doesn't work.  condor_submit loads the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobNotification\" title=\"Job Notification\">JobNotification</a></span> and parses it:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nqueue\\n\" | env _CONDOR_JobNotification=1 _CONDOR_SUBMIT_EXPRS=JobNotification condor_submit -verbose -dump /dev/null | grep JobNotification\n\nERROR: Notification must be 'Never', 'Always', 'Complete', or 'Error'\n</pre></div>\n\n\n<p>Sure enough, you can pass in a string:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nqueue\\n\" | env _CONDOR_Notification=ALWAYS _CONDOR_SUBMIT_EXPRS=Notification condor_submit -verbose -dump /dev/null | grep JobNotification\nJobNotification = 1\n</pre></div>\n\n\n<p><span class=\"section\"></span></p><h2>priority/JobPrio </h2>\n\n<p>My job can use the +syntax to set <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=JobPrio\" title=\"Job Prio\">JobPrio</a></span>:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\n+JobPrio=42\\nqueue\\n\" | condor_submit -verbose -dump /dev/null | grep JobPrio\nJobPrio = 42\n% /bin/echo -e \"executable=/bin/true\\npriority=42\\nqueue\\n\" | condor_submit -verbose -dump /dev/null | grep JobPrio\nJobPrio = 42\n</pre></div>\n\n\n<p>But SUBMIT_EXPRS cannot:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">% /bin/echo -e \"executable=/bin/true\\nqueue\\n\" | env _CONDOR_JobPrio=42 _CONDOR_SUBMIT_EXPRS=JobPrio condor_submit -verbose -dump /dev/null | grep JobPrio\nJobPrio = 0\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Jun-03 13:26", "status": "new", "created": "2010-Jun-07 14:13", "fixed_version": "2010-Jun-07 14:13", "broken_version": "v070402", "priority": "5", "subsystem": "Tools", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}