{"id": 5269, "title": "Ticket #5269: NumShadowStarts greater than 0 for local universe jobs", "description": "<blockquote>\n(from Stuart Anderson)\n\n<p>Condor team,\n        Is it a bug or a feature that on,\n\n</p><p></p><pre>  [root@detchar ~]# condor_version\n  $CondorVersion: 8.2.9 Aug 13 2015 BuildID: 335839 $\n  $CondorPlatform: x86_64_RedHat6 $\n</pre>\n\n<p>I see a Local Universe job with 101 <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumShadowStarts\" title=\"Num Shadow Starts\">NumShadowStarts</a></span>,\n\n</p><p></p><pre>  [root@detchar ~]# condor_q -long 16.0 | grep -i universe\n  JobUniverse = 12\n  [root@detchar ~]# condor_q -long 16.0 | grep ^NumShadow\n  NumShadowExceptions = 0\n  NumShadowStarts = 101\n</pre>\n\n<p>since I didn\u2019t think Local Universe jobs had a Shadow process?\n\n</p><p>The reason I ask is that this is triggering a SYSTEM_PERIODIC_HOLD expression we have to catch misbehaving jobs.\n\n</p><p>Mike, Duncan,\n        This recently happened for the gw_daily_summary job on detchar.ligo.caltech.edu. I just ran condor_qedit and condor_release\u2019d this job, i.e.,\ncondor_qedit 16.0 <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumShadowExceptions\" title=\"Num Shadow Exceptions\">NumShadowExceptions</a></span> 0 <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumShadowStarts\" title=\"Num Shadow Starts\">NumShadowStarts</a></span> 0\ncondor_release 16.0\nPlease check if this is also a problem for the summary-llo jobs that nagios is currently complaining about.</p></blockquote>", "remarks": "<blockquote>\nFrom Aug. 5 e-mail.\n\n<p>Duncan:\n\n</p><p>Seems like you are on the right path here.  You could change your SYSTEM_PERIODIC_HOLD expression, so jobs never go on hold if they define one of the cron parameters.\n\n</p><p>Longer term, we've had a lot of success using dagman as a \"cronman\" to run cron jobs.  With this approach, each scheduled instance of a run is a seperate condor job instance, with its own cluster &amp; procd id, entry in the history file, etc.  It may be more useful to you.  We've written it up at:\n\n</p><p><span class=\"wiki\"><a href=\"wiki?p=HowToRunJobsPeriodicallyLikeCron\" title=\"How To Run Jobs Periodically Like Cron\">HowToRunJobsPeriodicallyLikeCron</a></span>\n\n</p><p>-greg\n\n</p><p></p><hr/>\n<em>2015-Sep-22 16:05:56 by gthain:</em> <br/>\n\nThis is more of a feature than a bug -- although technically, the local universe jobs do not have a shadow, their starter functions as both a starter and shadow, and I think it is more confusing to rename this \"<span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=NumStarterStarts\" title=\"Num Starter Starts\">NumStarterStarts</a></span>\" for local universe jobs than to keep it consistent with other universes (though technically incorrect).\n\n<p></p><hr/>\n<em>2015-Sep-22 16:06:49 by tpdownes:</em> <br/>\n\nStuart has directed CIT staff to alter periodic hold expression so that work can complete now. In long term, advice of Greg should be taken. Closing ticket.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2015-Sep-22 16:06", "status": "defer", "created": "2015-Sep-21 17:13", "fixed_version": "2015-Sep-21 17:13", "broken_version": "v080208", "priority": "5", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "tpdownes", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "anderson@ligo.caltech.edu, downes@uwm.edu, duncan.macleod@ligo.org,pcouvare@caltech.edu", "due_date": ""}