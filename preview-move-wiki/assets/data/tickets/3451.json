{"id": 3451, "title": "Ticket #3451: file transfer from win to linux (or reverse) directory support broken", "description": "<blockquote>\nper a report from HTCondor-users:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">I have a job that creates a directory containing output files. So after\nthe job runs on the execute machine I have\n\ndir1\n    file1\n    file2\n    file3\n\nIn the job description file I have\ntransfer_output_files = dir1\n\nWhen I submit the job from a linux host but the job executes on a\nwindows host when the files are copied back to the submit host instead\nof a directory containing the output files I get an empty directory and\nthen a bunch of files whose names are the directory name and file name\njoined by a backslash.\n\nbash-4.1$ls\ndir1  dir1\\file1  dir1\\file2  dir1\\file3\nbash-4.1$\n</pre></div>\n\n\n<p>obviously the DIR_DELIM_CHAR is not being correctly translated.\n\n</p><p>on linux, no code changes are necessary.  the following two proposed change applies to windows only:\n</p><ul>\n<li>the filename sent across the wire has all backslashes converted to forward slashes\n</li><li>upon receiving any filename, all forward slashes are converted to backslashes.\n</li></ul>\n\n<p>as a result of the above:\n</p><ul>\n<li>when sending from linux to linux no changes are made to the slashes\n</li><li>when sending from windows to linux, you'll end up with all slashes converted to forward slashes.\n</li><li>when sending from windows to windows you'll end up with all slashes converted to backward slashes.\n</li><li>when sending from linux to windows you'll end up with all slashes converted to backward slashes.\n</li></ul>\n\n<p>the last case is slightly problematic, as a backslash is a valid character in linux filenames.  however, that was a problem before this ticket.\n\n</p><p>finally, when it comes to backwards compatibility, windows could already deal with forward slashes in the path names, so changing the behavior to the above is Stricly Better(TM).</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jan-18 16:15:12 by zmiller:</em> <br/>\n\ni have a patch for V7_8-branch already done.  it can't be merged forward cleanly yet due to the new directory-remapping changes that were made in V7_9_2.  when both are done i will push.\n\n<p></p><hr/>\n<em>2014-Nov-26 13:57:07 by johnkn:</em> <br/>\n\nI found this while looking for another bug ticket. I see no commits here, is this still broken?</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4747\" onclick=\"get_ticket_and_populate_wrapper('4747'); return false;\" title=\"transfer_input_files doesn't transfer directories on Windows.\">#4747</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ntransfer_input_files doesn't transfer directories on Windows.</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=6302\" onclick=\"get_ticket_and_populate_wrapper('6302'); return false;\" title=\"file transfer of directories windows to linux directory delimiter bug\">#6302</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nfile transfer of directories windows to linux directory delimiter bug</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/tickets?ticket=7061\" onclick=\"get_ticket_and_populate_wrapper('7061'); return false;\" title=\"Transferred files in subdirs from Win to *nix contain backslash\">#7061</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nTransferred files in subdirs from Win to *nix contain backslash</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2019-May-13 16:59", "status": "new", "created": "2013-Jan-18 10:13", "fixed_version": "2013-Jan-18 10:13", "broken_version": "v070800", "priority": "3", "subsystem": "Win32", "assigned_to": "zmiller", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "tstclair@redhat.com", "due_date": ""}