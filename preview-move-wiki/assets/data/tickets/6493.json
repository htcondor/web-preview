{"id": 6493, "title": "Ticket #6493: Improve error checking in Password and SSL authentication code", "description": "<blockquote>\nCheck return codes and fix allocation issues in password and ssl authentication code.\n\n<p>Ensure both sides stay in sync in their message exchanges if an error occurs during password authentication.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Nov-30 14:46:26 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW the FIRST</strong>:  Zach signs off on Jaime's commit.\n\n<p></p><hr/>\n<em>2017-Dec-01 14:44:06 by jfrey:</em> <br/>\n\n<strong>CODE REVIEW the SECOND</strong>:  Jaime signs off on Zach's commit.\n\n<p></p><hr/>\n<em>2017-Dec-11 10:37:57 by jfrey:</em> <br/>\n\nIn password authentication, if one side encounters an error, it will send an ERROR message with dummy data. The two sides will continue their message exchange with dummy data before returning failure to their respective callers. This is sub-optimal but correct behavior.\n\n<p>Now, both sides recognize reception of an ABORT message, which indicates that password authentication has failed and no further messages should be exchanged. The connection remains in a consistent state so that other methods can be attempted. The ABORT message is not currently sent, as older clients don't react as needed. This is left as a future potential feature.\n\n</p><p></p><hr/>\n<em>2017-Dec-15 11:05:08 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW the THIRD</strong>: Jaime's additional changes approved.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Dec-11 10:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/caa01539d0c373f26cec76e0a888b58afdf33cb2\">[52967]</a></span>: Improve keeping both sides in sync during password authentication. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6493\" onclick=\"get_ticket_and_populate_wrapper('6493'); return false;\" title=\"Improve error checking in Password and SSL authentication code\">#6493</a></span> If one side sends an ERROR message, ensure both sides will exchange the same set of messages (with dummy values) before returning failure. Allow one side to send an ABORT message, which will allow both sides to end the protocol\u00a0[...]\n (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Nov-30 14:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9897fc94428b02f9ac543766672589c4f0f05a63\">[52896]</a></span>: Version history for ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6493\" onclick=\"get_ticket_and_populate_wrapper('6493'); return false;\" title=\"Improve error checking in Password and SSL authentication code\">#6493</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Nov-30 14:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2081f496ba191ec9cad570d43205b1ea5950bfb2\">[52894]</a></span>: Add data length sanity check in cedar SSL authentication code. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6493\" onclick=\"get_ticket_and_populate_wrapper('6493'); return false;\" title=\"Improve error checking in Password and SSL authentication code\">#6493</a></span>  (By zmiller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Nov-28 16:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/81b629464fd782dce08e4adffcfe77a20d3e1a57\">[52881]</a></span>: Improve error checking in cedar password authentication code. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6493\" onclick=\"get_ticket_and_populate_wrapper('6493'); return false;\" title=\"Improve error checking in Password and SSL authentication code\">#6493</a></span> Fix return code checks for put_bytes(). Add data length sanity checks.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Dec-19 13:09", "status": "resolved", "created": "2017-Nov-28 15:19", "fixed_version": "2017-Nov-28 15:19", "broken_version": "", "priority": "1", "subsystem": "Security", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}