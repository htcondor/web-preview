{"id": 2044, "title": "Ticket #2044: Dynamic slots in OWNER state won't be removed", "description": "<blockquote>\n(Description copied from <a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=691969\">https://bugzilla.redhat.com/show_bug.cgi?id=691969</a>; John has a patch for this issue, and I'll be reviewing and integrating it.)\n\n<p>Description of problem:\n\n</p><p>If I setup dynamic slot and configure it to run only special job by job\nattitude, for example:\n\n</p><p></p><pre>  NUM_CPUS=8\n  SLOT_TYPE_1 = cpus=8\n  SLOT_TYPE_1_PARTITIONABLE = TRUE\n  NUM_SLOTS_TYPE_1 = 1\n</pre>\n\n<p></p><pre>  START = TARGET.JobIsSpecial=?=True\n</pre>\n\n<p>Then when a special job is submitted:\n\n</p><p></p><pre>  Executable=/bin/sleep\n  Arguments=20\n  Universe=Vanilla\n  +JobIsSpecial=True\n  should_transfer_files = YES\n  when_to_transfer_output = ON_EXIT\n  queue\n</pre>\n\n<p>The dynamic slot would be created to run the job. But it will NOT be removed\nafter the job finished.\n\n</p><p>It is because the dynamic slot will be in Owner state because of the START\nexpression, but from the source code dynamic slot only change to delete state\nfrom Unclaimed state.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-20 16:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d1e3af964f2df7477436635496f808e5a806820f\">[21467]</a></span>: Ensure that dynamic slots that were in OWNER state will be deleted when jobs running on them complete. Committer: Will Benton  (By John Lau )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Apr-21 17:34", "status": "defer", "created": "2011-Apr-07 14:58", "fixed_version": "2011-Apr-07 14:58", "broken_version": "v070404", "priority": "5", "subsystem": "Daemons", "assigned_to": "willb", "derived_from": "", "creator": "willb", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "willb@redhat.com,matt@cs.wisc.edu,jefrey@cs.wisc.edu,jlau@redhat.com,pcouvare@caltech.edu", "due_date": "20110418"}