{"id": 3088, "title": "Ticket #3088: Interactive job support", "description": "<blockquote>\nAdd support for interactive jobs via a <code>-interactive</code> option to condor_submit, which effectively submits a short sleep job followed by an <code>ssh_to_job -auto-retry -X -remove-on-interrupt</code>.  Once the ssh_to_job succeeds, the sleep job is killed, so that as soon as the user logs out the job is completed.\n\n<p>It is envisioned most users will simply run <code>condor_submit -interactive</code> without any submit description file, and thus a simple default one specified by config knob <code>INTERACTIVE_SUBMIT_FILE</code> in libexec will be used. But if an optional job submit file is provided to condor_submit -interactive, then rewrite the job to effectively run /bin/sleep (i.e. ignore executable, arguments, universe, queue), but honor attributes such as requirements, request_memory, environment, etc.  This gives users an easy to establish an interactive session that mimics the environment created by an actual job submit file.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Oct-03 13:56:42 by tannenba:</em> <br/>\n\nDevelopment on this ticket is complete, as is most of the documentation. However, I think there is still a placeholder in the manual for a sample administrator startd policy to schedule interactive jobs.  Thus I am moving this ticket to <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=DocPending\" title=\"Doc Pending\">DocPending</a></span> and assigning to Karen.....\n\n<p></p><hr/>\n<em>2013-Feb-06 12:55:43 by smoler:</em> <br/>\n\nDocumentation in the manual is complete.  There probably ought to be more examples for configuration on the wiki, but the one in the manual is sufficient.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\njob description attribute in the job <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span></td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3242\" onclick=\"get_ticket_and_populate_wrapper('3242'); return false;\" title=\"remove an interactive job if client interrrupted before it starts\">#3242</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nremove an interactive job if client interrrupted before it starts</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3455\" onclick=\"get_ticket_and_populate_wrapper('3455'); return false;\" title=\"condor_submit -interactive does not always override args correctly\">#3455</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\ncondor_submit -interactive does not always override args correctly</td></tr>\n</tbody></table>", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-08 13:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=34559\">[34559]</a></span>: edits of new prose describing interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-08 11:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=34553\">[34553]</a></span>: Documentation for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-03 11:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33580\">[33580]</a></span>: Override job universe to always be vanilla for interactive jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span> This is how interactive jobs are documented, and it makes sense. Was just overlooked in the implementation.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Oct-03 11:24</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33579\">[33579]</a></span>: Want interactive jobs to transfer IF_NEEDED by default. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span> Previously, interactive jobs disabled file transfer, but that is not ideal default behaivor because machines in different file system domains would fail to match.  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-31 12:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33230\">[33230]</a></span>: more documentation of interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-30 14:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33215\">[33215]</a></span>: some documentation of interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-30 12:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33214\">[33214]</a></span>: document new job attribute and submit command, plus some details about how they change with interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span> ===GT=== <span class=\"ticket\"><a class=\"active\" href=\"/tickets?ticket=3139\" onclick=\"get_ticket_and_populate_wrapper('3139'); return false;\" title=\"job description attribute in the job ClassAd\">#3139</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-29 11:04</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33201\">[33201]</a></span>: placeholders added for coming documentation on interactive jobs ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-16 11:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=33088\">[33088]</a></span>: add 7.9.0 version history item about new condor_submit -interactive option ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-27 17:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32506\">[32506]</a></span>: fix build break in <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span>. can't assign string literal to char*.  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Jun-27 15:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=32499\">[32499]</a></span>: Initial support for interactive job submissions. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3088\" onclick=\"get_ticket_and_populate_wrapper('3088'); return false;\" title=\"Interactive job support\">#3088</a></span> Added -interactive flag to condor_submit on Unix, resulting in submission of a job specified by INTERACTIVE_SUBMIT_FILE knob being submitted, at which point condor_ssh_to_job is invoked.  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Feb-06 12:55", "status": "resolved", "created": "2012-Jun-26 13:01", "fixed_version": "2012-Jun-26 13:01", "broken_version": "", "priority": "4", "subsystem": "Tools", "assigned_to": "smoler", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "tstclair@redhat.com tannenba@cs.wisc.edu", "due_date": ""}