{"id": 7556, "title": "Ticket #7556: Add knob to disable random choice of collector for HAD queries", "description": "<blockquote>\nWhen a pool is configured with multiple collectors for HAD (high availability), a query to the collector contacts the collectors in random order until one responds. In some pools, this spreading of query load across all of the redundant collectors is not desirable. There should be a knob to tells clients to try the collectors in the order they're listed in the config file.</blockquote>", "remarks": "<blockquote>\n<hr/>\n<em>2020-Apr-10 07:46:37 by tim:</em> <br/>\n\nBulk change of target version from v080906 to v080907 using ticket-target-mover.\n\n<p></p><hr/>\n<em>2020-Apr-14 15:07:03 by jfrey:</em> <br/>\n\nInstead of adding a new config knob, allow existing knob HAD_USE_PRIMARY to enable this feature. It fits with the existing  purpose of HAD_USE_PRIMARY (the first CM in the list should be the preferred active CM and the others are backups).</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-14 15:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f70780d2a844ac8b7d3ad66c6253e4b0c678782b\">[59348]</a></span>: Docs for HAD_USE_PRIMARY disabling random order of collector query. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7556\" onclick=\"get_ticket_and_populate_wrapper('7556'); return false;\" title=\"Add knob to disable random choice of collector for HAD queries\">#7556</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-14 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/64d6aadaccdd748fc165b6479c36d228128525c4\">[59347]</a></span>: Docs for HAD_USE_PRIMARY disabling random order of collector query. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7556\" onclick=\"get_ticket_and_populate_wrapper('7556'); return false;\" title=\"Add knob to disable random choice of collector for HAD queries\">#7556</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Apr-14 15:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56b9a7c14ad43eb12673b1c07a9d083a7cbfaf68\">[59346]</a></span>: Use param HAD_USE_PRIMARY for disabling random choice of collector. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7556\" onclick=\"get_ticket_and_populate_wrapper('7556'); return false;\" title=\"Add knob to disable random choice of collector for HAD queries\">#7556</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Mar-13 11:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/de2d21047578d2dd679f65391f8803843ff734f6\">[59149]</a></span>: Add knob to query HAD collectors in order. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7556\" onclick=\"get_ticket_and_populate_wrapper('7556'); return false;\" title=\"Add knob to disable random choice of collector for HAD queries\">#7556</a></span> The new config knob HAD_QUERY_COLLECTORS_IN_ORDER can disable the randomizing of the order in which HAD collectors are queried.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2020-Apr-14 15:16", "status": "resolved", "created": "2020-Mar-12 14:31", "fixed_version": "2020-Mar-12 14:31", "broken_version": "", "priority": "3", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}