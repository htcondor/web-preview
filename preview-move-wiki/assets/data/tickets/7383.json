{"id": 7383, "title": "Ticket #7383: condor_submit should set an attr if the user specified getenv=true", "description": "<blockquote>\nWe want to warn and/or disallow users from using getenv=true (because in a grid environment it's almost always the wrong thing to do, and results in pain and suffering).\n\n<p>The most elegant way we can think of to do this is to use a transform which checks for it, and rejects the job with a nice error message at submit time.\n\n</p><p>However, I believe getenv=true is a submit file command which modifies the environment attr in the job ad, but does not result in any clear evidence classad evidence that it was specified.\n\n</p><p>If Condor could set used_getenv=true or something in the job ad, we could do it.\n\n</p><p>Alternatively, Condor could implement a first-class feature to disable getenv=true, but we're happy to use a transform, and this seems like a trivial change on your end.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Nov-15 15:53:22 by pfc:</em> <br/>\n\nWhen this is done, we need to implement the job transform on the IGWN side: <a class=\"external\" href=\"https://github.com/lscsoft/osg-igwn/issues/129\">https://github.com/lscsoft/osg-igwn/issues/129</a>\n\n<p></p><hr/>\n<em>2019-Nov-18 10:31:38 by gthain:</em> <br/>\n\nWe'd prefer a submit-side knob to make getenv=true an error, if that's OK with IGWN.\n\n<p></p><hr/>\n<em>2019-Dec-03 10:56:57 by gthain:</em> <br/>\n\nNote that a clever use can override this condor_submit knob (or any submit side knob) with an environment variable, e.g.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">_condor_SUBMIT_ALLOW_GETENV=true condor_submit my_submit_file\n</pre></div>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-09 13:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/74e97555f1293fb6da056c5ea00e28dbf4065af5\">[58620]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7383\" onclick=\"get_ticket_and_populate_wrapper('7383'); return false;\" title=\"condor_submit should set an attr if the user specified getenv=true\">#7383</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-09 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fd753d72ced8614ab4b5b4d227ba21a79e7460e7\">[58619]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7383\" onclick=\"get_ticket_and_populate_wrapper('7383'); return false;\" title=\"condor_submit should set an attr if the user specified getenv=true\">#7383</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-18 10:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0dcbab6056602b428cf1d12e2b085cd8285cb536\">[58494]</a></span>: Allow admins to prevent getenv=true <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=7383\" onclick=\"get_ticket_and_populate_wrapper('7383'); return false;\" title=\"condor_submit should set an attr if the user specified getenv=true\">#7383</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Dec-09 13:49", "status": "resolved", "created": "2019-Nov-15 15:21", "fixed_version": "2019-Nov-15 15:21", "broken_version": "", "priority": "3", "subsystem": "Tools", "assigned_to": "gthain", "derived_from": "", "creator": "pfc", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "stuart.anderson@ligo.org, james.clark@ligo.org, emfajardohernandez@physics.ucsd.edu", "due_date": ""}