{"id": 3589, "title": "Ticket #3589: Gridmanager doesn't use spooled executable for cream jobs", "description": "<blockquote>\nFor CREAM jobs (and probably other job types), the gridmanager checks the Cmd job attribute to find the job's executable. If the user sets copy_to_spool to True in the submit file, then the executable is copied into the spool directory, but Cmd still contains the original filename. The gridmanager needs to call gen_ckpt_name() and check if the filename returned exists. If it does, then it should be used as the job executable.</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=4391\" onclick=\"get_ticket_and_populate_wrapper('4391'); return false;\" title=\"Cream jobs with spooled executable fail at startup\">#4391</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nCream jobs with spooled executable fail at startup</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Oct-09 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/22e839dd68f202158f64fa20b7f44cd52f8ac23d\">[37805]</a></span>: Fix GetJobExecutable() for Windows full pathnames. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3589\" onclick=\"get_ticket_and_populate_wrapper('3589'); return false;\" title=\"Gridmanager doesn't use spooled executable for cream jobs\">#3589</a></span> Use fullpath(), which has a better check for whether a filename is an absolute path. this fixes <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3975\" onclick=\"get_ticket_and_populate_wrapper('3975'); return false;\" title=\"8.1.2 condorc van windows failure to transfer executable\">#3975</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-26 10:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/47f1a7ace2780e5e1251dee33e6e1992497521e2\">[37724]</a></span>: minor 8.1.2 version history item edit <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3589\" onclick=\"get_ticket_and_populate_wrapper('3589'); return false;\" title=\"Gridmanager doesn't use spooled executable for cream jobs\">#3589</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-19 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9df2107426bba93a2f023ffc092e259e2103af7b\">[37687]</a></span>: Version history for grid universe and copy_to_spool. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3589\" onclick=\"get_ticket_and_populate_wrapper('3589'); return false;\" title=\"Gridmanager doesn't use spooled executable for cream jobs\">#3589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-19 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0cbdd624eccbab85695275cfc8d42f1e5832375a\">[37685]</a></span>: Add function for finding the executable for a queued job. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3589\" onclick=\"get_ticket_and_populate_wrapper('3589'); return false;\" title=\"Gridmanager doesn't use spooled executable for cream jobs\">#3589</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Sep-19 15:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4deca9e21b9ca2426d924b56d18b5f844dcf9c4f\">[37686]</a></span>: Fix copy_to_spool=true for grid universe jobs. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=3589\" onclick=\"get_ticket_and_populate_wrapper('3589'); return false;\" title=\"Gridmanager doesn't use spooled executable for cream jobs\">#3589</a></span> Previously, for most grid-types, the gridmanager would always use the file named in Cmd (and Iwd), rather than the copy in the spool directory.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Sep-19 15:33", "status": "resolved", "created": "2013-Apr-23 11:56", "fixed_version": "2013-Apr-23 11:56", "broken_version": "v070800", "priority": "4", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "s8280", "customer_group": "osg", "visibility": "public", "notify": "", "due_date": ""}