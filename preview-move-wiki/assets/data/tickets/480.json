{"id": 480, "title": "Ticket #480: ClassAds silently doing case insensitive comparisons", "description": "<blockquote>\nRun the following:\n<div class=\"code\">\n<pre class=\"code\">condor_status -const '( target.Arch == \"x86_64\" )' -format '%s\\n' Arch | head -2</pre></div>\n\n\n<p>Observed output:\n</p><div class=\"code\">\n<pre class=\"code\">X86_64\nX86_64\n</pre></div>\n\n\n<p>Expected output: null output.\n\n</p><p>The constraint asked for *x*86_64, but the machine ads have *X*86_64.  For some reason a case insensitive comparison is being done, which is not what <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> specify.\n\n</p><p>This appears to be pervasive.  All of the following return results when none are expected or desired:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_status -const 'UidDomain == \"cS.wIsC.eDu\"'\ncondor_status -const 'AFS_SYSNAME == \"aMd64_RhEl5\"'\ncondor_status -const 'State == \"uNCLaimED\"'</pre></div>\n\n\n<p>On a machine with jobs, the following also returns results when none are expected:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">condor_q -const 'FileSystemDomain == \"CS.WIsc.edu\"'</pre></div>\n\n\n<p>There is a chance that condor_submit is doing the wrong thing and is adding the test \"( target.Arch == \"x86_64\" )\" to submitted jobs on x86-64 platforms.  This means if we fix the bug, lots of jobs will stop running.  It's also possible that condor does the right thing.  If that's the case, then at least some users, the Multifacet users, are hand inserting this requirement, and it's the wrong one.  If so, we need to contact them so their jobs don't just stop running.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-May-12 14:31:12 by tannenba:</em> <br/>\n\nActually, this is how <span class=\"quote\">ClassAds</span> are supposed to work.  If the equality operator (e.g. \"==\") is used, string comparisons are case-insensitive.  If the meta-equality operator is used (e.g. \"<code>?</code>\"), then comparison are case-sensitive.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2009-Dec-17 17:46", "status": "resolved", "created": "2009-May-11 16:08", "fixed_version": "2009-May-11 16:08", "broken_version": "v070300", "priority": "4", "subsystem": "", "assigned_to": "tannenba", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}