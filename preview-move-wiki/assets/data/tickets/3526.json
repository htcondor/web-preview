{"id": 3526, "title": "Ticket #3526: GRAM version detection fails if jobmanager service not defined", "description": "<blockquote>\nWhen the gridmanager receives gram jobs, it probes the remote resource to determine whether it's running GRAM2 or GRAM5. This affects how the gridmanager interacts with the remote system. The gridmanager (via the gahp) issues a globus_gram_client_register_get_jobmanager_version() request to the gatekeeper service 'jobmanager' on the remote system. A GRAM2 jobmanager will reply with gram error HTTP_UNPACK_FAILED. A GRAM5 jobmanager will reply with success and some version information.\n\n<p>On most systems, gatekeeper service 'jobmanager' is an alias to one of the other service names (typically, 'jobmanager-fork'). We've now seen a system where 'jobmanager' is not a valid service name. When this happens, the gram code returns error SERVICE_NOT_FOUND. The gridmanager will mark the jobmanager as GRAM2 and periodically retry issuing the version request.\n\n</p><p>Instead, the gridmanager should try the gatekeeper service names given by the Condor jobs in their <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=GridResource\" title=\"Grid Resource\">GridResource</a></span> attribute. Those should be valid service names, if the user hasn't screwed something up.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "", "type": "defect", "last_change": "2013-Mar-05 17:31", "status": "new", "created": "2013-Mar-05 17:31", "fixed_version": "2013-Mar-05 17:31", "broken_version": "v070800", "priority": "4", "subsystem": "Grid", "assigned_to": "", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "", "due_date": ""}