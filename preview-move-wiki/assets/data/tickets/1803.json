{"id": 1803, "title": "Ticket #1803: vm_gahp xen/kvm script callouts as wrong user", "description": "<blockquote>\nDue to a bug in a code refactoring for 7.4.4, script callouts from the vm_gahp that should happen as root instead happen as the executing user. However, none of the callouts need to happen as root, since all interactions with libvirt occur via the client library now. Condor 7.5.4 is also affected.\n\n<p>We'll do the following changes now. Additional changes can wait for later.\n</p><ul>\n<li>Fix systemCommand() to perform callouts as root when requested.\n</li><li>Remove check for uid root from condor_vm_xen.sh.\n</li><li>Remove call to virsh from check routine in condor_vm_xen.sh.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2010-Dec-10 16:29:23 by jfrey:</em> <br/>\n\nPushed changes to V7_4-branch for 7.4.5.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Dec-10 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=19631\">[19631]</a></span>: Fix vm_gahp callouts for xen/kvm. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1803\" onclick=\"get_ticket_and_populate_wrapper('1803'); return false;\" title=\"vm_gahp xen/kvm script callouts as wrong user\">#1803</a></span> Due to a bug in a code refactoring for 7.4.4, script callouts from the vm_gahp that should happen as root instead happen as the executing user. However, none of the callouts need to happen as root, since all interactions with libvirt occur via the client library\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2010-Dec-10 16:29", "status": "resolved", "created": "2010-Dec-10 16:19", "fixed_version": "2010-Dec-10 16:19", "broken_version": "v070404", "priority": "2", "subsystem": "VM", "assigned_to": "jfrey", "derived_from": "", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}