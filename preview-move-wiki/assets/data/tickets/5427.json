{"id": 5427, "title": "Ticket #5427: HTCondor cannot start from init script if there is an empty pid file", "description": "<blockquote>\nFrom: Dan Bradley\n\n<p>We recently had an incident where a partition filled up, condor died,\nand when attempts were made to restart it, it somehow created a\nzero-length /var/run/condor/condor_master.pid.\n\n</p><p>Then when the partition was fixed, the condor service still could not be\nstarted, because the condor init script detected the pid file, tried to\nread it, and freaked out because it got back an empty string.  It also\nreported a confusing error message, \"error: insufficient privileges\"\nbecause it assumed the empty string it read from the file was a sign\nthat it could not read from the file.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Dec-08 16:31:26 by tim:</em> <br/>\n\nDan Bradley contributed the code and I reviewed it.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-08 16:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=46559\">[46559]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5427\" onclick=\"get_ticket_and_populate_wrapper('5427'); return false;\" title=\"HTCondor cannot start from init script if there is an empty pid file\">#5427</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Dec-01 17:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=46322\">[46322]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=5427\" onclick=\"get_ticket_and_populate_wrapper('5427'); return false;\" title=\"HTCondor cannot start from init script if there is an empty pid file\">#5427</a></span>) init script only uses pid file if it is non-zero size  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Dec-08 16:31", "status": "resolved", "created": "2015-Dec-01 17:05", "fixed_version": "2015-Dec-01 17:05", "broken_version": "v080200", "priority": "4", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "a28786", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}