{"id": 6143, "title": "Ticket #6143: Improve errno values in queue-managment api", "description": "<blockquote>\nThe schedd's remote queue management API (ConnectQ(), SetAttribute(), etc) includes an errno value anytime it returns a failure for a call. The schedd is very inconsistent about setting a useful value for this errno. For example, if SetAttribute() fails, the caller doesn't know whether the job in question isn't in the queue, the given attribute is protected, or the given attribute value is invalid (unparseable).\n\n<p>I propose the following errno values, which build on the existing usage:\n</p><ul>\n<li>EACCES: Requested action is privileged (e.g. modify job owned by another user, modify protected attribute).\n</li><li>ENOENT: No job for given job id.\n</li><li>EINVAL: All other errors, primarily bad parameters. Includes submission limits and non-existent attributes.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n<em>2017-Feb-28 11:28:37 by jfrey:</em> <br/>\n\nNo version history, as these changes are not user-visible.</blockquote>", "derived_tickets": "", "attachments": "", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-14 13:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50153\">[50153]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6143\" onclick=\"get_ticket_and_populate_wrapper('6143'); return false;\" title=\"Improve errno values in queue-managment api\">#6143</a></span>) Fixup warning on Fedora build  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-13 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50149\">[50149]</a></span>: Use improved qmgmt errnos in gridmanager. <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6143\" onclick=\"get_ticket_and_populate_wrapper('6143'); return false;\" title=\"Improve errno values in queue-managment api\">#6143</a></span> Detect whether job is in queue without another command to the schedd.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-13 15:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=50148\">[50148]</a></span>: Improve errno values in queue-managment API <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=6143\" onclick=\"get_ticket_and_populate_wrapper('6143'); return false;\" title=\"Improve errno values in queue-managment api\">#6143</a></span> Send a reasonable errno to the client when a qmgmt command fails. EACCES: insufficient privilege ENOENT: no such job EINVAL: other errors (bad parameter, submit limit, no such attribute)  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Feb-28 11:32", "status": "resolved", "created": "2017-Feb-13 12:02", "fixed_version": "2017-Feb-13 12:02", "broken_version": "", "priority": "4", "subsystem": "DaemonsSubmitNode", "assigned_to": "jfrey", "derived_from": "#6142", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}