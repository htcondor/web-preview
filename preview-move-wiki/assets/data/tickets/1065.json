{"id": 1065, "title": "Ticket #1065: Parallelize the externals Builds (cmake branch)", "description": "<blockquote>\nSignificant performance improvements can be made to the condor build so people waste less time waiting on NMI, a simple one is to parallelize building the externals as the only deps are curl-&gt;openssl.</blockquote>", "remarks": "<blockquote>\n<em>2009-Dec-18 08:16:14 by tstclair:</em> <br/>\n\nI think it should be fairly do-able to eliminate all of the perl &amp; .bat file craziness with a single cmake File, eliminate the hacky-staging and set true output dependencies.\n\n<p>For non-proper builds this would simply allow you to make -jX and away you go.\n\n</p><p>Windows will match the dependency order and launch as many as it can.\n\n</p><p></p><hr/>\n<em>2010-Jan-12 14:30:09 by tstclair:</em> <br/>\n\nThis has been taking me longer then I had expected, I have unearthed some oddities in both CMake's new ExternalProject_Add &amp; in our windows builds.\n\n<p>In ExternalProject_Add the cmake added the VERBATIM option to the command which actually does the opposite of what one would expect, this caused errors on the some custom commands which were passed down during the external builds.\n\n</p><p>Secondly various errors on the windows builds when taken outside of their original .bat files.  When inspecting the .bat files I noticed they masked away the errors, upon further investigation it turns out some of the .exe's bundled into the windows condor build are not only arcane, but just plain wrong.  When path was adjusted to use cygwin, no errors were masked and the build functioned properly.\n\n</p><p>I hope to have it in the tracking branch by tomorrow.\n\n</p><p></p><hr/>\n<em>2010-Jan-14 23:24:15 by tstclair:</em> <br/>\n\nThere still needs to be some work to verify some the externals on NMI machines, but I will leave that for another entry.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-20 16:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16938\">[16938]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1065\" onclick=\"get_ticket_and_populate_wrapper('1065'); return false;\" title=\"Parallelize the externals Builds (cmake branch)\">#1065</a></span> - Update the remaining externals to build in non-proper using wget for the dl step.  (By Timothy St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-18 10:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16911\">[16911]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1065\" onclick=\"get_ticket_and_populate_wrapper('1065'); return false;\" title=\"Parallelize the externals Builds (cmake branch)\">#1065</a></span> Update extraction step when using wget for externals.  (By Tim St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-18 08:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16910\">[16910]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1065\" onclick=\"get_ticket_and_populate_wrapper('1065'); return false;\" title=\"Parallelize the externals Builds (cmake branch)\">#1065</a></span>: update to use wget vs. cmake's download util.  (By Tim St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-15 11:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16903\">[16903]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1065\" onclick=\"get_ticket_and_populate_wrapper('1065'); return false;\" title=\"Parallelize the externals Builds (cmake branch)\">#1065</a></span> Minor fix for dependency ordering. This would only be hit in parallel builds. In the future it will like be a PREBUILD step instead.  (By Tim St. Clair )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jan-14 23:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"chngview?cn=16900\">[16900]</a></span>: Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/tickets?ticket=1065\" onclick=\"get_ticket_and_populate_wrapper('1065'); return false;\" title=\"Parallelize the externals Builds (cmake branch)\">#1065</a></span> - A complete and total overhaul of how condor builds and configures its externals. + numerous fixes on the windows side which were all ignored before ++ openssl , krb5, gsoap...  (By Timothy St. Clair )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jan-14 23:24", "status": "resolved", "created": "2009-Dec-15 16:21", "fixed_version": "2009-Dec-15 16:21", "broken_version": "v070500", "priority": "3", "subsystem": "Packaging", "assigned_to": "tstclair", "derived_from": "#779", "creator": "tstclair", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matt@cs.wisc.edu", "due_date": "20100112"}