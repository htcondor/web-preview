{"id": 5546, "title": "Ticket #5546: RPM issue with condor, globus, cream:CREAM error: Failed to start gahp", "description": "<blockquote>\nThis seems to be a different problem from <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5294\" onclick=\"get_ticket_and_populate_wrapper('5294'); return false;\" title=\"Restore RPATH to EL6 build\">#5294</a></span>.\n\n<p>See the email below from HTCondor-users.\n\n</p><p></p><div class=\"verbatim\">\n<pre>Hi,\n\nI was just wondering what the status of this is? The problem still seems to be present in 8.4.3, i.e.\n- if you only install condor on SL6, grid job submission works fine\n- if you need to have globus rpms (from epel) installed as well for other grid middleware, then grid job submission fails with \"Failed to initialize GAHP\" for both CREAM and Nordugrid\nAs Brian said, this started after around 8.2.3.\n\nThanks,\nAndrew.\n\n________________________________________\nFrom: HTCondor-users [htcondor-users-bounces@cs.wisc.edu] on behalf of Brian Bockelman [bbockelm@cse.unl.edu]\nSent: Tuesday, October 27, 2015 8:36 PM\nTo: HTCondor-Users Mail List\nSubject: Re: [HTCondor-users] CREAM error: Failed to start gahp\n\nHi Todd,\n\nThat still doesn\u2019t fix the issue Iain referenced (which is slightly different than the one from Jose).\n\nThe RPM should not claim to provide libraries in /usr/lib64/condor as they aren\u2019t in a system loader path.\n\nBrian\n\nOn Oct 12, 2015, at 3:06 PM, Todd Tannenbaum &lt;tannenba@cs.wisc.edu&gt; wrote:\n\n\nHi All,\n\nJust a follow-up that we think we fixed the problem described in this thread.  The bug was introduced starting with HTCondor v8.3.5 and we put in a fix for the upcoming HTCondor v8.4.1.  You can see the ticket and patch at\n  https://htcondor-wiki.cs.wisc.edu/index.cgi/tktview?tn=5294\n\nregards\nTodd\n\nOn 10/2/2015 11:01 AM, Iain Bradford Steers wrote:\nHi Jose,\n\nWe discovered an issue, related to the one that Brian mentioned where /usr/lib64/condor was missing from /etc/ld.so.conf.d/condor.\n\nFor the moment we've puppetized this and apply it on our condor nodes with a ldconfig.\n\nYour ATLAS guys may be experiencing the same issue.\n\nThanks,\n\nIain\n________________________________________\nFrom: HTCondor-users [htcondor-users-bounces@cs.wisc.edu] on behalf of Jose Caballero [jcaballero.hep@gmail.com]\nSent: 02 October 2015 17:56\nTo: HTCondor-Users Mail List\nSubject: Re: [HTCondor-users] CREAM error: Failed to start gahp\n\n\n\nMay need to play \u2018ldd\u2019 games again to figure out where /usr/sbin/cream_gahp is getting its Globus libraries from.  Judging from the error message above, I\u2019m guessing you\u2019re seeing a mix of system libraries and condor-internal libraries (maybe try uninstalling the globus libraries from the system root?).\n\nAnother alternate may be to use the OSG packaging of HTCondor (assuming your system globus is from OSG).  That\u2019s meant to be a bit more consistent with system Globus.\n\n\n\nactually, the reserve approach worked fine: un-installed the OSG\nglobus lib, and leave only the ones created by\ncondor-external-libs-8.4.0\nI need to understand now what is the problem they are having at CERN...\n\nThanks a lot for the help!!!\nCheers,\nJose\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-20 11:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8bfb9ccdeda654ba739f23d4052e1520a26bc253\">[49236]</a></span>: Revert \"(<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=5546\" onclick=\"get_ticket_and_populate_wrapper('5546'); return false;\" title=\"RPM issue with condor, globus, cream:CREAM error: Failed to start gahp\">#5546</a></span>) Prefer libraries in /usr/lib64/condor over /usr/lib64\" This reverts commit b1e262c819eff948cc503e4cc1da2a64dc42a1c7.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-15 15:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b1e262c819eff948cc503e4cc1da2a64dc42a1c7\">[49207]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=5546\" onclick=\"get_ticket_and_populate_wrapper('5546'); return false;\" title=\"RPM issue with condor, globus, cream:CREAM error: Failed to start gahp\">#5546</a></span>) Prefer libraries in /usr/lib64/condor over /usr/lib64  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Jul-06 11:29", "status": "active", "created": "2016-Mar-04 02:56", "fixed_version": "2016-Mar-04 02:56", "broken_version": "v080404", "priority": "2", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "zmiller", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "andrew.lahiff@stfc.ac.uk, bbockelm@cse.unl.edu, tannenba@cs.wisc.edu", "due_date": ""}