{"id": 6867, "title": "Ticket #6867: scitokens: starter silently ignores error when fetching creds", "description": "<blockquote>\nIf the socket between the starter and shadow is not encrypted, then we get the following error message in the starter log:\n\n<p></p><div class=\"verbatim\">\n<pre>ERROR: Can't do CONDOR_getcreds, syscall_sock not encrypted\n</pre></div>\n\n\n<p>That's reasonable.  <strong>However</strong>, in <code>jic_shadow.cpp</code>, the return value of <code>REMOTE_CONDOR_getcreds()</code> is ignored.  Thus, the starter continues to start the job without the appropriate credentials.\n\n</p><p>This should be a fatal error on the starter side - jobs shouldn't start without their requested credentials.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jan-17 13:33:38 by bbockelm:</em> <br/>\n\nRe-opened as the other ticket wasn't related after all.\n\n<p></p><hr/>\n<em>2019-Jan-17 16:25:02 by bbockelm:</em> <br/>\n\nReview:\n\n<p>Changes look good, please proceed to merge.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jan-17 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/68fc1aedb17fd005112e8cdda896958033a318e4\">[56015]</a></span>: Starter aborts job execution if fetching of credentials fails. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6867\" onclick=\"get_ticket_and_populate_wrapper('6867'); return false;\" title=\"scitokens: starter silently ignores error when fetching creds\">#6867</a></span> Before, a failure of credential fetching was silently ignored.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Feb-01 14:11", "status": "resolved", "created": "2019-Jan-17 09:01", "fixed_version": "2019-Jan-17 09:01", "broken_version": "v080800", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "jfrey", "derived_from": "#6513", "creator": "jfrey", "rust": "", "customer_group": "scitokens", "visibility": "public", "notify": "bbockelman@morgridge.org,jpatton@cs.wisc.edu", "due_date": ""}