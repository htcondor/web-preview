<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script src="/web-preview/preview-universal-articles/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-universal-articles/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-universal-articles/assets/js/bootstrap.js" type="text/javascript"></script>

    

    

        <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-universal-articles/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-universal-articles/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-universal-articles/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/release-highlights/">Release Highlights</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/release-plan/">Release Schedule</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-ce/release-highlights/">Release Highlights</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/new.html">News</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/downloads/">Download</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor/documentation/">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-ce/documentation/">HTCondor-CE</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/uw-support/">HTCSS Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/mail-lists/#user">Community Mailing List</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/htcondor-support/#external-support-options">External Support Organizations</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/mail-lists/#user">Users</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/mail-lists/#world">World</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/mail-lists/#developer">Developers</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1579/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/past_condor_weeks.html">Content Archives</a></li>
        
            <li><a class="dropdown-item" href="https://youtube.com/playlist?list=PLO7gMRGDPNulf_yK_9Ue6yARxJh0gQXQI">Youtube Playlist  &#11023;</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item" href="/web-preview/preview-universal-articles/featured-users.html" >
        Featured Users
    </a>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="about-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
        <ul class="dropdown-menu" aria-labelledby="about-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCSS
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/description.html">What is HTCSS?</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-universal-articles/logos/">Logos</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-universal-articles/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-universal-articles/assets/images/HTCondor_red_blk.svg"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="about-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                





                

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/release-highlights/">Release Highlights</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/release-plan/">Release Schedule</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor-CE</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/release-highlights/">Release Highlights</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>General</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/new.html">News</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/security/">Security</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/manual/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/downloads/">Download</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/web-preview/preview-universal-articles/news/Software_Integration_Developer/">New Full-Time Position: Software Integration Developer</a></h3>
                            <div>
                                <span class="text-muted">January 28, 2022</span>
                            </div>
                            <hr/>
                            <a href="/web-preview/preview-universal-articles/new.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-universal-articles/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Documentation</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor/documentation/">HTCondor</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/documentation/">HTCondor-CE</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Support</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/uw-support/">HTCSS Contract Support</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/mail-lists/#user">Community Mailing List</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/htcondor-support/#external-support-options">External Support Organizations</a></td></tr>
                
            </table>
        </div>
    


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                






                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Email Lists</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/mail-lists/#user">Users</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/mail-lists/#world">World</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/mail-lists/#developer">Developers</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor Week</th></tr>
                
                    <tr><td><a href="https://agenda.hep.wisc.edu/event/1579/">Most Recent</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/past_condor_weeks.html">Content Archives</a></td></tr>
                
                    <tr><td><a href="https://youtube.com/playlist?list=PLO7gMRGDPNulf_yK_9Ue6yARxJh0gQXQI">Youtube Playlist  &#11023;</a></td></tr>
                
            </table>
        </div>
    

    


                <div class="d-none d-md-block col-lg-4 my-2">
                    <a href="/web-preview/preview-universal-articles/featured-users.html"><b>Featured Users</b></a>
                    
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-universal-articles/featured-users/2021-12-16-precision-mental-health.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Harnessing HTC-enabled precision mental health to capture the complexity of smoking cessation
            </h6>
            <div>
                <span class="text-muted text-decoration-none">December 16, 2021</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-universal-articles/featured-users/2021-11-09-usgs-invasivespecies.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Protecting ecosystems with HTC
            </h6>
            <div>
                <span class="text-muted text-decoration-none">November  9, 2021</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-universal-articles/featured-users/2021-10-26-bat-genomics.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                80,000 jobs, 40 billion base pairs, and 20 bats –– all in 4 weeks
            </h6>
            <div>
                <span class="text-muted text-decoration-none">October 26, 2021</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-universal-articles/featured-users/2021-10-26-Banq.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Centuries of newspapers are now easily searchable thanks to HTCSS
            </h6>
            <div>
                <span class="text-muted text-decoration-none">October 26, 2021</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                </div>
                <div class="d-none d-xl-block col-xl-4 my-2">
                    <div class="card h-100">
                        <img src="https://raw.githubusercontent.com/CHTC/Articles/main/images/banq-mw.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-universal-articles/featured-users/2021-10-26-Banq.html">Centuries of newspapers are now easily searchable thanks to HTCSS</a></h5>
                            <hr/>
                            <a href="/web-preview/preview-universal-articles/featured-users.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-universal-articles/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Featured Users
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="about-desktop-drawer" class="drawer row justify-content-center" hidden>



                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCSS</th></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/description.html">What is HTCSS?</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-universal-articles/logos/">Logos</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>CHTC</th></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-universal-articles/description.html">What is HTCSS?</a></h5>
                            <hr class="mb-2">
                            <div>
                                HTCondor Software Suite (HTCSS) provides an array of services for automating
                                and managing batch workloads and computing resources.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="container-xxl py-4">
    <h1>How To Limit Disk Usage Of Jobs</h1>
<div id="content">
 <span class="section">
  <h2>
   How to limit disk usage of jobs
  </h2>
 </span>
 <p>
  Known to work with HTCondor version: 7.0
 </p>
 <p>
  HTCondor monitors how much disk space jobs consume in the scratch directory created for the job on the execute machine when the job runs.  This scratch directory is typically only used by jobs which turn on HTCondor's file transfer mode (should_transfer_files=true).  For such jobs, the scratch directory is the current working directory and they might write their output files into that directory while they are running.
 </p>
 <p>
  One problem that can happen is that one job on a multi-cpu system uses up so much space that all other jobs fail due to lack of space.  If the partition containing HTCondor's EXECUTE directory is shared by other tasks (including perhaps HTCondor), a full partition could cause additional things to fail as well.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to preempt (evict) a job that uses too much disk space
 </h3>
 <p>
  The following configuration settings should be put in the config file of the execute machines (or the whole pool).  The reason a number must be inserted for MAX_DISK_USAGE_KB instead of using the Disk attribute of the machine
  <span class="quote">
   ClassAd
  </span>
  is that the Disk attribute measures the amount of free space on the disk, not the amount of space promised to the job.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">MAX_DISK_USAGE_KB = insert_number_here!
DISK_EXCEEDED = DiskUsage &gt; $(MAX_DISK_USAGE_KB)

PREEMPT = ($(PREEMPT)) || ($(DISK_EXCEEDED))

WANT_SUSPEND = ($(WANT_SUSPEND)) &amp;&amp; ($(DISK_EXCEEDED)) =!= TRUE
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to configure a separate disk partition for each batch slot
 </h3>
 <p>
  The most effective way to control how much space jobs use is to put the execute directory for each slot on its own disk partition.  Then you don't have to worry about a malformed job consuming massive amounts of disk space before PREEMPT has a chance to operate.  Assuming you have already created the necessary partitions, you can configure HTCondor to use them like this:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">SLOT1_EXECUTE = /path/to/execute1
SLOT2_EXECUTE = /path/to/execute2
...
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to hold/remove a job that uses too much disk
 </h3>
 <p>
  Jobs can hold or remove themselves by specifying a periodic_hold or periodic_remove expression.  The schedd can also hold or remove jobs as dictated by the configuration expressions SYSTEM_PERIODIC_HOLD or SYSTEM_PERIODIC_REMOVE.  These are all submit-side controls, whereas the PREEMPT example above is an execute-side control.  One problem with the PREEMPT example is that it doesn't do a very good job of communicating to the job owner why the job was evicted.  Putting the job on hold may help communicate better.  Then the user knows to resubmit the job with disk memory requirements or investigate why the job used more disk than it should have.  The following example configuration shows how to put jobs on hold from the submit-side when they use too much disk.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code"># When a job matches, insert the machine disk space into the
# job ClassAd so periodic_remove can refer to it.
MachineDiskString = "$$(Disk)"
SUBMIT_EXPRS = $(SUBMIT_EXPRS)  MachineDiskString

SYSTEM_PERIODIC_HOLD = MATCH_EXP_MachineDisk =!= UNDEFINED &amp;&amp; \
                       DiskUsage &gt; int(MATCH_EXP_MachineDiskString)
</pre>
 </div>
 <p>
  <span class="section">
  </span>
 </p>
 <h2>
  What if you care about free disk space, not disk space used?
 </h2>
 <p>
  The above sections are helpful when you are comparing against the disk space used, but sometimes it is better to worry about the free disk space.  In large environments, especially when some of the execute nodes are desktop machines, hard drives aren't always the same size.  In such cases, you might prefer to be concerned about the remaining space on the disk.  The policy settings are similar, with a few small changes.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to preempt (evict) a job when the disk is near full
 </h3>
 <p>
  As above, the following configuration settings should be put in the config file of the execute machines (or the whole pool).  The
  <span class="wiki">
   <a class="missing" href="/web-preview/preview-universal-articles/wiki-archive/pages/TotalDisk/index.html" title="Total Disk">
    TotalDisk
   </a>
  </span>
  <span class="quote">
   ClassAd
  </span>
  provides the amount of disk space free, not the total capacity of the disk.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">MIN_FREE_DISK_KB = insert_number_here
DISK_EXCEEDED = TotalDisk &lt; $(MIN_FREE_DISK_KB)

PREEMPT = ($(PREEMPT)) || ($(DISK_EXCEEDED))

WANT_SUSPEND = ($(WANT_SUSPEND)) &amp;&amp; ($(DISK_EXCEEDED)) =!= TRUE
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  How to hold/remove a job running on a near-full disk
 </h3>
 <p>
  Jobs can hold or remove themselves by specifying a periodic_hold or periodic_remove expression.  The schedd can also hold or remove jobs as dictated by the configuration expressions SYSTEM_PERIODIC_HOLD or SYSTEM_PERIODIC_REMOVE.  These are all submit-side controls, whereas the PREEMPT example above is an execute-side control.  One problem with the PREEMPT example is that it doesn't do a very good job of communicating to the job owner why the job was evicted.  Putting the job on hold may help communicate better.  Then the user knows to resubmit the job with disk requirements or investigate why the job used more disk than it should have.  The following example configuration shows how to put jobs on hold from the submit-side when the disk is nearly full.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code"># When a job matches, insert the machine disk space into the
# job ClassAd so periodic_remove can refer to it.
MachineTotalDiskString = "$$(TotalDisk)"
SUBMIT_EXPRS = $(SUBMIT_EXPRS)  MachineTotalDiskString

MIN_FREE_DISK_FOR_HOLD = ( MATCH_TotalDisk - insert_a_value_in_KB_here )

SYSTEM_PERIODIC_HOLD = MATCH_EXP_MachineTotalDisk =!= UNDEFINED &amp;&amp; \
                      ( DiskUsage &gt; $(MIN_FREE_DISK_FOR_HOLD) )
</pre>
 </div>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-4 d-none d-lg-flex">
                <img class="my-auto" height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-universal-articles/assets/images/HTCondor_red_blk.svg" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/security//">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/license.html">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/uw-support/">Internal Contract</a></td></tr>
                            <tr><td><a href="/web-preview/preview-universal-articles/htcondor-support#external-support-options">External Organizations</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row my-4 justify-content-center">
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://ls.wisc.edu/">
                    

<div style="height:75px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-universal-articles/assets/images/UW_Madison_Logo.webp">
        <img class="h-100" src="/web-preview/preview-universal-articles/assets/images/UW_Madison_Logo.png" alt="UW-Madison Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="px-3 d-block m-auto" href="https://www.nsf.org">
                    

<div style="height:100px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-universal-articles/assets/images/NSF_Logo.webp">
        <img class="h-100" src="/web-preview/preview-universal-articles/assets/images/NSF_Logo.jpg" alt="NSF Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://morgridge.org/">
                    <img class="" height="40" src="/web-preview/preview-universal-articles/assets/images/Morgridge_Logo.svg" alt="Morgridge Logo" />
                </a>
            </div>
        </div>
        <hr>
        <div class="row py-3">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
            </div>
        </div>
        <div class="row justify-content-center pb-4">
            <div class="col-lg-8 text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, you can find more information on their <a href="http://www.phoenixsoftware.com">website</a>.
                </span>
            </div>
        </div>
    </div>
</footer>



</body>
</html>
