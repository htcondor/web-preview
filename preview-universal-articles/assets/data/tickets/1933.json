{"id": 1933, "title": "Ticket #1933: Free'ing of objects from globus_utils.cpp", "description": "<blockquote>\nHi,\n\n<p>I noticed the doc string of x509_proxy_subject_name says the following:\n\n</p><p>/* Return the subject name of a given proxy cert.\n  On error, return NULL.\n  On success, return a pointer to a null-terminated string.\n  IT IS THE CALLER'S RESPONSBILITY TO DE-ALLOCATE THE STIRNG\n  WITH free().\n */\n\n</p><p>However, in the implementation of *get_subject_name from Globus, their docstring says:\n\n</p><p> * @param subject_name\n *        The subject name as an X509_NAME object.  This should be freed\n *        using X509_NAME_free when the user is finished with it\n\n</p><p>So, the Condor docstring appears incorrect.  It's possible we're also free'ing the resulting subject_name incorrectly.\n\n</p><p>Brian</p></blockquote>", "remarks": "<blockquote>\n<em>2011-Mar-03 11:18:01 by jfrey:</em> <br/>\n\nCondor's x509_proxy_subject_name() calls the Globus function globus_gsi_cred_get_subject_name(), whose documentation says this:\n<div class=\"code\">\n<pre class=\"code\"> * @param subject_name\n *        The subject name as a string.  This should be freed\n *        using free() when the user is finished with it\n</pre></div>\n\n\n<p>The body of the Globus function also has this:\n</p><div class=\"code\">\n<pre class=\"code\">    /* ToDo: This logic needs fixing. The subject_name is passed up and is\n             freed by the caller - but it must be freed with OPENSSL_free(),\n             not free() and the caller cant be expected to know that */\n</pre></div>\n\n\n<p>So it's a problem in the Globus code. If we're worried about it, I suppose we could have Condor make a copy of the string and use OPENSSL_free() on the one returned by Globus.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2013-Jan-30 14:27", "status": "new", "created": "2011-Feb-28 11:36", "fixed_version": "2011-Feb-28 11:36", "broken_version": "", "priority": "5", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}