{"id": 1792, "title": "Ticket #1792: use Jim's safe library as an external rather than a forked copy of it", "description": "<blockquote>\nJim pointed out that Condor has a forked copy of his safe library in the condor source.  The Condor copy has some changes to it.  A recent bug (chown of broken symlinks) was discovered in the Condor copy; this problem was fixed long ago in Jim's version.\n\n<p>Perhaps we should use Jim's code as an external.  This will require some work to understand the changes that have been made to Condor's copy and adapt usage as necessary.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Dec-01 18:24:20 by matt:</em> <br/>\n\n<div class=\"verbatim\">\n<pre>Date: Wed, 16 Dec 2009 08:51:20 -0500\nFrom: Matthew Farrellee &lt;matt@cs.wisc.edu&gt;\nTo: Condor Flightworthy Team &lt;condor-fw@cs.wisc.edu&gt;\nSubject: safe_fopen_wrapper 66% safe, safe_open_wrapper only 50% safe\n\n(i had a nice email describing the problem, but it disappeared, so here's the summary from memory)\n\nThere are 3 things that safefile tries to do for open/fopen with regards to security:\n\n 0) don't let you create a file without an explicit mask\n 1) don't let you create a file through a symlink\n 2) don't let you open a file through a symlink\n\nThe implementation of safefile in Condor does not prevent you from doing (2).\n\nThis is because someone changed safe_open_no_create to be basically open, without any symlink checks.\n\nWhat is the reason for that change?\n\nWhy don't we have safefile as an external?\n\nBest,\n\n\nmatt\n</pre></div>\n\n\n<p></p><hr/>\n<em>2011-Sep-19 16:59:21 by ziliang:</em> <br/>\n\nDone, see ticket <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=2180\" onclick=\"get_ticket_and_populate_wrapper('2180'); return false;\" title=\"Have the safe_open library be an external\">#2180</a></span>.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2011-Oct-19 10:56", "status": "resolved", "created": "2010-Dec-01 17:59", "fixed_version": "2010-Dec-01 17:59", "broken_version": "v070500", "priority": "4", "subsystem": "Security", "assigned_to": "ziliang", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "other", "visibility": "public", "notify": "dan@hep.wisc.edu,kupsch@cs.wisc.edu", "due_date": ""}