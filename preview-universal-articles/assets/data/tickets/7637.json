{"id": 7637, "title": "Ticket #7637: Ensure that critical directories are present when HTCondor starts", "description": "<blockquote>\nHTCondor should make sure that critical directories are present, creating them if necessary and setting proper ownership/permissions when it starts up, instead of relying on system packaging to do this.  Relying on system packaging is a) more duplicative work (edit rpm, deb, msi, macport, conda, ...) and b) does not work for tarball and other personal condor installs, and c) fails if the admin changes path locations.\n\n<p><table border=\"1\" cellspacing=\"0\">\n<tbody><tr>\n<td>\n <strong>owner</strong> </td>\n<td>\n <strong>group</strong> </td>\n<td>\n <strong>mode</strong> </td>\n<td>\n <strong>param</strong> </td>\n<td>\n <strong>filename in packaging</strong> </td>\n<td>\n <strong>comments</strong> </td>\n</tr>\n\n<tr>\n<td>\n root </td>\n<td>\n root </td>\n<td>\n 0700 </td>\n<td>\n SEC_PASSWORD_DIRECTORY </td>\n<td>\n /etc/condor/passwords.d </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0700 </td>\n<td>\n SEC_TOKEN_SYSTEM_DIRECTORY </td>\n<td>\n /etc/condor/tokens.d </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0755 </td>\n<td>\n LOCAL_DIR </td>\n<td>\n /var/lib/condor </td>\n<td>\n Probably always exists, condor's home directory in packaging </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 1777 </td>\n<td>\n EXECUTE </td>\n<td>\n /var/lib/condor/execute </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n root </td>\n<td>\n root </td>\n<td>\n 0755 </td>\n<td>\n SEC_CREDENTIAL_DIRECTORY_KRB </td>\n<td>\n /var/lib/condor/krb_credentials </td>\n<td>\n param conditionally defined </td>\n</tr>\n\n<tr>\n<td>\n root </td>\n<td>\n condor </td>\n<td>\n 2770 </td>\n<td>\n SEC_CREDENTIAL_DIRECTORY_OAUTH </td>\n<td>\n /var/lib/condor/oauth_credentials </td>\n<td>\n param conditionally defined </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0755 </td>\n<td>\n SPOOL </td>\n<td>\n /var/lib/condor/spool </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 1777 </td>\n<td>\n LOCAL_UNIV_EXECUTE </td>\n<td>\n /var/lib/condor/spool/local_univ_execute </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0755 </td>\n<td>\n LOCK </td>\n<td>\n /var/lock/condor </td>\n<td>\n Already created by master if root </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 1777 </td>\n<td>\n LOCAL_DISK_LOCK_DIR </td>\n<td>\n /var/lock/condor/local </td>\n<td>\n Already created by master if root, Only used by preen </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0755 </td>\n<td>\n LOG </td>\n<td>\n /var/log/condor </td>\n<td>\n </td>\n</tr>\n\n<tr>\n<td>\n condor </td>\n<td>\n condor </td>\n<td>\n 0755 </td>\n<td>\n RUN </td>\n<td>\n /var/run/condor </td>\n<td>\n Already created by master if root, not used in tarball </td>\n</tr>\n</tbody></table></p></blockquote>", "remarks": "<blockquote>\n<em>2020-May-11 07:58:57 by tim:</em> <br/>\n\nWhy are the execute directories world writeable (and sticky)? In CHTC, they are neither.\n\n<p></p><hr/>\n<em>2020-Nov-11 16:51:16 by tim:</em> <br/>\n\nThis ticket moved to <a class=\"external\" href=\"https://opensciencegrid.atlassian.net/browse/HTCONDOR-73\">https://opensciencegrid.atlassian.net/browse/HTCONDOR-73</a></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2020-Nov-11 16:51", "status": "abandoned", "created": "2020-May-08 08:39", "fixed_version": "2020-May-08 08:39", "broken_version": "", "priority": "2", "subsystem": "", "assigned_to": "tannenba", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}