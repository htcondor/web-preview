{"id": 5955, "title": "Ticket #5955: Improve custom GCE attributes to merge with those set by Condor", "description": "<blockquote>\nIn our initial support for custom GCE attributes in the submit file (gce_json_file, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5893\" onclick=\"get_ticket_and_populate_wrapper('5893'); return false;\" title=\"Add parameter for additional JSON to GCE insert request\">#5893</a></span>), the GAHP pastes the text of the custom attributes into its JSON instance description without examination. Thus, the custom attributes can't override or modify ones set by the GAHP. Overriding these attributes is useful and required in many cases. The disk and network configurations are prime examples.\n\n<p>The GAHP needs to do a better job of merging the custom attributes into its instance description. An easy first step is to allow the custom attributes to override those written by the GAHP. Thus, if both set the <code>networkInterfaces</code> attribute, the value from the custom attributes wins.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Oct-10 15:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/16b07a87381a57bb266a9181bb906a18bb09dd5d\">[49395]</a></span>: Allow GCE custom attrs to override those set by the gce_gahp. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5955\" onclick=\"get_ticket_and_populate_wrapper('5955'); return false;\" title=\"Improve custom GCE attributes to merge with those set by Condor\">#5955</a></span> gce_json_file can now be used to override instance attributes set by the gahp. This is done by parsing both set of attributes into <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span>, merging the ads, and unparsing the result back into JSON.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Oct-19 10:18", "status": "resolved", "created": "2016-Oct-10 10:43", "fixed_version": "2016-Oct-10 10:43", "broken_version": "v080508", "priority": "1", "subsystem": "Grid", "assigned_to": "jfrey", "derived_from": "#5893", "creator": "jfrey", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "dstrain@google.com", "due_date": ""}