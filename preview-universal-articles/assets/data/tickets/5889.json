{"id": 5889, "title": "Ticket #5889: condor_qedit and other tools should hondor CONDOR_Q_ONLY_MY_JOBS", "description": "<blockquote>\nNow that condor_q shows only the currrent users's job by default, condor_qedit should do the same.  If we don't then the a common use pattern:\n\n<p></p><pre>   condor_q -constraint &lt;expr&gt;    # to check and see what jobs will be affected\n   condor_qedit -constrant &lt;expr&gt;    # now do the operation\n</pre>\n\n<p>Will fail, because condor_q will only show the users jobs, but condor_qedit will try to change ALL jobs that match the constraint, and fail if there are any that belong to another user.</p></blockquote>", "remarks": "<blockquote>\n<em>2016-Sep-08 11:50:45 by johnkn:</em> <br/>\n\nA condor_qedit -dry-run option would be helpful here also.\n\n<p></p><hr/>\n<em>2016-Sep-13 14:48:25 by johnkn:</em> <br/>\n\nextensive changes to qedit with this commit.  the new usage is\n\n<p></p><div class=\"verbatim\">\n<pre>Usage: condor_qedit [help-opts] [general-opts] &lt;restriction-list&gt; &lt;edit-list&gt;\n\n    [help-opts] are:\n        -help              Display this screen\n        -debug             Display debugging info to console\n        -dry-run           Display whether edit is allowed\n\n    [general-opts] are:\n        -name &lt;name&gt;       Name of Scheduler\n        -pool &lt;pool&gt;       Use host as the central manager to query\n\n    &lt;restriction-list&gt; is one or more of:\n        &lt;cluster&gt;          Edit jobs in a specific cluster\n        &lt;cluster&gt;.&lt;proc&gt;   Edit a specific job\n        &lt;owner&gt;            Edit jobs owned by &lt;owner&gt;\n        -jobids &lt;id-list&gt;  Edit jobs in &lt;id-list&gt;\n        -owner &lt;owner&gt;     Edit jobs owned by &lt;owner&gt;\n        -constraint &lt;expr&gt; Edit jobs that match &lt;expr&gt;\n\n    &lt;edit-list&gt; is a set of &lt;attr&gt; and &lt;value&gt; pairs, in one of two forms\n        &lt;attr&gt; &lt;value&gt;     Two argument form, alternate &lt;attr&gt; and &lt;value&gt;\n        &lt;attr&gt;=&lt;value&gt;     Single argument form, = separates &lt;attr&gt; and &lt;value&gt;\n        -edits[:&lt;form&gt;] &lt;file&gt; Read edits from &lt;file&gt; in ClassAd format.\n                   where &lt;form&gt; is one of:\n               auto    default, guess the format from reading the input stream\n               long    The traditional -long form\n               xml     XML form, the same as -xml\n               json    JSON classad form, the same as -json\n               new     'new' classad form without newlines\n\nAt least one restriction and one edit must be specified, restrictions must be\nfirst. The restriction-list should be: a list of job and/or cluster ids, a\nsingle owner name, or one or more of -owner, -jobids, -constraint arguments.\nIf both owner and jobids are specified, only jobs that match both will be\nedited. If a -constraint argument is also provided, only jobs that also match\nthe constraint will be edited.\nIf only a -constraint argument is provided, jobs not owned by the current user\nwill be ignored unless the current user is a queue superuser.\n\nOnce a restriction has been specified, all remaining arguments that do not\nstart with a - are part of the &lt;edit-list&gt;.  An argument that contains = will\nbe treated as an &lt;attr&gt;=&lt;value&gt; pair, otherwise arguments should alternate\nbetween &lt;attr&gt; and &lt;value&gt;\n</pre></div>\n\n\n<p></p><hr/>\n<em>2016-Oct-04 13:12:42 by johnkn:</em> <br/>\n\ncondor_rm and the tools derived from it will already only change jobs owned by the user who runs the tool, these tools do not need additional code for only-my-jobs.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Nov-23 16:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1f4ad02a93a135c2ac9515c3824cc64b6ccbe136\">[49644]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5290\" onclick=\"get_ticket_and_populate_wrapper('5290'); return false;\" title=\"output of condor_q -analyze is often misleading or wrong\">#5290</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5805\" onclick=\"get_ticket_and_populate_wrapper('5805'); return false;\" title=\"Create a tool to do generic classad transforms and pretty printing\">#5805</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6018\" onclick=\"get_ticket_and_populate_wrapper('6018'); return false;\" title=\"add join function to classads to complement split\">#6018</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5889\" onclick=\"get_ticket_and_populate_wrapper('5889'); return false;\" title=\"condor_qedit and other tools should hondor CONDOR_Q_ONLY_MY_JOBS\">#5889</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5416\" onclick=\"get_ticket_and_populate_wrapper('5416'); return false;\" title=\"master should have a command to query (and wait for) child readiness\">#5416</a></span>, and doc for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6018\" onclick=\"get_ticket_and_populate_wrapper('6018'); return false;\" title=\"add join function to classads to complement split\">#6018</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Sep-13 14:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c903b1ada2f6c4442d7907acf5c7013178fbe22c\">[49189]</a></span>: for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5889\" onclick=\"get_ticket_and_populate_wrapper('5889'); return false;\" title=\"condor_qedit and other tools should hondor CONDOR_Q_ONLY_MY_JOBS\">#5889</a></span>, change condor_qedit to honor CONDOR_Q_ONLY_MY_JOBS. this commit also revamps command line parsing and, adds -dry-run, -jobids, -owner and -edits arguments. ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2016-Nov-23 16:15", "status": "resolved", "created": "2016-Sep-08 11:50", "fixed_version": "2016-Sep-08 11:50", "broken_version": "", "priority": "2", "subsystem": "Tools", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}