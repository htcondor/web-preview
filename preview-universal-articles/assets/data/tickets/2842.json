{"id": 2842, "title": "Ticket #2842: revamp job attributes, requirements for needs of partitionable slots", "description": "<blockquote>\nIn order to know how to partition slots for jobs, the job needs to specify requirements for CPU,Memory,Disk and other scalar resources in form that is explicit.  And the Execute nodes need to measure the actual use of memory and disk and publish values into the Job Ad so that the user can learn what their job requirements actually are.\n\n<p>The current system of using <strong><span class=\"quote\">ImageSize</span></strong> a proxy for memory usage is too error prone.  We need a better measure, and the execute node needs to able to choose what that better measure is.  So we will define a new attribute in the job ad. <strong><span class=\"quote\">MemoryUsage</span></strong> which will be set by the starter to the best measure available.  It is anticipated that on most platforms this will result the starter setting <strong><span class=\"quote\">MemoryUsed = ResidentSetSize</span></strong>.\n\n</p><p>In addition, condor_submit needs to be changed so that it no longer automatically adds expressions testing <strong><span class=\"quote\">ImageSize</span></strong> into the <strong>Requirements</strong> expression. See subtickets for details of the various parts of this task.\n\n</p><p></p><div>\n<table border=\"1\" cellpadding=\"2\" cellspacing=\"0\" summary=\"EMBED: Status Table of Derived Tickets\">\n<caption>\n  <a href=\"rptview?rn=86\" rel=\"nofollow\" title=\"EMBED: Status Table of Derived Tickets\">Child Tickets</a>\n</caption>\n<tbody><tr>\n<td colspan=\"11\"><form action=\"rptview\" method=\"GET\">\n<input name=\"rn\" type=\"hidden\" value=\"86\"/>\nTN: <input name=\"TN\" type=\"text\" value=\"2842\"/>\n<input type=\"submit\" value=\"Go\"/>\n</form></td></tr> \n<tr>\n<th><a href=\"rptview?rn=86&amp;order_by=2&amp;order_dir=ASC&amp;TN=2842\">Developer</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=3&amp;order_dir=ASC&amp;TN=2842\">#</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=4&amp;order_dir=ASC&amp;TN=2842\">Status</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=5&amp;order_dir=ASC&amp;TN=2842\">Type</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=6&amp;order_dir=ASC&amp;TN=2842\">Pri</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=7&amp;order_dir=ASC&amp;TN=2842\">Created</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=8&amp;order_dir=ASC&amp;TN=2842\">Changed</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=9&amp;order_dir=ASC&amp;TN=2842\">Target</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=10&amp;order_dir=ASC&amp;TN=2842\">Due Date</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=11&amp;order_dir=ASC&amp;TN=2842\">Days left</a></th>\n<th><a href=\"rptview?rn=86&amp;order_by=12&amp;order_dir=ASC&amp;TN=2842\">Title</a></th>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njohnkn\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2968,86\">2968</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\ndefect\n</td>\n<td valign=\"top\">\n1\n</td>\n<td valign=\"top\">\n2012 May\n</td>\n<td valign=\"top\">\n2012 May\n</td>\n<td valign=\"top\">\nv070800\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nsubmit should modify requirements when request_cpus is non-zero\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\nsmoler\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2850,86\">2850</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n2\n</td>\n<td valign=\"top\">\n2012 Feb\n</td>\n<td valign=\"top\">\n2012 Jun\n</td>\n<td valign=\"top\">\nv070706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nstartd expressions to enable default rules on partitionable resources\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njohnkn\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2835,86\">2835</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n2\n</td>\n<td valign=\"top\">\n2012 Feb\n</td>\n<td valign=\"top\">\n2012 May\n</td>\n<td valign=\"top\">\nv070706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nrevamp default job requirements esp given partitionable slots\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njohnkn\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2856,86\">2856</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n2\n</td>\n<td valign=\"top\">\n2012 Mar\n</td>\n<td valign=\"top\">\n2012 May\n</td>\n<td valign=\"top\">\nv070706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nadd pow function to ClassAds\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\njohnkn\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2843,86\">2843</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n3\n</td>\n<td valign=\"top\">\n2012 Feb\n</td>\n<td valign=\"top\">\n2012 Apr\n</td>\n<td valign=\"top\">\nv070706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nHave Starter set MemoryUsage into the job ad\n</td>\n</tr>\n<tr bgcolor=\"#cacae5\">\n<td valign=\"top\">\ntannenba\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=3286,86\">3286</a></td>\n<td valign=\"top\">\nnew\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2012 Oct\n</td>\n<td valign=\"top\">\n2013 Apr\n</td>\n<td valign=\"top\">\nv070906\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nBooting policy and swap detection\n</td>\n</tr>\n<tr bgcolor=\"#c8c8c8\">\n<td valign=\"top\">\ntannenba\n</td>\n<td valign=\"top\"><a href=\"tktview?tn=2849,86\">2849</a></td>\n<td valign=\"top\">\nresolved\n</td>\n<td valign=\"top\">\nenhance\n</td>\n<td valign=\"top\">\n4\n</td>\n<td valign=\"top\">\n2012 Feb\n</td>\n<td valign=\"top\">\n2012 May\n</td>\n<td valign=\"top\">\nv070706\n</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\u00a0</td>\n<td valign=\"top\">\nschedd should explicitly ask for partitionable resources\n</td>\n</tr>\n</tbody></table></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2012-Apr-05 10:48:06 by tstclair:</em> <br/>\n\nWe've talked on a number of occasions about enumerating the test cases and verifying that everything is ok.  Given that this is the parent ticket, howz about we do it here.\n\n<p></p><hr/>\n<em>2012-Apr-25 11:03:55 by tstclair:</em> <br/>\n\nSo the test case scenarios are:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">state space:\n000 - old submit, old schedd, old exec (doesn't matter)\n001 - old submit, old schedd, new exec\n010 - old submit, new schedd, old exec\n011 - old submit, new schedd, new exec\n100 - new submit, old schedd, old exec (not realistic)\n101 - new submit(remote), old schedd, new exec\n110 - new submit, new schedd, old exec\n111 - all new.\n</pre></div>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2835\" onclick=\"get_ticket_and_populate_wrapper('2835'); return false;\" title=\"revamp default job requirements esp given partitionable slots\">#2835</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nrevamp default job requirements esp given partitionable slots</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2843\" onclick=\"get_ticket_and_populate_wrapper('2843'); return false;\" title=\"Have Starter set MemoryUsage into the job ad\">#2843</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nHave Starter set <span class=\"wiki\"><a href=\"wiki?p=MemoryUsage\" title=\"Memory Usage\">MemoryUsage</a></span> into the job ad</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2849\" onclick=\"get_ticket_and_populate_wrapper('2849'); return false;\" title=\"schedd should explicitly ask for partitionable resources\">#2849</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nschedd should explicitly ask for partitionable resources</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2850\" onclick=\"get_ticket_and_populate_wrapper('2850'); return false;\" title=\"startd expressions to enable default rules on partitionable resources\">#2850</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nstartd expressions to enable default rules on partitionable resources</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2856\" onclick=\"get_ticket_and_populate_wrapper('2856'); return false;\" title=\"add pow function to ClassAds\">#2856</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nadd pow function to <span class=\"wiki\"><a href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span></td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2968\" onclick=\"get_ticket_and_populate_wrapper('2968'); return false;\" title=\"submit should modify requirements when request_cpus is non-zero\">#2968</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nsubmit should modify requirements when request_cpus is non-zero</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3286\" onclick=\"get_ticket_and_populate_wrapper('3286'); return false;\" title=\"Booting policy and swap detection\">#3286</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nBooting policy and swap detection</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2012-May-25 12:48", "status": "resolved", "created": "2012-Feb-23 13:39", "fixed_version": "2012-Feb-23 13:39", "broken_version": "v070705", "priority": "2", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu, tannenba@cs.wisc.ed, gthain@cs.wisc.edu, matt@cs.wisc.edu, tstclair@redhat.com", "due_date": ""}