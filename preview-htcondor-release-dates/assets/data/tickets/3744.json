{"id": 3744, "title": "Ticket #3744: job_basic_suspend_continue issues", "description": "<blockquote>\nThis test is understood to be inconsistent due to Condor behaviour being not what we need for a suspend followed by a continue\n\n<p></p><div class=\"code\">\n<pre class=\"code\">07/09/13 11:34:16 In VanillaProc::PublishUpdateAd()\n07/09/13 11:34:16 Inside OsProc::PublishUpdateAd()\n07/09/13 11:34:16 Inside UserProc::PublishUpdateAd()\n07/09/13 11:34:16 Entering JICShadow::updateShadow()\n07/09/13 11:34:16 In VanillaProc::PublishUpdateAd()\n07/09/13 11:34:16 Inside OsProc::PublishUpdateAd()\n07/09/13 11:34:16 Inside UserProc::PublishUpdateAd()\n07/09/13 11:34:16 Sent job ClassAd update to startd.\n07/09/13 11:34:16 Leaving JICShadow::updateShadow(): success\n07/09/13 11:34:32 Suspending all jobs.\n07/09/13 11:34:32 in VanillaProc::Suspend()\n07/09/13 11:34:32 In VanillaProc::PublishUpdateAd()\n</pre></div>\n\n\n<p>The shadow sometimed generates shadow exceptions and sometimes\nclassifies it as a disconnect that stays trying to reconnect for a long time.\n\n</p><p>Here is sample log output from the shadow\n\n</p><p></p><div class=\"verbatim\">\n<pre>07/09/13 11:34:32 (2.0) (10866): condor_read(): Socket closed when trying to read 5 bytes from startd slot5@ingwe.cs.wisc.edu\n07/09/13 11:34:32 (2.0) (10866): IO: EOF reading packet header\n07/09/13 11:34:32 (2.0) (10866): Can no longer talk to condor_starter &lt;128.105.121.64:41723&gt;\n07/09/13 11:34:32 (2.0) (10866): FileLock::obtain(1) - @1373387672.031265 lock on /tmp/condorLocks/17/73/02219024403982.lockc now WRITE\n07/09/13 11:34:32 (2.0) (10866): FileLock::obtain(2) - @1373387672.031324 lock on /tmp/condorLocks/17/73/02219024403982.lockc now UNLOCKED\n07/09/13 11:34:32 (2.0) (10866): Trying to reconnect job schedd10644suspendandcontinue@ingwe.cs.wisc.edu#2.0#1373387630\n07/09/13 11:34:32 (2.0) (10866): Trying to reconnect to disconnected job\n07/09/13 11:34:32 (2.0) (10866): LastJobLeaseRenewal: 1373387656 Tue Jul  9 11:34:16 2013\n07/09/13 11:34:32 (2.0) (10866): JobLeaseDuration: 1200 seconds\n07/09/13 11:34:32 (2.0) (10866): Resource slot5@ingwe.cs.wisc.edu changing state from EXECUTING to RECONNECT\n07/09/13 11:34:32 (2.0) (10866): JobLeaseDuration remaining: 1184\n07/09/13 11:34:32 (2.0) (10866): Attempting to locate disconnected starter\n07/09/13 11:34:32 (2.0) (10866): gjid is schedd10644suspendandcontinue@ingwe.cs.wisc.edu#2.0#1373387630 claimid is &lt;128.105.121.64:41723&gt;#1373387607#10#...\n07/09/13 11:34:32 (2.0) (10866): attempt to connect to &lt;128.105.121.64:41723&gt; failed: Connection refused (connect errno = 111).\n07/09/13 11:34:32 (2.0) (10866): locateStarter(): Failed to connect to startd &lt;128.105.121.64:41723&gt;\n07/09/13 11:34:32 (2.0) (10866): JobLeaseDuration remaining: 1200\n07/09/13 11:34:32 (2.0) (10866): Scheduling another attempt to reconnect in 8 seconds\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nSometimes we do see suspends followed by unsuspends.\n\n<p></p><hr/>\n<em>2013-Jul-10 10:32:03 by bt:</em> <br/>\n\nBug issued <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3762\" onclick=\"get_ticket_and_populate_wrapper('3762'); return false;\" title=\"Suspend creates unpredictable results\">#3762</a></span></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2014-Aug-11 16:19", "status": "resolved", "created": "2013-Jul-09 10:58", "fixed_version": "2013-Jul-09 10:58", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3741", "creator": "bt", "rust": "", "customer_group": "other", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}