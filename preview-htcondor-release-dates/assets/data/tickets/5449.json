{"id": 5449, "title": "Ticket #5449: No SELINUX rules for the shared port daemon", "description": "<blockquote>\nSELINUX type enforcement rules needed to added for the shared port daemon.</blockquote>", "remarks": "<blockquote>\n<em>2016-Mar-14 15:01:54 by tannenba:</em> <br/>\n\nIn addition to SELinux rules for the shared_port daemon, seems like we also need SELinux rules for cgroup support and condor_preen.   Are there also seperate tickets for these?  If so please leave a remark here with the ticket numbers.\n\n<p></p><hr/>\n<em>2016-Mar-15 10:59:50 by tannenba:</em> <br/>\n\nAlso see <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5560\" onclick=\"get_ticket_and_populate_wrapper('5560'); return false;\" title=\"SELinux and GSI don't work together (?)\">#5560</a></span> for what appears to be conflicts with SELinux and GSI authentication.\nAlso <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5835\" onclick=\"get_ticket_and_populate_wrapper('5835'); return false;\" title=\"No SELinux rules for the linux_kernel_tuning script\">#5835</a></span> re the linux_tuning_script.\n<hr/>\n<em>2016-Aug-09 16:12:58 by tannenba:</em> <br/>\n\nUntil this is patched, some workaround ideas include:\n\n<p></p><ol>\n<li>Assuming SELinux is in enforcing mode, set SELinux to permissive mode.\n\n<p></p></li><li>Customize the site SELinux policy using the standard audit2allow tools; Google will find good tutorials on this.\n\n<p></p></li><li>At least one thing SELinux complains about is writing to /var/lock.  Consider setting <a class=\"external\" href=\"http://research.cs.wisc.edu/htcondor/manual/v8.5/3_3Configuration.html#30451\">config knob DAEMON_SOCKET_DIR</a> to something like <code>/tmp/condor_shared_port_locks</code></li></ol>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-12 17:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6a4b40c240e48bd81218bde11a687a18d194cc59\">[49785]</a></span>: Improved SELinux rules <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5449\" onclick=\"get_ticket_and_populate_wrapper('5449'); return false;\" title=\"No SELINUX rules for the shared port daemon\">#5449</a></span>, <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5560\" onclick=\"get_ticket_and_populate_wrapper('5560'); return false;\" title=\"SELinux and GSI don't work together (?)\">#5560</a></span>, <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5835\" onclick=\"get_ticket_and_populate_wrapper('5835'); return false;\" title=\"No SELinux rules for the linux_kernel_tuning script\">#5835</a></span> Added SELinux type enforcement rules for common situations. Also, made condor domains permissive until we nail everything down properly.  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-06 19:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e112596a54368fb698940c64ca219f60c43b7ae9\">[49746]</a></span>: (<span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5449\" onclick=\"get_ticket_and_populate_wrapper('5449'); return false;\" title=\"No SELINUX rules for the shared port daemon\">#5449</a></span>) Premlinary work on SELinux permissions  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Dec-19 15:58", "status": "review", "created": "2015-Dec-21 15:42", "fixed_version": "2015-Dec-21 15:42", "broken_version": "", "priority": "2", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}