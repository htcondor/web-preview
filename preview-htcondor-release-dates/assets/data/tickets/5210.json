{"id": 5210, "title": "Ticket #5210: condor_kbdd should not report transient mouse movement as 'activity'", "description": "<blockquote>\nIt is complicated to write a policy for HTCondor that pays attention to deliberate mouse/keyboard activity but ignores unintended activity.  The use of a SUSPEND policy is an attempt to deal with that, by suspending a job at the first sign of keyboard/mouse, and then evicting it only when the keyboard activity proves to be sustained.\n\n<p>It would be much simpler if the keyboard daemon simply did not report transient activity at all.  In particular it could ignore mouse movement that was not sustained over a configurable number milliseconds - but treat any keyboard activity as proof that a user was present.\n\n</p><p>This would allow us to ignore the issue of transients when writing the startd policy.</p></blockquote>", "remarks": "<blockquote>\n<em>2015-Aug-13 11:56:01 by johnkn:</em> <br/>\n\ntwo new config knobs control the sensitivity of this feature\n\n<p></p><ul>\n<li><code>KBDD_BUMP_CHECK_SIZE</code> number of pixels that the mouse can move in x and/or y while still being considered a 'bump'.  i.e. if the movement is greater than this value then the move is not a transient and will register as activity. default is 16 pixels.  setting this to 0 effectively disables bump testing.\n\n<p></p></li><li><code>KBDD_BUMP_CHECK_AFTER_IDLE_TIME</code> number of seconds of idle time before bump testing begins. default is 15 minutes.\n</li></ul>\n\n<p>The algorithm is that after a period of idle time, if mouse movement is detected, and the mouse movement is less than <code>KBDD_BUMP_CHECK_SIZE</code>, then a second test is made for mouse movement after a 1 second pause.  if the mouse is still moving, then the movement is reported as activity.  if the mouse has not moved again, then the movement is ignored.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-27 10:34</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aaef9eb65dcbb9153166e39a3818fdb5bda343b9\">[45722]</a></span>: complete doc for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5210\" onclick=\"get_ticket_and_populate_wrapper('5210'); return false;\" title=\"condor_kbdd should not report transient mouse movement as 'activity'\">#5210</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-25 14:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cdaaa015644432f0cef1b6aea371d1924e713238\">[45669]</a></span>: Version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5159\" onclick=\"get_ticket_and_populate_wrapper('5159'); return false;\" title=\"condor_submit should allow an empty file transfer list.\">#5159</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5210\" onclick=\"get_ticket_and_populate_wrapper('5210'); return false;\" title=\"condor_kbdd should not report transient mouse movement as 'activity'\">#5210</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5127\" onclick=\"get_ticket_and_populate_wrapper('5127'); return false;\" title=\"make condor_userprio -long output easier to process\">#5127</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5155\" onclick=\"get_ticket_and_populate_wrapper('5155'); return false;\" title=\"condor_q -better -reverse output confusing when expr uses CurrentTime\">#5155</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4836\" onclick=\"get_ticket_and_populate_wrapper('4836'); return false;\" title=\"Enable python bindings in windows\">#4836</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5132\" onclick=\"get_ticket_and_populate_wrapper('5132'); return false;\" title=\"fix problems with SLOT_TYPE_n_* params\">#5132</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5171\" onclick=\"get_ticket_and_populate_wrapper('5171'); return false;\" title=\"DetectedCpus and DetectedMemory is stuffed into ALL ads\">#5171</a></span> <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=5172\" onclick=\"get_ticket_and_populate_wrapper('5172'); return false;\" title=\"condor_q tries to parse usernames starting with digits as job ids\">#5172</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5188\" onclick=\"get_ticket_and_populate_wrapper('5188'); return false;\" title=\"$REAL() macro substitution doesn't evaluate\">#5188</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5189\" onclick=\"get_ticket_and_populate_wrapper('5189'); return false;\" title=\"$CHOICE() macro should allow empty items\">#5189</a></span>  (By John (TJ) Knoeller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Aug-12 14:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/21e328a42877617812664c9238f05ed6dacf6d3a\">[45589]</a></span>: kbdd will now ignore transient mouse activity. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5210\" onclick=\"get_ticket_and_populate_wrapper('5210'); return false;\" title=\"condor_kbdd should not report transient mouse movement as 'activity'\">#5210</a></span> ===VersionHistory:Pending===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2015-Sep-18 08:42", "status": "resolved", "created": "2015-Aug-10 16:53", "fixed_version": "2015-Aug-10 16:53", "broken_version": "", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}