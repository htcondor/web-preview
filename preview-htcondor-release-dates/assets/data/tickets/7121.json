{"id": 7121, "title": "Ticket #7121: Reduce DAGMan memory footprint by deduping strings in nodes", "description": "<blockquote>\nEach node defined in DAGMan contains several strings, such as the path to submit file, a working directory path, a set of VARS values. These strings often contain the same value(s) in each node.  If the DAG contains tens of thousands of nodes, this duplication of the same string over and over consume a significant RAM.\n\n<p>This ticket will simply deduplicate the submit-file and current-directory strings contained in DAG nodes by using the <a class=\"file\" href=\"rlog?f=src/condor_utils/stringSpace.h\">/src/condor_utils/stringSpace.h</a> class.  Relatedly, a child ticket also will modernize the stringSpace utility class, and yet another child ticket will dedup VARS.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7122\" onclick=\"get_ticket_and_populate_wrapper('7122'); return false;\" title=\"Modernize the stringSpace class\">#7122</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nModernize the stringSpace class</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7170\" onclick=\"get_ticket_and_populate_wrapper('7170'); return false;\" title=\"Further reduce DAGMan memory footprint\">#7170</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nFurther reduce DAGMan memory footprint</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Sep-10 16:20</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c779d26dcb1c9e4db1c891cab6cf102ae06792b6\">[57806]</a></span>: Version history blurb for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7121\" onclick=\"get_ticket_and_populate_wrapper('7121'); return false;\" title=\"Reduce DAGMan memory footprint by deduping strings in nodes\">#7121</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-25 10:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cd5c71c66234a40f49bc2b100dc77fdf2f3166cf\">[57232]</a></span>: Fix dagman segfault on exit due to stringSpace dedups. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7121\" onclick=\"get_ticket_and_populate_wrapper('7121'); return false;\" title=\"Reduce DAGMan memory footprint by deduping strings in nodes\">#7121</a></span>  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jun-20 16:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/33341779c460e8ce09e6775789dbddf4cbc398b1\">[57214]</a></span>: dedup common strings in DAGMan nodes to reduce RAM usage. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7121\" onclick=\"get_ticket_and_populate_wrapper('7121'); return false;\" title=\"Reduce DAGMan memory footprint by deduping strings in nodes\">#7121</a></span>  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Sep-10 16:21", "status": "resolved", "created": "2019-Jun-20 15:05", "fixed_version": "2019-Jun-20 15:05", "broken_version": "", "priority": "3", "subsystem": "Dag", "assigned_to": "tannenba", "derived_from": "#7054", "creator": "tannenba", "rust": "", "customer_group": "ligo", "visibility": "public", "notify": "", "due_date": ""}