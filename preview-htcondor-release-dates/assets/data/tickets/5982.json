{"id": 5982, "title": "Ticket #5982: Starter hangs waiting for reconnect after condor_rm with +PostCmd", "description": "<blockquote>\n<div class=\"snip\">\n<pre class=\"sniplabel\">from rust 8746</pre>\n<pre class=\"snip\">It appears that when I have a job with a +PostCmd defined, when the job is held\nor removed, the starter kills the main process, but then proceeds to run the\nPostCmd.\n\nIt reports a ShutdownGraceful all jobs, and the main job process exits with\nstatus 143, followed by the PostCmd being run. It takes about 30 seconds to run.\n\nThe PostCmd then runs and exits successfully, with a status of 0, but\nimmediately after it says that the connection to the shadow may be lost, sends\nthe whoami, and then reports that condor_write() failed because the socket is\nclosed, and then goes to wait 2400 seconds for a shadow reconnect that will\nnever happen.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2016-Nov-21 13:48:19 by mvpelletier:</em> <br/>\n\nCan a binary patch be created for our 8.4.9 pool?\n\n<p>Would using condor_vacate_job instead of condor_rm circumvent the issue?</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2020-Oct-12 10:00", "status": "new", "created": "2016-Oct-27 15:52", "fixed_version": "2016-Oct-27 15:52", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "s8746", "customer_group": "support", "visibility": "public", "notify": "michael.v.pelletier@raytheon.com", "due_date": ""}