{"id": 3607, "title": "Ticket #3607: Have HTCondor do CPU-level performance monitoring", "description": "<blockquote>\nModern CPUs all can provide detailed accounting about what your jobs did with the CPU time they were given.  A simple example is that the CPU can tell you how many instructions were run, or the cache hit ratio.\n\n<p>At least in CMS, we care deeply about these metrics (and their trending over time) but have only ad-hoc measurements by the devs.  We'd like to see HTCondor automatically report these for us.\n\n</p><p>Linux provides a syscall to read these counters from user processes without any additional privileges.  Alternately, a root user can monitor all processes in a cgroup.\n\n</p><p>Branch posted:\n\n</p><p><a class=\"external\" href=\"https://github.com/bbockelm/htcondor/tree/V7_9-perf-branch\">https://github.com/bbockelm/htcondor/tree/V7_9-perf-branch</a>\n\n</p><p>Design doc pending, but the basics are outlined here:\n\n</p><p><a class=\"external\" href=\"http://research.cs.wisc.edu/htcondor/HTCondorWeek2013/presentations/BockelmanB_Containers.pdf\">http://research.cs.wisc.edu/htcondor/HTCondorWeek2013/presentations/BockelmanB_Containers.pdf</a></p></blockquote>", "remarks": "<blockquote>\n<em>2016-May-16 11:36:47 by tannenba:</em> <br/>\n\nI think the major decision to make here is do we want to merge this code which is implemented via syscall(), or alternatively should we have HTCondor fork/exec the Linux <a class=\"external\" href=\"https://is.gd/C6uoab\">perf command-line tool</a>.  The advantage of Brian's patch is it does not require perf to be present or listed as an RPM dependency; the disadvantage is the patch does not access everything the perf does, and also increases maintenance complexity and lines of code vs just using perf.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2016-May-16 11:37", "status": "new", "created": "2013-May-02 13:42", "fixed_version": "2013-May-02 13:42", "broken_version": "v070906", "priority": "3", "subsystem": "Daemons", "assigned_to": "bbockelm", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "other", "visibility": "public", "notify": "bbockelm@cse.unl.edu, tstclair@redhat.com tannenba@cs.wisc.edu", "due_date": ""}