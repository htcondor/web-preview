{"id": 7071, "title": "Ticket #7071: Remove Standard Universe from the Code Base", "description": "<blockquote>\nWith the advent of application level checkpointing in the vanilla universe and the difficulty to keep standard universe working, we have decided to remove support for standard universe.</blockquote>", "remarks": "<blockquote>\n<em>2019-May-24 14:22:09 by tlmiller:</em> <br/>\n\nWhile removing the standard universe code now that we don't compile it anywhere should be straight-forward, and HTCondor already cleanly handles not having standard universe starters or startds, we'll want to look into what happens -- what should happen -- with a standard universe -free schedd.\n\n<p>Specifically, I removed some clean-up code in the schedd now that the checkpoint server isn't being built any more.  That's not terribly harmful, and the code in question might have been easily duplicated, but it raised the question above.\n\n</p><p>Initial thoughts (some from Jaime):\n\n</p><p></p><ul>\n<li>In the section of the job queue log reader where we detect (and modify?) entries that the schedd no longer understands, we should consider doing something for standard universe jobs.\n</li><li>Should we add SYSTEM_SUBMIT_REQUIREMENTS, or similar, so as to reject standard universe jobs at submit time?\n</li><li>Counterpoint: it is, AFAIK, OK for a schedd to contain jobs it doesn't know what to do with (e.g., for job routing).\n</li><li>TODO: look at what the schedd does right now for job universe not know (e.g., 67).\n</li><li>TODO: look at how we handle MPI universe.\n</li><li>TODO: check to see if the clean-up code change will ever actually matter and/or if it can be easily maintained \"just in case\" -- that is, should the schedd have the clean-up code if it can't directly run the job?  (Assuming the schedd and shadows are always from the same build.)  This may give us more flexibility to answer the other questions.\n</li></ul>\n\n<p></p><hr/>\n<em>2019-May-24 14:43:25 by tlmiller:</em> <br/>\n\n<ul>\n<li>.. and a great deal of documentation removal and editing.\n</li></ul>\n\n<p></p><hr/>\n<em>2019-May-24 20:36:36 by tlmiller:</em> <br/>\n\n<ul>\n<li>.. and remove D_CKPT.\n</li></ul>\n\n<p></p><hr/>\n<em>2019-Jul-27 18:46:30 by tlmiller:</em> <br/>\n\n<strong class=\"two\">Notes</strong>\n\n<p></p><ul>\n<li>docs: grep -i standard\n</li><li>docs: grep -i checkpoint\n</li><li>docs: grep -i ckpt\n</li><li>docs: grep -i syscall\n</li><li>code (and docs follow-up): remove condor_checkpoint command\n</li><li>code: <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastCkpt\" title=\"Last Ckpt\">LastCkpt</a></span> attr / <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=LastPeriodicCheckpoint\" title=\"Last Periodic Checkpoint\">LastPeriodicCheckpoint</a></span> attr\n</li></ul>\n\n<p></p><hr/>\n<em>2019-Aug-07 16:45:44 by tlmiller:</em> <br/>\n\nIt's not clear, once we get rid of the standard universe shadow and starter, if there's any point if running either one to determine what it's capable of; we don't support running schedds/startds that aren't the same version, so they already know.\n\n<p></p><hr/>\n<em>2019-Aug-10 19:07:01 by tlmiller:</em> <br/>\n\nRemove <code>USE_AFS</code> implementation (removed from documentation).\n\n<p><em>2019-Aug-10 19:07:01 by tlmiller:</em> <br/>\n\nRemove <code>USE_AFS</code> implementation (removed from documentation), along with <code>CHECKPOINT_PLATFORM</code> and <code>IS_VALID_CHECKPOINT_PLATFORM</code>.\n\n</p><p>Remove <code>DEFAULT_RANK_STANDARD</code>, <code>APPEND_REQ_STANDARD</code>, <code>APPEND_RANK_STANDARD</code> (removed from documentation).\n\n</p><p></p><hr/>\n<em>2019-Oct-16 16:59:44 by tlmiller:</em> <br/>\n\nMerged progress to master branch to help avoid bit rot; commits <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b87399881549385806690f1874b8c8d27e271fe1\">[58191]</a></span> and <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/27ea1c988b06d8160d0eec653a1dd63b348790d7\">[58192]</a></span> are the documentation and code changes, respectively.  In combination, they're the same as the branch, but neither is any of the branch's commits.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Feb-26 18:33</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2711cddce1d7192a751477ecfcfb91f0b73b6842\">[59059]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Remove gfortran dependency from Travis build  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-10 15:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/27246434fa9b1317d51403a6c1e96234ce11dc0c\">[58879]</a></span>: Remove checkpoint server params and attributes. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-10 15:55</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/78d02a0b172fb69e519d7bd446ce49e3a1218834\">[58880]</a></span>: Remove code related to checkout platform string. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-02 13:52</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/181223d4bd976e2a8fe3ef28d45d88ebf98f610a\">[58797]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) More std univ removal  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2020-Jan-02 12:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b7e8ba5db523c0e5de93d5287117f4456cf5589c\">[58794]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) More std univ removal  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-20 13:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dfbbc11e34d1287ac3145edd0df27c654f7dce1e\">[58727]</a></span>: Fix build breakage from previous code cleanup. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-20 11:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ce7561b240426ef2f2feaf018f1822e0b6b3df10\">[58723]</a></span>: Remove more dead code, mostly related to standard universe. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-19 09:35</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a0142c892f51e18aa166950087fc5748c04b25d6\">[58710]</a></span>: Remove more standard universe code. <span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-05 10:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f1e540f6b0c3a7fc6b1efaeabc96ac1571c63c08\">[58597]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Fixup document index entries broken by std univ removal  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Dec-05 08:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/84cf23b9282d8bf1fb77d4326fef8d42565e8d8e\">[58595]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) More standard universe removal Remove configuration macros so HTCondor daemons do not log complaints about condor_shadow.std, condor_starter.std, and condor_ckpt_probe being missing  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Nov-08 06:58</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/78aa94454714c29ff577406035d698b4107a3024\">[58408]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Removed reference to \"clipped\" in platforms  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-16 16:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/27ea1c988b06d8160d0eec653a1dd63b348790d7\">[58192]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Code changes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Oct-16 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b87399881549385806690f1874b8c8d27e271fe1\">[58191]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Documentation changes.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-31 10:53</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7a2e13f6786ecbed459ce3793aeae4905efcaca3\">[57018]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Since we won't be distributing these manpages ever again, remove them so that sphinx quits complaining about them being missing.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-24 14:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f2bcfd4b60745512be44723934ce2a37d8a593e4\">[56953]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) First pass of code removal. (Franks.)  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-May-24 09:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56b6d3349b3491c1ceacb00e139509a664053e24\">[56951]</a></span>: (<span class=\"ticket\"><a class=\"active\" href=\"/wiki-archive/tickets/?ticket=7071\" onclick=\"get_ticket_and_populate_wrapper('7071'); return false;\" title=\"Remove Standard Universe from the Code Base\">#7071</a></span>) Clip all builds. Bye bye std univ  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2019-Dec-02 13:20", "status": "active", "created": "2019-May-24 09:28", "fixed_version": "2019-May-24 09:28", "broken_version": "", "priority": "3", "subsystem": "Std", "assigned_to": "tlmiller", "derived_from": "", "creator": "tim", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}