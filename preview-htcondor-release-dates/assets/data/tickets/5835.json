{"id": 5835, "title": "Ticket #5835: No SELinux rules for the linux_kernel_tuning script", "description": "<blockquote>\nSimilar to <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=5549\" onclick=\"get_ticket_and_populate_wrapper('5549'); return false;\" title=\"Job Router Daemon not publishing self-monitoring ads\">#5549</a></span> and <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5560\" onclick=\"get_ticket_and_populate_wrapper('5560'); return false;\" title=\"SELinux and GSI don't work together (?)\">#5560</a></span>, yet another SELinux issue:\n\n<p><a class=\"external\" href=\"https://www-auth.cs.wisc.edu/lists/htcondor-users/2016-August/msg00049.shtml\">Folks in condor-users are reporting SELinux Alerts</a> like the following:\n\n</p><p></p><pre>  ###########################################################################\n  SELinux is preventing /usr/bin/bash from write access on the file\n  ip_local_port_range.\n</pre>\n\n<p>This one is triggered by the /usr/libexec/condor/linux_kernel_tuning script, which is run by default since config knob ENABLE_KERNEL_TUNING defaults to True.\n\n</p><p>We should add the appropriate context to the linux_kernel_tuning script to allow it to issue the required sysctl calls and/or write to the proc filesystem as needed.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2016-Dec-12 17:43</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6a4b40c240e48bd81218bde11a687a18d194cc59\">[49785]</a></span>: Improved SELinux rules <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5449\" onclick=\"get_ticket_and_populate_wrapper('5449'); return false;\" title=\"No SELINUX rules for the shared port daemon\">#5449</a></span>, <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5560\" onclick=\"get_ticket_and_populate_wrapper('5560'); return false;\" title=\"SELinux and GSI don't work together (?)\">#5560</a></span>, <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=5835\" onclick=\"get_ticket_and_populate_wrapper('5835'); return false;\" title=\"No SELinux rules for the linux_kernel_tuning script\">#5835</a></span> Added SELinux type enforcement rules for common situations. Also, made condor domains permissive until we nail everything down properly.  (By Tim Theisen )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2016-Dec-19 15:58", "status": "review", "created": "2016-Aug-08 13:18", "fixed_version": "2016-Aug-08 13:18", "broken_version": "v080400", "priority": "2", "subsystem": "Packaging", "assigned_to": "tim", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "users", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}