{"id": 2025, "title": "Ticket #2025: classad attributes ending in \\ or \"multi-line\" attributes", "description": "<blockquote>\nI had first notice this here:\n\n<p><a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=692852\">https://bugzilla.redhat.com/show_bug.cgi?id=692852</a>\n\n</p><p>But it appears to be a general case issue:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">&lt;Gregggg&gt; bash-3.2$ echo 'FOO = \"\\\"' &gt;&gt; /tmp/mach\n&lt;Gregggg&gt; bash-3.2$ condor_advertise UPDATE_STARTD_AD /tmp/mach\n&lt;Gregggg&gt; couldn't parse ClassAd in /tmp/mach\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Apr-03 15:43:26 by gthain:</em> <br/>\n\nI've pushed a fix to one place which was obviously wrong, but there might very well be other problems -- I would like another set of eyes to look at the Windows Java problem.\n\n<p></p><hr/>\n<em>2011-Apr-04 10:36:58 by tstclair:</em> <br/>\n\nSuccess!\n\n<p></p><hr/>\n<em>2011-Apr-04 11:45:11 by tstclair:</em> <br/>\n\nSeems related to the compat_classad issue\n\n<p></p><div class=\"code\">\n<pre class=\"code\">From: \tkschwarz@embraer.com.br\nReply-to: \tCondor-Users Mail List &lt;condor-users@cs.wisc.edu&gt;\nTo: \tcondor-users@cs.wisc.edu\nSubject: \t[Condor-users] failed to create classad; bad expr = JavaFullversion\nDate: \tThu, 31 Mar 2011 09:52:59 -0300 (03/31/2011 07:52:59 AM)\n\n\n\nI am testing Condor 7.5.6 on Linux and are getting the following message in the StarterLog:\n\n03/31 09:48:39 failed to create classad; bad expr = JavaFullversion = \"J2RE 1.4.2 IBM J9 2.3 Linux amd64-64 j9vmxa64142-20090310 (JIT enabled)\n\nAny way to fix this?\n\nThanks,\nKlaus\n\n----------------------------------\nFull line is actually:\n\nJavaFullversion = \"J2RE 1.4.2 IBM J9 2.3 Linux amd64-64 j9vmxa64142ifx-20090909 (JIT enabled)\nJ9VM - 20090908_41946_LHdSMr\nJIT  - 20090210_1447ifx1_r8\nGC   - 200902_24\"\n</pre></div>\n\n\n<p></p><hr/>\n<em>2011-Apr-04 19:36:53 by gthain:</em> <br/>\n\nNote that classads (at least the old classads) has no good way to parse a whole classad directly from a file -- all the routines read in a line at a time.  So, I think the most expeditious way to fix this is to fix the Java code which is emitting the attributes.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-13 10:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/a5eca1bd7c0e0de84a738ee15ab13857e7adbe53\">[21377]</a></span>: Recompile CondorJavaInfo.class with -target 1.3 <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2025\" onclick=\"get_ticket_and_populate_wrapper('2025'); return false;\" title='classad attributes ending in \\ or \"multi-line\" attributes'>#2025</a></span> So that it runs on machines with older Java VMs.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-12 22:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b6f5eb986e6049dba8878d9f939bbcf21a063dd7\">[21370]</a></span>: Prevent <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorJavaInfo\" title=\"Condor Java Info\">CondorJavaInfo</a></span> from emitting illegal classads <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2025\" onclick=\"get_ticket_and_populate_wrapper('2025'); return false;\" title='classad attributes ending in \\ or \"multi-line\" attributes'>#2025</a></span> by replacing \\n with ' '.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Apr-03 15:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/289e02c7ff96e2cc06be98c1defac17f11748f87\">[21245]</a></span>: Fix parsing of trailing backslashes in classads <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2025\" onclick=\"get_ticket_and_populate_wrapper('2025'); return false;\" title='classad attributes ending in \\ or \"multi-line\" attributes'>#2025</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Apr-12 23:01", "status": "resolved", "created": "2011-Apr-01 13:37", "fixed_version": "2011-Apr-01 13:37", "broken_version": "v070600", "priority": "1", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "tstclair", "rust": "", "customer_group": "users", "visibility": "public", "notify": "tannenba@cs.wisc.edu,matt@cs.wisc.edu, tstclair@redhat.com, gthain@cs.wisc.edu", "due_date": ""}