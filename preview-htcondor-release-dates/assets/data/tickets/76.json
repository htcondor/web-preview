{"id": 76, "title": "Ticket #76: Color, side-by-side diff", "description": "<blockquote>\nAdd a plugin to give us color, side-by-side diffs, ideally with character-by-character highlighting. <a class=\"external\" href=\"http://meld.sourceforge.net/meld_file1.png\">Example of character-by-character highlighting</a>, note how easily you can see a small change in a line.\n\n<p><a class=\"external\" href=\"http://www.cvstrac.org/cvstrac/wiki?p=ColoredDiffs\">This is the CVSTrac documentation on how to do it</a>, but the links to diff2html implementations are all dead.\n\n</p><p><a class=\"external\" href=\"http://wiki.droids-corp.org/mediawiki/index.php/Diff2html\">This is a promising diff2html</a>, in particular is supports character-by-character highlighting, although we'd probably need to customize the colors to not make our eyes bleed.</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Jan-25 17:43:45 by adesmet:</em> <br/>\n\nAttached is a script and matching CSS that should be a drop in implementation.  Note that <strong>none of this has been tested</strong>; but I believe it will work as is, or with minor adjustments.\n\n<p></p><ol>\n<li>Put diff2html.py somewhere useful nearby gittrac's binary.\n</li><li>Update diff2html.py's path in the #! line if necessary.\n</li><li>At <a class=\"external\" href=\"http://pinguino.cs.wisc.edu:9090/setup_diff\">setup_diff</a>, change the command to something like:\n<div class=\"code\">\n<pre class=\"code\">GIT_DIR='%RP' git-diff --full-index -t -p -r '%V1' '%V2' -- '%F' | /path/to/diff2html.py 2&gt;/dev/null</pre></div>\n\n</li><li>At <a class=\"external\" href=\"http://pinguino.cs.wisc.edu:9090/setup_style\">setup_style</a>, attach diff2html.css\n</li><li>Modify <a class=\"external\" href=\"http://pinguino.cs.wisc.edu:9090/setup_style\">setup_style</a> to add:\n<div class=\"code\">\n<pre class=\"code\">&lt;link rel=\"stylesheet\" title=\"diff2html stylesheet\"\n      type=\"text/css\" href=\"%B/diff2html.css\"&gt;</pre></div>\n\n</li></ol>\n\n<p></p><hr/>\n<em>2009-Jan-26 00:58:15 by adesmet:</em> <br/>\n\nExample output: <a class=\"external\" href=\"http://pages.cs.wisc.edu/~adesmet/diff-test.html\">http://pages.cs.wisc.edu/~adesmet/diff-test.html</a> . Coloration can easily be changed in the CSS file.  Currently \"visible whitespace\" is only shown for changes; it can be shown in more places by changing the CSS (it's span.ponct).\n\n<p></p><hr/>\n<em>2009-Jan-26 07:56:59 by matt:</em> <br/>\n\nLooks nice, +1 for installing that ASAP.\n\n<p></p><hr/>\n<em>2009-Jan-29 12:40:27 by tannenba:</em> <br/>\n\nDone.\n\n<p>Couple things needed to change:\n</p><ol>\n<li>don't use the title tag in the header to pull in the style sheet; it resulted in the browser thinking it was an alternative style sheet and not appending it to the default.\n</li><li>the command is \"git diff\", not \"git-diff\".\n</li></ol>\n\n<p></p><hr/>\n<em>2009-Jan-30 10:39:51 by tannenba:</em> <br/>\n\nUgh, now the \"Patchset\" feature sends the patchset w/ all sorts of HTML crap included.  This is a gittrac bug.\n\n<p>I fixed it in the source code, git.c, commented the patch, and <a class=\"external\" href=\"http://www.cvstrac.org/cvstrac/tktview?tn=781\">sent the patch upstream</a>.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/6/diff2html.py\">diff2html.py</a>\n9214 bytes added by adesmet on 2009-Jan-25 23:38:12 UTC.\n<br/>\nBased <a class=\"external\" href=\"http://wiki.droids-corp.org/mediawiki/index.php/Diff2html\">this</a><br/>\n</li><li><a href=\"../files/7/diff2html.css\">diff2html.css</a>\n1392 bytes added by adesmet on 2009-Jan-25 23:38:53 UTC.\n<br/>\nMatching CSS formatting for diff2html.py<br/>\n</li><li><a href=\"../files/9/diff2html.py\">diff2html.py</a>\n9214 bytes added by adesmet on 2009-Jan-26 23:44:48 UTC.\n<br/>\nUpdated version. (Fixed bug that would cause wrong color for some changes)<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "", "type": "enhance", "last_change": "2009-Dec-17 14:21", "status": "resolved", "created": "2009-Jan-22 14:47", "fixed_version": "2009-Jan-22 14:47", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "tannenba", "derived_from": "#3", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}