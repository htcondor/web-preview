{"id": 4036, "title": "Ticket #4036: Really large DAG test fails", "description": "<blockquote>\nI'm getting a failure like this:\n\n<p></p><pre>  job_dagman_really_large_dag.run\n  Writing 20 x 10 DAG to job_dagman_really_large_dag.dag; using common log file\nref said type is &lt;&lt;&gt;&gt;\n  2013/11/03 20:57:28: &lt;CondorTest&gt; submitted: This test will see submit, executing, held, released, and successful completion\n  2013/11/03 20:57:30: &lt;CondorTest&gt; Good. We need the dag to run&lt;1285&gt;\n  job_dagman_really_large_dag: FAILURE (Unexpected Eviction without checkpoint)\n</pre>\n\n<p>(Note that I actually made the DAG a lot smaller than normal because the size of the DAG doesn't seem to have anything to do with the problem.)\n\n</p><p>Also, it seems to be a failure of the test rather than a failure of the functionality -- the dagman.out file says that the DAG completed successfully.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Nov-06 11:45:19 by wenger:</em> <br/>\n\nNote:  The really large DAG test isn't part of the automated test suite because it takes too long to run -- I only run it manually.  As it turns out, a bunch of the other tests that do a condor_hold on the DAGMan are also failing when I run them manually (for example, job_dagman_retry_recovery and job_dagman_default_log) -- but they work when they're run in the BATLab.\n\n<p>So it seems like something has changed in the test scripts that makes them sensitive to DAGMan getting held when the test script is run outside of the BATLab...\n\n</p><p></p><hr/>\n<em>2013-Nov-06 13:47:25 by wenger:</em> <br/>\n\nThis seems to be working in 8.0.  BT says that the tests in 8.1 are now more strict and don't allow events that don't have a callback registered.  So I'm going to try things out on 8.1 (master) and make appropriate fixes.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-11 12:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c831da7f12acbf99bcc74d7a2b4ce1c021db1fb4\">[38694]</a></span>: Gittrac <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4036\" onclick=\"get_ticket_and_populate_wrapper('4036'); return false;\" title=\"Really large DAG test fails\">#4036</a></span>: Added an \"evicted w/o checkpoint\" subroutine so the test doesn't fail because of DAGMan getting held.  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2013-Nov-11 13:13", "status": "resolved", "created": "2013-Nov-03 21:03", "fixed_version": "2013-Nov-03 21:03", "broken_version": "v080102", "priority": "2", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "", "customer_group": "other", "visibility": "public", "notify": "wenger@cs.wisc.edu, bt@cs.wisc.edu", "due_date": ""}