{"id": 2661, "title": "Ticket #2661: [RFE] enable \"condor_status -sort <expression>\"", "description": "<blockquote>\nGeneralize the \"-sort\" option to condor_status so that it can receive a general expression instead of just an attribute name.</blockquote>", "remarks": "<blockquote>\n<em>2011-Nov-23 15:53:01 by eje:</em> <br/>\n\nAlso of possible interest: <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=1770\" onclick=\"get_ticket_and_populate_wrapper('1770'); return false;\" title=\"Consider -sortrank as option to condor_status/condor_q\">#1770</a></span>\n\n<p></p><hr/>\n<em>2011-Dec-02 16:33:04 by eje:</em> <br/>\n\nTESTING:\n\n<p>Some examples of new capability to sort on generalized expressions:\n\n</p><p>On a personal condor with two slots: sorting based on attributes works as before, but now new attributes CondorStatusSortKey&lt;N&gt; and CondorStatusSortKeyExpr&lt;N&gt; are present in sorted output classads\n</p><div class=\"code\">\n<pre class=\"code\">$ condor_status -l -sort SlotID | grep -e SortKey -e SlotIDSlotID = 1\nCondorStatusSortKey0 = 1\nCondorStatusSortKeyExpr0 = SlotID\nSlotID = 2\nCondorStatusSortKey0 = 2\nCondorStatusSortKeyExpr0 = SlotID\n</pre></div>\n\n\n<p>Now we can use expressions and negate sort key:\n</p><div class=\"code\">\n<pre class=\"code\">$ condor_status -l -sort -SlotID | grep -e SortKey -e SlotID\nSlotID = 2\nCondorStatusSortKey0 = -2\nCondorStatusSortKeyExpr0 =  -SlotID\nSlotID = 1\nCondorStatusSortKey0 = -1\nCondorStatusSortKeyExpr0 =  -SlotID\n</pre></div>\n\n\n<p>An example from scheduler ads, and using two sort keys:\n</p><div class=\"code\">\n<pre class=\"code\">$ condor_status -schedd -l -sort 'TotalRunningJobs+TotalIdleJobs' -sort Machine | grep -e SortKey -e TotalRunningJobs -e TotalIdleJobs\nTotalIdleJobs = 5\nTotalRunningJobs = 2\nCondorStatusSortKey0 = 7\nCondorStatusSortKey1 = rorschach\nCondorStatusSortKeyExpr0 = TotalRunningJobs + TotalIdleJobs\nCondorStatusSortKeyExpr1 = Machine\n</pre></div>\n\n\n<p>As before, classads for which the key is undefined are ignored:\n</p><div class=\"code\">\n<pre class=\"code\">$ condor_status -l -sort SlotID+Foo | grep -e SortKey -e SlotID\n$\n</pre></div>\n\n\n<p></p><hr/>\n<em>2011-Dec-05 08:43:35 by nwp:</em> <br/>\n\nLooks fine to me</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/499/gt2661-status-sort-expr.patch\">gt2661-status-sort-expr.patch</a>\n6705 bytes added by eje on 2011-Dec-02 21:19:05 UTC.\n<br/>\nPatch against 7.7 (master) that generalizes the condor_status -sort argument to accept a generalized expression instead of just a simple attribute name.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-12 12:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d97624fb0c71bf9ad98a0ca32a7cf9955bfaf4cc\">[28721]</a></span>: Fix expression handling for string sort keys ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2661\" onclick=\"get_ticket_and_populate_wrapper('2661'); return false;\" title='[RFE] enable \"condor_status -sort &lt;expression&gt;\"'>#2661</a></span>  (By Erik Erlandson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-06 10:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/eb2096cc68e144a5b158ea357069059ca219960f\">[28622]</a></span>: Improve description of new condor_status -sort expr option ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2661\" onclick=\"get_ticket_and_populate_wrapper('2661'); return false;\" title='[RFE] enable \"condor_status -sort &lt;expression&gt;\"'>#2661</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-02 16:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/368030a27ebe195e12e42839f78f51a0ff7ed407\">[28556]</a></span>: ===VersionHistory:Complete=== ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2661\" onclick=\"get_ticket_and_populate_wrapper('2661'); return false;\" title='[RFE] enable \"condor_status -sort &lt;expression&gt;\"'>#2661</a></span>  (By Erik Erlandson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-02 16:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cf10fb170f80966ad6be86b4f6ec076b9165ebff\">[28555]</a></span>: Documentation of generalized expression support for condor_status -sort ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2661\" onclick=\"get_ticket_and_populate_wrapper('2661'); return false;\" title='[RFE] enable \"condor_status -sort &lt;expression&gt;\"'>#2661</a></span>  (By Erik Erlandson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Dec-02 15:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9bf1ff557aa8811b48cdc67243e4688d16e814b5\">[28554]</a></span>: Enhanced condor_status -sort to accept generalized expressions ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2661\" onclick=\"get_ticket_and_populate_wrapper('2661'); return false;\" title='[RFE] enable \"condor_status -sort &lt;expression&gt;\"'>#2661</a></span>  (By Erik Erlandson )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2011-Dec-05 08:44", "status": "resolved", "created": "2011-Nov-23 15:52", "fixed_version": "2011-Nov-23 15:52", "broken_version": "", "priority": "3", "subsystem": "Tools", "assigned_to": "eje", "derived_from": "", "creator": "eje", "rust": "", "customer_group": "other", "visibility": "public", "notify": "eje@cs.wisc.edu, tstclair@redhat.com, gthain@redhat.com, dan@hep.wisc.edu", "due_date": ""}