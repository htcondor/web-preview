{"id": 4306, "title": "Ticket #4306: Glue refactoring", "description": "<blockquote>\nThere were two main classes of activities which we did NOT want batch test to be doing. One was creating the initial testing configuration and the other was starting up a test personal condor.\n\n<p>The first goal was for the glue to write the initial condor configuration which the tests will access from the environment variable CONDOR_CONFIG. The second is rip out all this activity from batch_test.pl\n\n</p><p>A consequence of this is that each test which does not currently start a condor\nwill get code from file condor_tests/testcondortemplate used to have it start its own with some lines going near the completion to shut that condor down.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jul-15 13:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/70ce8e257be9a83473115cb359104fdf6da55450\">[40657]</a></span>: Squash spurious perl dependencies <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-09 19:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9522044a98caaaa14d4781e2aa5a824ab425a634\">[40372]</a></span>: make broken test for return values to dashboard run normally <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-09 19:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5002ee24abf8778c8134b9350abfe2cedb75fcc7\">[40371]</a></span>: Tweaks to get test results to dashboard <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-06 15:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/09af01a41757c868f67d5c660736bc373e3ecec0\">[40360]</a></span>: Tweaks after glue refactor <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b8059e580d1cf77733ced2668ace0aa7e2875b42\">[40340]</a></span>: Strip down batch test to somewhat core testing features only. Tale other modules and make their current functions available from the glue under windows native perl. IE de-cygwin them somewhat. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/3dff724fc6053a2ad4f37a588b898244a414815b\">[40339]</a></span>: Changed the chomp for windows. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:16</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4a269efa1a9d54bba924a22cb802230c886d76ae\">[40338]</a></span>: Changed test to create it's own personal condor as the event_log attribute is no longer defaulted. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/80c99931a27affd5e03dac1c1d256d7556a37156\">[40337]</a></span>: Rewrote perremovve test to be all inclusive within the run file to have it easier to fix. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8efc7c48db589d8f37a0897929af3b086fd535e7\">[40336]</a></span>: Add its own personal condor. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4d2fbed182d1a5e3a288ab5e59cfa1b966858c9f\">[40335]</a></span>: Changes to not run 4 java tests on windows for now and also cmd_q_shows-dag as windows 7 had no .sh. Does now so that will be tested. Also CMakeList.txt changes to turn off 3 dag tests as per kent. This will be adjusted. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/487e87cdf9ef5fbbea7ec20723bd7576d071c729\">[40334]</a></span>: Changes for temporarily having batch_test functionality moved out of batch test and into glue. Includes set up of personals for tests needing a condor to exist. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-04 10:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bff46a83d242c28613c396267c333419f8c1ad80\">[40333]</a></span>: A list of tests which if run are believed to require a base personal condor set up for them. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-03 13:09</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/10aada82d8b1fb5a686d0de60e8df980f8f65ae3\">[40319]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dafebeb263ba8e75ced6644a352033cca96b009f\">[40054]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/99709688bfdf40e9a6a334e52e054b2f9f86f9f0\">[40055]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b09c488afeeacfd29db84450f5a99225e4598481\">[40056]</a></span>, Merge branch 'master-test_glue_refactoring' of /p/condor/repository/CONDOR_SRC into master-test_glue_refactoring Conflicts: nmi_tools/glue/test/TestGlue.pm <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Jun-02 14:40</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/389f9b842204d985ca99e7b3d16a8e9fcee38160\">[40317]</a></span>: I like this copy but have one locally that I don't want <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/99709688bfdf40e9a6a334e52e054b2f9f86f9f0\">[40055]</a></span>: Should not be here. Default should run all tests <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8b52863d3c8076c8094d94963601355e83b0f796\">[40053]</a></span>: Final glue and batch test after shifting initial configuration to remote_pre and personal condors for tests to tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:29</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dafebeb263ba8e75ced6644a352033cca96b009f\">[40054]</a></span>: Just for grins, keep copy with code turned off <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/34830ebb73472f4089aa1694a919b678762c8938\">[40052]</a></span>: Turn off creation of a personal condor by batchtest <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/6b311ebfb2c4515dc8e4c89e925f267b84777e1b\">[40050]</a></span>: Template for adding personal condor to tests <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/93c78db4caed77a1f86ef85f422aacc6594412cb\">[40051]</a></span>: Test job for refactoring <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-May-02 11:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/cbb8631a54547a72aacdde45b1296e7ce4500f58\">[40049]</a></span>: start of moving config file generation to the glue.#4306  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-15 10:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fa7a405705b900d92ff79b324fefcd251d0a462f\">[39937]</a></span>: Just for grins, keep copy with code turned off <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-15 09:05</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ceffa846d651b4bc2e5564d7598ab1a8bf328ed3\">[39936]</a></span>: Final glue and batch test after shifting initial configuration to remote_pre and personal condors for tests to tests. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-11 12:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/721d3d2436117919c490e3606520157aef287c9d\">[39935]</a></span>: Turn off creation of a personal condor by batchtest <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-11 12:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/70c332dae7b30ddd9cbffa3b9671acc10eb3cfac\">[39934]</a></span>: Test job for refactoring <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-11 12:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/52eddfe41b00cc767d8f76eda4414db3cc757a95\">[39932]</a></span>: Template for adding personal condor to tests <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Apr-11 12:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/93dd55cf991d6db330d2e101c8a421702b8e0dcd\">[39931]</a></span>: start of moving config file generation to the glue.#4306  (By Bill Taylor )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2002-Sep-11 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5c5d3b3cc3b5ce7cdf54a4e6237901a69d927fc6\">[23307]</a></span>: added the JAVA_SRC module (requested in condor-admin <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>)  (By wright )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2002-Sep-11 17:26</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/d03dc1e7f1ec80bb343f1bc244095b7af3666e54\">[7446]</a></span>: added the JAVA_SRC module (requested in condor-admin <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4306\" onclick=\"get_ticket_and_populate_wrapper('4306'); return false;\" title=\"Glue refactoring\">#4306</a></span>)  (By wright )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2014-Aug-06 12:51", "status": "resolved", "created": "2014-Apr-11 12:29", "fixed_version": "2014-Apr-11 12:29", "broken_version": "", "priority": "4", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "#3594", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "johnkn@cs.wisc.edu", "due_date": ""}