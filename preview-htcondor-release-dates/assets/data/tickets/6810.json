{"id": 6810, "title": "Ticket #6810: Tolerate full sinful string in claim ids", "description": "<blockquote>\nCurrently, the claim ids used to claim a slot start with a sinful string that contains just an IP address and port number between angled brackets. This can make it impossible for match password authentication to work when there are multiple startds behind the same shared port daemon. This can be fixed by using the startd's full sinful string in the claim id. But this will break parsing of the claim id, as '#' is used to separate fields in the claim id and will appear in a sinful string when CCB is enabled.\n\n<p>We can change the parsing code to tolerate full sinful strings in the claim id. If the first character of the claim id is '&lt;', then the first occurrence of '&gt;' denotes the end of first claim id field, rather than the first '#'.\n\n</p><p>Generating claim ids with full sinful strings will want until Condor 8.9.0 (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5604\" onclick=\"get_ticket_and_populate_wrapper('5604'); return false;\" title=\"Multiple startds behind shared port broken w/ match password\">#5604</a></span>).</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Oct-30 13:31:29 by jfrey:</em> <br/>\n\nI don't believe this change needs a version history entry.\n\n<p></p><hr/>\n<em>2018-Nov-19 15:42:56 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>Looks good to me.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Oct-30 13:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fcd8b598b6f94d4250bde052dd2f6c8d2d5ef707\">[55661]</a></span>: Handle full sinful strings in claim ids. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6810\" onclick=\"get_ticket_and_populate_wrapper('6810'); return false;\" title=\"Tolerate full sinful string in claim ids\">#6810</a></span> We want to be able to put the startd's full sinful string in its claim ids. But a sinful string can contain '#', which is also the field separator in a claim id. Thus, we should look for '&gt;' to find the end of the sinful string in a claim id instead of '#'.\u00a0[...]\n (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Nov-19 15:45", "status": "resolved", "created": "2018-Oct-29 14:55", "fixed_version": "2018-Oct-29 14:55", "broken_version": "", "priority": "3", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#5604", "creator": "jfrey", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}