{"id": 1129, "title": "Ticket #1129: dprintf crashes with multiple forked workers rotating concurrently", "description": "<blockquote>\nmattf reports that setting the max log size low for the collector, and continually running condor_status will quickly crash the collector.  Perhaps, multiple forked collector workers are trying to simulateously rotate the log file.</blockquote>", "remarks": "<blockquote>\n<em>2010-Jan-21 10:21:27 by tannenba:</em> <br/>\n\nSupposedly the same problem happens with the schedd when using forked workers to service condor_q requests.\n\n<p></p><hr/>\n<em>2010-Jan-21 10:30:17 by matt:</em> <br/>\n\n<a class=\"external\" href=\"https://bugzilla.redhat.com/show_bug.cgi?id=486462\">https://bugzilla.redhat.com/show_bug.cgi?id=486462</a>\n\n<p>My theory is both the parent and the worker are trying to rotate the log file. If the parent succeeds the worker takes down the daemon after writing to stdout. If the worker succeeds the parent drops a core.\n\n</p><p>The crash seems to happen a lot under mark_thread_safe. Maybe it is being called and logging after some point of no return.\n\n</p><p></p><hr/>\n<em>2010-Jan-25 11:11:19 by cweiss:</em> <br/>\n\nWill for now consider this ticket abandoned since problem didn't occur with RHEL or another Fedora 12 box. We should have an eye on this in the future, though.\n\n<p></p><hr/>\n<em>2010-Jan-25 11:21:34 by matt:</em> <br/>\n\nIndeed, seems to only reproduce on my slightly out of date F12 box.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2010-Jan-25 11:21", "status": "abandoned", "created": "2010-Jan-21 09:53", "fixed_version": "2010-Jan-21 09:53", "broken_version": "v070400", "priority": "1", "subsystem": "Daemons", "assigned_to": "cweiss", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}