{"id": 3201, "title": "Ticket #3201: Garbage characters from CondorError / SecMan", "description": "<blockquote>\nWhen a TCP connection fails, we get the following message:\n\n<p></p><div class=\"verbatim\">\n<pre>08/16/12 14:05:40 ERROR: SECMAN:\u00d4:Failed to create security session to &lt;129.93.239.155:9618&gt; with TCP.\n|SECMAN:\u00d3:TCP connection to &lt;129.93.239.155:9618&gt; failed.\n</pre></div>\n\n\n<p>Note that it improperly breaks over 2 lines and it prints a garbage character for the error code.  The garbage character is from this line:\n\n</p><p></p><div class=\"verbatim\">\n<pre>errbuf += walk-&gt;_code\n</pre></div>\n\n\n<p>Probably, the intent is to append the error code to the errbuf.  However, this converts walk-&gt;_code to char, and appends a char instead.</p></blockquote>", "remarks": "<blockquote>\n<em>2012-Aug-20 08:57:35 by nwp:</em> <br/>\n\nThis error resulted from not carefully looking at the differences between <code>std::string</code> and <code>MyString</code>. See <a class=\"external\" href=\"https://condor-wiki.cs.wisc.edu/index.cgi/wiki?p=MyStringVsStdString\">differences between std::string and MyString</a>\n\n<p></p><hr/>\n<em>2012-Aug-20 09:05:47 by nwp:</em> <br/>\n\nIt is not clear where Brian branched from, as the version of src/condor_utils/CondorError.cpp in master has the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyString\" title=\"My String\">MyString</a></span> implementation.  Indeed, there are no commits in the repository that correspond to the source blobs in the patch.\n\n<p></p><hr/>\n<em>2012-Aug-20 09:17:42 by bbockelm:</em> <br/>\n\nHi,\n\n<p>This is what I see on master:\n\n</p><p></p><div class=\"verbatim\">\n<pre>commit 0890132c9bb565c577108ec0fea03a7fb8210a47\nAuthor: Matthew Farrellee &lt;matt@redhat.com&gt;\nDate:   Tue Jun 5 08:05:21 2012 -0400\n\n    Removed MyString use in CondorError\n</pre></div>\n\n\n<p>What branch are you using?\n\n</p><p>Brian\n\n</p><p></p><hr/>\n<em>2012-Aug-20 09:27:48 by nwp:</em> <br/>\n\nQuite right.  I malformed my search query.  master indeed does have the relevant blobs.  (I neglected to add \"-r\" to git ls-tree).\n\n<p></p><hr/>\n<em>2012-Aug-20 10:40:55 by nwp:</em> <br/>\n\n<strong>CODE REVIEW</strong> Patch looks fine.  Pushed into master at ea91b03.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/625/condor_gt3201.patch\">condor_gt3201.patch</a>\n61878 bytes added by bbockelm on 2012-Aug-18 19:46:58 UTC.\n<br/>\nPatch to clean up the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CondorError\" title=\"Condor Error\">CondorError</a></span> object's handling of the creation of error messages.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-20 10:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/984fa4776f949e40ba0b8042d377bfe4d4d824d2\">[33114]</a></span>: Cleanup static char array. Fix garbage characters in the secman errstack. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3201\" onclick=\"get_ticket_and_populate_wrapper('3201'); return false;\" title=\"Garbage characters from CondorError / SecMan\">#3201</a></span> Committer: Nathan W. Panike  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2012-Aug-20 10:12</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ea91b031f1b975c88a07c2d31706080d9009d517\">[33115]</a></span>: Remove spurious newline from secman error message. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3201\" onclick=\"get_ticket_and_populate_wrapper('3201'); return false;\" title=\"Garbage characters from CondorError / SecMan\">#3201</a></span> Committer: Nathan W. Panike  (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2014-Aug-07 12:07", "status": "resolved", "created": "2012-Aug-18 13:55", "fixed_version": "2012-Aug-18 13:55", "broken_version": "v070900", "priority": "4", "subsystem": "Daemons", "assigned_to": "zmiller", "derived_from": "", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "bbockelm@cse.unl.edu", "due_date": ""}