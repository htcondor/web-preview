{"id": 1417, "title": "Ticket #1417: Create PASS/FAIL idiom in unit test suite", "description": "<blockquote>\nIn many places in the unit test suite, we see this:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">    e.emit_result_success(__LINE__);\n    return true;\n</pre></div>\n\n\n<p>and\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">    e.emit_result_failure(__LINE__);\n    return false;\n</pre></div>\n\n\n<p>A problem (which has happened enough annoying times) is that people accidentally\nstate a result success, but then return failure, or the other way around. This needs to be made less error prone.\n\n</p><p>I propose in emit.h, adding this code:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">#define FAIL \\\n  e.emit_result_failure(__LINE__); \\\n  return false\n\n#define PASS \\\n  e.emit_result_success(__LINE__); \\\n  return true\n</pre></div>\n\n\n<p>So that the initial code can just be replaced with:\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">    PASS;\n</pre></div>\n\n\n<p>and\n\n</p><p></p><div class=\"code\">\n<pre class=\"code\">    FAIL;\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-09 13:14</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/50d3ba4c3205458a6a2370d3cdeeed2f2a3bcb1e\">[18420]</a></span>: Fixed erroneous use of FAIL with an if statement. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1417\" onclick=\"get_ticket_and_populate_wrapper('1417'); return false;\" title=\"Create PASS/FAIL idiom in unit test suite\">#1417</a></span>  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-09 13:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/35834c9bbbd94699eb6bfe0c109d2ec0cf9a2bbe\">[18419]</a></span>: Oops. Fixed return value for PASS/FAIL idioms. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1417\" onclick=\"get_ticket_and_populate_wrapper('1417'); return false;\" title=\"Create PASS/FAIL idiom in unit test suite\">#1417</a></span>  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-09 12:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1166321f458757b0f9415bf9dc405c5ad8e2d268\">[18418]</a></span>: About to fix the problem, needed to revert the revert. Revert \"Revert \"Created a PASS/FAIL idiom in the unit test suite and updated all of the unit tests to use it. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1417\" onclick=\"get_ticket_and_populate_wrapper('1417'); return false;\" title=\"Create PASS/FAIL idiom in unit test suite\">#1417</a></span>\"\" This reverts commit 889e376ca407bea3df8b3b4cc67d01e6e9ae16d3.  (By Josh Slauson )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-09 08:47</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/889e376ca407bea3df8b3b4cc67d01e6e9ae16d3\">[18413]</a></span>: Revert \"Created a PASS/FAIL idiom in the unit test suite and updated all of the unit tests to use it. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1417\" onclick=\"get_ticket_and_populate_wrapper('1417'); return false;\" title=\"Create PASS/FAIL idiom in unit test suite\">#1417</a></span>\" This reverts commit 121145f88f58b3dded0de5fb6ac3ed520196bb97.  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Jun-08 14:08</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/121145f88f58b3dded0de5fb6ac3ed520196bb97\">[18410]</a></span>: Created a PASS/FAIL idiom in the unit test suite and updated all of the unit tests to use it. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1417\" onclick=\"get_ticket_and_populate_wrapper('1417'); return false;\" title=\"Create PASS/FAIL idiom in unit test suite\">#1417</a></span>  (By Josh Slauson )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Jun-08 14:10", "status": "resolved", "created": "2010-May-25 10:42", "fixed_version": "2010-May-25 10:42", "broken_version": "v070000", "priority": "4", "subsystem": "Tests", "assigned_to": "slauson", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "psilord@cs.wisc.edu, slauson@cs.wisc.edu", "due_date": ""}