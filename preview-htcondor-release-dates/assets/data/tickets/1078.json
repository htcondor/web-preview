{"id": 1078, "title": "Ticket #1078: Be able to have NOOP jobs in a DAG that are not actually submitted", "description": "<blockquote>\n(See condor-gnats 951.)\n\n<p>LIGO wants DAGMan to avoid actually submitting NOOP jobs.  Pete and I have discussed this, and we'd like to designate jobs as NOOP jobs at the DAG level (as opposed to looking for noop_job in the submit file (or maybe in addition to that?).  We haven't figured out the syntax yet, but the idea is that you'd mark a job in the DAG as a noop job, and it wouldn't really get submitted.\n\n</p><p>We could probably implement this by just writing an appropriate submitted and terminated event pair to the right log file, instead of calling condor_submit.  If we do this, the existing DAGMan log reading code should correctly mark the node job as done.  (PRE and POST scripts, if they exist, would get run as normal.)\n\n</p><p>Once this is implemented, it should allow us to have a nightly test of a truly <strong>large</strong> DAG (with all noop jobs).</p></blockquote>", "remarks": "<blockquote>\n<em>2009-Dec-22 15:45:35 by wenger:</em> <br/>\n\nAh, I just realized something about this: when we write the \"fake\" submit and terminated events, we have to have a Condor ID that's not going to conflict with other jobs in the DAG.  I wonder if negative values for the cluster ID will work?  At any rate, we should have a function that does the fake submit and keeps track of the fake cluster IDs.\n\n<p></p><hr/>\n<em>2009-Dec-22 16:06:09 by wenger:</em> <br/>\n\nOh, yeah -- we have to worry about initialdir in the submit file, too...\n\n<p></p><hr/>\n<em>2010-Jan-15 13:44:26 by wenger:</em> <br/>\n\nPete just suggested using 0 for the cluster ID of the noop jobs, rather than the DAGMan's cluter ID.  I think that's a good idea.\n\n<p></p><hr/>\n<em>2010-Jan-29 09:38:48 by wenger:</em> <br/>\n\nThe code for this is actually committed now, and the test passed last night.  I'm leaving the ticket open for now, though, because the documentation isn't finished yet.\n\n<p></p><hr/>\n<em>2010-Feb-05 19:16:48 by wenger:</em> <br/>\n\nJust finished documenting this, so I'm going to resolve the ticket.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Feb-05 18:59</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9ed13db25e5136b7332d7bc1b8b926d5806dd69a\">[25238]</a></span>: Documented the new DAGMan NOOP job feature; also clarified the description of DONE; added a note that DIR, NOOP, and DONE must appear in that order; and noted that -usedagdir is now automatically disregarded when running a rescue DAG. (See gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=1078\" onclick=\"get_ticket_and_populate_wrapper('1078'); return false;\" title=\"Be able to have NOOP jobs in a DAG that are not actually submitted\">#1078</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=533\" onclick=\"get_ticket_and_populate_wrapper('533'); return false;\" title=\"DAGMan should ignore -usedagdir when running a rescue DAG\">#533</a></span>.)  (By Kent Wenger )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Feb-05 19:17", "status": "defer", "created": "2009-Dec-18 14:04", "fixed_version": "2009-Dec-18 14:04", "broken_version": "v070401", "priority": "5", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "a18696", "customer_group": "ligo", "visibility": "public", "notify": "wenger@cs.wisc.edu, psilord@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}