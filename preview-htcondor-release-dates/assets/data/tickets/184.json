{"id": 184, "title": "Ticket #184: Simplify HTML diff output", "description": "<blockquote>\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=76\" onclick=\"get_ticket_and_populate_wrapper('76'); return false;\" title=\"Color, side-by-side diff\">#76</a></span> generates some deeply bloated output.  Take, for example <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fc7d5be8d076a845a488939bc5ea66541ac6e0fa\">[13715]</a></span>.  It generates 1,344,629 bytes of output.  This can be trimmed.  In comparison, a dump of the text (\"links -dump\") is a mere 321,468.\n\n<p></p><ol>\n<li>There are lots of places of \"&lt;span class=\"diffchanged2\"&gt;t&lt;/span&gt;&lt;span class=\"diffchanged2\"&gt;b&lt;/span&gt;\".  The should be merged.  This change alone will drop the size to 1,154,943, maybe more since my quick test missed many cases.  Probable change: edit linediff after the \"for coord in l\" loop, but before the \"r1,r2 =\" (around line 141).  Do a search for the string DIFFOFF+DIFFON and replace with nothing.  In addition to making the output shorter, we can better style the documents for people who want really aggressive marks for diffs.\n\n<p></p></li><li>If you have two or more tabs in a row, you'll get something like, \"&lt;span class=\"diffponct\"&gt;&amp;raquo;&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#8203;&lt;span class=\"diffponct\"&gt;&amp;raquo;&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#8203;\"  If you have two or more spaces in a row, you'll get \"&lt;span class=\"diffponct\"&gt;&amp;middot;&lt;/span&gt;&amp;#8203;&lt;span class=\"diffponct\"&gt;&amp;middot;&lt;/span&gt;&amp;#8203;\"  Step 1: Have the diffponct span wrap the entire thing, including the &amp;nbsp;s and &amp;8203;. Step 2: If you find a two adjacent diffponct blocks, merge them.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2010-Jan-21 11:02", "status": "new", "created": "2009-Feb-04 11:34", "fixed_version": "2009-Feb-04 11:34", "broken_version": "", "priority": "4", "subsystem": "", "assigned_to": "PitS", "derived_from": "#3", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}