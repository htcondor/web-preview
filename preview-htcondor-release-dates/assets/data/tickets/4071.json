{"id": 4071, "title": "Ticket #4071: Provide python bindings for event log reader", "description": "<blockquote>\nCMS has a web server which needs to parse DAGMan's nodes.log but, due to security reasons, isn't allowed to fork/exec \"condor_q -userlog\".\n\n<p><strong>However</strong>, we do have access to the htcondor python module.  I propose adding a new htcondor module method, readEvents, which takes in a file pointer and returns a <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAd\" title=\"Class Ad\">ClassAd</a></span> iterator.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Nov-15 10:32:07 by wenger:</em> <br/>\n\nJust a note to summarize some emails that have gone back and forth -- we really <strong>don't</strong> want to encourage people to parse the nodes.log file.  I'm asking Brian if the node status file or jobstate.log file will work for him...\n\n<p></p><hr/>\n<em>2013-Nov-18 10:53:27 by bbockelm:</em> <br/>\n\nHi,\n\n<p>We figured out a way to use the job log + node state file.\n\n</p><p>So, this is still needed.\n\n</p><p>Brian</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Dec-17 17:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5f6f51ea6053560ce2d84db0a64a0def6b8d3eb0\">[39032]</a></span>: minor edit of read_events() doc and add 8.1.3 version history item. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-20 19:11</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8e835000a1848a9d682c4d0a3e1d7ceea98357bb\">[38786]</a></span>: Fix compilation issues on Fedora and Mac OS X. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span>. This code now passes its own tests and a test run on NMI.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-20 19:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/fdda39d2057cbaf85d2247d29e14a48d3b137218\">[38785]</a></span>: Revert \"Revert \"Add python bindings for the event log reader API. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span>\"\" This reverts commit bfd8e519632dfdd9a98f306a6acd26215d5ddf2f, restoring the API added for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span>; a follow-up will fix NMI build failures.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-19 22:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bfd8e519632dfdd9a98f306a6acd26215d5ddf2f\">[38768]</a></span>: Revert \"Add python bindings for the event log reader API. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span>\" Seems to have caused bizarre Mac OS X build failures I can't replicate locally. Will debug and try again in a topic branch. This reverts commit 4943d41ae1d96cafc0dbdc17f4672329cb12213a.  (By Brian Bockelman )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Nov-19 21:25</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4943d41ae1d96cafc0dbdc17f4672329cb12213a\">[38767]</a></span>: Add python bindings for the event log reader API. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4071\" onclick=\"get_ticket_and_populate_wrapper('4071'); return false;\" title=\"Provide python bindings for event log reader\">#4071</a></span> This exposes a new function, read_events, in the htcondor python module. Given a file object, it returns an iterator of <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=ClassAds\" title=\"Class Ads\">ClassAds</a></span> corresponding to the HTCondor events in that log file.\u00a0[...]\n (By Brian Bockelman )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Dec-26 10:48", "status": "resolved", "created": "2013-Nov-14 17:09", "fixed_version": "2013-Nov-14 17:09", "broken_version": "", "priority": "3", "subsystem": "Tools", "assigned_to": "bbockelm", "derived_from": "", "creator": "tannenba", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "wenger@cs.wisc.edu", "due_date": ""}