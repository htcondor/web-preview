{"id": 6088, "title": "Ticket #6088: Support Docker 1.13", "description": "<blockquote>\nChanges in Docker 1.13 break several Docker Universe features:\n\n<p>Docker 1.13 more precisely parse the HTTP version string in API requests, and error out on the older 0.9 version.  This means that we no longer report memory usage and network usage correctly.\n\n</p><p>When Docker generates an error (such as on an invalid image name), the error output has changed, and condor didn't parse it correctly, resulting in loss of error information.</p></blockquote>", "remarks": "<blockquote>\n<em>2017-Feb-03 09:55:55 by tim:</em> <br/>\n\n<strong>CODE REVIEW:</strong> Looks good.\n\n<p></p><hr/>\n<em>2017-Feb-16 11:30:22 by tannenba:</em> <br/>\n\nThe version history entry (once it is written) needs to say what this change fixes from the point of view of the user, instead of just saying what a git commit message would say.  Would be nice if the ticket explained the problem from the user point of view as well :).  I.e. something like\n\n<p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nFixes how HTCondor interacts with new versions of Docker, enabling HTCondor to correctly report CPU and Network utilization for Docker universe jobs when Docker 1.13.1 and above is being used.\n</td></tr></tbody></table></div>\n\n\n<p>(assuming the above is true, which I <em>think</em> is correct based on condor-users feedback)</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-28 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/20bc986a020211ed5828d50702d8c43797f4f753\">[50231]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6088\" onclick=\"get_ticket_and_populate_wrapper('6088'); return false;\" title=\"Support Docker 1.13\">#6088</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-22 16:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f45c4e0f8cc07f810b23a31d550cdcf64756f17f\">[50189]</a></span>: More robustly parse docker error messages to work better with version 1.13 <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6088\" onclick=\"get_ticket_and_populate_wrapper('6088'); return false;\" title=\"Support Docker 1.13\">#6088</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Jan-13 10:19</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/5248daebefc362263346fcf8d6d4b6b8f8ebdb06\">[49988]</a></span>: Change HTTP protocol to 1.0 for Docker API <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6088\" onclick=\"get_ticket_and_populate_wrapper('6088'); return false;\" title=\"Support Docker 1.13\">#6088</a></span> (By Greg Thain )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2017-Feb-28 16:44", "status": "resolved", "created": "2017-Jan-13 10:13", "fixed_version": "2017-Jan-13 10:13", "broken_version": "v080600", "priority": "3", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}