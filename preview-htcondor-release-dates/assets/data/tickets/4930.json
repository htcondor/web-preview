{"id": 4930, "title": "Ticket #4930: Chirpio broken on windows", "description": "<blockquote>\nI rewrote the lib_chirpio_van.run so that it could be run on windows. On windows the test times our because the job never completes. Once I got a debug copy of the program lib_chirpio.exe which does a lot of file io with chirp tj and I found where the code was stuck. In the following function the fgets hangs\nwaiting on the stream which gives neither io or an error.\n\n<p></p><div class=\"code\">\n<pre class=\"code\">DLLEXPORT int\nchirp_client_open( struct chirp_client *c, const char *path, const char *flags, int mode )\n{\n\tint result = -1;\n\n\tresult = simple_command(c,\"open %s %s %d\\n\",path,flags,mode);\n\tif(result &gt;= 0) {\n\t\tstruct chirp_stat buf;\n\t\tchar line[CHIRP_LINE_MAX];\n\t\tif(fgets(line,CHIRP_LINE_MAX,c-&gt;rstream) == NULL) {\n\t\t\tchirp_fatal_request(\"fgets\");\n\t\t}\n\t\tif(get_stat(line, &amp;buf) != 0) {\n\t\t\tchirp_fatal_request(\"get_stat\");\n\t\t}\n\t}\n\n\treturn result;\n}\n\n\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2015-Mar-07 15:48", "status": "new", "created": "2015-Mar-06 12:26", "fixed_version": "2015-Mar-06 12:26", "broken_version": "v080304", "priority": "4", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "", "creator": "bt", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "bt@cs.wisc.edu", "due_date": ""}