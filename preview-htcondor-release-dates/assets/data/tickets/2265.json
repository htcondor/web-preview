{"id": 2265, "title": "Ticket #2265: Machine ads/condor_startd should advertise no more Memory than ulimit", "description": "<blockquote>\nCondor may be running subject to memory limits set via ulimit/setrlimit.  In particular the maximum virtual memory size (RLIMIT_AS) and the maximum data segment size (RLIMIT_DATA).  (Also maybe the maximum resident set size. RLIMIT_RSS))  Condor should detect this (getrlimit), and if any such limit is smaller than the calculated Memory total, set Memory to the smallest relevant limit.\n\n<p>Reasoning: We are encountering a site that is advertising memory of 4,096, but apparently hitting a lower limit of about 1,536.  There is no point in advertising RAM we can't actually use.\n\n</p><p>Worth considering: While individual processes may be limited 1,536 MB, what if my job needs 4,096 MB spread evenly across 4 or more processes?  Then I could run on such a machine.  However, such a case seems likely rare and not worth the complexity of coping with it.\n\n</p><p>Worth being aware of: <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=2266\" onclick=\"get_ticket_and_populate_wrapper('2266'); return false;\" title=\"Condor should optionally enforce rlimits on RAM, file size\">#2266</a></span>: Condor should optionally enforce rlimits on RAM, file size</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2011-Jun-23 16:34", "status": "new", "created": "2011-Jun-23 16:21", "fixed_version": "2011-Jun-23 16:21", "broken_version": "v060000", "priority": "3", "subsystem": "Daemons", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}