{"id": 2417, "title": "Ticket #2417: collector dies when reading offline ads lacking MyType and TargetType", "description": "<blockquote>\nWhen ads missing <code>TargetType</code> and <code>MyType</code> are written to the offline log, an illegal entry is made in the log that causes the collector to die when it starts up and tries to read the log.\n\n<p>The bad entry looks like this:\n\n</p><p></p><pre>   101 &lt;slot1@exec-1.batlab.org,128.104.100.28&gt;\n</pre>\n\n<p>An ad without this problem looks like this:\n\n</p><p></p><pre>   101 &lt;slot1@exec-1.batlab.org,128.104.100.28&gt; Machine Job</pre>\n</blockquote>", "remarks": "<blockquote>\n<em>2011-Aug-24 16:27:29 by danb:</em> <br/>\n\nThe collector now inserts placeholders in the offline log for empty <code>MyType</code> and <code>TargetType</code>, so ads lacking these attributes are no longer unreadable when it reads them back in from the offline log.\n\n<p>In keeping with existing practice, we do not attempt to distinguish between the case where <code>MyType</code> and/or <code>TargetType</code> are undefined vs. an empty string.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-05 15:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/674f2b6e6f1c52c6229c6cac77c7e9990e3e1230\">[27646]</a></span>: Edit of machine attribute Offline, and addition of index entries such that a person could figure out what \"offline\" means to Condor. Prompted by editing of version history for 2417, but committed in V7_6-branch, since the attribute hasn't changed. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2417\" onclick=\"get_ticket_and_populate_wrapper('2417'); return false;\" title=\"collector dies when reading offline ads lacking MyType and TargetType\">#2417</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Aug-24 16:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e87e7ff017e148a138a4b6e585508b9fd797aad2\">[26961]</a></span>: Documented fix for offline ads lacking <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> and/or <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TargetType\" title=\"Target Type\">TargetType</a></span>. ===GT=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2417\" onclick=\"get_ticket_and_populate_wrapper('2417'); return false;\" title=\"collector dies when reading offline ads lacking MyType and TargetType\">#2417</a></span> ===VersionHistory=== All Complete  (By Dan Bradley )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Aug-24 16:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/df3ca203455e0dc8b5c23662bbfe616af6620578\">[26960]</a></span>: Fixed problem with offline ads that contain no <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MyType\" title=\"My Type\">MyType</a></span> or <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=TargetType\" title=\"Target Type\">TargetType</a></span>. ===GT:Fixed=== <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2417\" onclick=\"get_ticket_and_populate_wrapper('2417'); return false;\" title=\"collector dies when reading offline ads lacking MyType and TargetType\">#2417</a></span>  (By Dan Bradley )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Sep-07 12:04", "status": "resolved", "created": "2011-Aug-24 15:38", "fixed_version": "2011-Aug-24 15:38", "broken_version": "v070600", "priority": "2", "subsystem": "", "assigned_to": "danb", "derived_from": "", "creator": "danb", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "jfrey@cs.wisc.edu,tlmiller@cs.wisc.edu", "due_date": ""}