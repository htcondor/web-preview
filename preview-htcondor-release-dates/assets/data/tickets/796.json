{"id": 796, "title": "Ticket #796: Potential Collector memory leak in AttrList::CopyAttribute", "description": "<blockquote>\n<div class=\"code\">\n<pre class=\"code\">==8087== 3,915 bytes in 522 blocks are definitely lost in loss record 71 of 87\n==8087==    at 0x4A05CB9: operator new[](unsigned long) (vg_replace_malloc.c:199\n)\n==8087==    by 0x56CC02: strnewp(char const*) (strnewp.cpp:27)\n==8087==    by 0x5D66DB: AttrList::CopyAttribute(char const*, char const*, AttrL\nist*) (attrlist.cpp:2861)\n==8087==    by 0x5D6860: AttrList::CopyAttribute(char const*, AttrList*) (attrli\nst.cpp:2844)\n==8087==    by 0x524352: CollectorEngine::collect(int, ClassAd*, sockaddr_in*, i\nnt&amp;, Sock*) (collector_engine.cpp:641)\n==8087==    by 0x525528: CollectorEngine::collect(int, Sock*, sockaddr_in*, int&amp;\n) (collector_engine.cpp:457)\n==8087==    by 0x507471: CollectorDaemon::receive_update(Service*, int, Stream*)\n (collector.cpp:694)\n==8087==    by 0x527238: DaemonCore::CallCommandHandler(int, Stream*, bool) (dae\nmon_core.cpp:3531)\n==8087==    by 0x53B318: DaemonCore::HandleReq(Stream*, Stream*) (daemon_core.cp\np:4873)\n==8087==    by 0x53B6E1: DaemonCore::HandleReq(int, Stream*) (daemon_core.cpp:37\n53)\n==8087==    by 0x53BCDE: DaemonCore::CallSocketHandler_worker(int, bool, Stream*\n) (daemon_core.cpp:3449)\n==8087==    by 0x53BE8A: DaemonCore::CallSocketHandler_worker_demarshall(void*)\n(daemon_core.cpp:3403)\n==8087==    by 0x5BA61A: CondorThreads::pool_add(void (*)(void*), void*, int*, c\nhar const*) (condor_threads.cpp:1101)\n==8087==    by 0x52DFA1: DaemonCore::CallSocketHandler(int&amp;, bool) (daemon_core.\ncpp:3393)\n==8087==    by 0x52F897: DaemonCore::Driver() (daemon_core.cpp:3307)\n==8087==    by 0x5470B4: main (daemon_core_main.cpp:2245)\n==8087==\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\nSwitching to new classads has removed this problem</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "defect", "last_change": "2013-Jan-23 14:06", "status": "abandoned", "created": "2009-Sep-30 11:13", "fixed_version": "2009-Sep-30 11:13", "broken_version": "v070400", "priority": "5", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "#759", "creator": "gthain", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}