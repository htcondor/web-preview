{"id": 128, "title": "Ticket #128: ./batch_test.pl should clean up after itself", "description": "<blockquote>\nI had run a ./batch_test.pl and after it had finished with failures and successes, it left 79 personal Condors running on my machine. That is not a typo: 79 personal Condors. This, to say, is a egregious wound against sanity.</blockquote>", "remarks": "<blockquote>\nUpped the priority a little bit since this is more annoying the more it happens to me.\n\n<p></p><hr/>\n<em>2009-Jan-27 14:31:59 by psilord:</em> <br/>\n\nAnd it leaves lots of condor_config_val zombies around (I had 39 of them, here is an example of what one looks like on my linux box):\n\n<p></p><div class=\"verbatim\">\n<pre>psilord  30672  0.0  0.0      0     0 pts/16   Z    Jan26   0:00 [condor_config_v] &lt;defunct&gt;\n</pre></div>\n\n\n<p></p><hr/>\n<em>2009-Jan-29 16:15:36 by adesmet:</em> <br/>\n\nI've observed this too.  Many tests simply \"die\" to indicate failure, which makes sense, but leaks running condors.  However, we need to be better at cleaning them up.  Unnecessary condors waste processor and RAM.  And when you're running tests directly (say, while you're developing), nothing ever cleans them up, which is an annoyance.\n\n<p>The fix is, sadly, not clear.\n\n</p><p></p><hr/>\n<em>2009-Jan-29 16:16:53 by psilord:</em> <br/>\n\nCan't you just make batch_test.pl the head of its own process group, tell Condor not to change its process group, and then when you hit ctrl-c or it stops on it's own it can kill -TERM everything, wait 15 seconds, then do it with a -9?\n\n<p></p><hr/>\n<em>2009-Jan-29 16:19:11 by adesmet:</em> <br/>\n\nTelling Condor to not change it process group means our tests behave even more differently than normal. :-/</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2010-Jan-31 13:20", "status": "new", "created": "2009-Jan-27 10:05", "fixed_version": "2009-Jan-27 10:05", "broken_version": "", "priority": "3", "subsystem": "Tests", "assigned_to": "bt", "derived_from": "", "creator": "psilord", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}