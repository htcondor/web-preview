{"id": 6572, "title": "Ticket #6572: qedit has unexpected behavior with late materialization", "description": "<blockquote>\nwhen you use <code>condor_qedit &lt;clusterid&gt;</code> to edit a late materialization job, the edits will be applied only to jobs that have already materialized.\n\n<p>the way materialization works is to\n\n</p><p></p><ol>\n<li>use the submit digest to make a full job ad for <code>ProcId</code> &lt;N&gt;\n</li><li>compare each attribute of this job ad to the cluster ad, deleting attributes that match\n</li><li>submit the remaining attributes from the pruned job ad into the queue.\n</li></ol>\n\n<p>If <code>condor_qedit</code> is to have the desired effect when editing all of the jobs in a cluster, two changes have to happen\n\n</p><p></p><ol>\n<li>the cluster ad must be modified along with all of the currently materialized jobs\n</li><li>attributes in the cluster ad that were modified after submit time must be pruned from the job ad as part of step 2 above.\n</li></ol>\n\n<p>This new behavior will be accomplished by having <code>condor_qedit</code> send a special flag along when it calls <code>SetAttributeByConstrint</code> to indicate that the cluster ad's should be considered when evaluating the constraint.  <code>condor_qedit</code> will send this flag when it knows that the constraint will match all of the jobs in a cluster when it matches the cluster ad.  The schedd will then also modify a new attribute in the cluster ad : <code>EditedClusterAttrs</code> which will be a list of attributes in the cluster ad that have been modified since the cluster was originally submitted.\n\n</p><p><code>condor_qedit</code> will only send this new flag when talking to a schedd that is 8.7.7 or later and only when the <code>-constraint</code> option has not been used.</p></blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-01 14:10:52 by johnkn:</em> <br/>\n\nno version history since late materialization is still not a public feature.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-16 13:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2951832d160551f404c7e1a8f18cebbd41e60762\">[54307]</a></span>: fix for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6572\" onclick=\"get_ticket_and_populate_wrapper('6572'); return false;\" title=\"qedit has unexpected behavior with late materialization\">#6572</a></span>. qedit has unexpected behavior with late materialization ===VersionHistory:None===  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2018-Mar-01 14:10", "status": "resolved", "created": "2018-Feb-16 13:06", "fixed_version": "2018-Feb-16 13:06", "broken_version": "v080702", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}