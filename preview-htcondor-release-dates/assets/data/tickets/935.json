{"id": 935, "title": "Ticket #935: VOMS support breaks gratia due to semantic changes", "description": "<blockquote>\nenabling VOMS support (which is on by default) adds extra information to the X509UserProxySubject in the Job Ad.  this behavior should be reverted, and instead the VOMS data should be written into two separate attributes.  one should have the VOMS data by itself, and the other should have the DN and VOMS data serialized together.</blockquote>", "remarks": "<blockquote>\n<em>2009-Dec-07 07:48:38 by jfrey:</em> <br/>\n\nThe gridmanager will need to be aware of the new attribute(s) that contains the VOMS data.\n\n<p></p><hr/>\n<em>2009-Dec-10 21:38:50 by zmiller:</em> <br/>\n\nafter checkin <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aefad25f030a0778de24f95e665d4115b591ae32\">[16645]</a></span> the semantics of X509UserProxySubjectName have been restored to pre-7.4.0 behavior, and X509UserProxyFQAN hold the DN and VOMS attributes.  there is currently no attribute (or array) that holds VOMS attributes alone.\n\n<p></p><hr/>\n<em>2009-Dec-14 22:50:01 by zmiller:</em> <br/>\n\nafter checkin <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/927bc70cc1e4f973758cadecfbed905f7dafcf91\">[16661]</a></span>, the Job Ad field \"x509userproxysubject\" has been restored to normal semantics, and three other fields have been added for voms information:\n<ul>\n<li>x509UserProxyVOName\n</li><li>x509UserProxyFirstFQAN\n</li><li>x509UserProxyFQAN\n</li></ul>\n\n<p>this will only appear in the job ad if voms attributes are present.</p></blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1044\" onclick=\"get_ticket_and_populate_wrapper('1044'); return false;\" title=\"The gridmanager needs to be aware of X509UserProxyFQAN\">#1044</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nThe gridmanager needs to be aware of X509UserProxyFQAN</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-15 16:07</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e1e9f4a2e12ce4ca827fbed74967ae5dc0128716\">[16670]</a></span>: VOMS refactor pulled wrong credential name. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=935\" onclick=\"get_ticket_and_populate_wrapper('935'); return false;\" title=\"VOMS support breaks gratia due to semantic changes\">#935</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=936\" onclick=\"get_ticket_and_populate_wrapper('936'); return false;\" title=\"VOMS serialization is imprecise\">#936</a></span> <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1020\" onclick=\"get_ticket_and_populate_wrapper('1020'); return false;\" title=\"VOMS attributes are extracted from the wrong credential\">#1020</a></span> It started returning the subject of the proxy, rather than its identity.  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-14 21:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/927bc70cc1e4f973758cadecfbed905f7dafcf91\">[16661]</a></span>: VOMS refactor. addresses many problems, tickets <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=935\" onclick=\"get_ticket_and_populate_wrapper('935'); return false;\" title=\"VOMS support breaks gratia due to semantic changes\">#935</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=936\" onclick=\"get_ticket_and_populate_wrapper('936'); return false;\" title=\"VOMS serialization is imprecise\">#936</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1020\" onclick=\"get_ticket_and_populate_wrapper('1020'); return false;\" title=\"VOMS attributes are extracted from the wrong credential\">#1020</a></span>.  (By Zach Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Dec-10 21:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aefad25f030a0778de24f95e665d4115b591ae32\">[16645]</a></span>: fix semantics of X509UserProxySubjectName, and add X509UserProxyFQAN to hold VOMS attributes. (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=935\" onclick=\"get_ticket_and_populate_wrapper('935'); return false;\" title=\"VOMS support breaks gratia due to semantic changes\">#935</a></span>)  (By Zach Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2009-Dec-15 14:17", "status": "resolved", "created": "2009-Nov-11 17:19", "fixed_version": "2009-Nov-11 17:19", "broken_version": "v070400", "priority": "2", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#161", "creator": "zmiller", "rust": "s7854", "customer_group": "osg", "visibility": "public", "notify": "roy@cs.wisc.edu", "due_date": ""}