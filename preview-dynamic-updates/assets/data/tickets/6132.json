{"id": 6132, "title": "Ticket #6132: Whitespace significant in VMPARAM_vm_disk", "description": "<blockquote>\nThe default awk script that the vm_gahp calls to generate the XML description for libvirt is sensitive to whitespace surrounding the commas in VMPARAM_vm_disk. The result is invalid parameters (including the disk filenames) in the XML description, leading to libvirt being unable to start the VM.\n\n<p>Before 8.5.5, most users weren't affected by this, as condor_submit modified the vm_disk value to remove spaces around the commas. As part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4167\" onclick=\"get_ticket_and_populate_wrapper('4167'); return false;\" title=\"VM universe assumption shared filesystems breaks compressed FT plugin\">#4167</a></span>, condor_submit started leaving the vm_disk untouched.\n\n</p><p>Possible fixes:\n</p><ul>\n<li>Modify the default awk script (libvirt_simple_script.awk) to ignore these spaces.\n</li><li>Have condor_submit and/or condor_vm-gahp modify the VMPARAM_vm_disk attribute in the job ad to remove these spaces.\n</li><li>Stop using the default awk script.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-28 11:36</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f3075807f58ad58c35bdb694cef36e9f818f1c82\">[50225]</a></span>: Docs for whitespace in vm_disk bug fix. <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=6132\" onclick=\"get_ticket_and_populate_wrapper('6132'); return false;\" title=\"Whitespace significant in VMPARAM_vm_disk\">#6132</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Feb-09 15:06</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4680be218717a9640faf0cc9b9e324f6bca1f2db\">[50125]</a></span>: Tolerate spaces in VMPARAM_vm_disk in libvirt awk script. <span class=\"ticket\"><a class=\"review\" href=\"/wiki-archive/tickets/?ticket=6132\" onclick=\"get_ticket_and_populate_wrapper('6132'); return false;\" title=\"Whitespace significant in VMPARAM_vm_disk\">#6132</a></span> Condor_submit no longer removes spaces around the commas in the vm_disk attribute in the submit file. Update the awk script that the vm-gahp calls by default to tolerate them.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Feb-27 14:34", "status": "review", "created": "2017-Feb-07 14:44", "fixed_version": "2017-Feb-07 14:44", "broken_version": "v080505", "priority": "3", "subsystem": "VM", "assigned_to": "tannenba", "derived_from": "#4167", "creator": "jfrey", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}