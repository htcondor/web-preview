{"id": 507, "title": "Ticket #507: Lazily create .condor.sub files for nested DAGs", "description": "<blockquote>\nFor nested DAGs, create the .condor.sub file immediately before the relevant node is submitted, rather than having condor_submit_dag recurse down through all of the DAGs.  LIGO wants this, and I think it should fix the problem of some combinations of splices and subdags not working correctly.\n\n<p>This cannot be done until lazy log file evaluation (gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=328\" onclick=\"get_ticket_and_populate_wrapper('328'); return false;\" title=\"DAGMan lazily evaluates and opens node job log files\">#328</a></span>) is done.</p></blockquote>", "remarks": "<blockquote>\nWe should probably have a config knob and/or a command-line flag to turn this off and do it the old way (have condor_submit_dag recurse through nested DAGs).  Take the code from condor_submit_dag that currently handles correctly preserving some values from an existing .condor.sub file and move it into a new source file that can be compiled into both condor_submit_dag and condor_dagman.\n\n<p><em>2009-Nov-17 12:07:14 by wenger:</em> <br/>\n\nDowngrading priority as per discussion in staff meeting.\n\n</p><p></p><hr/>\n<em>2010-Feb-16 10:54:41 by wenger:</em> <br/>\n\nI'm thinking that it would be a good idea to have an option to have the sub-DAGs not generate mail on completion...\n\n<p></p><hr/>\n<em>2010-Mar-15 14:43:56 by wenger:</em> <br/>\n\nWe should make a nested-DAG-within-splice test -- I believe that will not work with the current \"eager\" generation of .condor.sub files, but it should work when lazily generating them.\n\n<p></p><hr/>\n<em>2010-Apr-08 13:42:23 by wenger:</em> <br/>\n\nThis is all working now -- finally got the builds fixed on Windows, tests are green.  So I'm going to resolve the ticket.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-12 16:21</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/101cbf0a682162679ab52c8615393ce38ebcba2d\">[25421]</a></span>: Updated the DAGMan section of the manual for lazy submit file generation (includes more info about eager and manual submit file generation, too). (gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=507\" onclick=\"get_ticket_and_populate_wrapper('507'); return false;\" title=\"Lazily create .condor.sub files for nested DAGs\">#507</a></span>)  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Apr-12 13:54</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/bbaf840dc148795f3fa1262b77cb825869ce831e\">[25419]</a></span>: Updated version history, man pages, and configuration for DAGMan lazy submit file generation (gittrac <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=507\" onclick=\"get_ticket_and_populate_wrapper('507'); return false;\" title=\"Lazily create .condor.sub files for nested DAGs\">#507</a></span>). (Still needs high-level explanation in the DAGMan section.)  (By Kent Wenger )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Mar-31 10:30</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b9e46bcc04c92b45ca0021a3f34d1217318147fb\">[17769]</a></span>: Fixed a windows build problem concerning a recent dagman change which added a new file to compile. <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=507\" onclick=\"get_ticket_and_populate_wrapper('507'); return false;\" title=\"Lazily create .condor.sub files for nested DAGs\">#507</a></span>  (By Peter Keller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Apr-08 13:42", "status": "defer", "created": "2009-May-22 15:30", "fixed_version": "2009-May-22 15:30", "broken_version": "v070301", "priority": "5", "subsystem": "Dag", "assigned_to": "wenger", "derived_from": "", "creator": "wenger", "rust": "a18919", "customer_group": "ligo", "visibility": "public", "notify": "wenger@cs.wisc.edu, psilord@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}