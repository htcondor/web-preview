<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="HTCondor Homepage">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-dynamic-updates/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-dynamic-updates/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-dynamic-updates/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-dynamic-updates/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-dynamic-updates/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/web-preview/preview-dynamic-updates/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-dynamic-updates/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Primary Meta Tags -->
    <meta name="title" content="HTCondor">
    <meta name="description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://htcondor.org/">
    <meta property="og:title" content="HTCondor">
    <meta property="og:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="og:image" content="https://htcondor.org/assets/images/HTC.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://htcondor.org/">
    <meta property="twitter:title" content="HTCondor">
    <meta property="twitter:description" content="HTCondor is a specialized workload management system for compute-intensive jobs. Built to be flexible, expressive, and compatible with Grid and Cloud computing environments HTCondor made to increase your Computational Throughput.">
    <meta property="twitter:image" content="https://htcondor.org/assets/images/HTC.png">

    <title>How To Allow Only One User</title>

    <script src="/web-preview/preview-dynamic-updates/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-dynamic-updates/assets/js/bootstrap.js" type="text/javascript"></script>
    

    

    <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-dynamic-updates/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

</head>
<body class="vh-100 d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>

<header id="header">
    <div class="mb-4 container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navBar navbar-expand-lg navbar-light w-100">
                    <a href="/web-preview/preview-dynamic-updates/index.html" class="d-none d-md-inline"><img height="75" alt="Condor High Throughput Computing" src="/web-preview/preview-dynamic-updates/assets/images/CondorTitle.png" style="border:0"></a>
                    <a href="/web-preview/preview-dynamic-updates/index.html" class="d-inline d-md-none"><img height="65" alt="Condor High Throughput Computing" src="/web-preview/preview-dynamic-updates/assets/images/HTCondor_red_blk.svg" style="border:0"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-dynamic-updates/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-dynamic-updates/new">News</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-dynamic-updates/downloads">Downloads</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link " href="/web-preview/preview-dynamic-updates/publications">Publications</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mailto:htcondor-admin@cs.wisc.edu">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


        </div>
    </div>
</header>
<main id="main-copy" tabindex="-1">
    <div class="container mb-4">
    <h1>How To Allow Only One User</h1>
<div id="content">
 Sometimes you may want to limit a set of machines to either
 <p>
 </p>
 <ol>
  <li>
   only run jobs from a specific user or set of users, or
   <p>
   </p>
  </li>
  <li>
   only allow ONE active user per execute node, so that on a execute node using partitionable slots, if UserA lands on machine Execute1 and uses say 2
out of 10 cpus, then UserA is also allowed to claim more slots on
that machine and UserB would not be allowed. Once UserA jobs have completed on Execute1, then if UserB landed on that machine, only userB would then be allowed to claim additional slots/resources on Execute1.
  </li>
 </ol>
 <p>
  We give recipes for each of the above scenarios below.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Only run jobs from a specific user or set of users
 </h3>
 <p>
  To specify that a given machine should only run certain users' jobs,
and always run the jobs regardless of other activity on the machine,
load average, etc.,
place the following entry in the
machine's HTCondor configuration file:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">START = ( (User == "userfoo@baz.edu") || \
          (User == "userbar@baz.edu") )
</pre>
 </div>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Only allow ONE active user per execute node
 </h3>
 <p>
  Imagine you only want to allow ONE active user per execute machine on machine configured to use partitionable slots.  This may be a security requirement at some sites.  So the idea is  if UserA lands on machine Execute1 and uses say 2
out of 10 cpus, then UserA is also allowed to claim more slots on
that machine and UserB would not be allowed. Once UserA jobs have completed on Execute1, then if UserB landed on that machine, only userB would then be allowed to claim additional slots/resources on Execute1.
 </p>
 <p>
  To accomplish this on HTCondor v8.4 or above, append the following into the condor_config file(s) of the machines where you only want one user per node:
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">START = ( $(START) ) &amp;&amp; \
        ifThenElse(PartitionableSlot=?=True &amp;&amp; UpdatesLost=!=UNDEFINED, \
                size(ChildRemoteUser)==0 || member(User,ChildRemoteUser), \
                RemoteUser=?=UNDEFINED || User=?=RemoteUser)
</pre>
 </div>
 <p>
  The expression above leverages the fact that
  <code>
   User
  </code>
  is an attribute in the job classad that identifies the submitting user.
Attribute
  <code>
   RemoteUser
  </code>
  is in a slot ad, and equals the user of whomever claimed the slot.
Attribute
  <code>
   ChildRemoteUser
  </code>
  is in the partitionable slot ad in the collector, and will be
a classad list containing the all
  <code>
   RemoteUser
  </code>
  values of all the dynamic slots created under that partitionable slot.
 </p>
 <p>
  The above configuration is a bit complicated.  We hope to make the idea of one user claiming
an entire machine more straightforward in a future release.
 </p>
</div>

</div>
</main>
<div id="footer" class="border-top mt-auto">
    <div class="container py-4">
        <div class="row">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
                <script type="text/javascript">
                    document.write("Updated &raquo; "+lastMod(document.lastModified))
                </script>
            </div>
        </div>
    </div>
</div>



</body>
</html>
