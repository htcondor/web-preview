{"id": 5313, "title": "Ticket #5313: ensure all error codes and corner cases are checked for CERN security", "description": "<blockquote>\nMost already should be covered in my first pass, but I need to go through with a fine-tooth comb and make sure every error code is checked, especially in cases where we are doing privileged operations.</blockquote>", "remarks": "<blockquote>\n<em>2015-Oct-22 16:38:52 by zmiller:</em> <br/>\n\nZach and Todd brainstorm some failure scenarios:\n\n<p></p><ul>\n<li>Condor-C and Job Router need to do the same thing as submit when sending ubertickets to CredD\n\n<p></p></li><li>Test what happens when <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=CredMon\" title=\"Cred Mon\">CredMon</a></span> crashes or is not running, and KRB5 CC can't be created.\n\n<p></p></li><li>ERROR vs WARNING if submit/credd can't acquire .cc file\n\n<p></p></li><li>Schedd restarts\n</li></ul>\n\n<p><em>2016-Mar-18 20:07:52 by zmiller:</em> <br/>\n\n\n</p><p>Between Zach and Iain's testing, we believe the following (non-exhaustive) corner cases are covered:\n\n</p><p></p><ul>\n<li>An I/O intensive job that runs for longer than the duration of an afs token. The idea is to test that the credential monitor is indeed atomically refreshing an afs token before expiration (guessing it already did this when it ran under LSF).\n\n<p></p></li><li>Testing that when the Kerberos ticket is refreshed, does the condor_starter successfully and atomically copy the refreshed ticket into the job's scratch directory.\n\n<p></p></li><li>Submit a job with\n      log = /afs/home/....\nin the JDL, and then confirm that the specified job event log file living on afs has both a submit and terminate event. This will confirm that both the schedd (which writes the submit event) and the shadow (which writes the terminate event) can access afs on the submit node.\n\n<p></p></li><li>Similar setup as <span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3\" onclick=\"get_ticket_and_populate_wrapper('3'); return false;\" title=\"Customize GitTrac\">#3</a></span>, but have the job run longer than the ticket lifetime. This will test that the afs token on the submit side got refreshed properly.</li></ul>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2016-Apr-26 20:56", "status": "resolved", "created": "2015-Oct-15 13:39", "fixed_version": "2015-Oct-15 13:39", "broken_version": "", "priority": "1", "subsystem": "Security", "assigned_to": "zmiller", "derived_from": "#5272", "creator": "zmiller", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "zmiller@cs.wisc.edu, tannenba@cs.wisc.edu", "due_date": "20151030"}