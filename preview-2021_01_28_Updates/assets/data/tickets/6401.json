{"id": 6401, "title": "Ticket #6401: MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe", "description": "<blockquote>\nWe added support a while back to allow the parameter MOUNT_UNDER_SCRATCH'ed to be an expression that evaluated to a string list.  We didn't update this in docker universe.</blockquote>", "remarks": "<blockquote>\n<em>2017-Oct-26 15:13:34 by tlmiller:</em> <br/>\n\n<strong>Code Review</strong>\n\n<p>The code is acceptable, but I'm worried that the way the implementations differ for evaluating MOUNT_UNDER_SCRATCH differ between docker and vanilla universe will cause people grief.  I'll create a subticket so we follow-up on this.\n\n</p><p></p><hr/>\n<em>2017-Oct-26 15:14:51 by tlmiller:</em> <br/>\n\n<strong>Doc Review</strong>\n\n<p>The version history items for both <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6401\" onclick=\"get_ticket_and_populate_wrapper('6401'); return false;\" title=\"MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe\">#6401</a></span> and <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6423\" onclick=\"get_ticket_and_populate_wrapper('6423'); return false;\" title=\"docker universe should set cpu share to 100 * cores, like vanilla uni\">#6423</a></span> should have periods, like all the other ones.\n\n</p><p></p><hr/>\n<em>2017-Oct-26 15:22:16 by tlmiller:</em> <br/>\n\nI informed TimT about this, who will patch up the release notes as whole before release.</blockquote>", "derived_tickets": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">\n<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=6466\" onclick=\"get_ticket_and_populate_wrapper('6466'); return false;\" title=\"MOUNT_UNDER_SCRATCH evaluated differently in vanilla and docker univ's\">#6466</a></span></td>\n<td align=\"center\" valign=\"center\" width=\"30\">\n<span class=\"icon ptr1\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\">\nMOUNT_UNDER_SCRATCH evaluated differently in vanilla and docker univ's</td></tr>\n</tbody></table>", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-25 18:39</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4ef301ef2e824a68583a84795bcd22a902f500e8\">[52660]</a></span>: Transplant version history for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6401\" onclick=\"get_ticket_and_populate_wrapper('6401'); return false;\" title=\"MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe\">#6401</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6414\" onclick=\"get_ticket_and_populate_wrapper('6414'); return false;\" title=\"cgroup limits not getting set on some OSes due to signed'ness of memsw\">#6414</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6423\" onclick=\"get_ticket_and_populate_wrapper('6423'); return false;\" title=\"docker universe should set cpu share to 100 * cores, like vanilla uni\">#6423</a></span>, <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6424\" onclick=\"get_ticket_and_populate_wrapper('6424'); return false;\" title=\"Make STARTD_RECOMPUTE_DISK_FREE default to false\">#6424</a></span> to V8_6_7-branch  (By Tim Theisen )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Oct-24 16:44</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/94bab150e36edd738ebb804231141f2487df6016\">[52644]</a></span>: Document <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6401\" onclick=\"get_ticket_and_populate_wrapper('6401'); return false;\" title=\"MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe\">#6401</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2017-Sep-11 15:22</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/58e1f0631f3a05bd3941dc2de318866a26626cb6\">[52305]</a></span>: Allow MOUNT_UNDER_SCRATCH to be an expression for Docker Universe jobs <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6401\" onclick=\"get_ticket_and_populate_wrapper('6401'); return false;\" title=\"MOUNT_UNDER_SCRATCH doesn't accept exprs in docker universe\">#6401</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2017-Oct-26 15:22", "status": "resolved", "created": "2017-Sep-11 15:19", "fixed_version": "2017-Sep-11 15:19", "broken_version": "v080600", "priority": "2", "subsystem": "DaemonsExecNode", "assigned_to": "gthain", "derived_from": "", "creator": "gthain", "rust": "", "customer_group": "cern", "visibility": "public", "notify": "", "due_date": ""}