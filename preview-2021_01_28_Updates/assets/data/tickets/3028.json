{"id": 3028, "title": "Ticket #3028: Condor-C will create non-executable executable in the spool directory", "description": "<blockquote>\nWhen Condor-C submits a job to a remote schedd, if the source executable is not marked as executable, the job will not be marked as executable in the remote spool.\n\n<p>The spool directory looks something like this:\n</p><div class=\"verbatim\">\n<pre>-bash-3.2$ ll /var/lib/condor-ce/spool/1626/0/cluster1626.proc0.subproc0/test.sh\n-rw-r--r-- 1 condor condor 46 Jun  2 15:28 /var/lib/condor-ce/spool/1626/0/cluster1626.proc0.subproc0/test.sh\n</pre></div>\n\n\n<p>This can cause strange job failures on the remote side.  In the case of the Condor-CE submitting to PBS, PBS will not do anything and report exit code 0 - no out or err though.\n\n</p><p>When Condor-C is doing the transfer, it should automatically at the executable bits to the appropriate file.</p></blockquote>", "remarks": "<blockquote>\n<em>2013-Jan-11 15:58:07 by dweitzel:</em> <br/>\n\nJust a quick question, this patch also fixes the blahp case?  Transferring files using the blahp?\n\n<p></p><hr/>\n<em>2013-Jan-11 16:48:25 by zmiller:</em> <br/>\n\n<strong>CODE REVIEW</strong> by zmiller:  looks good.  from a security point of view, i agree that we should make future changes to restrict all files transferred to only being useful to the owner (<span class=\"ticket\"><a class=\"new\" href=\"/wiki-archive/tickets/?ticket=3439\" onclick=\"get_ticket_and_populate_wrapper('3439'); return false;\" title=\"change the permissions of files in the input sandbox to be restrictive\">#3439</a></span>).  however, this checkin is consistent with the current starter behavior so i'm happy with that.\n\n<p></p><hr/>\n<em>2013-Jan-11 16:54:53 by jfrey:</em> <br/>\n\nThis patch will set the execute bits on the job executable when it's received by the schedd, starter, and ft_gahp. This includes both the Condor-CE and Bosco.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/671/xfer.patch\">xfer.patch</a>\n2180 bytes added by jfrey on 2013-Jan-11 21:55:58 UTC.\n<br/>\nPatch to have <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object set execute bits on the job's executable.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-11 17:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/066d168d034a69c40ff56a5b6810cf7805e8dc75\">[34624]</a></span>: Version history for execute permissions on job executable. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3028\" onclick=\"get_ticket_and_populate_wrapper('3028'); return false;\" title=\"Condor-C will create non-executable executable in the spool directory\">#3028</a></span>  (By Jaime Frey )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2013-Jan-11 17:02</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/7ee993d53aeca2f3cba059628f08843bdbbf4a26\">[34623]</a></span>: Set execute bits on the job executable when we transfer it. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3028\" onclick=\"get_ticket_and_populate_wrapper('3028'); return false;\" title=\"Condor-C will create non-executable executable in the spool directory\">#3028</a></span> In the <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=FileTransfer\" title=\"File Transfer\">FileTransfer</a></span> object, when we receive the job's executable, always set the execute permissions.  (By Jaime Frey )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2013-Jan-11 17:04", "status": "resolved", "created": "2012-Jun-02 15:47", "fixed_version": "2012-Jun-02 15:47", "broken_version": "v070800", "priority": "4", "subsystem": "Libs", "assigned_to": "jfrey", "derived_from": "#3275", "creator": "bbockelm", "rust": "", "customer_group": "osg", "visibility": "public", "notify": "dweitzel@cse.unl.edu", "due_date": ""}