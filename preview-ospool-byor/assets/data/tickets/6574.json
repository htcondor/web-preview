{"id": 6574, "title": "Ticket #6574: TestSubmit in condor.pm sometimes get truncated submit output", "description": "<blockquote>\nTests sometimes fail because the <code>TestSubmit</code> function in the <code>Condor.pm</code> module gets back a truncated stdout/stderr from a successful <code>condor_submit</code>. It then thinks that the submit failed because it can't parse the cluster id out of the result.\n\n<p>You end up with an error message in your test output that looks something like this.\n\n</p><p></p><pre>     error: couldn't find cluster id in condor_submit output:   at /slots/01/dir_131567/userdir/condor_tests/Condor.pm line 350. Why is cluster 0 in RunTest?????? Error: cmr_monitor_basic: CondorTest::RunTest(cmr-monitor-basic.cmd) failed\n</pre>\n\n<p>The problem appears to be that this line of code doesn't always work the way you would expect.\n</p><div class=\"snip\">\n<pre class=\"sniplabel\">Condor.pm line 324</pre>\n<pre class=\"snip\">   # submit the file\n    runCommand( \"$CONDOR_SUBMIT $debug_arg $cmd_file &gt; $cmd_file.out 2&gt;&amp;1\" )\n\t|| return 0;\n</pre></div>\n\n\n<p>This should be changed to use a more robust mechanism, preferably one with a timeout, and using the <code>-terse</code> output of condor_submit since that is designed to be parsable.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "todo", "last_change": "2018-Feb-26 13:32", "status": "new", "created": "2018-Feb-16 14:18", "fixed_version": "2018-Feb-16 14:18", "broken_version": "", "priority": "3", "subsystem": "", "assigned_to": "johnkn", "derived_from": "", "creator": "johnkn", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}