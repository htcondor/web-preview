{"id": 2512, "title": "Ticket #2512: condor_chirp assert()s starter and shadow", "description": "<blockquote>\nFrom the starter log:\n\n<p></p><pre>  09/29/11 23:04:27 IOProxy: rejecting connection from 128.104.103.9: invalid ip addr\n  09/29/11 23:04:27 ERROR \"Assertion ERROR on (sz &gt; 0)\" at line 87 in file /home/condor/execute/dir_20661/userdir/src/condor_io/condor_rw.cpp\n</pre>\n\n<p>From the shadow log:\n\n</p><p></p><pre>  09/29/11 17:04:27 (108103.0) (13534): ERROR \"Assertion ERROR on (result)\" at line 1308 in file /home/condor/execute/dir_9167/userdir/src/condor_shadow.V6.1/NTreceivers.cpp\n</pre>\n\n<p>My initial investigation indicates that the shadow assert()s because the shadow does, and I suspect the starter assert()s because of the (improperly) rejected connection.\n\n</p><p>This happens in the new BaTLab when I'm trying to use condor_chirp to send user output and error logs back to the submit node.  The fact that I'm running a personal condor to generate those logs shouldn't be relevant, since condor_chirp is being run as a sibling process.\n\n</p><p>My guess is that the condor_chirp client isn't being picky enough about which address it uses for its outbound connection.  (One machine on which things failed, the same as in the example (exec-9) has three network interfaces: lo (127.0.0.1 and ::1/128), eth1 (no address), and eth0 (128.104.103.9 and fe80::62eb:69ff:fe81:f1c3/64, a link-scope addr.)</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2011-Oct-07 18:00</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/e3b1a11e31ac409b45395bf194e4cff1d3105bdc\">[27701]</a></span>: fix bug in chirp introduced by ipv6 <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=2512\" onclick=\"get_ticket_and_populate_wrapper('2512'); return false;\" title=\"condor_chirp assert()s starter and shadow\">#2512</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2011-Nov-10 15:36", "status": "resolved", "created": "2011-Sep-30 09:47", "fixed_version": "2011-Sep-30 09:47", "broken_version": "v070700", "priority": "2", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "batlab", "visibility": "public", "notify": "tannenba@cs.wisc.edu", "due_date": ""}