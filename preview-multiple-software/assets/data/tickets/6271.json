{"id": 6271, "title": "Ticket #6271: /var/run/condor not recreated on EL7", "description": "<blockquote>\nOn EL7, <code>/var/run</code> is cleaned up on boot-time. This means <code>/var/run/condor</code> is deleted, which causes the master to not be able to create a FIFO in <code>/var/run/condor</code> and will start procds over and over.\n\n<p>The proper way to fix this is to create a <code>*.conf</code> file in <code>/etc/tmpfiles.d</code> which describes the directory. Then, it will be recreated automatically by <code>systemd-tempfiles</code>. The process is documented at <a class=\"external\" href=\"https://www.freedesktop.org/software/systemd/man/tmpfiles.d.html\">https://www.freedesktop.org/software/systemd/man/tmpfiles.d.html</a> and the file should look something like this:\n\n</p><p></p><pre>  #Type Path            Mode UID    GID    Age Argument\n  d     /var/run/condor 0755 condor condor -   -\n</pre>\n\n<p>To test creation manually, run\n\n</p><p></p><pre>  systemd-tmpfiles --create</pre>\n</blockquote>", "remarks": "<blockquote>\n<em>2017-May-19 13:37:09 by tim:</em> <br/>\n\nThe tmpfile mechanism has been in place since the first release of HTCondor for EL7. Is the file /usr/lib/tmpfiles.d/condor.conf missing in your installation?\n\n<p></p><hr/>\n<em>2017-May-19 13:48:01 by matyas:</em> <br/>\n\nLooks like <code>systemd-tmpfiles-setup</code> failed on startup, so apparently it's a problem with my VM. When I run <code>systemd-tmpfiles --create</code>, <code>/var/run/condor</code> gets created as expected.\n\n<p>False alarm.</p></blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "incident", "last_change": "2019-Oct-04 09:40", "status": "abandoned", "created": "2017-May-19 09:20", "fixed_version": "2017-May-19 09:20", "broken_version": "v080601", "priority": "3", "subsystem": "Packaging", "assigned_to": "", "derived_from": "", "creator": "matyas", "rust": "", "customer_group": "other", "visibility": "public", "notify": "matyas@cs.wisc.edu", "due_date": ""}