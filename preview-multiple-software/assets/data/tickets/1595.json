{"id": 1595, "title": "Ticket #1595: Insert kbdd startup to registry if not present", "description": "<blockquote>\nBecause some people do not actually run the MSI installer when updating Condor, the registry key may not be properly set to start kbdd on user login.  Thus the startd should check to see if the key exists when it is started and insert it if it is not present.  Ignoring the logging issue, this would have helped resolve the problem CSL had with its Windows machines.</blockquote>", "remarks": "<blockquote>\n<em>2010-Aug-20 14:00:46 by ziliang:</em> <br/>\n\nPatch added.  The startd checks the registry key, but if it fails to open the key for the write attempt, it does not bail.  That may be a bit too severe a response and it really is up to the admin to configure their pool correctly and whatnot.\n\n<p></p><hr/>\n<em>2010-Oct-08 11:15:59 by adesmet:</em> <br/>\n\nReopened.  A commit was made, but it causes Windows tests to fail in NMI and has since been reverted.  (The problem has to do with running Condor under Condor on Windows.)</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body><blockquote>\n<ul>\n<li><a href=\"../files/217/startd.diff\">startd.diff</a>\n1722 bytes added by ziliang on 2010-Aug-20 18:59:23 UTC.\n<br/>\nPatch for registry modification.<br/>\n</li><li><a href=\"../files/233/kbdd.diff\">kbdd.diff</a>\n2729 bytes added by ziliang on 2010-Oct-11 17:44:01 UTC.\n<br/>\nCode has been moved to kbdd and no longer using a Vista+ function that was causing the previous hangs.<br/>\n</li></ul>\n</blockquote></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Oct-13 16:31</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2150b9326f7137eee0af161c3f31b6fda634332f\">[19160]</a></span>: Fix missing closing of registry key in kbdd code. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1595\" onclick=\"get_ticket_and_populate_wrapper('1595'); return false;\" title=\"Insert kbdd startup to registry if not present\">#1595</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Oct-13 16:03</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/f7d443b7d9ff6102bbb8fd2dc288dbca9b7a8fb5\">[19157]</a></span>: Fix kbdd registry startup stuffing. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1595\" onclick=\"get_ticket_and_populate_wrapper('1595'); return false;\" title=\"Insert kbdd startup to registry if not present\">#1595</a></span>. Committer: Jaime Frey  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Oct-12 12:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/4abd947e60751c59947903bf1061a2f3467f0b61\">[19155]</a></span>: Merged <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/845bd55e4cd383dab654b4fe2a92294db701b072\">[19146]</a></span>, <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/348c02db012927960401c4bfb954540a6e4f52dd\">[19154]</a></span>, Merge 7.4 branch into master. Fixes kbdd registry stuffing. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1595\" onclick=\"get_ticket_and_populate_wrapper('1595'); return false;\" title=\"Insert kbdd startup to registry if not present\">#1595</a></span>.  (By Ziliang Guo )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2010-Oct-11 16:37</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/afaf1b847b83508813594a5319b4af6eaa2c1a7f\">[19150]</a></span>: Fix kbdd registry startup stuffing. Ticket <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=1595\" onclick=\"get_ticket_and_populate_wrapper('1595'); return false;\" title=\"Insert kbdd startup to registry if not present\">#1595</a></span>.  (By Ziliang Guo )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2010-Oct-15 12:44", "status": "resolved", "created": "2010-Aug-20 13:28", "fixed_version": "2010-Aug-20 13:28", "broken_version": "v070400", "priority": "4", "subsystem": "Win32", "assigned_to": "johnkn", "derived_from": "#714", "creator": "ziliang", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tannenba@cs.wisc.edu, tstclair@redhat.com", "due_date": "20100823"}