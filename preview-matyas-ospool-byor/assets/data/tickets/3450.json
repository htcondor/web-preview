{"id": 3450, "title": "Ticket #3450: problems with the RPM condor init script", "description": "<blockquote>\nFrom the fermi phone conference, they had the following concerns:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">Zach, I make four modifications to the init script--\n\nOne is that we are using the file known as condor.init, not the longer default condor.\n\nTwo--we modify the ulimit\n\nThree--we correct the lock file\nIn redhattish startup scripts the lock file should be /var/lock/subsys/condor\nThe default condor.init still puts it in /var/lock/subsys/condor_master\nWhat that means is that condor doesn't get shut down clean at system shutdown or reboot, and we get e-mail\nFrom every single worker node with a core dump.\nI checked the script that comes with 7.8.6, it still has this problem.\n\nFinally I add a \"service condor drain\" function to the condor init script, which allows the admin of the nodes to trigger\nA condor_off -peaceful.\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2013-Jan-17 17:11:12 by tannenba:</em> <br/>\n\nRe number three above (fixing the name of the lock file), I think I already fixed that issue in <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3368\" onclick=\"get_ticket_and_populate_wrapper('3368'); return false;\" title=\"Red Hat linuxes fail to stop the condor service on shutdown\">#3368</a></span>\n\n<p></p><hr/>\n<em>2013-Jan-23 17:14:16 by bbockelm:</em> <br/>\n\nulimit modification is something that should go into /etc/sysconfig/condor, correct?  Which limit is being modified (core dump limit is a special case on RHEL).\n\n<p></p><hr/>\n<em>2013-Jul-16 12:45:04 by edquist:</em> <br/>\n\nBrian L did the work on this in trunk, which I've merged into upcoming/condor-unified.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2013-Jul-16 13:54", "status": "review", "created": "2013-Jan-17 17:08", "fixed_version": "2013-Jan-17 17:08", "broken_version": "", "priority": "3", "subsystem": "Packaging", "assigned_to": "edquist", "derived_from": "#3638", "creator": "zmiller", "rust": "", "customer_group": "fermi", "visibility": "public", "notify": "zmiller@cs.wisc.edu tannenba@cs.wisc.edu tstclair@redhat.com cat@cs.wisc.edu tim@cs.wisc.edu", "due_date": ""}