{"id": 6559, "title": "Ticket #6559: resource usage summary in the user log needs better formatting", "description": "<blockquote>\nThe usage report in the userlog now has more complete values for usage (namely Cpus and Gpus), but these are floating point values, so some care needs to be taken to format them in a readable way - not too many fractional digits and with the decimal point aligned correctly with the other usage values.\n\n<p>To maximize backward compatibility, (and keeping in mind that the condor_wait needs to be able to READ BACK the values we print here), the strategy will be to print floating point values with a maximum of 2 decimal digits only when the value does not fit into an integer.  So we can end up with output like this\n\n</p><p>Also the \"Assigned\" column will appear only when there are assigned values\n\n</p><p></p><div class=\"verbatim\">\n<pre>        Partitionable Resources :    Usage  Request Allocated\n           Cpus                 :        1        1         1\n           Disk (KB)            :     6289     7500  60237190\n           Memory (MB)          :        1       10      4065\n...\n</pre></div>\n\nor this\n<div class=\"verbatim\">\n<pre>        Partitionable Resources :    Usage  Request Allocated\n           Cpus                 :     0.90        1         1\n           Disk (KB)            :  6289        7500  60237106\n           Memory (MB)          :     1          10      4065\n...\n</pre></div>\n\nor this\n<div class=\"verbatim\">\n<pre>        Partitionable Resources :    Usage  Request Allocated Assigned\n           Cpus                 :     1.90        2         2\n           Disk (KB)            :  6289        7500  60237106\n           Gpus                 :     0.88        1         1 \"CUDA0\"\n           Memory (MB)          :     1          10      4065\n...\n</pre></div>\n</blockquote>", "remarks": "<blockquote>\n<em>2018-Mar-01 14:43:32 by johnkn:</em> <br/>\n\nno version history, bad formatting never shipped.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2018-Feb-08 15:32</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/2796f130631679009659cb9348fc8f36199edbc0\">[54242]</a></span>: better formatting in userlog for floating point usage values. <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6559\" onclick=\"get_ticket_and_populate_wrapper('6559'); return false;\" title=\"resource usage summary in the user log needs better formatting\">#6559</a></span>, part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=6477\" onclick=\"get_ticket_and_populate_wrapper('6477'); return false;\" title=\"Advertise GPU utilization in the same way as CPU utilization\">#6477</a></span> this commit also makes the Assigned column optional and makes it round-trip correctly.  (By John (TJ) Knoeller )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2018-Mar-01 14:43", "status": "resolved", "created": "2018-Feb-07 16:06", "fixed_version": "2018-Feb-07 16:06", "broken_version": "v080700", "priority": "3", "subsystem": "DaemonsSubmitNode", "assigned_to": "johnkn", "derived_from": "#6477", "creator": "johnkn", "rust": "", "customer_group": "chtc", "visibility": "public", "notify": "", "due_date": ""}