<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/web-preview/preview-release-updates/assets/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/web-preview/preview-release-updates/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/web-preview/preview-release-updates/assets/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/web-preview/preview-release-updates/assets/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/web-preview/preview-release-updates/assets/images/favicons/safari-pinned-tab.svg" color="#d31145">
    <link rel="shortcut icon" href="/web-preview/preview-release-updates/assets/images/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/web-preview/preview-release-updates/assets/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <script src="/web-preview/preview-release-updates/assets/js/sitewide.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-release-updates/assets/js/header.js" type="text/javascript" defer></script>
    <script src="/web-preview/preview-release-updates/assets/js/bootstrap.js" type="text/javascript"></script>

    

    

        <meta name="robots" content="noindex">

    

    <link href="/web-preview/preview-release-updates/assets/css/style-v1.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-release-updates/assets/css/cvstrac.10.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-release-updates/assets/css/cvstrac.tj.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    
        <link href="/web-preview/preview-release-updates/assets/css/diff2html.css" media="screen, tv, projection" title="Default" rel="stylesheet">
    

    

</head>
<body class="d-flex flex-column">

<!-- For non-visual user agents: -->
<a id="skip-link" href="#main-copy">Skip to main content.</a>


<header id="header" class="">
    <div class="container-xxl">
        <nav id="mobile-header" class="py-3 d-flex d-lg-none navbar navBar navbar-expand-lg navbar-light w-100">
            <a href="/web-preview/preview-release-updates/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-release-updates/assets/images/HTCondor_red_blk_classic.png" style="border:0"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-navbar" aria-controls="mobile-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mobile-navbar">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="software-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
        <ul class="dropdown-menu" aria-labelledby="software-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/release-highlights/">Release Highlights</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/release-plan/">Release Schedule</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor-CE
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-ce/overview/">Overview</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-ce/download/">Download</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-ce/documentation/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-ce/release-highlights/">Release Highlights</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        General
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/new.html">News</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/security/">Security</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/manual/">Documentation</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/downloads/">Download</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="help-and-support-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
        <ul class="dropdown-menu" aria-labelledby="help-and-support-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Documentation
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor/documentation/">HTCondor</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-ce/documentation/">HTCondor-CE</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Support
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/uw-support/">HTCSS Contract Support</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/mail-lists/#user">Community Mailing List</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/htcondor-support/#external-support-options">External Support Organizations</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="community-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Email Lists
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/mail-lists/#user">Users</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/mail-lists/#world">World</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/mail-lists/#developer">Developers</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCondor Week
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/past_condor_weeks.html">Workshop Archives</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item" href="/web-preview/preview-release-updates/featured-users.html" >
        Featured Users
    </a>
    
</li>
            
        </ul>
    
</li>
                    
                        




<li class="nav-item dropdown">
    
        <a class="nav-link dropdown-toggle" href="#" id="about-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
        <ul class="dropdown-menu" aria-labelledby="about-toggle">
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        HTCSS
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/description.html">What is HTCSS?</a></li>
        
            <li><a class="dropdown-item" href="/web-preview/preview-release-updates/logos/">Logos</a></li>
        
    </ul>
    
</li>
            
                

<li class="dropdown">
    
    <a class="dropdown-item dropdown-toggle" href="#" id="-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        CHTC
    </a>
    <ul class="dropdown-menu" aria-labelledby="-toggle">
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></li>
        
            <li><a class="dropdown-item" href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></li>
        
    </ul>
    
</li>
            
        </ul>
    
</li>
                    
                    <li class="nav-item mt-2">
                        <div style="height:40px; width: 250px;">
                            

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="desktop-header" class="d-none d-lg-block">
            <nav class="navbar py-3 navBar navbar-expand-lg navbar-light w-100">
                <a href="/web-preview/preview-release-updates/index.html"><img height="50" alt="Condor High Throughput Computing" src="/web-preview/preview-release-updates/assets/images/HTCondor_red_blk_classic.png"></a>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-2 mt-auto">
                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="software-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Software
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="help-and-support-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Help & Support
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="community-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            Community
        </a>
    </li>




                        
                            



    <li class="nav-item">
        <a class="nav-link drawer-toggle dropdown-toggle" href="#" id="about-desktop-toggle" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
            About
        </a>
    </li>




                        
                    </ul>
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto mt-auto">
                        <li class="nav-item ms-2">
                            <div style="height:40px; width: 250px;">
                                

<script async src="https://cse.google.com/cse.js?cx=1056a9a876b1d1474"></script>
<div class="gcse-searchbox-only"></div>


                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div id="header-drawer" class=" d-none d-lg-block" hidden>
        <div class="container-xxl">
            <div id="software-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/release-highlights/">Release Highlights</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/release-plan/">Release Schedule</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor-CE</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/overview/">Overview</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/download/">Download</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/documentation/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/release-highlights/">Release Highlights</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>General</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/new.html">News</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/security/">Security</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/manual/">Documentation</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/downloads/">Download</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h3><a class="text-decoration-none" href="/web-preview/preview-release-updates/news/plan-to-replace-gct-in-htcss/">Plan to replace Grid Community Toolkit functionality in the HTCondor Software Suite</a></h3>
                            <div>
                                <span class="text-muted">July 14, 2022</span>
                            </div>
                            <hr/>
                            <a href="/web-preview/preview-release-updates/new.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-release-updates/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Software News
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div id="help-and-support-desktop-drawer" class="drawer row justify-content-center" hidden>

                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Documentation</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor/documentation/">HTCondor</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/documentation/">HTCondor-CE</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Support</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/uw-support/">HTCSS Contract Support</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/mail-lists/#user">Community Mailing List</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/htcondor-support/#external-support-options">External Support Organizations</a></td></tr>
                
            </table>
        </div>
    


            </div>
            <div id="community-desktop-drawer" class="drawer row justify-content-center" hidden>

                








                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>Email Lists</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/mail-lists/#user">Users</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/mail-lists/#world">World</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/mail-lists/#developer">Developers</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCondor Week</th></tr>
                
                    <tr><td><a href="https://agenda.hep.wisc.edu/event/1733/">Most Recent</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/past_condor_weeks.html">Workshop Archives</a></td></tr>
                
            </table>
        </div>
    

    


                <div class="d-none d-md-block col-lg-4 my-2">
                    <a href="/web-preview/preview-release-updates/featured-users.html"><b>Featured Users</b></a>
                    


                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-release-updates/featured-users/2022-07-12-Wilcots.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                The Future of Radio Astronomy Using High Throughput Computing
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July 12, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-release-updates/featured-users/2022-07-06-Fulvio.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using high throughput computing to investigate the role of neural oscillations in visual working memory
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-release-updates/featured-users/2022-07-06-Garcia.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Using HTC and HPC Applications to Track the Dispersal of Spruce Budworm Moths
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                    <div class="my-2">
                        

<a class="text-decoration-none d-block hover-border rounded h-100" href="/web-preview/preview-release-updates/featured-users/2022-07-06-Hiemstra.html">


    <div class="card border-0 ">
        <div class="p-2 d-flex flex-column">
            <h6 class="text-decoration-none mb-1">
                Testing GPU/ML Framework Compatibility
            </h6>
            <div>
                <span class="text-muted text-decoration-none">July  6, 2022</span>
            </div>
        </div>
    </div>


</a>

                    </div>
                    
                </div>
                <div class="d-none d-xl-block col-xl-4 my-2">
                    <div class="card h-100">
                        <img src="https://raw.githubusercontent.com/CHTC/Articles/main/images/Spectrometer.jpg" class="card-img-top" alt="Card Image">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-release-updates/featured-users/2022-04-25-Natzke.html">Learning and adapting with OSG: Investigating the strong nuclear force</a></h5>
                            <hr/>
                            <a href="/web-preview/preview-release-updates/featured-users.html">
                                <div class="row">
                                    <div class="col-auto d-flex">
                                        <img class="my-auto" height="30" src="/web-preview/preview-release-updates/assets/images/arrow-up-right-circle.svg" />
                                    </div>
                                    <div class="col">
                                        View All Featured Users
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="about-desktop-drawer" class="drawer row justify-content-center" hidden>



                
                
                

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>HTCSS</th></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/description.html">What is HTCSS?</a></td></tr>
                
                    <tr><td><a href="/web-preview/preview-release-updates/logos/">Logos</a></td></tr>
                
            </table>
        </div>
    

    
        <div class="col-auto mx-4 my-2 z-99">
            <table>
                <tr><th>CHTC</th></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/people">Staff &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/jobs">Jobs &#11023;</a></td></tr>
                
                    <tr><td><a href="https://chtc.cs.wisc.edu/research">Research & Publications &#11023;</a></td></tr>
                
            </table>
        </div>
    


                <div class="d-none d-lg-block col-lg-4">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5><a class="text-decoration-none" href="/web-preview/preview-release-updates/description.html">What is HTCSS?</a></h5>
                            <hr class="mb-2">
                            <div>
                                HTCondor Software Suite (HTCSS) provides an array of services for automating
                                and managing batch workloads and computing resources.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<main id="main-copy" tabindex="-1">
    <div class="bg-light mb-4">
    <hr class="m-0">
    <div class="container-xxl py-2">
        <span class="fs-3">How To Limit Cpu Usage</span>
    </div>
    <hr class="m-0">
</div>
<div class="container-xxl pb-4">
    <div id="content">
 <span class="section">
  <h2>
   How to limit CPU usage of jobs
  </h2>
 </span>
 <p>
  <em>
   Known to work with HTCondor v8.2 and above
  </em>
 </p>
 <p>
  When you submit a job in HTCondor, users can specify
  <code>
   request_cpus
  </code>
  in the job submit description to the expected maximum number of CPU cores required by all the processes in the job. HTCondor will then schedule the job to run on an appropriately sized slot for your job that has at least as many cores as specified. This document describes three different strategies to configure HTCondor to prevent jobs from using more  CPU cores than specified in the slot.  Each strategy has its own set of pros and cons that are highlighted below.
 </p>
 <p>
  The three strategies are:
 </p>
 <p>
 </p>
 <ol>
  <li>
   Use ASSIGN_CPU_AFFINITY
  </li>
  <li>
   Use cgroups
  </li>
  <li>
   Use startd policy expressions to monitor cores used, and place jobs on hold that use more cores than were requested/allocated.
  </li>
 </ol>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Option 1: ASSIGN_CPU_AFFINITY
 </h3>
 <p>
  To enable, just put the following line in your condor_config file(s) on all your execute nodes
 </p>
 <div class="code">
  <pre class="code">ASSIGN_CPU_AFFINITY = True
</pre>
 </div>
 and then issue a condor_reconfig command.  HTCondor will then configure the kernel to prevent it from utilizing more core than
your job than requested.  For instance, if your job is scheduled onto a one-core slot and starts up 50 threads, all 50 threads will timeshare upon one CPU core.
 <p>
  This requires that your execute node is running Linux and that you only have one condor_startd instance running per machine.  The condor_startd does not need to have root access.  One downside of this method is even if there is no contention for CPU cores on the server, the job cannot use more cores than specified in the Cpus attribute of the slot.  That is, on an eight core machine, with only a single, one-core slot running, and otherwise idle, the job running in the one slot could only consume one core.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Option 2: cgroups
 </h3>
 <p>
  This configuration requires a relatively recent version of Linux (RHEL 6.5 or above), only works when the HTCondor daemons have been started as root, and requires there only be one condor_startd instance running per machine.
 </p>
 <p>
  To use, configure cgroups as described in the manual in section "Cgroup-Based Process Tracking", in section 3.12:
  <a class="external" href="http://research.cs.wisc.edu/htcondor/manual/current/3_12Setting_Up.html">
   Cgroup-Based Process Tracking
  </a>
  . HTCondor will then configure the kernel to prevent it from utilizing more core than
your job than requested.  However, unlike
  <code>
   ASSIGN_CPU_AFFINITY
  </code>
  above, this limit only applies when there is contention for the CPU. That is, on an eight core machine, with only a single, one-core slot running, and otherwise idle, the job running in the one slot could consume all eight CPU cores concurrently with this limit in play, if it is the only thing running. If, however, all eight slots had running jobs, with each configured for one CPU core, the core usage would be assigned equally to each job, regardless of the number of processes in each job.
 </p>
 <p>
  <span class="subsection">
  </span>
 </p>
 <h3>
  Option 3: startd policy expressions
 </h3>
 <p>
  This configuration works on any operating system (Linux, Windows, MacOS), does not require root/administrator access, and continues to work even if there is more than one startd running per machine (and thus is applicable in a glide-in scenario).
Append the below into the condor_config file(s) on your execute machines to 1) advertise the number of CPU cores used by the job in the
slot ad as attribute
  <code>
   CpusUsage
  </code>
  , and to 2) place jobs on hold that use more cores than requested.
 </p>
 <p>
 </p>
 <div class="code">
  <pre class="code">#
# Publish the number of CPU cores being used by the job into
# to slot ad as attribute "CpusUsage".  This value will
# be the average number of cores used by the job over the
# past minute, sampling every 5 seconds, and rounded to two digits (X.XX).
#
CpusUsage = ifthenelse( \
   TotalLoadAvg &gt; 0.0 &amp;&amp; Activity!="Idle", \
   int(CondorLoadAvg / TotalLoadAvg * \
       ifthenelse(TotalLoadAvg &lt; $(DETECTED_CORES), TotalLoadAvg, $(DETECTED_CORES)) \
       * 100) / 100.0, \
    0)
STARTD_EXPRS = $(STARTD_EXPRS) CpusUsage
#
# If the number of CPU cores used by the job exceeds the
# number of cores requested by more than 0.8, put the
# job on hold with a helpful message in job attribute "HoldReason",
# and job attributes HoldReasonCode set to 21 and HoldReasonSubCode set to 1.
# Note that to place the job on hold, we first eliminate any
# retirement time and preempt the job.
#
CPU_EXCEEDED = (CpusUsage &gt; Cpus + 0.8)
PREEMPT = ($(PREEMPT:False)) || $(CPU_EXCEEDED)
MAXJOBRETIREMENTTIME = ifthenelse($(CPU_EXCEEDED),0,$(MAXJOBRETIREMENTTIME:0))
WANT_SUSPEND = ($(WANT_SUSPEND:False)) &amp;&amp; $(CPU_EXCEEDED) =!= TRUE
WANT_HOLD = ($(WANT_HOLD:False)) || $(CPU_EXCEEDED)
WANT_HOLD_REASON = ifThenElse($(CPU_EXCEEDED), \
     "cpu usage exceeded request_cpus",$(WANT_HOLD_REASON:UNDEFINED))
WANT_HOLD_SUBCODE = ifThenElse($(CPU_EXCEEDED),1,$(WANT_HOLD_SUBCODE:UNDEFINED))
</pre>
 </div>
</div>

</div>
</main>
<footer id="footer" class="bg-light pt-4 mt-auto">
    <div class="container-xxl">
        <div class="row justify-content-center">
            <div class="col-auto me-5 d-none d-lg-flex">
                <img class="my-auto" height="120" alt="Condor High Throughput Computing" src="/web-preview/preview-release-updates/assets/images/CondorAlpha.png" />
            </div>
            <div class="col-12 col-sm-10 col-lg-7">
                <div class="row justify-content-between my-2">
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Suite</th></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/htcondor/overview/">HTCondor</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/htcondor-ce/overview/">HTCondor-CE</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Software</th></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/manual/">Documentation</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/downloads/">Download</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/security//">Security</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/license.html">License</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Community</th></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/mail-lists/">Email Lists</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/past_condor_weeks.html">HTCondor Week</a></td></tr>
                        </table>
                    </div>
                    <div class="col-auto my-2">
                        <table>
                            <tr><th>Support</th></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/uw-support/">Internal Contract</a></td></tr>
                            <tr><td><a href="/web-preview/preview-release-updates/htcondor-support#external-support-options">External Organizations</a></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row my-4 justify-content-center">
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://ls.wisc.edu/">
                    

<div style="height:75px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-release-updates/assets/images/UW_Madison_Logo.webp">
        <img class="h-100" src="/web-preview/preview-release-updates/assets/images/UW_Madison_Logo.png" alt="UW-Madison Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="px-3 d-block m-auto" href="https://www.nsf.org">
                    

<div style="height:100px;">
    <picture>
        <source type="image/webp" srcset="/web-preview/preview-release-updates/assets/images/NSF_Logo.webp">
        <img class="h-100" src="/web-preview/preview-release-updates/assets/images/NSF_Logo.jpg" alt="NSF Logo">
    </picture>
</div>

                </a>
            </div>
            <div class="col-auto d-flex">
                <a class="d-block m-auto" href="https://morgridge.org/">
                    <img class="" height="40" src="/web-preview/preview-release-updates/assets/images/Morgridge_Logo.svg" alt="Morgridge Logo" />
                </a>
            </div>
        </div>
        <hr>
        <div class="row py-3">
            <div class="col text-center">
                For comments or questions about this website, please email
                <a href="mailto:htcondor-admin@cs.wisc.edu">htcondor-admin@cs.wisc.edu</a><br />
                This work is supported by <a href="https://www.nsf.gov/div/index.jsp?div=OAC">NSF</a> under Cooperative Agreement <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=2030508">OAC-2030508</a> as part of the <a href="https://path-cc.io/">PATh Project</a>. <br />
            </div>
        </div>
        <div class="row justify-content-center pb-4">
            <div class="col-lg-8 text-center">
                <span class="text-center">
                    If you are looking for Phoenix Software International's software development and library management system for z/VSE or z/OS, you can find more information on their <a href="http://www.phoenixsoftware.com">website</a>.
                </span>
            </div>
        </div>
    </div>
</footer>



</body>
</html>
