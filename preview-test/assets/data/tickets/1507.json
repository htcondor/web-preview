{"id": 1507, "title": "Ticket #1507: Problem with gidd_alloc from procd", "description": "<blockquote>\nBurt Holzman (OSG &amp; Fermilab) recently reported a problem. The problem is with the procd that the Condor Project ships to the VDT. This is a separate procd than ships with Condor. Greg Quinn used to maintain it, and I believe it's on a separate branch, but I'm not sure where.\n\n<p>You can see the complete description of the problem at:\n<a class=\"external\" href=\"http://crt.cs.wisc.edu/Ticket/Display.html?id=7280\">http://crt.cs.wisc.edu/Ticket/Display.html?id=7280</a>\n\n</p><p>(Used guest/guest to log in).\n\n</p><p>Here are the interesting parts, in Burt's words. Note that gidd_alloc comes from this special distribution of the procd.\n\n</p><p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nThere is an interaction between the GID tracking option of the Condor\nbatch system on the Tier 1 and the glexec tracking GIDs.  Essentially,\nthe gidd_alloc process reparents itself to init, and sets its GID to one\nof the glexec tracking GIDs (discarding the Condor tracking GID).  If\nthe job exits normally, the glexec monitor terminates the gidd_alloc\nprocess; otherwise the job is terminated via condor_rm or condor_hold,\nCondor doesn't realize that gidd_alloc is part of the process tree and\nit lingers forever.\n\nThis could be obviated if gidd_alloc added the glexec tracking GID as\nanother supplemental GID (although that might be a privilege leak if the\n VO and user jobs rely on GID-based file permissions); or to maintain\nthe PPID to the condor_exec process.\n</td></tr></tbody></table></div>\n\n\n<p>and\n\n</p><p></p><div class=\"blockquote\">\n<table width=\"95%\"><tbody><tr><td>\u00a0</td><td>\n  \nDave Dykstra is modifying the glexec_monitor to catch signals and try to\nkill gidd_alloc.  It would be nice if gidd_alloc made itself more\ntrackable to the underlying Condor as well, which I think is where the\nVDT comes in.  I don't know where gidd_alloc comes from or where the\nsource is.\n</td></tr></tbody></table></div>\n\n\n<p>I hope this is enough to go on. Let me and Burt know if you need more information.</p></blockquote>", "remarks": "<blockquote>\n<em>2010-Sep-13 15:15:29 by danb:</em> <br/>\n\nBrian tells me that Dave Dykstra tells him that Alain told him that the procd source comes from V7_1-procd_osg-branch.  This branch is not pushed to the public git repo.  It probably should be.\n\n<p></p><hr/>\n<em>2020-Jul-13 12:48:57 by blin:</em> <br/>\n\nThis doesn't seem relevant anymore. Closing.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2020-Jul-13 12:49", "status": "abandoned", "created": "2010-Jul-15 22:51", "fixed_version": "2010-Jul-15 22:51", "broken_version": "", "priority": "3", "subsystem": "Daemons", "assigned_to": "zmiller", "derived_from": "", "creator": "roy", "rust": "a20766", "customer_group": "osg", "visibility": "public", "notify": "roy@cs.wisc.edu,burt@fnal.gov", "due_date": ""}