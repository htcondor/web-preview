{"id": 4580, "title": "Ticket #4580: Fix pslot startd RANK preemption", "description": "<blockquote>\nThe commits made for <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=3667\" onclick=\"get_ticket_and_populate_wrapper('3667'); return false;\" title=\"Allow partitionable slots to be subject to RANK preeemption\">#3667</a></span> have several shortcomings:\n\n<p></p><ol>\n<li>Failure to include required schedd code patches, thus startd RANK simply cannot work properly on pslots.\n\n<p></p></li><li>The changes in the negotiator only look at aggregation of cpu/memory/disk, and thus fail to consider extra user-defined resources.  This could create very difficult to debug situations for the administrator.\n\n<p></p></li><li>The <a class=\"external\" href=\"https://docs.google.com/document/d/158wH65OrzgNJjZ4_ti_vMQ1PaRnVLPpwfOZNGtdSl8A/edit#\">design document</a> needs to be enhanced to explicitly answer questions like how does the schedd know when all the preemptions of dynamic slots are complete such that a (larger) dynamic slot can now be created.  A sequence of events in the design document would be welcome.\n\n<p></p></li><li>Some new knobs were added in the code, but they are a) not added into the param table, b) not documented in the manual, c) not discussed or mentioned in the design document.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2014-Oct-01 12:46:41 by tim:</em> <br/>\n\nStill need documentation for knobs and inclusion in the param table. Pushing forward to 8.2.4 to complete this work.\n\n<p></p><hr/>\n<em>2015-Jun-10 14:21:47 by tannenba:</em> <br/>\n\nResolving this ticket, as the concerns mentioned above are\ndealt with as part of <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=4942\" onclick=\"get_ticket_and_populate_wrapper('4942'); return false;\" title=\"Improve RANK preeemption for partitionable slots\">#4942</a></span>.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-13 11:18</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c9d6ee777e169dbaf58cefdf00c45430c99c6e45\">[41644]</a></span>: Advertise ATTR_WANT_PSLOT_PREEMPTION in schedd <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span> only if parameter ALLOW_PSLOT_PREEMPTION is true  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Nov-12 14:10</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/45050d17d245709665073b5b561e9cddf25d4e05\">[41642]</a></span>: Add ATTR_WANT_PSLOT_PREEMPTION to sig attributes <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Oct-01 12:56</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/458e6cdef9d19125ac2aff4864a278557d4ec29f\">[41299]</a></span>: Fixes committed in 8.2.3 for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span> will not be announced in the manual, as they are not completed.  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-30 17:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/ffc0afbd7fcbb466a6b7c27c3b064f56a7699fae\">[41289]</a></span>: edit of 8.2.3 version history item <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-24 09:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/0c8618cdbb0d51b59e58234bff442de93c2d3b72\">[41227]</a></span>: Version history for <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span>  (By Greg Thain )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2014-Sep-24 08:49</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/1702251385627639f59ab9178a9d4b4fc8bcca8d\">[41226]</a></span>: Changes to allow startd RANK preemption of partitionable slots <span class=\"ticket\"><a class=\"defer\" href=\"/wiki-archive/tickets/?ticket=4580\" onclick=\"get_ticket_and_populate_wrapper('4580'); return false;\" title=\"Fix pslot startd RANK preemption\">#4580</a></span>  (By Greg Thain )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jun-11 16:29", "status": "defer", "created": "2014-Sep-08 15:21", "fixed_version": "2014-Sep-08 15:21", "broken_version": "v080104", "priority": "5", "subsystem": "Daemons", "assigned_to": "gthain", "derived_from": "#3667", "creator": "tannenba", "rust": "a27266", "customer_group": "ligo", "visibility": "public", "notify": "tannenba@cs.wisc.edu,pcouvare@caltech.edu", "due_date": ""}