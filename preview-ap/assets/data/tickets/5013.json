{"id": 5013, "title": "Ticket #5013: SHARED_PORT_PORT = 0 doesn't work.", "description": "<blockquote>\nThe following configuration doesn't start this-machine's shared port daemon on a randomly-chosen port.  Instead, the schedd dies immediately when trying to send its keepalive to the master, which continuously restarts it.\n\n<p></p><div class=\"verbatim\">\n<pre>COLLECTOR_HOST = some-other-machine\nUSE_SHARED_PORT = TRUE\nSHARED_PORT_PORT = 0\n</pre></div>\n\n\n<p>The problem is that port 0 is interpreted by CreateProcess() as meaning \"no command port\" (port 1 or -1 means choose randomly), and if the port is configured via SHARED_PORT_PORT (or COLLECTOR_PORT), this conversion is not performed.\n\n</p><p>This probably doesn't matter for other daemons; I think their default port number is already 0.</p></blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-04 16:41</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/56411ee9233946f717b8a2f0be042e5785785b83\">[44977]</a></span>: minor edit of 8.3.6 version history item <span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5013\" onclick=\"get_ticket_and_populate_wrapper('5013'); return false;\" title=\"SHARED_PORT_PORT = 0 doesn't work.\">#5013</a></span>  (By Karen Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Jun-03 14:01</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/aff2150391255ade6762516df02771b7e61a4c29\">[44943]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5013\" onclick=\"get_ticket_and_populate_wrapper('5013'); return false;\" title=\"SHARED_PORT_PORT = 0 doesn't work.\">#5013</a></span>) Add version history item.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-May-06 11:13</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/b077a09fe63caf1bc729d1a2670d745e1b4c13b1\">[44795]</a></span>: Squashed commit of the following: commit 138b863503f2a5bda1777cf5f6a352c48d7db3a2 Author: Todd L Miller &lt;tlmiller@cs.wisc.edu&gt; Date: Tue May 5 15:03:24 2015 -0500\u00a0[...]\n (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-22 13:46</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/39e5dc04671909a4703c67284f62a553358cf864\">[44696]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5013\" onclick=\"get_ticket_and_populate_wrapper('5013'); return false;\" title=\"SHARED_PORT_PORT = 0 doesn't work.\">#5013</a></span>) Fix SHARED_PORT_PORT = 0.  (By Todd L Miller )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2015-Apr-22 13:45</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/c46b964c23981f47ad52ea56c73076dfd156f2ee\">[44695]</a></span>: (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=5013\" onclick=\"get_ticket_and_populate_wrapper('5013'); return false;\" title=\"SHARED_PORT_PORT = 0 doesn't work.\">#5013</a></span>) Fix SHARED_PORT_PORT = 0.  (By Todd L Miller )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2015-Jun-03 14:02", "status": "resolved", "created": "2015-Apr-22 13:44", "fixed_version": "2015-Apr-22 13:44", "broken_version": "", "priority": "4", "subsystem": "DaemonSharedP", "assigned_to": "tlmiller", "derived_from": "", "creator": "tlmiller", "rust": "", "customer_group": "other", "visibility": "public", "notify": "tlmiller@cs.wisc.edu", "due_date": ""}