{"id": 7119, "title": "Ticket #7119: condor_qedit reports one too many matching jobs", "description": "<blockquote>\nRaytheon is reporting that condor_qedit reports the wrong number of matching jobs. This is fairly easy to reproduce:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">$ condor_submit myjob.sub\nSubmitting job(s).\n1 job(s) submitted to cluster 1234.\n$ condor_qedit 1234 TestAttribute 'test'\nSet attribute \"TestAttribute\" for 2 matching jobs.\n</pre></div>\n\n\n<p>On further inspection is seems to always report one too many matching jobs.</p></blockquote>", "remarks": "<blockquote>\n<em>2019-Jul-05 12:16:57 by coatsworth:</em> <br/>\n\nThe one extra match that was showing up here was the cluster ad, which was being included in the match count but not visible to users. I've changed this to count cluster ads + jobs separately. If there is more than one job match, then the job count is returned. If there are no job matches but there is a cluster match, the cluster match count is returned. If there are no matches at all, it returns an error.\n\n<p></p><hr/>\n<em>2019-Aug-01 17:11:15 by johnkn:</em> <br/>\n\n<strong>CODE_REVIEW</strong> looks good.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Aug-05 16:48</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/8ccec62bff444e0d9abebf4f9830d404488d1096\">[57597]</a></span>: Added version history (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7119\" onclick=\"get_ticket_and_populate_wrapper('7119'); return false;\" title=\"condor_qedit reports one too many matching jobs\">#7119</a></span>)  (By Mark Coatsworth )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2019-Jul-05 12:15</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/dbe07d4632617a9a19943309e0a3e145af9f9e7a\">[57323]</a></span>: Changed qedit to count jobs and cluster ads separately (<span class=\"ticket\"><a class=\"resolved\" href=\"/wiki-archive/tickets/?ticket=7119\" onclick=\"get_ticket_and_populate_wrapper('7119'); return false;\" title=\"condor_qedit reports one too many matching jobs\">#7119</a></span>)  (By Mark Coatsworth )</td></tr>\n</tbody></table>", "type": "defect", "last_change": "2019-Aug-05 16:49", "status": "resolved", "created": "2019-Jun-20 12:52", "fixed_version": "2019-Jun-20 12:52", "broken_version": "", "priority": "2", "subsystem": "Tools", "assigned_to": "coatsworth", "derived_from": "", "creator": "coatsworth", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}