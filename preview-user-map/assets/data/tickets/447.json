{"id": 447, "title": "Ticket #447: Deal properly w/ unix signal handling when using a thread pool", "description": "<blockquote>\nWhen running the Condor daemons multi-threaded, the code should\n\n<p></p><ol>\n<li>Make certain Unix signals are only delivered to the main (daemon core dispatcher) thread.\n</li><li>Use <code>pthread_sigmask()</code> in place of <code>sigprocmask()</code>, as at least according to Linux documentation <code>sigprocmask()</code> could result in undefined behavior in a multi-threaded program.</li></ol>\n</blockquote>", "remarks": "<blockquote>\n<em>2009-Aug-27 09:14:03 by matt:</em> <br/>\n\n\n<p>Isn't commit <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9c3e81be4aea2caf0bf0ea6a1052d064b8404355\">[15517]</a></span> going to mess with anyone who is linking with\nlibcondorapi.a and using pthread_sigmask themselves? I can imagine\nlinking with \"libcondorapi.a -lpthread\" instead of \"-lpthread\nlibcondorapi.a\" could result in some shockingly hard bugs to track\ndown.\n</p><hr/>\n<em>2010-Aug-23 17:07:50 by adesmet:</em> <br/>\n\nBulk change of target version from v070402 to v070404 using ./ticket_target_mover.\n<hr/>\n<em>2010-Oct-27 16:39:01 by adesmet:</em> <br/>\n\nBulk change of target version from v070404 to v070405 using ./ticket-target-mover.</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n<tbody><tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-26 20:27</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/9c3e81be4aea2caf0bf0ea6a1052d064b8404355\">[15517]</a></span>: Fix problems linking some standard universe jobs in the test suite. The problem in configure.ac was subtle; AC_SEARCH_LIBS always adds -lpthread to the configure LIBS. We don't want that, so we use AC_CHECK_LIB instead because that allows us to override that default behavior. (<span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=447\" onclick=\"get_ticket_and_populate_wrapper('447'); return false;\" title=\"Deal properly w/ unix signal handling when using a thread pool\">#447</a></span>)  (By Todd Tannenbaum )</td></tr>\n<tr><td align=\"right\" valign=\"top\" width=\"160\">2009-Aug-25 18:28</td>\n<td align=\"center\" valign=\"top\" width=\"30\">\n<span class=\"icon dot\">\u00a0</span></td>\n<td align=\"left\" valign=\"top\"> \nCheck-in <span class=\"chng\"><a href=\"https://github.com/htcondor/htcondor/commit/63c25ab228b761117fddc3d112c6b6944e53635e\">[15498]</a></span>: Use pthread_sigmask() instead of sigprocmask() when using pthreads. (<span class=\"ticket\"><a class=\"stalled\" href=\"/wiki-archive/tickets/?ticket=447\" onclick=\"get_ticket_and_populate_wrapper('447'); return false;\" title=\"Deal properly w/ unix signal handling when using a thread pool\">#447</a></span>)  (By Todd Tannenbaum )</td></tr>\n</tbody></table>", "type": "enhance", "last_change": "2012-Oct-16 19:33", "status": "stalled", "created": "2009-May-01 10:50", "fixed_version": "2009-May-01 10:50", "broken_version": "v070301", "priority": "3", "subsystem": "Daemons", "assigned_to": "tannenba", "derived_from": "#17", "creator": "tannenba", "rust": "", "customer_group": "cms", "visibility": "public", "notify": "", "due_date": ""}