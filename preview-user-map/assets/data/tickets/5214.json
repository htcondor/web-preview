{"id": 5214, "title": "Ticket #5214: use policy: desktop overhaul", "description": "<blockquote>\n\"use policy: desktop\" ([$POLICY.DESKTOP] in <a class=\"file\" href=\"rlog?f=src/condor_utils/param_info.in\">/src/condor_utils/param_info.in</a> ) collects the logic that was in our old, largely unconsidered default configuration files. It's a bad policy and should be overhauled.  It currently is:\n\n<p></p><div class=\"code\">\n<pre class=\"code\">WANT_SUSPEND=($(SmallJob) || $(KeyboardNotBusy) || $(IsVanilla) ) &amp;&amp; ( $(SUSPEND))\nWANT_VACATE=$(ActivationTimer) &gt; 600 || $(IsVanilla)\nSUSPEND=($(KeyboardBusy) || ( (CpuBusyTime &gt; 120) &amp;&amp; $(ActivationTimer) &gt; 90))\nCONTINUE=($(CPUIdle) &amp;&amp; ($(ActivityTimer) &gt; 10) &amp;&amp; (KeyboardIdle &gt; $(ContinueIdleTime)))\nPREEMPT=(((Activity == \"Suspended\") &amp;&amp; ($(ActivityTimer) &gt; $(MaxSuspendTime))) || (SUSPEND &amp;&amp; (WANT_SUSPEND == False)))\nSTART=((KeyboardIdle &gt; $(StartIdleTime)) &amp;&amp; ( $(CPUIdle) || (State != \"Unclaimed\" &amp;&amp; State != \"Owner\")) )\nKILL=False\nMaxJobRetirementTime=0\nCLAIM_WORKLIFE=\n</pre></div>\n\n\n<p>Problems (and this is a work in progress):\n\n</p><p></p><ul>\n<li>Why does WANT_SUSPEND also require SUSPEND. SUSPEND is evaluated if WANT_SUSPEND is TRUE; arguably we could move all of the logic into WANT_SUSPEND and just make SUSPEND=TRUE.\n</li><li>We might want to jettison WANT_SUSPEND and just rely on SUSPEND. Or, for simplicity, don't muck about with SUSPEND at all.\n</li><li>May be able to jettison WANT_VACATE and just rely on <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxJobRetirementTime\" title=\"Max Job Retirement Time\">MaxJobRetirementTime</a></span>?\n</li><li>Maybe set KILL to nothing to emphasize that it's not used? (Does it default to false if unset?)\n</li><li>Remove the same thing with different phrasing. For example, replace $(KeyboardNotBusy) with !$(KeyboardBusy) or $(KeyboardBusy) == FALSE or similar\n</li><li>Perhaps should explicitly set <span class=\"wiki\"><a class=\"missing\" href=\"wiki?p=MaxVacateTime\" title=\"Max Vacate Time\">MaxVacateTime</a></span>, which is implicitly part of the vacating policy.</li></ul>\n</blockquote>", "remarks": "<blockquote>\n</blockquote>", "derived_tickets": "", "attachments": "<html><head></head><body></body></html>", "check_ins": "", "type": "enhance", "last_change": "2015-Aug-11 17:23", "status": "new", "created": "2015-Aug-11 15:52", "fixed_version": "2015-Aug-11 15:52", "broken_version": "v080307", "priority": "4", "subsystem": "", "assigned_to": "", "derived_from": "", "creator": "adesmet", "rust": "", "customer_group": "other", "visibility": "public", "notify": "", "due_date": ""}